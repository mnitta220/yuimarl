(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function o(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=o(i);fetch(i.href,r)}})();class A{constructor(l,o,s,i,r,u,h,c,a){this.id_disp=l,this.name=o,this.x=s,this.y=i,this.color=r,this.x1=u,this.y1=h,this.x2=c,this.y2=a}}let T=[new A("YU60","チケットマップ",30,200,"warning",0,0,0,0),new A("YU17","WBS",50,150,"info",0,0,0,0),new A("YU38","更新バリデーション",-250,-50,"light",0,0,0,0)],d=null,b=0,_=0,le=2e3,oe=-2e3,ie=500,se=-500,x=le-oe,L=ie-se,k=0,O=0,w=!1,P=!1,Y=0,X=0,y=0,S=0,D=0,E=0,p=0,g=0;function W(t,l){const o=document.querySelector("#cnvs");if(o){const f=o.offsetWidth,n=o.offsetHeight;console.log(`width:${f} height:${n}`),o.width=f,o.height=n;const e=o.getContext("2d");if(e){e.save(),p=f-16,g=n-16,e.strokeStyle="#7777ff",e.lineWidth=1;let $=(n-16)/2,q=(f-16)/2,U=n-16,I=f-16;e.beginPath(),e.moveTo(0,$-S),e.lineTo(I,$-S),e.moveTo(q-y,0),e.lineTo(q-y,U),e.stroke(),e.font="9pt sans-serif",e.textAlign="left",e.textBaseline="top",e.fillStyle="#7777ff",e.fillText("低工数 ←",4,$+4-S),e.textAlign="right",e.textBaseline="top",e.fillText("→ 高工数",I-4,$+4-S),e.textBaseline="bottom",e.textAlign="left",e.rotate(Math.PI/2),e.fillText("高価値 ←",4,-q-4+y),e.textAlign="right",e.fillText("→ 低価値",U-4,-q-4+y),e.restore();const te="8.5pt sans-serif",C="9.5pt sans-serif";e.save();for(let v of T){switch(e.font=C,e.textBaseline="bottom",e.textAlign="left",v.color){case"info":e.strokeStyle="#b3d3ff",e.fillStyle="#cff4fc";break;case"primary":e.strokeStyle="#9ec5fe",e.fillStyle="#cfe2ff";break;case"warning":e.strokeStyle="#ffe69c",e.fillStyle="#fff3cd";break;case"success":e.strokeStyle="#a3cfbb",e.fillStyle="#d1e7dd";break;case"danger":e.strokeStyle="#f1aeb5",e.fillStyle="#f8d7da";break;case"secondary":e.strokeStyle="#c4c8cb",e.fillStyle="#e2e3e5";break;case"dark":e.strokeStyle="#adb5bd",e.fillStyle="#ced4da";break;default:e.strokeStyle="#cccdce",e.fillStyle="#f2f2f2";break}var s=v.id_disp,i=v.name,r=e.measureText(s).width,u=e.measureText(i).width,h=r+u+10;e.beginPath();var c=f/2+v.x-y,a=n/2-v.y-S;v.x1=c,v.y1=a,v.x2=c+h,v.y2=a+20,e.moveTo(c,a),e.lineTo(c+h,a),e.lineTo(c+h,a+20),e.lineTo(c,a+20),e.closePath(),e.lineWidth=1,e.fill(),e.stroke(),e.font=te,e.fillStyle="#4444ff",e.fillText(s,c+4,a+15),e.font=C,e.fillStyle="black",e.fillText(i,c+6+r,a+16)}e.fillStyle="#f1f1f1",e.fillRect(0,g,p,16),e.fillRect(p,0,16,g),e.fillStyle="#dcdcdc",e.fillRect(p,g,16,16),e.lineJoin="miter",e.fillStyle="#505050",e.beginPath(),e.moveTo(5,n-8),e.lineTo(9,n-4),e.lineTo(9,n-12),e.closePath(),e.fill(),e.beginPath(),e.moveTo(f-26,n-12),e.lineTo(f-26,n-4),e.lineTo(f-22,n-8),e.closePath(),e.fill(),e.fillStyle="#505050",e.beginPath(),e.moveTo(f-8,5),e.lineTo(f-12,9),e.lineTo(f-4,9),e.closePath(),e.fill(),e.beginPath(),e.moveTo(f-12,n-26),e.lineTo(f-8,n-22),e.lineTo(f-4,n-26),e.closePath(),e.fill();{D=f-48;var m=x/2+y-p/2,Z=m+p,B=D*m/x,R=D*Z/x;k=B+16,O=R+16,e.fillStyle=t?"#a8a8a8":"#c1c1c1",e.fillRect(k,n-14,R-B,13)}{E=n-48;var H=L/2+S-g/2,ee=H+g,N=E*H/L,M=E*ee/L;Y=N+16,X=M+16,e.fillStyle=l?"#a8a8a8":"#c1c1c1",e.fillRect(f-14,Y,13,M-N)}e.restore()}}}W(!1,!1);var F;(F=document.querySelector("#cnvs"))==null||F.addEventListener("mousedown",function(t){t.preventDefault();var l=this,o=t.pageX-this.offsetLeft,s=t.pageY-this.offsetTop;console.log(`mousedown: ${t.pageX} ${t.pageY} ${o} ${s}`),Q(o,s,l.offsetWidth,l.offsetHeight)});var J;(J=document.querySelector("#cnvs"))==null||J.addEventListener("touchstart",function(t){t.preventDefault();var l=this,o=t.touches[0].pageX-this.offsetLeft,s=t.touches[0].pageY-this.offsetTop;Q(o,s,l.offsetWidth,l.offsetHeight)});var K;(K=document.querySelector("#cnvs"))==null||K.addEventListener("mousemove",function(t){t.preventDefault();var l=this,o=t.pageX-this.offsetLeft,s=t.pageY-this.offsetTop;console.log(`mousemove: ${t.pageX} ${t.pageY} ${o} ${s}`),V(l,o,s)});var j;(j=document.querySelector("#cnvs"))==null||j.addEventListener("touchmove",function(t){t.preventDefault();var l=this,o=t.touches[0].pageX-this.offsetLeft,s=t.touches[0].pageY-this.offsetTop;V(l,o,s)});var z;(z=document.querySelector("#cnvs"))==null||z.addEventListener("mouseup",function(t){t.preventDefault(),d=null,w=!1,P=!1,this.classList.remove("cursor-pointer")});var G;(G=document.querySelector("#cnvs"))==null||G.addEventListener("touchend",function(t){t.preventDefault(),d=null,w=!1,P=!1,this.classList.remove("cursor-pointer")});function Q(t,l,o,s){if(d=null,l>s-16)t>k&&t<O&&(w=!0,b=t);else if(t>o-16)l>Y&&l<X&&(P=!0,_=l);else{for(let r in T){var i=T[r];if(t>i.x1&&t<i.x2&&l>i.y1&&l<i.y2){d=i,T.splice(Number(r),1),T.push(d);break}}d&&(b=t,_=l)}}function V(t,l,o){var s=!1;if(o>t.offsetHeight-16){if(d=null,P=!1,t.classList.remove("cursor-pointer"),w){var i=l-b;k+=i;var r=k-16,u=r*x/D;if(u<0||u+p>x)return;y=u+p/2-x/2,b=l}W(l>k&&l<O,!1)}else if(l>t.offsetWidth-16){if(d=null,t.classList.remove("cursor-pointer"),w=!1,P){var h=o-_;Y+=h;var c=Y-16,a=c*L/E;if(a<0||a+g>L)return;S=a+g/2-L/2,_=o}W(!1,o>Y&&o<X)}else{w=!1,P=!1;for(let m of T)if(l>m.x1&&l<m.x2&&o>m.y1&&o<m.y2){s=!0;break}if(s?t.classList.add("cursor-pointer"):t.classList.remove("cursor-pointer"),d){var i=l-b,h=o-_;d.x+=i,d.y-=h,b=l,_=o}W(!1,!1)}}
