var $l=Object.defineProperty;var Ll=(o,t,n)=>t in o?$l(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var x=(o,t,n)=>Ll(o,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _s(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ta={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Xr,function(){var n=1e3,s=6e4,l=36e5,h="millisecond",f="second",m="minute",E="hour",L="day",C="week",k="month",H="quarter",F="year",Q="date",tt="Invalid Date",it=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,lt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_t={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(et){var q=["th","st","nd","rd"],j=et%100;return"["+et+(q[(j-20)%10]||q[j]||q[0])+"]"}},St=function(et,q,j){var z=String(et);return!z||z.length>=q?et:""+Array(q+1-z.length).join(j)+et},ot={s:St,z:function(et){var q=-et.utcOffset(),j=Math.abs(q),z=Math.floor(j/60),B=j%60;return(q<=0?"+":"-")+St(z,2,"0")+":"+St(B,2,"0")},m:function et(q,j){if(q.date()<j.date())return-et(j,q);var z=12*(j.year()-q.year())+(j.month()-q.month()),B=q.clone().add(z,k),J=j-B<0,Z=q.clone().add(z+(J?-1:1),k);return+(-(z+(j-B)/(J?B-Z:Z-B))||0)},a:function(et){return et<0?Math.ceil(et)||0:Math.floor(et)},p:function(et){return{M:k,y:F,w:C,d:L,D:Q,h:E,m,s:f,ms:h,Q:H}[et]||String(et||"").toLowerCase().replace(/s$/,"")},u:function(et){return et===void 0}},mt="en",st={};st[mt]=_t;var ft="$isDayjsObject",Lt=function(et){return et instanceof xt||!(!et||!et[ft])},Dt=function et(q,j,z){var B;if(!q)return mt;if(typeof q=="string"){var J=q.toLowerCase();st[J]&&(B=J),j&&(st[J]=j,B=J);var Z=q.split("-");if(!B&&Z.length>1)return et(Z[0])}else{var gt=q.name;st[gt]=q,B=gt}return!z&&B&&(mt=B),B||!z&&mt},ut=function(et,q){if(Lt(et))return et.clone();var j=typeof q=="object"?q:{};return j.date=et,j.args=arguments,new xt(j)},rt=ot;rt.l=Dt,rt.i=Lt,rt.w=function(et,q){return ut(et,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var xt=function(){function et(j){this.$L=Dt(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[ft]=!0}var q=et.prototype;return q.parse=function(j){this.$d=function(z){var B=z.date,J=z.utc;if(B===null)return new Date(NaN);if(rt.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var Z=B.match(it);if(Z){var gt=Z[2]-1||0,Et=(Z[7]||"0").substring(0,3);return J?new Date(Date.UTC(Z[1],gt,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,Et)):new Date(Z[1],gt,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,Et)}}return new Date(B)}(j),this.init()},q.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},q.$utils=function(){return rt},q.isValid=function(){return this.$d.toString()!==tt},q.isSame=function(j,z){var B=ut(j);return this.startOf(z)<=B&&B<=this.endOf(z)},q.isAfter=function(j,z){return ut(j)<this.startOf(z)},q.isBefore=function(j,z){return this.endOf(z)<ut(j)},q.$g=function(j,z,B){return rt.u(j)?this[z]:this.set(B,j)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(j,z){var B=this,J=!!rt.u(z)||z,Z=rt.p(j),gt=function(X,Ht){var Vt=rt.w(B.$u?Date.UTC(B.$y,Ht,X):new Date(B.$y,Ht,X),B);return J?Vt:Vt.endOf(L)},Et=function(X,Ht){return rt.w(B.toDate()[X].apply(B.toDate("s"),(J?[0,0,0,0]:[23,59,59,999]).slice(Ht)),B)},wt=this.$W,Ot=this.$M,Ct=this.$D,jt="set"+(this.$u?"UTC":"");switch(Z){case F:return J?gt(1,0):gt(31,11);case k:return J?gt(1,Ot):gt(0,Ot+1);case C:var Yt=this.$locale().weekStart||0,Wt=(wt<Yt?wt+7:wt)-Yt;return gt(J?Ct-Wt:Ct+(6-Wt),Ot);case L:case Q:return Et(jt+"Hours",0);case E:return Et(jt+"Minutes",1);case m:return Et(jt+"Seconds",2);case f:return Et(jt+"Milliseconds",3);default:return this.clone()}},q.endOf=function(j){return this.startOf(j,!1)},q.$set=function(j,z){var B,J=rt.p(j),Z="set"+(this.$u?"UTC":""),gt=(B={},B[L]=Z+"Date",B[Q]=Z+"Date",B[k]=Z+"Month",B[F]=Z+"FullYear",B[E]=Z+"Hours",B[m]=Z+"Minutes",B[f]=Z+"Seconds",B[h]=Z+"Milliseconds",B)[J],Et=J===L?this.$D+(z-this.$W):z;if(J===k||J===F){var wt=this.clone().set(Q,1);wt.$d[gt](Et),wt.init(),this.$d=wt.set(Q,Math.min(this.$D,wt.daysInMonth())).$d}else gt&&this.$d[gt](Et);return this.init(),this},q.set=function(j,z){return this.clone().$set(j,z)},q.get=function(j){return this[rt.p(j)]()},q.add=function(j,z){var B,J=this;j=Number(j);var Z=rt.p(z),gt=function(Ot){var Ct=ut(J);return rt.w(Ct.date(Ct.date()+Math.round(Ot*j)),J)};if(Z===k)return this.set(k,this.$M+j);if(Z===F)return this.set(F,this.$y+j);if(Z===L)return gt(1);if(Z===C)return gt(7);var Et=(B={},B[m]=s,B[E]=l,B[f]=n,B)[Z]||1,wt=this.$d.getTime()+j*Et;return rt.w(wt,this)},q.subtract=function(j,z){return this.add(-1*j,z)},q.format=function(j){var z=this,B=this.$locale();if(!this.isValid())return B.invalidDate||tt;var J=j||"YYYY-MM-DDTHH:mm:ssZ",Z=rt.z(this),gt=this.$H,Et=this.$m,wt=this.$M,Ot=B.weekdays,Ct=B.months,jt=B.meridiem,Yt=function(Ht,Vt,vt,te){return Ht&&(Ht[Vt]||Ht(z,J))||vt[Vt].slice(0,te)},Wt=function(Ht){return rt.s(gt%12||12,Ht,"0")},X=jt||function(Ht,Vt,vt){var te=Ht<12?"AM":"PM";return vt?te.toLowerCase():te};return J.replace(lt,function(Ht,Vt){return Vt||function(vt){switch(vt){case"YY":return String(z.$y).slice(-2);case"YYYY":return rt.s(z.$y,4,"0");case"M":return wt+1;case"MM":return rt.s(wt+1,2,"0");case"MMM":return Yt(B.monthsShort,wt,Ct,3);case"MMMM":return Yt(Ct,wt);case"D":return z.$D;case"DD":return rt.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return Yt(B.weekdaysMin,z.$W,Ot,2);case"ddd":return Yt(B.weekdaysShort,z.$W,Ot,3);case"dddd":return Ot[z.$W];case"H":return String(gt);case"HH":return rt.s(gt,2,"0");case"h":return Wt(1);case"hh":return Wt(2);case"a":return X(gt,Et,!0);case"A":return X(gt,Et,!1);case"m":return String(Et);case"mm":return rt.s(Et,2,"0");case"s":return String(z.$s);case"ss":return rt.s(z.$s,2,"0");case"SSS":return rt.s(z.$ms,3,"0");case"Z":return Z}return null}(Ht)||Z.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(j,z,B){var J,Z=this,gt=rt.p(z),Et=ut(j),wt=(Et.utcOffset()-this.utcOffset())*s,Ot=this-Et,Ct=function(){return rt.m(Z,Et)};switch(gt){case F:J=Ct()/12;break;case k:J=Ct();break;case H:J=Ct()/3;break;case C:J=(Ot-wt)/6048e5;break;case L:J=(Ot-wt)/864e5;break;case E:J=Ot/l;break;case m:J=Ot/s;break;case f:J=Ot/n;break;default:J=Ot}return B?J:rt.a(J)},q.daysInMonth=function(){return this.endOf(k).$D},q.$locale=function(){return st[this.$L]},q.locale=function(j,z){if(!j)return this.$L;var B=this.clone(),J=Dt(j,z,!0);return J&&(B.$L=J),B},q.clone=function(){return rt.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},et}(),At=xt.prototype;return ut.prototype=At,[["$ms",h],["$s",f],["$m",m],["$H",E],["$W",L],["$M",k],["$y",F],["$D",Q]].forEach(function(et){At[et[1]]=function(q){return this.$g(q,et[0],et[1])}}),ut.extend=function(et,q){return et.$i||(et(q,xt,ut),et.$i=!0),ut},ut.locale=Dt,ut.isDayjs=Lt,ut.unix=function(et){return ut(1e3*et)},ut.en=st[mt],ut.Ls=st,ut.p={},ut})})(ta);var Nl=ta.exports;const kt=_s(Nl),U=16,It=21,Tt=22,Mt=22,Zt=Mt*10,me=1e3*60*60*24,cs='400 10.5pt system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Liberation Sans",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"';class kl{constructor(){x(this,"y1",-1);x(this,"y2",-1)}}class xl{constructor(t){x(this,"id","colhead");x(this,"pos",0);this.frame=t}build(t){const n=document.createElement("div");n.id=this.id,n.className="header",n.style.top="0px",n.style.left=`${this.pos}px`,n.style.width=`${this.frame.calendarLeft}px`,n.style.height=`${this.frame.headerHeight}px`,t.append(n);let s=document.createElement("div");s.className="line",s.style.top=`${this.frame.headerHeight}px`,s.style.left="0px",s.style.width=`${this.frame.calendarLeft}px`,s.style.height="1px",t.append(s);let l=0;for(let h of this.frame.cols){let f=document.createElement("div");f.className="label",f.style.top=`${this.frame.useIteration?It+It:It}px`,f.style.left=`${l}px`,f.style.width=`${h.width}px`,f.textContent=h.name,n.append(f),l+=h.width,s=document.createElement("div"),s.className="line",s.style.top="0px",s.style.left=`${l}px`,s.style.width="1px",s.style.height=`${this.frame.headerHeight}px`,n.append(s)}l+=2,s=document.createElement("div"),s.className="line",s.style.top="0px",s.style.left=`${l}px`,s.style.width="1px",s.style.height=`${this.frame.headerHeight}px`,n.append(s)}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos}px`)}}class Il{constructor(t){x(this,"id","colbody");x(this,"width",0);x(this,"height",0);x(this,"posX",0);x(this,"posY",0);x(this,"clickedId","");x(this,"movingLevel",0);x(this,"upper",null);x(this,"lower",null);x(this,"now",kt());this.frame=t}build(t){const n=document.createElement("canvas");this.height=this.frame.height-this.frame.headerHeight-U,this.frame.ticketsFrameHeight=this.height,n.id=this.id,this.width=this.frame.calendarLeft,n.className="gantt-body",n.style.top=`${this.frame.headerHeight+1}px`,n.style.left=`${this.posX}px`,n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,t.append(n)}handler(){const t=document.querySelector("#ganttframe"),n=document.querySelector(`#${this.id}`),s=this.frame;t&&n&&(n.addEventListener("mousedown",function(l){l.preventDefault(),s.columnBody.mouseDown(l.layerX,l.layerY)}),n.addEventListener("touchstart",function(l){l.preventDefault(),s.columnBody.mouseDown(l.touches[0].pageX-t.offsetLeft-n.offsetLeft,l.touches[0].pageY-t.offsetTop-n.offsetTop)}),n.addEventListener("mousemove",function(l){l.preventDefault(),s.columnBody.mouseMove(l.layerX,l.layerY)}),n.addEventListener("touchmove",function(l){l.preventDefault(),s.columnBody.mouseMove(l.touches[0].pageX-t.offsetLeft-n.offsetLeft,l.touches[0].pageY-t.offsetTop-n.offsetTop)}),n.addEventListener("mouseup",function(l){l.preventDefault(),s.columnBody.mouseUp()}),n.addEventListener("mouseleave",function(l){l.preventDefault(),s.columnBody.mouseLeave()}),n.addEventListener("touchend",function(l){l.preventDefault(),s.columnBody.mouseUp()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetWidth,s=t.offsetHeight;t.width=n,t.height=s;const l=t.getContext("2d");if(l){l.save(),this.now=this.frame.getNow().startOf("day");for(let f of this.frame.lines)this.drawTicket(l,f);this.frame.moving&&this.frame.ganttRow.y1!=-1&&(l.fillStyle="#fffdef",l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,n,Tt),l.fill(),this.frame.movingTicket&&this.drawMovingTicket(l,this.frame.movingTicket,this.frame.ganttRow.y1+this.posY+this.frame.diffY)),l.fillStyle="#82a4c1";let h=0;for(let f of this.frame.cols)h+=f.width,l.fillRect(h,0,1,s),l.fill();h+=2,l.fillRect(h,0,1,s),l.fill(),this.frame.ganttRow.y1!=-1&&(l.fillStyle="#f6f",l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,n,1),l.fill(),l.fillRect(0,this.frame.ganttRow.y2+this.posY+this.frame.diffY,n,1),l.fill(),l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,1,Tt),l.fill()),l.restore()}}}getFrameHeight(t,n){let s=n;for(let l of t)s+=Tt,l.open&&l.children.length>0&&(s=this.getFrameHeight(l.children,s));return s}drawTicket(t,n){var k;if(this.frame.moving&&n.id===((k=this.frame.movingTicket)==null?void 0:k.id))return;t.font=cs,t.textBaseline="bottom";let s=n.y1,l=n.y2;if(this.frame.moving&&this.frame.movingTicket&&this.frame.movingLine!==-1&&this.frame.hoverLine!==-1)if(this.frame.diffY<0)if(n.line===this.frame.hoverLine){let H=this.frame.movingLine-this.frame.hoverLine;-this.frame.diffY-(H-1)*Tt>10&&(s+=Tt,l+=Tt)}else n.line>this.frame.hoverLine&&n.line<this.frame.movingLine&&(s+=Tt,l+=Tt);else if(n.line===this.frame.hoverLine){let H=this.frame.hoverLine-this.frame.movingLine;this.frame.diffY-(H-1)*Tt>10&&(s-=Tt,l-=Tt)}else n.line<this.frame.hoverLine&&n.line>this.frame.movingLine&&(s-=Tt,l-=Tt);const h=s+19;t.fillStyle="#00f",t.fillText(n.id_disp,3,h+this.posY),t.fillStyle="#808080";let f=this.frame.cols[0].width+n.level*12+6;t.fillRect(f,s+7+this.posY,1,8),t.fill(),t.fillRect(f,s+7+this.posY,8,1),t.fill(),t.fillRect(f,s+15+this.posY,8,1),t.fill(),t.fillRect(f+8,s+7+this.posY,1,9),t.fill(),t.fillStyle="#000",n.children.length>0&&(t.fillRect(f+2,s+11+this.posY,5,1),t.fill(),n.open||(t.fillRect(f+4,s+9+this.posY,1,5),t.fill()));let m=this.frame.cols[0].width+this.frame.cols[1].width-(f+14);if(t.measureText(n.name).width<=m)t.fillText(n.name,f+14,h+this.posY);else{let H=n.name;for(;t.measureText(`${H}…`).width>m;)H=H.slice(0,-1);t.fillText(`${H}…`,f+14,h+this.posY)}if(f=this.frame.cols[0].width+this.frame.cols[1].width+3,n.start_date){let H=kt(n.start_date).startOf("day"),F=!1;this.frame.delayRed&&n.progress===0&&H.isBefore(this.now)&&(F=!0),t.fillStyle=F?"#f00":"#000",t.fillText(kt(H).format("YY/MM/DD"),f,h+this.posY)}if(f+=this.frame.cols[2].width,n.end_date){let H=kt(n.end_date).startOf("day"),F=!1;this.frame.delayRed&&n.progress!==100&&H.isBefore(this.now)&&(F=!0),t.fillStyle=F?"#f00":"#000",t.fillText(kt(H).format("YY/MM/DD"),f,h+this.posY)}t.fillStyle="#000",f+=this.frame.cols[3].width+this.frame.cols[4].width-6;const L=`${n.progress}`,C=t.measureText(L).width;t.fillText(L,f-C,h+this.posY),t.fillStyle="#e5ebf2",t.fillRect(0,l+this.posY,this.width,1),t.fill()}drawMovingTicket(t,n,s){t.font=cs,t.textBaseline="bottom";let l=s;const h=l+18;if(t.fillStyle="#00f",t.fillText(n.id_disp,3,h),t.fillStyle="#808080",this.movingLevel=n.level,this.frame.movingLine!==-1&&this.frame.hoverLine!=-1&&this.frame.movingTicket){let k=this.frame.lines[this.frame.hoverLine];if(this.frame.diffY<0){this.upper=k,this.frame.lines.length>this.frame.hoverLine+1?(this.lower=this.frame.lines[this.frame.hoverLine+1],this.lower===this.frame.movingTicket&&(this.frame.lines.length>this.frame.hoverLine+2?this.lower=this.frame.lines[this.frame.hoverLine+2]:this.lower=null)):this.lower=null;let H=this.frame.movingLine-this.frame.hoverLine;-this.frame.diffY-(H-1)*Tt>10&&(this.frame.hoverLine===0?(this.upper=null,this.frame.lines.length>0?(this.lower=this.frame.lines[0],this.lower===this.frame.movingTicket&&(this.frame.lines.length>1?this.lower=this.frame.lines[1]:this.lower=null)):this.lower=null):(this.upper=this.frame.lines[this.frame.hoverLine-1],this.lower=this.frame.lines[this.frame.hoverLine],this.lower===this.frame.movingTicket&&(this.frame.lines.length>this.frame.hoverLine+1?this.lower=this.frame.lines[this.frame.hoverLine+1]:this.lower=null)))}else{this.frame.movingLine===0?(this.upper=null,this.frame.lines.length>0?(this.lower=this.frame.lines[0],this.lower===this.frame.movingTicket&&(this.frame.lines.length>1?this.lower=this.frame.lines[1]:this.lower=null)):this.lower=null):(this.upper=this.frame.lines[this.frame.movingLine-1],this.lower=this.frame.lines[this.frame.movingLine],this.lower===this.frame.movingTicket&&(this.frame.lines.length>this.frame.movingLine+1?this.lower=this.frame.lines[this.frame.movingLine+1]:this.lower=null));let H=this.frame.hoverLine-this.frame.movingLine;this.frame.diffY-(H-1)*Tt>10&&(this.upper=k,this.frame.lines.length>this.frame.hoverLine+1?(this.lower=this.frame.lines[this.frame.hoverLine+1],this.lower===this.frame.movingTicket&&(this.frame.lines.length>this.frame.hoverLine+2?this.lower=this.frame.lines[this.frame.hoverLine+2]:this.lower=null)):this.lower=null)}this.upper?this.upper.children.length>0&&this.upper.open?(this.movingLevel=this.upper.level+1,this.upper.children[this.upper.children.length-1]===this.frame.movingTicket&&this.frame.diffX<-12&&(this.movingLevel=this.frame.movingTicket.level-Math.floor(-this.frame.diffX/12),this.lower?this.movingLevel<this.lower.level&&(this.movingLevel=this.lower.level):this.movingLevel<0&&(this.movingLevel=0))):(this.movingLevel=this.upper.level,this.frame.diffX>12?this.movingLevel++:this.frame.diffX<-12&&(this.lower?(this.movingLevel-=Math.floor(-this.frame.diffX/12),this.movingLevel<this.lower.level&&(this.movingLevel=this.lower.level)):(this.movingLevel=this.frame.movingTicket.level-Math.floor(-this.frame.diffX/12),this.movingLevel<0&&(this.movingLevel=0)))):this.movingLevel=0}let f=this.frame.cols[0].width+this.movingLevel*12+6;t.fillRect(f,l+7,1,8),t.fill(),t.fillRect(f,l+7,8,1),t.fill(),t.fillRect(f,l+15,8,1),t.fill(),t.fillRect(f+8,l+7,1,9),t.fill(),t.fillStyle="#000",n.children.length>0&&(t.fillRect(f+2,l+11,5,1),t.fill(),t.fillRect(f+4,l+9,1,5),t.fill());let m=this.frame.cols[0].width+this.frame.cols[1].width-(f+14);if(t.measureText(n.name).width<=m)t.fillText(n.name,f+14,h);else{let k=n.name;for(;t.measureText(`${k}…`).width>m;)k=k.slice(0,-1);t.fillText(`${k}…`,f+14,h)}f=this.frame.cols[0].width+this.frame.cols[1].width+3,n.start_date&&t.fillText(kt(n.start_date).format("YY/MM/DD"),f,h),f+=this.frame.cols[2].width,n.end_date&&t.fillText(kt(n.end_date).format("YY/MM/DD"),f,h),f+=this.frame.cols[3].width+this.frame.cols[4].width-6;const L=`${n.progress}`,C=t.measureText(L).width;t.fillText(L,f-C,h),t.fillStyle="#e5ebf2"}scrollH(t){this.posX=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.posX}px`)}scrollV(t){this.posY=-t,this.draw()}mouseDown(t,n){try{this.frame.clicked=!0,this.frame.startX=t,this.frame.startY=n,this.frame.movingLine=-1,this.clickedId="";for(let s=0;s<this.frame.lines.length;s++){let l=this.frame.lines[s];if(l.y1+this.posY<=n&&n<=l.y2+this.posY){this.frame.movingLine=s,this.clickTicket(l,t);break}}this.clickedId?fetch(`/api/ticket/${this.clickedId}`,{method:"GET"}).then(s=>s.json()).then(s=>{s.result?this.frame.ticketModal.show(s):window.alert(`エラーが発生しました。: ${s.message}`)}).catch(s=>window.alert(`エラーが発生しました。: ${s.message}`)):this.frame.draw()}catch(s){window.alert(`エラーが発生しました。: ${s}`)}}mouseMove(t,n){var s;if(this.frame.clicked)try{this.frame.moving||(this.frame.resetLines(((s=this.frame.movingTicket)==null?void 0:s.id)??""),this.frame.moving=!0),this.frame.diffX=t-this.frame.startX,this.frame.diffY=n-this.frame.startY,this.frame.hoverLine=-1;for(let l=0;l<this.frame.lines.length;l++){let h=this.frame.lines[l];if(h!=this.frame.movingTicket&&h.y1<this.frame.ganttRow.y2+this.frame.diffY&&h.y2>this.frame.ganttRow.y1+this.frame.diffY){this.frame.hoverLine=l;break}}this.frame.dropPos="",this.frame.draw()}catch(l){window.alert(`エラーが発生しました。: ${l}`)}}mouseUp(){var t,n;if(!this.frame.moving){this.frame.clicked=!1;return}try{const s=`${(t=this.frame.movingTicket)==null?void 0:t.pos}`.split(",");let l=null,h=null,f=null,m=0,E=null,L=-1,C=this.frame.tickets;for(let k=0;k<s.length;k++){let H=s[k],F=Number(H);if(this.frame.showDone)l=C[F];else{let Q=F,tt=0;for(let it=0;it<C.length;it++){let lt=C[it];if(lt.progress<100&&tt++,tt>Q){l=lt,F=it;break}}}if(!l)break;C=l.children,k==s.length-2&&(f=l),k==s.length-1&&(m=F)}if(this.upper){const k=`${this.upper.pos}`.split(",");C=this.frame.tickets;for(let H=0;H<k.length;H++){let F=k[H],Q=Number(F);if(this.frame.showDone)h=C[Q];else{let tt=Q,it=0;for(let lt=0;lt<C.length;lt++){let _t=C[lt];if(_t.progress<100&&it++,it>tt){h=_t,Q=lt;break}}}if(!h)break;if(C=h.children,H===0&&(L=Q),H<this.movingLevel&&(E=h,L=-1,H+1<k.length))if(Q=Number(k[H+1]),this.frame.showDone)L=Q;else{let tt=Q,it=0;for(let lt=0;lt<C.length;lt++)if(C[lt].progress<100&&it++,it>tt){L=lt;break}}}}this.frame.movingTicket&&(f?E?f===E?m>L?(f.children.splice(m,1),E.children.splice(L+1,0,this.frame.movingTicket)):m<L&&(E.children.splice(L+1,0,this.frame.movingTicket),f.children.splice(m,1)):(f.children.splice(m,1),E.open?E.children.splice(L+1,0,this.frame.movingTicket):E.children.push(this.frame.movingTicket)):(f.children.splice(m,1),this.frame.tickets.splice(L+1,0,this.frame.movingTicket)):E?(this.frame.tickets.splice(m,1),E.children.splice(L+1,0,this.frame.movingTicket)):m>L?(this.frame.tickets.splice(m,1),this.frame.tickets.splice(L+1,0,this.frame.movingTicket)):m<L&&(this.frame.tickets.splice(L+1,0,this.frame.movingTicket),this.frame.tickets.splice(m,1)),this.frame.movingTicket.open=!1),this.frame.clicked=!1,this.frame.moving=!1,this.frame.diffY=0,this.frame.resetLines(((n=this.frame.movingTicket)==null?void 0:n.id)??""),this.frame.draw(),this.frame.movingTicket=null}catch(s){window.alert(`エラーが発生しました。: ${s}`)}}mouseLeave(){try{this.frame.clicked=!1,this.frame.moving=!1,this.frame.diffY=0,this.frame.movingTicket=null,this.frame.draw()}catch(t){window.alert(`エラーが発生しました。: ${t}`)}}clickTicket(t,n){if(this.frame.ganttRow.y1=t.y1,this.frame.ganttRow.y2=t.y2,this.frame.movingTicket=t,this.frame.dropPos="",n<this.frame.cols[0].width){this.clickedId=t.id;return}if(n<this.frame.cols[0].width+this.frame.cols[1].width){const s=this.frame.cols[0].width+t.level*12+2;n>s&&n<s+16&&(t.open=!t.open,this.frame.nodeOpenClose(t.id,t.open),this.frame.draw(),this.frame.ticketsTotalHeight<this.frame.ticketsFrameHeight&&this.posY!=0&&(this.posY=0,this.frame.calendarBody.posY=0,this.frame.scv.pos=0,this.frame.draw()))}}}class Pl{constructor(t){x(this,"id","colscr");x(this,"pos",0);this.frame=t}build(t){const n=document.createElement("div");n.id=this.id,n.className="scroll-corner",n.style.top=`${this.frame.height-U}px`,n.style.left=`${this.pos}px`,n.style.width=`${this.frame.calendarLeft}px`,n.style.height=`${U}px`,t.append(n)}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos}px`)}}var ea={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Xr,function(){return function(n,s){s.prototype.isSameOrAfter=function(l,h){return this.isSame(l,h)||this.isAfter(l,h)}}})})(ea);var Rl=ea.exports;const na=_s(Rl);kt.extend(na);class Ml{constructor(t){x(this,"id","calhead");x(this,"width",0);x(this,"pos",0);x(this,"dtpos",0);this.frame=t}build(t){const n=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt),n.id=this.id,n.className="header",n.style.top="0px",n.style.left=`${this.pos+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${this.frame.headerHeight}px`,t.append(n);let s=document.createElement("div");s.className="line",s.style.top=`${this.frame.headerHeight}px`,s.style.left=`${this.pos+this.frame.calendarLeft}px`,s.style.width=`${this.width}px`,s.style.height="1px",t.append(s)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetHeight;t.width=this.width,t.height=n;const s=this.frame.useIteration?It+It:It,l=t.getContext("2d");if(l){l.save(),l.fillStyle="#82a4c1",l.fillRect(0,It,this.width,1),l.fill(),this.frame.useIteration&&(l.fillRect(0,It+It,this.width,1),l.fill());let h=this.frame.calendarStart.clone(),f=0,m=!0;l.font=cs,l.textBaseline="bottom",l.textAlign="left";let E=this.frame.iterationNo,L=-1,C=7;switch(this.frame.iterationUnit){case"w2":C=14;break;case"w3":C=21;break;case"w4":C=28;break}if(this.frame.useIteration&&this.frame.iterationStart){let k=this.frame.iterationStart.diff(h,"day");k<0&&(L=-k%C-1,E+=Math.floor(-k/C))}for(;this.frame.calendarEnd.isSameOrAfter(h);){if(this.frame.useIteration&&this.frame.iterationStart){if(h.isSameOrAfter(this.frame.iterationStart)&&(L++,L>=C&&(L=0,E++)),f<this.dtpos-Mt){f+=Mt,h=h.add(1,"day"),m=!1;continue}if(f>this.width+this.dtpos)break;L===0&&(l.fillStyle="#000",l.fillText(`${E}`,f+3-this.dtpos,It-3),m||(l.fillStyle="#bdcede",l.fillRect(f-this.dtpos,0,1,It),l.fill()))}else{if(f<this.dtpos-Mt){f+=Mt,h=h.add(1,"day"),m=!1;continue}if(f>this.width+this.dtpos)break}if(m?(m=!1,(h.date()==1||h.date()<25)&&(l.fillStyle="#000",l.fillText(`${h.format("YYYY/M")}`,f+3-this.dtpos,this.frame.useIteration?It+It-3:It-3))):h.date()===1&&(l.fillStyle="#000",l.fillText(`${h.format("YYYY/M")}`,f+3-this.dtpos,this.frame.useIteration?It+It-3:It-3),l.fillStyle="#bdcede",l.fillRect(f-this.dtpos,this.frame.useIteration?It:0,1,It),l.fill()),this.frame.holidays.filter(H=>H.isSame(h)).length>0)l.fillStyle="#f00";else switch(h.day()){case 0:l.fillStyle="#f00";break;case 6:l.fillStyle="#00f";break;default:l.fillStyle="#000";break}l.fillText(`${h.date()}`,f+3-this.dtpos,this.frame.headerHeight-3),f+=Mt,h=h.add(1,"day"),l.fillStyle="#bdcede",l.fillRect(f-this.dtpos,s+1,1,It),l.fill()}l.restore()}}}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos+this.frame.calendarLeft}px`)}scroll(t){this.dtpos=Math.floor(t*this.frame.calendarTotalWidth/(this.width-U-U)),this.draw(),this.frame.calendarBody.dtpos=this.dtpos,this.frame.calendarBody.draw()}}kt.extend(na);const He="#57f",Nr="#9bf",kr="#68f",xr="#8af",Ir="#bdf",_n="#f66",Pr="#faa",Rr="#f77",Mr="#f99",jr="#fcc";class jl{constructor(t){x(this,"id","calbody");x(this,"width",0);x(this,"posX",0);x(this,"posY",0);x(this,"dtpos",0);x(this,"nowpos",0);this.frame=t}build(t){const n=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const s=this.frame.height-this.frame.headerHeight-U;n.id=this.id,n.className="gantt-body",n.style.top=`${this.frame.headerHeight+1}px`,n.style.left=`${this.posX+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${s}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetWidth,s=t.offsetHeight;t.width=n,t.height=s;const l=t.getContext("2d");if(l){l.save(),this.nowpos=Math.floor(this.frame.getNow().diff(this.frame.calendarStart)/me*Mt);let h=this.frame.calendarStart.clone(),f=0;for(;this.frame.calendarEnd.isSameOrAfter(h);){if(f<this.dtpos-Mt){f+=Mt,h=h.add(1,"day");continue}if(f>this.width+this.dtpos)break;let m=!1;if(this.frame.holidays.filter(L=>L.isSame(h)).length>0)m=!0;else switch(h.day()){case 0:case 6:m=!0;break}if(m&&(l.fillStyle="#f2fef2",l.fillRect(f+1-this.dtpos,0,Mt-1,s),l.fill()),h=h.add(1,"day"),f+=Mt,f>n+this.dtpos)break;l.fillStyle="#bdcede",l.fillRect(f-this.dtpos,0,1,s),l.fill()}for(let m of this.frame.lines)this.drawTicket(l,m);l.fillStyle="#0b0";for(let m=0;m<s;m+=8)l.fillRect(this.nowpos-this.dtpos,m,2,4),l.fill();this.frame.ganttRow.y1!=-1&&(this.frame.moving&&(l.fillStyle="#fffdef",l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,n,Tt),l.fill(),this.frame.movingTicket&&this.drawMovingTicket(l,this.frame.movingTicket,this.frame.ganttRow.y1+this.posY+this.frame.diffY)),l.fillStyle="#f6f",l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,n,1),l.fill(),l.fillRect(0,this.frame.ganttRow.y2+this.posY+this.frame.diffY,n,1),l.fill()),l.restore()}}}drawTicket(t,n){var h;if(this.frame.moving&&n.id===((h=this.frame.movingTicket)==null?void 0:h.id))return;let s=n.y1,l=n.y2;if(this.frame.moving&&this.frame.movingTicket&&this.frame.movingLine!==-1&&this.frame.hoverLine!==-1)if(this.frame.diffY<0)if(n.line===this.frame.hoverLine){let f=this.frame.movingLine-this.frame.hoverLine;-this.frame.diffY-(f-1)*Tt>10&&(s+=Tt,l+=Tt)}else n.line>this.frame.hoverLine&&n.line<this.frame.movingLine&&(s+=Tt,l+=Tt);else if(n.line===this.frame.hoverLine){let f=this.frame.hoverLine-this.frame.movingLine;this.frame.diffY-(f-1)*Tt>10&&(s-=Tt,l-=Tt)}else n.line<this.frame.hoverLine&&n.line>this.frame.movingLine&&(s-=Tt,l-=Tt);if(n.start_date)if(n.end_date){let f=n.start_date,m=n.end_date;f>m&&([f,m]=[m,f]);let E=Math.floor(kt(f).diff(this.frame.calendarStart)/me);E=E*Mt-this.dtpos;let L=Math.floor(kt(m).diff(this.frame.calendarStart)/me);if(L=(L+1)*Mt-this.dtpos,n.progress===0){const C=this.frame.delayRed&&E<this.nowpos-this.dtpos;t.fillStyle=C?Pr:Nr,t.fillRect(E,s+8+this.posY,L-E,6),t.fill()}else if(n.progress===100)t.fillStyle=He,t.fillRect(E,s+8+this.posY,L-E,6),t.fill();else{const C=Math.floor((L-E)*n.progress/100),k=this.frame.delayRed&&E+C<this.nowpos-this.dtpos;t.fillStyle=k?Pr:Nr,t.fillRect(E,s+8+this.posY,L-E,6),t.fill(),t.fillStyle=k?_n:He,t.fillRect(E,s+8+this.posY,C,6),t.fill()}}else{let f=Math.floor(kt(n.start_date).diff(this.frame.calendarStart)/me);f=f*Mt-this.dtpos;const m=this.frame.delayRed&&f<this.nowpos-this.dtpos&&n.progress===0;t.fillStyle=m?_n:He,t.fillRect(f,s+8+this.posY,12,6),t.fill(),t.fillStyle=m?Rr:kr,f+=12,t.fillRect(f,s+8+this.posY,7,6),t.fill(),t.fillStyle=m?Mr:xr,f+=7,t.fillRect(f,s+8+this.posY,6,6),t.fill(),t.fillStyle=m?jr:Ir,f+=6,t.fillRect(f,s+8+this.posY,5,6),t.fill()}else if(n.end_date){let f=Math.floor(kt(n.end_date).diff(this.frame.calendarStart)/me);f=(f+1)*Mt-this.dtpos;const m=this.frame.delayRed&&f<this.nowpos-this.dtpos&&n.progress!==100;f-=12,t.fillStyle=m?_n:He,t.fillRect(f,s+8+this.posY,12,6),t.fill(),t.fillStyle=m?Rr:kr,f-=7,t.fillRect(f,s+8+this.posY,7,6),t.fill(),t.fillStyle=m?Mr:xr,f-=6,t.fillRect(f,s+8+this.posY,6,6),t.fill(),t.fillStyle=m?jr:Ir,f-=5,t.fillRect(f,s+8+this.posY,5,6),t.fill()}t.fillStyle="#e5ebf2",t.fillRect(0,l+this.posY,this.width,1),t.fill()}drawMovingTicket(t,n,s){let l=s;if(n.start_date)if(n.end_date){let h=n.start_date,f=n.end_date;h>f&&([h,f]=[f,h]);let m=Math.floor(kt(h).diff(this.frame.calendarStart)/me);m=m*Mt-this.dtpos;let E=Math.floor(kt(f).diff(this.frame.calendarStart)/me);if(E=(E+1)*Mt-this.dtpos,n.progress===0){const L=this.frame.delayRed&&m<this.nowpos-this.dtpos;t.fillStyle=L?Pr:Nr,t.fillRect(m,l+8,E-m,6),t.fill()}else if(n.progress===100)t.fillStyle=He,t.fillRect(m,l+8,E-m,6),t.fill();else{const L=Math.floor((E-m)*n.progress/100),C=this.frame.delayRed&&m+L<this.nowpos-this.dtpos;t.fillStyle=C?Pr:Nr,t.fillRect(m,l+8,E-m,6),t.fill(),t.fillStyle=C?_n:He,t.fillRect(m,l+8,L,6),t.fill()}}else{let h=Math.floor(kt(n.start_date).diff(this.frame.calendarStart)/me);const f=this.frame.delayRed&&h<this.nowpos-this.dtpos;h=h*Mt-this.dtpos,t.fillStyle=f?_n:He,t.fillRect(h,l+8,12,6),t.fill(),t.fillStyle=f?Rr:kr,h+=12,t.fillRect(h,l+8,7,6),t.fill(),t.fillStyle=f?Mr:xr,h+=7,t.fillRect(h,l+8,6,6),t.fill(),t.fillStyle=f?jr:Ir,h+=6,t.fillRect(h,l+8,5,6),t.fill()}else if(n.end_date){let h=Math.floor(kt(n.end_date).diff(this.frame.calendarStart)/me);h=(h+1)*Mt-this.dtpos;const f=this.frame.delayRed&&h<this.nowpos-this.dtpos;t.fillStyle=f?_n:He,h-=12,t.fillRect(h,l+8,12,6),t.fill(),t.fillStyle=f?Rr:kr,h-=7,t.fillRect(h,l+8,7,6),t.fill(),t.fillStyle=f?Mr:xr,h-=6,t.fillRect(h,l+8,6,6),t.fill(),t.fillStyle=f?jr:Ir,h-=5,t.fillRect(h,l+8,5,6),t.fill()}t.fillStyle="#e5ebf2"}scrollH(t){this.posX=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.posX+this.frame.calendarLeft}px`)}scrollV(t){this.posY=-t,this.draw()}}class Hl{constructor(t){x(this,"id","calscroll");x(this,"width",0);x(this,"pos",0);x(this,"barWidth",0);x(this,"height",U);x(this,"moving",!1);x(this,"startX",0);x(this,"barpos",0);x(this,"startPos",0);this.frame=t}build(t){this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const n=document.createElement("canvas");n.id=this.id,n.className="scroll-bar",n.style.top=`${this.frame.height-U}px`,n.style.left=`${this.pos+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.scrollH(0),this.barpos=0}handler(){const t=document.querySelector("#ganttframe"),n=document.querySelector(`#${this.id}`),s=this.frame;t&&n&&(n.addEventListener("mousedown",function(l){l.preventDefault(),s.mouseDownCalScroll(l.layerX)}),n.addEventListener("touchstart",function(l){l.preventDefault(),s.mouseDownCalScroll(l.touches[0].pageX-t.offsetLeft-n.offsetLeft)}),n.addEventListener("mousemove",function(l){l.preventDefault(),s.mouseMoveCalScroll(l.layerX)}),n.addEventListener("touchmove",function(l){l.preventDefault(),s.mouseMoveCalScroll(l.touches[0].pageX-t.offsetLeft-n.offsetLeft)}),n.addEventListener("mouseup",function(l){l.preventDefault(),s.mouseUpCalScroll()}),n.addEventListener("mouseleave",function(l){l.preventDefault(),s.mouseUpCalScroll()}),n.addEventListener("touchend",function(l){l.preventDefault(),s.mouseUpCalScroll()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){t.width=this.width,t.height=this.height;const n=t.getContext("2d");n&&(n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(5,8),n.lineTo(9,12),n.lineTo(9,4),n.closePath(),n.fill(),n.beginPath(),n.moveTo(this.width-10,4),n.lineTo(this.width-10,12),n.lineTo(this.width-6,8),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barWidth=(this.width-U-U)*this.width/this.frame.calendarTotalWidth,n.fillRect(U+this.barpos,2,this.barWidth<4?4:this.barWidth,13),n.restore())}}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos+this.frame.calendarLeft}px`)}mouseDownCalScroll(t){if(U+this.barpos<t&&t<U+this.barpos+this.barWidth){this.moving=!0,this.startX=t-U,this.startPos=this.barpos;return}t<U?this.barpos-=U:t<U+this.barpos?this.barpos-=this.barWidth:this.width-U<t?this.barpos+=U:this.barpos+=this.barWidth,this.barpos<0&&(this.barpos=0),this.width-U-U-this.barWidth<this.barpos&&(this.barpos=this.width-U-U-this.barWidth),this.frame.calendarHeader.scroll(this.barpos),this.draw(),this.moving=!1}mouseMoveCalScroll(t){if(!this.moving)return;this.barpos=t-U-this.startX+this.startPos,this.barpos<0&&(this.barpos=0);const n=this.width-this.barWidth-U-U;this.barpos>n&&(this.barpos=n),this.frame.calendarHeader.scroll(this.barpos),this.draw()}mouseUpCalScroll(){this.moving=!1}}class Kl{constructor(t){x(this,"id","scrollh");x(this,"width",0);x(this,"barWidth",0);x(this,"height",U);x(this,"moving",!1);x(this,"startX",0);x(this,"pos",0);x(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),n=this.frame;t&&(t.addEventListener("mousedown",function(s){s.preventDefault(),n.mouseDownScrollH(s.pageX-t.offsetLeft)}),t.addEventListener("touchstart",function(s){s.preventDefault(),n.mouseDownScrollH(s.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mousemove",function(s){s.preventDefault(),n.mouseMoveScrollH(s.pageX-t.offsetLeft)}),t.addEventListener("touchmove",function(s){s.preventDefault(),n.mouseMoveScrollH(s.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mouseup",function(s){s.preventDefault(),n.mouseUpScrollH()}),t.addEventListener("mouseleave",function(s){s.preventDefault(),n.mouseUpScrollH()}),t.addEventListener("touchend",function(s){s.preventDefault(),n.mouseUpScrollH()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){if(this.width=t.offsetWidth,t.width=this.width,t.height=this.height,this.width>this.frame.schThreshold)return;const n=t.getContext("2d");n&&(n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(5,8),n.lineTo(9,12),n.lineTo(9,4),n.closePath(),n.fill(),n.beginPath(),n.moveTo(this.width-10,4),n.lineTo(this.width-10,12),n.lineTo(this.width-6,8),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barWidth=(this.width-U-U)*this.width/this.frame.schThreshold,n.fillRect(U+this.pos,2,this.barWidth<4?4:this.barWidth,13),n.restore())}}mouseDownScrollH(t){if(U+this.pos<t&&t<U+this.pos+this.barWidth){this.moving=!0,this.startX=t-U,this.startPos=this.pos;return}t<U?this.pos-=U:t<U+this.pos?this.pos-=this.barWidth:this.width-U<t?this.pos+=U:this.pos+=this.barWidth,this.pos<0&&(this.pos=0),this.width-U-U-this.barWidth<this.pos&&(this.pos=this.width-U-U-this.barWidth),this.frame.scrollH(this.pos),this.draw(),this.moving=!1}mouseMoveScrollH(t){if(!this.moving)return;this.pos=t-U-this.startX+this.startPos,this.pos<0&&(this.pos=0);const n=this.width-this.barWidth-U-U;this.pos>n&&(this.pos=n),this.frame.scrollH(this.pos),this.draw()}mouseUpScrollH(){this.moving=!1}}class Bl{constructor(t){x(this,"id","scrollv");x(this,"width",U);x(this,"height",0);x(this,"barHeight",0);x(this,"moving",!1);x(this,"visible",!1);x(this,"startY",0);x(this,"pos",0);x(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),n=this.frame;t&&(t.addEventListener("mousedown",function(s){s.preventDefault(),n.mouseDownScrollV(s.pageY-t.offsetTop)}),t.addEventListener("touchstart",function(s){s.preventDefault(),n.mouseDownScrollV(s.touches[0].pageY-t.offsetTop)}),t.addEventListener("mousemove",function(s){s.preventDefault(),n.mouseMoveScrollV(s.pageY-t.offsetTop)}),t.addEventListener("touchmove",function(s){s.preventDefault(),n.mouseMoveScrollV(s.touches[0].pageY-t.offsetTop)}),t.addEventListener("mouseup",function(s){s.preventDefault(),n.mouseUpScrollV()}),t.addEventListener("mouseleave",function(s){s.preventDefault(),n.mouseUpScrollV()}),t.addEventListener("touchend",function(s){s.preventDefault(),n.mouseUpScrollV()}))}draw(){this.visible=!1;const t=document.querySelector(`#${this.id}`);if(t){this.height=t.offsetHeight,t.width=this.width,t.height=this.height;const n=t.getContext("2d");n&&this.frame.ticketsFrameHeight<this.frame.ticketsTotalHeight&&(this.visible=!0,n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(8,5),n.lineTo(4,9),n.lineTo(12,9),n.closePath(),n.fill(),n.beginPath(),n.moveTo(4,this.height-10),n.lineTo(8,this.height-6),n.lineTo(12,this.height-10),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barHeight=(this.height-U-U)*this.frame.ticketsFrameHeight/this.frame.ticketsTotalHeight,n.fillRect(2,U+this.pos,13,this.barHeight<4?4:this.barHeight),n.restore())}}mouseDownScrollV(t){if(!this.visible)return;if(U+this.pos<t&&t<U+this.pos+this.barHeight){this.moving=!0,this.startY=t-U,this.startPos=this.pos;return}t<U?this.pos-=U:t<U+this.pos?this.pos-=this.barHeight:this.height-U<t?this.pos+=U:this.pos+=this.barHeight,this.pos<0&&(this.pos=0);let n=this.pos/(this.height-U-U-this.barHeight);n>1&&(n=1,this.pos=this.height-U-U-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*n),this.draw(),this.moving=!1}mouseMoveScrollV(t){if(!this.visible||!this.moving)return;this.pos=t-U-this.startY+this.startPos,this.pos<0&&(this.pos=0);let n=this.pos/(this.height-U-U-this.barHeight);n>1&&(n=1,this.pos=this.height-U-U-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*n),this.draw()}mouseUpScrollV(){this.moving=!1}}var Gt="top",ne="bottom",re="right",Qt="left",ti="auto",kn=[Gt,ne,re,Qt],sn="start",On="end",ra="clippingParents",bs="viewport",En="popper",ia="reference",us=kn.reduce(function(o,t){return o.concat([t+"-"+sn,t+"-"+On])},[]),ws=[].concat(kn,[ti]).reduce(function(o,t){return o.concat([t,t+"-"+sn,t+"-"+On])},[]),sa="beforeRead",oa="read",aa="afterRead",la="beforeMain",ca="main",ua="afterMain",fa="beforeWrite",ha="write",da="afterWrite",pa=[sa,oa,aa,la,ca,ua,fa,ha,da];function ye(o){return o?(o.nodeName||"").toLowerCase():null}function ie(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var t=o.ownerDocument;return t&&t.defaultView||window}return o}function on(o){var t=ie(o).Element;return o instanceof t||o instanceof Element}function oe(o){var t=ie(o).HTMLElement;return o instanceof t||o instanceof HTMLElement}function Es(o){if(typeof ShadowRoot>"u")return!1;var t=ie(o).ShadowRoot;return o instanceof t||o instanceof ShadowRoot}function Vl(o){var t=o.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},l=t.attributes[n]||{},h=t.elements[n];!oe(h)||!ye(h)||(Object.assign(h.style,s),Object.keys(l).forEach(function(f){var m=l[f];m===!1?h.removeAttribute(f):h.setAttribute(f,m===!0?"":m)}))})}function Yl(o){var t=o.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var l=t.elements[s],h=t.attributes[s]||{},f=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),m=f.reduce(function(E,L){return E[L]="",E},{});!oe(l)||!ye(l)||(Object.assign(l.style,m),Object.keys(h).forEach(function(E){l.removeAttribute(E)}))})}}const Ts={name:"applyStyles",enabled:!0,phase:"write",fn:Vl,effect:Yl,requires:["computeStyles"]};function ve(o){return o.split("-")[0]}var rn=Math.max,Gr=Math.min,Cn=Math.round;function fs(){var o=navigator.userAgentData;return o!=null&&o.brands&&Array.isArray(o.brands)?o.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ma(){return!/^((?!chrome|android).)*safari/i.test(fs())}function Dn(o,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=o.getBoundingClientRect(),l=1,h=1;t&&oe(o)&&(l=o.offsetWidth>0&&Cn(s.width)/o.offsetWidth||1,h=o.offsetHeight>0&&Cn(s.height)/o.offsetHeight||1);var f=on(o)?ie(o):window,m=f.visualViewport,E=!ma()&&n,L=(s.left+(E&&m?m.offsetLeft:0))/l,C=(s.top+(E&&m?m.offsetTop:0))/h,k=s.width/l,H=s.height/h;return{width:k,height:H,top:C,right:L+k,bottom:C+H,left:L,x:L,y:C}}function Ss(o){var t=Dn(o),n=o.offsetWidth,s=o.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:o.offsetLeft,y:o.offsetTop,width:n,height:s}}function va(o,t){var n=t.getRootNode&&t.getRootNode();if(o.contains(t))return!0;if(n&&Es(n)){var s=t;do{if(s&&o.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Oe(o){return ie(o).getComputedStyle(o)}function ql(o){return["table","td","th"].indexOf(ye(o))>=0}function qe(o){return((on(o)?o.ownerDocument:o.document)||window.document).documentElement}function ei(o){return ye(o)==="html"?o:o.assignedSlot||o.parentNode||(Es(o)?o.host:null)||qe(o)}function vo(o){return!oe(o)||Oe(o).position==="fixed"?null:o.offsetParent}function Fl(o){var t=/firefox/i.test(fs()),n=/Trident/i.test(fs());if(n&&oe(o)){var s=Oe(o);if(s.position==="fixed")return null}var l=ei(o);for(Es(l)&&(l=l.host);oe(l)&&["html","body"].indexOf(ye(l))<0;){var h=Oe(l);if(h.transform!=="none"||h.perspective!=="none"||h.contain==="paint"||["transform","perspective"].indexOf(h.willChange)!==-1||t&&h.willChange==="filter"||t&&h.filter&&h.filter!=="none")return l;l=l.parentNode}return null}function Jn(o){for(var t=ie(o),n=vo(o);n&&ql(n)&&Oe(n).position==="static";)n=vo(n);return n&&(ye(n)==="html"||ye(n)==="body"&&Oe(n).position==="static")?t:n||Fl(o)||t}function As(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function Xn(o,t,n){return rn(o,Gr(t,n))}function Wl(o,t,n){var s=Xn(o,t,n);return s>n?n:s}function ga(){return{top:0,right:0,bottom:0,left:0}}function ya(o){return Object.assign({},ga(),o)}function _a(o,t){return t.reduce(function(n,s){return n[s]=o,n},{})}var Ul=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,ya(typeof t!="number"?t:_a(t,kn))};function zl(o){var t,n=o.state,s=o.name,l=o.options,h=n.elements.arrow,f=n.modifiersData.popperOffsets,m=ve(n.placement),E=As(m),L=[Qt,re].indexOf(m)>=0,C=L?"height":"width";if(!(!h||!f)){var k=Ul(l.padding,n),H=Ss(h),F=E==="y"?Gt:Qt,Q=E==="y"?ne:re,tt=n.rects.reference[C]+n.rects.reference[E]-f[E]-n.rects.popper[C],it=f[E]-n.rects.reference[E],lt=Jn(h),_t=lt?E==="y"?lt.clientHeight||0:lt.clientWidth||0:0,St=tt/2-it/2,ot=k[F],mt=_t-H[C]-k[Q],st=_t/2-H[C]/2+St,ft=Xn(ot,st,mt),Lt=E;n.modifiersData[s]=(t={},t[Lt]=ft,t.centerOffset=ft-st,t)}}function Xl(o){var t=o.state,n=o.options,s=n.element,l=s===void 0?"[data-popper-arrow]":s;l!=null&&(typeof l=="string"&&(l=t.elements.popper.querySelector(l),!l)||va(t.elements.popper,l)&&(t.elements.arrow=l))}const ba={name:"arrow",enabled:!0,phase:"main",fn:zl,effect:Xl,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function $n(o){return o.split("-")[1]}var Gl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ql(o,t){var n=o.x,s=o.y,l=t.devicePixelRatio||1;return{x:Cn(n*l)/l||0,y:Cn(s*l)/l||0}}function go(o){var t,n=o.popper,s=o.popperRect,l=o.placement,h=o.variation,f=o.offsets,m=o.position,E=o.gpuAcceleration,L=o.adaptive,C=o.roundOffsets,k=o.isFixed,H=f.x,F=H===void 0?0:H,Q=f.y,tt=Q===void 0?0:Q,it=typeof C=="function"?C({x:F,y:tt}):{x:F,y:tt};F=it.x,tt=it.y;var lt=f.hasOwnProperty("x"),_t=f.hasOwnProperty("y"),St=Qt,ot=Gt,mt=window;if(L){var st=Jn(n),ft="clientHeight",Lt="clientWidth";if(st===ie(n)&&(st=qe(n),Oe(st).position!=="static"&&m==="absolute"&&(ft="scrollHeight",Lt="scrollWidth")),st=st,l===Gt||(l===Qt||l===re)&&h===On){ot=ne;var Dt=k&&st===mt&&mt.visualViewport?mt.visualViewport.height:st[ft];tt-=Dt-s.height,tt*=E?1:-1}if(l===Qt||(l===Gt||l===ne)&&h===On){St=re;var ut=k&&st===mt&&mt.visualViewport?mt.visualViewport.width:st[Lt];F-=ut-s.width,F*=E?1:-1}}var rt=Object.assign({position:m},L&&Gl),xt=C===!0?Ql({x:F,y:tt},ie(n)):{x:F,y:tt};if(F=xt.x,tt=xt.y,E){var At;return Object.assign({},rt,(At={},At[ot]=_t?"0":"",At[St]=lt?"0":"",At.transform=(mt.devicePixelRatio||1)<=1?"translate("+F+"px, "+tt+"px)":"translate3d("+F+"px, "+tt+"px, 0)",At))}return Object.assign({},rt,(t={},t[ot]=_t?tt+"px":"",t[St]=lt?F+"px":"",t.transform="",t))}function Jl(o){var t=o.state,n=o.options,s=n.gpuAcceleration,l=s===void 0?!0:s,h=n.adaptive,f=h===void 0?!0:h,m=n.roundOffsets,E=m===void 0?!0:m,L={placement:ve(t.placement),variation:$n(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:l,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,go(Object.assign({},L,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:E})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,go(Object.assign({},L,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:E})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Os={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Jl,data:{}};var Hr={passive:!0};function Zl(o){var t=o.state,n=o.instance,s=o.options,l=s.scroll,h=l===void 0?!0:l,f=s.resize,m=f===void 0?!0:f,E=ie(t.elements.popper),L=[].concat(t.scrollParents.reference,t.scrollParents.popper);return h&&L.forEach(function(C){C.addEventListener("scroll",n.update,Hr)}),m&&E.addEventListener("resize",n.update,Hr),function(){h&&L.forEach(function(C){C.removeEventListener("scroll",n.update,Hr)}),m&&E.removeEventListener("resize",n.update,Hr)}}const Cs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Zl,data:{}};var tc={left:"right",right:"left",bottom:"top",top:"bottom"};function Wr(o){return o.replace(/left|right|bottom|top/g,function(t){return tc[t]})}var ec={start:"end",end:"start"};function yo(o){return o.replace(/start|end/g,function(t){return ec[t]})}function Ds(o){var t=ie(o),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function $s(o){return Dn(qe(o)).left+Ds(o).scrollLeft}function nc(o,t){var n=ie(o),s=qe(o),l=n.visualViewport,h=s.clientWidth,f=s.clientHeight,m=0,E=0;if(l){h=l.width,f=l.height;var L=ma();(L||!L&&t==="fixed")&&(m=l.offsetLeft,E=l.offsetTop)}return{width:h,height:f,x:m+$s(o),y:E}}function rc(o){var t,n=qe(o),s=Ds(o),l=(t=o.ownerDocument)==null?void 0:t.body,h=rn(n.scrollWidth,n.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),f=rn(n.scrollHeight,n.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),m=-s.scrollLeft+$s(o),E=-s.scrollTop;return Oe(l||n).direction==="rtl"&&(m+=rn(n.clientWidth,l?l.clientWidth:0)-h),{width:h,height:f,x:m,y:E}}function Ls(o){var t=Oe(o),n=t.overflow,s=t.overflowX,l=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+l+s)}function wa(o){return["html","body","#document"].indexOf(ye(o))>=0?o.ownerDocument.body:oe(o)&&Ls(o)?o:wa(ei(o))}function Gn(o,t){var n;t===void 0&&(t=[]);var s=wa(o),l=s===((n=o.ownerDocument)==null?void 0:n.body),h=ie(s),f=l?[h].concat(h.visualViewport||[],Ls(s)?s:[]):s,m=t.concat(f);return l?m:m.concat(Gn(ei(f)))}function hs(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function ic(o,t){var n=Dn(o,!1,t==="fixed");return n.top=n.top+o.clientTop,n.left=n.left+o.clientLeft,n.bottom=n.top+o.clientHeight,n.right=n.left+o.clientWidth,n.width=o.clientWidth,n.height=o.clientHeight,n.x=n.left,n.y=n.top,n}function _o(o,t,n){return t===bs?hs(nc(o,n)):on(t)?ic(t,n):hs(rc(qe(o)))}function sc(o){var t=Gn(ei(o)),n=["absolute","fixed"].indexOf(Oe(o).position)>=0,s=n&&oe(o)?Jn(o):o;return on(s)?t.filter(function(l){return on(l)&&va(l,s)&&ye(l)!=="body"}):[]}function oc(o,t,n,s){var l=t==="clippingParents"?sc(o):[].concat(t),h=[].concat(l,[n]),f=h[0],m=h.reduce(function(E,L){var C=_o(o,L,s);return E.top=rn(C.top,E.top),E.right=Gr(C.right,E.right),E.bottom=Gr(C.bottom,E.bottom),E.left=rn(C.left,E.left),E},_o(o,f,s));return m.width=m.right-m.left,m.height=m.bottom-m.top,m.x=m.left,m.y=m.top,m}function Ea(o){var t=o.reference,n=o.element,s=o.placement,l=s?ve(s):null,h=s?$n(s):null,f=t.x+t.width/2-n.width/2,m=t.y+t.height/2-n.height/2,E;switch(l){case Gt:E={x:f,y:t.y-n.height};break;case ne:E={x:f,y:t.y+t.height};break;case re:E={x:t.x+t.width,y:m};break;case Qt:E={x:t.x-n.width,y:m};break;default:E={x:t.x,y:t.y}}var L=l?As(l):null;if(L!=null){var C=L==="y"?"height":"width";switch(h){case sn:E[L]=E[L]-(t[C]/2-n[C]/2);break;case On:E[L]=E[L]+(t[C]/2-n[C]/2);break}}return E}function Ln(o,t){t===void 0&&(t={});var n=t,s=n.placement,l=s===void 0?o.placement:s,h=n.strategy,f=h===void 0?o.strategy:h,m=n.boundary,E=m===void 0?ra:m,L=n.rootBoundary,C=L===void 0?bs:L,k=n.elementContext,H=k===void 0?En:k,F=n.altBoundary,Q=F===void 0?!1:F,tt=n.padding,it=tt===void 0?0:tt,lt=ya(typeof it!="number"?it:_a(it,kn)),_t=H===En?ia:En,St=o.rects.popper,ot=o.elements[Q?_t:H],mt=oc(on(ot)?ot:ot.contextElement||qe(o.elements.popper),E,C,f),st=Dn(o.elements.reference),ft=Ea({reference:st,element:St,strategy:"absolute",placement:l}),Lt=hs(Object.assign({},St,ft)),Dt=H===En?Lt:st,ut={top:mt.top-Dt.top+lt.top,bottom:Dt.bottom-mt.bottom+lt.bottom,left:mt.left-Dt.left+lt.left,right:Dt.right-mt.right+lt.right},rt=o.modifiersData.offset;if(H===En&&rt){var xt=rt[l];Object.keys(ut).forEach(function(At){var et=[re,ne].indexOf(At)>=0?1:-1,q=[Gt,ne].indexOf(At)>=0?"y":"x";ut[At]+=xt[q]*et})}return ut}function ac(o,t){t===void 0&&(t={});var n=t,s=n.placement,l=n.boundary,h=n.rootBoundary,f=n.padding,m=n.flipVariations,E=n.allowedAutoPlacements,L=E===void 0?ws:E,C=$n(s),k=C?m?us:us.filter(function(Q){return $n(Q)===C}):kn,H=k.filter(function(Q){return L.indexOf(Q)>=0});H.length===0&&(H=k);var F=H.reduce(function(Q,tt){return Q[tt]=Ln(o,{placement:tt,boundary:l,rootBoundary:h,padding:f})[ve(tt)],Q},{});return Object.keys(F).sort(function(Q,tt){return F[Q]-F[tt]})}function lc(o){if(ve(o)===ti)return[];var t=Wr(o);return[yo(o),t,yo(t)]}function cc(o){var t=o.state,n=o.options,s=o.name;if(!t.modifiersData[s]._skip){for(var l=n.mainAxis,h=l===void 0?!0:l,f=n.altAxis,m=f===void 0?!0:f,E=n.fallbackPlacements,L=n.padding,C=n.boundary,k=n.rootBoundary,H=n.altBoundary,F=n.flipVariations,Q=F===void 0?!0:F,tt=n.allowedAutoPlacements,it=t.options.placement,lt=ve(it),_t=lt===it,St=E||(_t||!Q?[Wr(it)]:lc(it)),ot=[it].concat(St).reduce(function(Ot,Ct){return Ot.concat(ve(Ct)===ti?ac(t,{placement:Ct,boundary:C,rootBoundary:k,padding:L,flipVariations:Q,allowedAutoPlacements:tt}):Ct)},[]),mt=t.rects.reference,st=t.rects.popper,ft=new Map,Lt=!0,Dt=ot[0],ut=0;ut<ot.length;ut++){var rt=ot[ut],xt=ve(rt),At=$n(rt)===sn,et=[Gt,ne].indexOf(xt)>=0,q=et?"width":"height",j=Ln(t,{placement:rt,boundary:C,rootBoundary:k,altBoundary:H,padding:L}),z=et?At?re:Qt:At?ne:Gt;mt[q]>st[q]&&(z=Wr(z));var B=Wr(z),J=[];if(h&&J.push(j[xt]<=0),m&&J.push(j[z]<=0,j[B]<=0),J.every(function(Ot){return Ot})){Dt=rt,Lt=!1;break}ft.set(rt,J)}if(Lt)for(var Z=Q?3:1,gt=function(Ct){var jt=ot.find(function(Yt){var Wt=ft.get(Yt);if(Wt)return Wt.slice(0,Ct).every(function(X){return X})});if(jt)return Dt=jt,"break"},Et=Z;Et>0;Et--){var wt=gt(Et);if(wt==="break")break}t.placement!==Dt&&(t.modifiersData[s]._skip=!0,t.placement=Dt,t.reset=!0)}}const Ta={name:"flip",enabled:!0,phase:"main",fn:cc,requiresIfExists:["offset"],data:{_skip:!1}};function bo(o,t,n){return n===void 0&&(n={x:0,y:0}),{top:o.top-t.height-n.y,right:o.right-t.width+n.x,bottom:o.bottom-t.height+n.y,left:o.left-t.width-n.x}}function wo(o){return[Gt,re,ne,Qt].some(function(t){return o[t]>=0})}function uc(o){var t=o.state,n=o.name,s=t.rects.reference,l=t.rects.popper,h=t.modifiersData.preventOverflow,f=Ln(t,{elementContext:"reference"}),m=Ln(t,{altBoundary:!0}),E=bo(f,s),L=bo(m,l,h),C=wo(E),k=wo(L);t.modifiersData[n]={referenceClippingOffsets:E,popperEscapeOffsets:L,isReferenceHidden:C,hasPopperEscaped:k},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":C,"data-popper-escaped":k})}const Sa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:uc};function fc(o,t,n){var s=ve(o),l=[Qt,Gt].indexOf(s)>=0?-1:1,h=typeof n=="function"?n(Object.assign({},t,{placement:o})):n,f=h[0],m=h[1];return f=f||0,m=(m||0)*l,[Qt,re].indexOf(s)>=0?{x:m,y:f}:{x:f,y:m}}function hc(o){var t=o.state,n=o.options,s=o.name,l=n.offset,h=l===void 0?[0,0]:l,f=ws.reduce(function(C,k){return C[k]=fc(k,t.rects,h),C},{}),m=f[t.placement],E=m.x,L=m.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=E,t.modifiersData.popperOffsets.y+=L),t.modifiersData[s]=f}const Aa={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:hc};function dc(o){var t=o.state,n=o.name;t.modifiersData[n]=Ea({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Ns={name:"popperOffsets",enabled:!0,phase:"read",fn:dc,data:{}};function pc(o){return o==="x"?"y":"x"}function mc(o){var t=o.state,n=o.options,s=o.name,l=n.mainAxis,h=l===void 0?!0:l,f=n.altAxis,m=f===void 0?!1:f,E=n.boundary,L=n.rootBoundary,C=n.altBoundary,k=n.padding,H=n.tether,F=H===void 0?!0:H,Q=n.tetherOffset,tt=Q===void 0?0:Q,it=Ln(t,{boundary:E,rootBoundary:L,padding:k,altBoundary:C}),lt=ve(t.placement),_t=$n(t.placement),St=!_t,ot=As(lt),mt=pc(ot),st=t.modifiersData.popperOffsets,ft=t.rects.reference,Lt=t.rects.popper,Dt=typeof tt=="function"?tt(Object.assign({},t.rects,{placement:t.placement})):tt,ut=typeof Dt=="number"?{mainAxis:Dt,altAxis:Dt}:Object.assign({mainAxis:0,altAxis:0},Dt),rt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,xt={x:0,y:0};if(st){if(h){var At,et=ot==="y"?Gt:Qt,q=ot==="y"?ne:re,j=ot==="y"?"height":"width",z=st[ot],B=z+it[et],J=z-it[q],Z=F?-Lt[j]/2:0,gt=_t===sn?ft[j]:Lt[j],Et=_t===sn?-Lt[j]:-ft[j],wt=t.elements.arrow,Ot=F&&wt?Ss(wt):{width:0,height:0},Ct=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ga(),jt=Ct[et],Yt=Ct[q],Wt=Xn(0,ft[j],Ot[j]),X=St?ft[j]/2-Z-Wt-jt-ut.mainAxis:gt-Wt-jt-ut.mainAxis,Ht=St?-ft[j]/2+Z+Wt+Yt+ut.mainAxis:Et+Wt+Yt+ut.mainAxis,Vt=t.elements.arrow&&Jn(t.elements.arrow),vt=Vt?ot==="y"?Vt.clientTop||0:Vt.clientLeft||0:0,te=(At=rt==null?void 0:rt[ot])!=null?At:0,li=z+X-te-vt,_e=z+Ht-te,rr=Xn(F?Gr(B,li):B,z,F?rn(J,_e):J);st[ot]=rr,xt[ot]=rr-z}if(m){var ir,ci=ot==="x"?Gt:Qt,ui=ot==="x"?ne:re,ue=st[mt],Ut=mt==="y"?"height":"width",Rn=ue+it[ci],De=ue-it[ui],un=[Gt,Qt].indexOf(lt)!==-1,$e=(ir=rt==null?void 0:rt[mt])!=null?ir:0,Le=un?Rn:ue-ft[Ut]-Lt[Ut]-$e+ut.altAxis,fn=un?ue+ft[Ut]+Lt[Ut]-$e-ut.altAxis:De,Ne=F&&un?Wl(Le,ue,fn):Xn(F?Le:Rn,ue,F?fn:De);st[mt]=Ne,xt[mt]=Ne-ue}t.modifiersData[s]=xt}}const Oa={name:"preventOverflow",enabled:!0,phase:"main",fn:mc,requiresIfExists:["offset"]};function vc(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}function gc(o){return o===ie(o)||!oe(o)?Ds(o):vc(o)}function yc(o){var t=o.getBoundingClientRect(),n=Cn(t.width)/o.offsetWidth||1,s=Cn(t.height)/o.offsetHeight||1;return n!==1||s!==1}function _c(o,t,n){n===void 0&&(n=!1);var s=oe(t),l=oe(t)&&yc(t),h=qe(t),f=Dn(o,l,n),m={scrollLeft:0,scrollTop:0},E={x:0,y:0};return(s||!s&&!n)&&((ye(t)!=="body"||Ls(h))&&(m=gc(t)),oe(t)?(E=Dn(t,!0),E.x+=t.clientLeft,E.y+=t.clientTop):h&&(E.x=$s(h))),{x:f.left+m.scrollLeft-E.x,y:f.top+m.scrollTop-E.y,width:f.width,height:f.height}}function bc(o){var t=new Map,n=new Set,s=[];o.forEach(function(h){t.set(h.name,h)});function l(h){n.add(h.name);var f=[].concat(h.requires||[],h.requiresIfExists||[]);f.forEach(function(m){if(!n.has(m)){var E=t.get(m);E&&l(E)}}),s.push(h)}return o.forEach(function(h){n.has(h.name)||l(h)}),s}function wc(o){var t=bc(o);return pa.reduce(function(n,s){return n.concat(t.filter(function(l){return l.phase===s}))},[])}function Ec(o){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(o())})})),t}}function Tc(o){var t=o.reduce(function(n,s){var l=n[s.name];return n[s.name]=l?Object.assign({},l,s,{options:Object.assign({},l.options,s.options),data:Object.assign({},l.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var Eo={placement:"bottom",modifiers:[],strategy:"absolute"};function To(){for(var o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function ni(o){o===void 0&&(o={});var t=o,n=t.defaultModifiers,s=n===void 0?[]:n,l=t.defaultOptions,h=l===void 0?Eo:l;return function(m,E,L){L===void 0&&(L=h);var C={placement:"bottom",orderedModifiers:[],options:Object.assign({},Eo,h),modifiersData:{},elements:{reference:m,popper:E},attributes:{},styles:{}},k=[],H=!1,F={state:C,setOptions:function(lt){var _t=typeof lt=="function"?lt(C.options):lt;tt(),C.options=Object.assign({},h,C.options,_t),C.scrollParents={reference:on(m)?Gn(m):m.contextElement?Gn(m.contextElement):[],popper:Gn(E)};var St=wc(Tc([].concat(s,C.options.modifiers)));return C.orderedModifiers=St.filter(function(ot){return ot.enabled}),Q(),F.update()},forceUpdate:function(){if(!H){var lt=C.elements,_t=lt.reference,St=lt.popper;if(To(_t,St)){C.rects={reference:_c(_t,Jn(St),C.options.strategy==="fixed"),popper:Ss(St)},C.reset=!1,C.placement=C.options.placement,C.orderedModifiers.forEach(function(ut){return C.modifiersData[ut.name]=Object.assign({},ut.data)});for(var ot=0;ot<C.orderedModifiers.length;ot++){if(C.reset===!0){C.reset=!1,ot=-1;continue}var mt=C.orderedModifiers[ot],st=mt.fn,ft=mt.options,Lt=ft===void 0?{}:ft,Dt=mt.name;typeof st=="function"&&(C=st({state:C,options:Lt,name:Dt,instance:F})||C)}}}},update:Ec(function(){return new Promise(function(it){F.forceUpdate(),it(C)})}),destroy:function(){tt(),H=!0}};if(!To(m,E))return F;F.setOptions(L).then(function(it){!H&&L.onFirstUpdate&&L.onFirstUpdate(it)});function Q(){C.orderedModifiers.forEach(function(it){var lt=it.name,_t=it.options,St=_t===void 0?{}:_t,ot=it.effect;if(typeof ot=="function"){var mt=ot({state:C,name:lt,instance:F,options:St}),st=function(){};k.push(mt||st)}})}function tt(){k.forEach(function(it){return it()}),k=[]}return F}}var Sc=ni(),Ac=[Cs,Ns,Os,Ts],Oc=ni({defaultModifiers:Ac}),Cc=[Cs,Ns,Os,Ts,Aa,Ta,Oa,ba,Sa],ks=ni({defaultModifiers:Cc});const Ca=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ua,afterRead:aa,afterWrite:da,applyStyles:Ts,arrow:ba,auto:ti,basePlacements:kn,beforeMain:la,beforeRead:sa,beforeWrite:fa,bottom:ne,clippingParents:ra,computeStyles:Os,createPopper:ks,createPopperBase:Sc,createPopperLite:Oc,detectOverflow:Ln,end:On,eventListeners:Cs,flip:Ta,hide:Sa,left:Qt,main:ca,modifierPhases:pa,offset:Aa,placements:ws,popper:En,popperGenerator:ni,popperOffsets:Ns,preventOverflow:Oa,read:oa,reference:ia,right:re,start:sn,top:Gt,variationPlacements:us,viewport:bs,write:ha},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ke=new Map,Fi={set(o,t,n){Ke.has(o)||Ke.set(o,new Map);const s=Ke.get(o);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,n)},get(o,t){return Ke.has(o)&&Ke.get(o).get(t)||null},remove(o,t){if(!Ke.has(o))return;const n=Ke.get(o);n.delete(t),n.size===0&&Ke.delete(o)}},Dc=1e6,$c=1e3,ds="transitionend",Da=o=>(o&&window.CSS&&window.CSS.escape&&(o=o.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),o),Lc=o=>o==null?`${o}`:Object.prototype.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase(),Nc=o=>{do o+=Math.floor(Math.random()*Dc);while(document.getElementById(o));return o},kc=o=>{if(!o)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(o);const s=Number.parseFloat(t),l=Number.parseFloat(n);return!s&&!l?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*$c)},$a=o=>{o.dispatchEvent(new Event(ds))},Se=o=>!o||typeof o!="object"?!1:(typeof o.jquery<"u"&&(o=o[0]),typeof o.nodeType<"u"),Be=o=>Se(o)?o.jquery?o[0]:o:typeof o=="string"&&o.length>0?document.querySelector(Da(o)):null,xn=o=>{if(!Se(o)||o.getClientRects().length===0)return!1;const t=getComputedStyle(o).getPropertyValue("visibility")==="visible",n=o.closest("details:not([open])");if(!n)return t;if(n!==o){const s=o.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return t},Ve=o=>!o||o.nodeType!==Node.ELEMENT_NODE||o.classList.contains("disabled")?!0:typeof o.disabled<"u"?o.disabled:o.hasAttribute("disabled")&&o.getAttribute("disabled")!=="false",La=o=>{if(!document.documentElement.attachShadow)return null;if(typeof o.getRootNode=="function"){const t=o.getRootNode();return t instanceof ShadowRoot?t:null}return o instanceof ShadowRoot?o:o.parentNode?La(o.parentNode):null},Qr=()=>{},Zn=o=>{o.offsetHeight},Na=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Wi=[],xc=o=>{document.readyState==="loading"?(Wi.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Wi)t()}),Wi.push(o)):o()},ae=()=>document.documentElement.dir==="rtl",ce=o=>{xc(()=>{const t=Na();if(t){const n=o.NAME,s=t.fn[n];t.fn[n]=o.jQueryInterface,t.fn[n].Constructor=o,t.fn[n].noConflict=()=>(t.fn[n]=s,o.jQueryInterface)}})},Jt=(o,t=[],n=o)=>typeof o=="function"?o(...t):n,ka=(o,t,n=!0)=>{if(!n){Jt(o);return}const l=kc(t)+5;let h=!1;const f=({target:m})=>{m===t&&(h=!0,t.removeEventListener(ds,f),Jt(o))};t.addEventListener(ds,f),setTimeout(()=>{h||$a(t)},l)},xs=(o,t,n,s)=>{const l=o.length;let h=o.indexOf(t);return h===-1?!n&&s?o[l-1]:o[0]:(h+=n?1:-1,s&&(h=(h+l)%l),o[Math.max(0,Math.min(h,l-1))])},Ic=/[^.]*(?=\..*)\.|.*/,Pc=/\..*/,Rc=/::\d+$/,Ui={};let So=1;const xa={mouseenter:"mouseover",mouseleave:"mouseout"},Mc=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ia(o,t){return t&&`${t}::${So++}`||o.uidEvent||So++}function Pa(o){const t=Ia(o);return o.uidEvent=t,Ui[t]=Ui[t]||{},Ui[t]}function jc(o,t){return function n(s){return Is(s,{delegateTarget:o}),n.oneOff&&I.off(o,s.type,t),t.apply(o,[s])}}function Hc(o,t,n){return function s(l){const h=o.querySelectorAll(t);for(let{target:f}=l;f&&f!==this;f=f.parentNode)for(const m of h)if(m===f)return Is(l,{delegateTarget:f}),s.oneOff&&I.off(o,l.type,t,n),n.apply(f,[l])}}function Ra(o,t,n=null){return Object.values(o).find(s=>s.callable===t&&s.delegationSelector===n)}function Ma(o,t,n){const s=typeof t=="string",l=s?n:t||n;let h=ja(o);return Mc.has(h)||(h=o),[s,l,h]}function Ao(o,t,n,s,l){if(typeof t!="string"||!o)return;let[h,f,m]=Ma(t,n,s);t in xa&&(f=(Q=>function(tt){if(!tt.relatedTarget||tt.relatedTarget!==tt.delegateTarget&&!tt.delegateTarget.contains(tt.relatedTarget))return Q.call(this,tt)})(f));const E=Pa(o),L=E[m]||(E[m]={}),C=Ra(L,f,h?n:null);if(C){C.oneOff=C.oneOff&&l;return}const k=Ia(f,t.replace(Ic,"")),H=h?Hc(o,n,f):jc(o,f);H.delegationSelector=h?n:null,H.callable=f,H.oneOff=l,H.uidEvent=k,L[k]=H,o.addEventListener(m,H,h)}function ps(o,t,n,s,l){const h=Ra(t[n],s,l);h&&(o.removeEventListener(n,h,!!l),delete t[n][h.uidEvent])}function Kc(o,t,n,s){const l=t[n]||{};for(const[h,f]of Object.entries(l))h.includes(s)&&ps(o,t,n,f.callable,f.delegationSelector)}function ja(o){return o=o.replace(Pc,""),xa[o]||o}const I={on(o,t,n,s){Ao(o,t,n,s,!1)},one(o,t,n,s){Ao(o,t,n,s,!0)},off(o,t,n,s){if(typeof t!="string"||!o)return;const[l,h,f]=Ma(t,n,s),m=f!==t,E=Pa(o),L=E[f]||{},C=t.startsWith(".");if(typeof h<"u"){if(!Object.keys(L).length)return;ps(o,E,f,h,l?n:null);return}if(C)for(const k of Object.keys(E))Kc(o,E,k,t.slice(1));for(const[k,H]of Object.entries(L)){const F=k.replace(Rc,"");(!m||t.includes(F))&&ps(o,E,f,H.callable,H.delegationSelector)}},trigger(o,t,n){if(typeof t!="string"||!o)return null;const s=Na(),l=ja(t),h=t!==l;let f=null,m=!0,E=!0,L=!1;h&&s&&(f=s.Event(t,n),s(o).trigger(f),m=!f.isPropagationStopped(),E=!f.isImmediatePropagationStopped(),L=f.isDefaultPrevented());const C=Is(new Event(t,{bubbles:m,cancelable:!0}),n);return L&&C.preventDefault(),E&&o.dispatchEvent(C),C.defaultPrevented&&f&&f.preventDefault(),C}};function Is(o,t={}){for(const[n,s]of Object.entries(t))try{o[n]=s}catch{Object.defineProperty(o,n,{configurable:!0,get(){return s}})}return o}function Oo(o){if(o==="true")return!0;if(o==="false")return!1;if(o===Number(o).toString())return Number(o);if(o===""||o==="null")return null;if(typeof o!="string")return o;try{return JSON.parse(decodeURIComponent(o))}catch{return o}}function zi(o){return o.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Ae={setDataAttribute(o,t,n){o.setAttribute(`data-bs-${zi(t)}`,n)},removeDataAttribute(o,t){o.removeAttribute(`data-bs-${zi(t)}`)},getDataAttributes(o){if(!o)return{};const t={},n=Object.keys(o.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let l=s.replace(/^bs/,"");l=l.charAt(0).toLowerCase()+l.slice(1,l.length),t[l]=Oo(o.dataset[s])}return t},getDataAttribute(o,t){return Oo(o.getAttribute(`data-bs-${zi(t)}`))}};class tr{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const s=Se(n)?Ae.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...Se(n)?Ae.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[s,l]of Object.entries(n)){const h=t[s],f=Se(h)?"element":Lc(h);if(!new RegExp(l).test(f))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${f}" but expected type "${l}".`)}}}const Bc="5.3.3";class he extends tr{constructor(t,n){super(),t=Be(t),t&&(this._element=t,this._config=this._getConfig(n),Fi.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Fi.remove(this._element,this.constructor.DATA_KEY),I.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,s=!0){ka(t,n,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Fi.get(Be(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return Bc}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Xi=o=>{let t=o.getAttribute("data-bs-target");if(!t||t==="#"){let n=o.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>Da(n)).join(","):null},nt={find(o,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,o))},findOne(o,t=document.documentElement){return Element.prototype.querySelector.call(t,o)},children(o,t){return[].concat(...o.children).filter(n=>n.matches(t))},parents(o,t){const n=[];let s=o.parentNode.closest(t);for(;s;)n.push(s),s=s.parentNode.closest(t);return n},prev(o,t){let n=o.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(o,t){let n=o.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(o){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,o).filter(n=>!Ve(n)&&xn(n))},getSelectorFromElement(o){const t=Xi(o);return t&&nt.findOne(t)?t:null},getElementFromSelector(o){const t=Xi(o);return t?nt.findOne(t):null},getMultipleElementsFromSelector(o){const t=Xi(o);return t?nt.find(t):[]}},ri=(o,t="hide")=>{const n=`click.dismiss${o.EVENT_KEY}`,s=o.NAME;I.on(document,n,`[data-bs-dismiss="${s}"]`,function(l){if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),Ve(this))return;const h=nt.getElementFromSelector(this)||this.closest(`.${s}`);o.getOrCreateInstance(h)[t]()})},Vc="alert",Yc="bs.alert",Ha=`.${Yc}`,qc=`close${Ha}`,Fc=`closed${Ha}`,Wc="fade",Uc="show";class ii extends he{static get NAME(){return Vc}close(){if(I.trigger(this._element,qc).defaultPrevented)return;this._element.classList.remove(Uc);const n=this._element.classList.contains(Wc);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),I.trigger(this._element,Fc),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=ii.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}ri(ii,"close");ce(ii);const zc="button",Xc="bs.button",Gc=`.${Xc}`,Qc=".data-api",Jc="active",Co='[data-bs-toggle="button"]',Zc=`click${Gc}${Qc}`;class si extends he{static get NAME(){return zc}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Jc))}static jQueryInterface(t){return this.each(function(){const n=si.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}I.on(document,Zc,Co,o=>{o.preventDefault();const t=o.target.closest(Co);si.getOrCreateInstance(t).toggle()});ce(si);const tu="swipe",In=".bs.swipe",eu=`touchstart${In}`,nu=`touchmove${In}`,ru=`touchend${In}`,iu=`pointerdown${In}`,su=`pointerup${In}`,ou="touch",au="pen",lu="pointer-event",cu=40,uu={endCallback:null,leftCallback:null,rightCallback:null},fu={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Jr extends tr{constructor(t,n){super(),this._element=t,!(!t||!Jr.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return uu}static get DefaultType(){return fu}static get NAME(){return tu}dispose(){I.off(this._element,In)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Jt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=cu)return;const n=t/this._deltaX;this._deltaX=0,n&&Jt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(I.on(this._element,iu,t=>this._start(t)),I.on(this._element,su,t=>this._end(t)),this._element.classList.add(lu)):(I.on(this._element,eu,t=>this._start(t)),I.on(this._element,nu,t=>this._move(t)),I.on(this._element,ru,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===au||t.pointerType===ou)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const hu="carousel",du="bs.carousel",Fe=`.${du}`,Ka=".data-api",pu="ArrowLeft",mu="ArrowRight",vu=500,Un="next",bn="prev",Tn="left",Ur="right",gu=`slide${Fe}`,Gi=`slid${Fe}`,yu=`keydown${Fe}`,_u=`mouseenter${Fe}`,bu=`mouseleave${Fe}`,wu=`dragstart${Fe}`,Eu=`load${Fe}${Ka}`,Tu=`click${Fe}${Ka}`,Ba="carousel",Kr="active",Su="slide",Au="carousel-item-end",Ou="carousel-item-start",Cu="carousel-item-next",Du="carousel-item-prev",Va=".active",Ya=".carousel-item",$u=Va+Ya,Lu=".carousel-item img",Nu=".carousel-indicators",ku="[data-bs-slide], [data-bs-slide-to]",xu='[data-bs-ride="carousel"]',Iu={[pu]:Ur,[mu]:Tn},Pu={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ru={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class er extends he{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=nt.findOne(Nu,this._element),this._addEventListeners(),this._config.ride===Ba&&this.cycle()}static get Default(){return Pu}static get DefaultType(){return Ru}static get NAME(){return hu}next(){this._slide(Un)}nextWhenVisible(){!document.hidden&&xn(this._element)&&this.next()}prev(){this._slide(bn)}pause(){this._isSliding&&$a(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){I.one(this._element,Gi,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){I.one(this._element,Gi,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const l=t>s?Un:bn;this._slide(l,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&I.on(this._element,yu,t=>this._keydown(t)),this._config.pause==="hover"&&(I.on(this._element,_u,()=>this.pause()),I.on(this._element,bu,()=>this._maybeEnableCycle())),this._config.touch&&Jr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of nt.find(Lu,this._element))I.on(s,wu,l=>l.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(Tn)),rightCallback:()=>this._slide(this._directionToOrder(Ur)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),vu+this._config.interval))}};this._swipeHelper=new Jr(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=Iu[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=nt.findOne(Va,this._indicatorsElement);n.classList.remove(Kr),n.removeAttribute("aria-current");const s=nt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(Kr),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const s=this._getActive(),l=t===Un,h=n||xs(this._getItems(),s,l,this._config.wrap);if(h===s)return;const f=this._getItemIndex(h),m=F=>I.trigger(this._element,F,{relatedTarget:h,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:f});if(m(gu).defaultPrevented||!s||!h)return;const L=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(f),this._activeElement=h;const C=l?Ou:Au,k=l?Cu:Du;h.classList.add(k),Zn(h),s.classList.add(C),h.classList.add(C);const H=()=>{h.classList.remove(C,k),h.classList.add(Kr),s.classList.remove(Kr,k,C),this._isSliding=!1,m(Gi)};this._queueCallback(H,s,this._isAnimated()),L&&this.cycle()}_isAnimated(){return this._element.classList.contains(Su)}_getActive(){return nt.findOne($u,this._element)}_getItems(){return nt.find(Ya,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ae()?t===Tn?bn:Un:t===Tn?Un:bn}_orderToDirection(t){return ae()?t===bn?Tn:Ur:t===bn?Ur:Tn}static jQueryInterface(t){return this.each(function(){const n=er.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}I.on(document,Tu,ku,function(o){const t=nt.getElementFromSelector(this);if(!t||!t.classList.contains(Ba))return;o.preventDefault();const n=er.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(Ae.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});I.on(window,Eu,()=>{const o=nt.find(xu);for(const t of o)er.getOrCreateInstance(t)});ce(er);const Mu="collapse",ju="bs.collapse",nr=`.${ju}`,Hu=".data-api",Ku=`show${nr}`,Bu=`shown${nr}`,Vu=`hide${nr}`,Yu=`hidden${nr}`,qu=`click${nr}${Hu}`,Qi="show",An="collapse",Br="collapsing",Fu="collapsed",Wu=`:scope .${An} .${An}`,Uu="collapse-horizontal",zu="width",Xu="height",Gu=".collapse.show, .collapse.collapsing",ms='[data-bs-toggle="collapse"]',Qu={parent:null,toggle:!0},Ju={parent:"(null|element)",toggle:"boolean"};class Qn extends he{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const s=nt.find(ms);for(const l of s){const h=nt.getSelectorFromElement(l),f=nt.find(h).filter(m=>m===this._element);h!==null&&f.length&&this._triggerArray.push(l)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Qu}static get DefaultType(){return Ju}static get NAME(){return Mu}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Gu).filter(m=>m!==this._element).map(m=>Qn.getOrCreateInstance(m,{toggle:!1}))),t.length&&t[0]._isTransitioning||I.trigger(this._element,Ku).defaultPrevented)return;for(const m of t)m.hide();const s=this._getDimension();this._element.classList.remove(An),this._element.classList.add(Br),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const l=()=>{this._isTransitioning=!1,this._element.classList.remove(Br),this._element.classList.add(An,Qi),this._element.style[s]="",I.trigger(this._element,Bu)},f=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(l,this._element,!0),this._element.style[s]=`${this._element[f]}px`}hide(){if(this._isTransitioning||!this._isShown()||I.trigger(this._element,Vu).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Zn(this._element),this._element.classList.add(Br),this._element.classList.remove(An,Qi);for(const l of this._triggerArray){const h=nt.getElementFromSelector(l);h&&!this._isShown(h)&&this._addAriaAndCollapsedClass([l],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Br),this._element.classList.add(An),I.trigger(this._element,Yu)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Qi)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Be(t.parent),t}_getDimension(){return this._element.classList.contains(Uu)?zu:Xu}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ms);for(const n of t){const s=nt.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(t){const n=nt.find(Wu,this._config.parent);return nt.find(t,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const s of t)s.classList.toggle(Fu,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const s=Qn.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}I.on(document,qu,ms,function(o){(o.target.tagName==="A"||o.delegateTarget&&o.delegateTarget.tagName==="A")&&o.preventDefault();for(const t of nt.getMultipleElementsFromSelector(this))Qn.getOrCreateInstance(t,{toggle:!1}).toggle()});ce(Qn);const Do="dropdown",Zu="bs.dropdown",ln=`.${Zu}`,Ps=".data-api",tf="Escape",$o="Tab",ef="ArrowUp",Lo="ArrowDown",nf=2,rf=`hide${ln}`,sf=`hidden${ln}`,of=`show${ln}`,af=`shown${ln}`,qa=`click${ln}${Ps}`,Fa=`keydown${ln}${Ps}`,lf=`keyup${ln}${Ps}`,Sn="show",cf="dropup",uf="dropend",ff="dropstart",hf="dropup-center",df="dropdown-center",en='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',pf=`${en}.${Sn}`,zr=".dropdown-menu",mf=".navbar",vf=".navbar-nav",gf=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",yf=ae()?"top-end":"top-start",_f=ae()?"top-start":"top-end",bf=ae()?"bottom-end":"bottom-start",wf=ae()?"bottom-start":"bottom-end",Ef=ae()?"left-start":"right-start",Tf=ae()?"right-start":"left-start",Sf="top",Af="bottom",Of={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Cf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ge extends he{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=nt.next(this._element,zr)[0]||nt.prev(this._element,zr)[0]||nt.findOne(zr,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Of}static get DefaultType(){return Cf}static get NAME(){return Do}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Ve(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!I.trigger(this._element,of,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(vf))for(const s of[].concat(...document.body.children))I.on(s,"mouseover",Qr);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Sn),this._element.classList.add(Sn),I.trigger(this._element,af,t)}}hide(){if(Ve(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!I.trigger(this._element,rf,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))I.off(s,"mouseover",Qr);this._popper&&this._popper.destroy(),this._menu.classList.remove(Sn),this._element.classList.remove(Sn),this._element.setAttribute("aria-expanded","false"),Ae.removeDataAttribute(this._menu,"popper"),I.trigger(this._element,sf,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Se(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Do.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof Ca>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Se(this._config.reference)?t=Be(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=ks(t,this._menu,n)}_isShown(){return this._menu.classList.contains(Sn)}_getPlacement(){const t=this._parent;if(t.classList.contains(uf))return Ef;if(t.classList.contains(ff))return Tf;if(t.classList.contains(hf))return Sf;if(t.classList.contains(df))return Af;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(cf)?n?_f:yf:n?wf:bf}_detectNavbar(){return this._element.closest(mf)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ae.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Jt(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const s=nt.find(gf,this._menu).filter(l=>xn(l));s.length&&xs(s,n,t===Lo,!s.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=ge.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===nf||t.type==="keyup"&&t.key!==$o)return;const n=nt.find(pf);for(const s of n){const l=ge.getInstance(s);if(!l||l._config.autoClose===!1)continue;const h=t.composedPath(),f=h.includes(l._menu);if(h.includes(l._element)||l._config.autoClose==="inside"&&!f||l._config.autoClose==="outside"&&f||l._menu.contains(t.target)&&(t.type==="keyup"&&t.key===$o||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const m={relatedTarget:l._element};t.type==="click"&&(m.clickEvent=t),l._completeHide(m)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),s=t.key===tf,l=[ef,Lo].includes(t.key);if(!l&&!s||n&&!s)return;t.preventDefault();const h=this.matches(en)?this:nt.prev(this,en)[0]||nt.next(this,en)[0]||nt.findOne(en,t.delegateTarget.parentNode),f=ge.getOrCreateInstance(h);if(l){t.stopPropagation(),f.show(),f._selectMenuItem(t);return}f._isShown()&&(t.stopPropagation(),f.hide(),h.focus())}}I.on(document,Fa,en,ge.dataApiKeydownHandler);I.on(document,Fa,zr,ge.dataApiKeydownHandler);I.on(document,qa,ge.clearMenus);I.on(document,lf,ge.clearMenus);I.on(document,qa,en,function(o){o.preventDefault(),ge.getOrCreateInstance(this).toggle()});ce(ge);const Wa="backdrop",Df="fade",No="show",ko=`mousedown.bs.${Wa}`,$f={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Lf={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ua extends tr{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return $f}static get DefaultType(){return Lf}static get NAME(){return Wa}show(t){if(!this._config.isVisible){Jt(t);return}this._append();const n=this._getElement();this._config.isAnimated&&Zn(n),n.classList.add(No),this._emulateAnimation(()=>{Jt(t)})}hide(t){if(!this._config.isVisible){Jt(t);return}this._getElement().classList.remove(No),this._emulateAnimation(()=>{this.dispose(),Jt(t)})}dispose(){this._isAppended&&(I.off(this._element,ko),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Df),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Be(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),I.on(t,ko,()=>{Jt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){ka(t,this._getElement(),this._config.isAnimated)}}const Nf="focustrap",kf="bs.focustrap",Zr=`.${kf}`,xf=`focusin${Zr}`,If=`keydown.tab${Zr}`,Pf="Tab",Rf="forward",xo="backward",Mf={autofocus:!0,trapElement:null},jf={autofocus:"boolean",trapElement:"element"};class za extends tr{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Mf}static get DefaultType(){return jf}static get NAME(){return Nf}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),I.off(document,Zr),I.on(document,xf,t=>this._handleFocusin(t)),I.on(document,If,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,I.off(document,Zr))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const s=nt.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===xo?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===Pf&&(this._lastTabNavDirection=t.shiftKey?xo:Rf)}}const Io=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Po=".sticky-top",Vr="padding-right",Ro="margin-right";class vs{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vr,n=>n+t),this._setElementAttributes(Io,Vr,n=>n+t),this._setElementAttributes(Po,Ro,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vr),this._resetElementAttributes(Io,Vr),this._resetElementAttributes(Po,Ro)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,s){const l=this.getWidth(),h=f=>{if(f!==this._element&&window.innerWidth>f.clientWidth+l)return;this._saveInitialAttribute(f,n);const m=window.getComputedStyle(f).getPropertyValue(n);f.style.setProperty(n,`${s(Number.parseFloat(m))}px`)};this._applyManipulationCallback(t,h)}_saveInitialAttribute(t,n){const s=t.style.getPropertyValue(n);s&&Ae.setDataAttribute(t,n,s)}_resetElementAttributes(t,n){const s=l=>{const h=Ae.getDataAttribute(l,n);if(h===null){l.style.removeProperty(n);return}Ae.removeDataAttribute(l,n),l.style.setProperty(n,h)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,n){if(Se(t)){n(t);return}for(const s of nt.find(t,this._element))n(s)}}const Hf="modal",Kf="bs.modal",le=`.${Kf}`,Bf=".data-api",Vf="Escape",Yf=`hide${le}`,qf=`hidePrevented${le}`,Xa=`hidden${le}`,Ga=`show${le}`,Ff=`shown${le}`,Wf=`resize${le}`,Uf=`click.dismiss${le}`,zf=`mousedown.dismiss${le}`,Xf=`keydown.dismiss${le}`,Gf=`click${le}${Bf}`,Mo="modal-open",Qf="fade",jo="show",Ji="modal-static",Jf=".modal.show",Zf=".modal-dialog",th=".modal-body",eh='[data-bs-toggle="modal"]',nh={backdrop:!0,focus:!0,keyboard:!0},rh={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class an extends he{constructor(t,n){super(t,n),this._dialog=nt.findOne(Zf,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new vs,this._addEventListeners()}static get Default(){return nh}static get DefaultType(){return rh}static get NAME(){return Hf}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||I.trigger(this._element,Ga,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Mo),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||I.trigger(this._element,Yf).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(jo),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){I.off(window,le),I.off(this._dialog,le),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ua({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new za({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=nt.findOne(th,this._dialog);n&&(n.scrollTop=0),Zn(this._element),this._element.classList.add(jo);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,I.trigger(this._element,Ff,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){I.on(this._element,Xf,t=>{if(t.key===Vf){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),I.on(window,Wf,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),I.on(this._element,zf,t=>{I.one(this._element,Uf,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Mo),this._resetAdjustments(),this._scrollBar.reset(),I.trigger(this._element,Xa)})}_isAnimated(){return this._element.classList.contains(Qf)}_triggerBackdropTransition(){if(I.trigger(this._element,qf).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Ji)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Ji),this._queueCallback(()=>{this._element.classList.remove(Ji),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!t){const l=ae()?"paddingLeft":"paddingRight";this._element.style[l]=`${n}px`}if(!s&&t){const l=ae()?"paddingRight":"paddingLeft";this._element.style[l]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const s=an.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](n)}})}}I.on(document,Gf,eh,function(o){const t=nt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&o.preventDefault(),I.one(t,Ga,l=>{l.defaultPrevented||I.one(t,Xa,()=>{xn(this)&&this.focus()})});const n=nt.findOne(Jf);n&&an.getInstance(n).hide(),an.getOrCreateInstance(t).toggle(this)});ri(an);ce(an);const ih="offcanvas",sh="bs.offcanvas",Ce=`.${sh}`,Qa=".data-api",oh=`load${Ce}${Qa}`,ah="Escape",Ho="show",Ko="showing",Bo="hiding",lh="offcanvas-backdrop",Ja=".offcanvas.show",ch=`show${Ce}`,uh=`shown${Ce}`,fh=`hide${Ce}`,Vo=`hidePrevented${Ce}`,Za=`hidden${Ce}`,hh=`resize${Ce}`,dh=`click${Ce}${Qa}`,ph=`keydown.dismiss${Ce}`,mh='[data-bs-toggle="offcanvas"]',vh={backdrop:!0,keyboard:!0,scroll:!1},gh={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ye extends he{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return vh}static get DefaultType(){return gh}static get NAME(){return ih}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||I.trigger(this._element,ch,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new vs().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ko);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Ho),this._element.classList.remove(Ko),I.trigger(this._element,uh,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||I.trigger(this._element,fh).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Bo),this._backdrop.hide();const n=()=>{this._element.classList.remove(Ho,Bo),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new vs().reset(),I.trigger(this._element,Za)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){I.trigger(this._element,Vo);return}this.hide()},n=!!this._config.backdrop;return new Ua({className:lh,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new za({trapElement:this._element})}_addEventListeners(){I.on(this._element,ph,t=>{if(t.key===ah){if(this._config.keyboard){this.hide();return}I.trigger(this._element,Vo)}})}static jQueryInterface(t){return this.each(function(){const n=Ye.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}I.on(document,dh,mh,function(o){const t=nt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),Ve(this))return;I.one(t,Za,()=>{xn(this)&&this.focus()});const n=nt.findOne(Ja);n&&n!==t&&Ye.getInstance(n).hide(),Ye.getOrCreateInstance(t).toggle(this)});I.on(window,oh,()=>{for(const o of nt.find(Ja))Ye.getOrCreateInstance(o).show()});I.on(window,hh,()=>{for(const o of nt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(o).position!=="fixed"&&Ye.getOrCreateInstance(o).hide()});ri(Ye);ce(Ye);const yh=/^aria-[\w-]*$/i,tl={"*":["class","dir","id","lang","role",yh],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},_h=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),bh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,wh=(o,t)=>{const n=o.nodeName.toLowerCase();return t.includes(n)?_h.has(n)?!!bh.test(o.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function Eh(o,t,n){if(!o.length)return o;if(n&&typeof n=="function")return n(o);const l=new window.DOMParser().parseFromString(o,"text/html"),h=[].concat(...l.body.querySelectorAll("*"));for(const f of h){const m=f.nodeName.toLowerCase();if(!Object.keys(t).includes(m)){f.remove();continue}const E=[].concat(...f.attributes),L=[].concat(t["*"]||[],t[m]||[]);for(const C of E)wh(C,L)||f.removeAttribute(C.nodeName)}return l.body.innerHTML}const Th="TemplateFactory",Sh={allowList:tl,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ah={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Oh={entry:"(string|element|function|null)",selector:"(string|element)"};class Ch extends tr{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Sh}static get DefaultType(){return Ah}static get NAME(){return Th}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[l,h]of Object.entries(this._config.content))this._setContent(t,h,l);const n=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,s]of Object.entries(t))super._typeCheckConfig({selector:n,entry:s},Oh)}_setContent(t,n,s){const l=nt.findOne(s,t);if(l){if(n=this._resolvePossibleFunction(n),!n){l.remove();return}if(Se(n)){this._putElementInTemplate(Be(n),l);return}if(this._config.html){l.innerHTML=this._maybeSanitize(n);return}l.textContent=n}}_maybeSanitize(t){return this._config.sanitize?Eh(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Jt(t,[this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const Dh="tooltip",$h=new Set(["sanitize","allowList","sanitizeFn"]),Zi="fade",Lh="modal",Yr="show",Nh=".tooltip-inner",Yo=`.${Lh}`,qo="hide.bs.modal",zn="hover",ts="focus",kh="click",xh="manual",Ih="hide",Ph="hidden",Rh="show",Mh="shown",jh="inserted",Hh="click",Kh="focusin",Bh="focusout",Vh="mouseenter",Yh="mouseleave",qh={AUTO:"auto",TOP:"top",RIGHT:ae()?"left":"right",BOTTOM:"bottom",LEFT:ae()?"right":"left"},Fh={allowList:tl,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Wh={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Pn extends he{constructor(t,n){if(typeof Ca>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Fh}static get DefaultType(){return Wh}static get NAME(){return Dh}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),I.off(this._element.closest(Yo),qo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=I.trigger(this._element,this.constructor.eventName(Rh)),s=(La(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const l=this._getTipElement();this._element.setAttribute("aria-describedby",l.getAttribute("id"));const{container:h}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(h.append(l),I.trigger(this._element,this.constructor.eventName(jh))),this._popper=this._createPopper(l),l.classList.add(Yr),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))I.on(m,"mouseover",Qr);const f=()=>{I.trigger(this._element,this.constructor.eventName(Mh)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(f,this.tip,this._isAnimated())}hide(){if(!this._isShown()||I.trigger(this._element,this.constructor.eventName(Ih)).defaultPrevented)return;if(this._getTipElement().classList.remove(Yr),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))I.off(l,"mouseover",Qr);this._activeTrigger[kh]=!1,this._activeTrigger[ts]=!1,this._activeTrigger[zn]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),I.trigger(this._element,this.constructor.eventName(Ph)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(Zi,Yr),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=Nc(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(Zi),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Ch({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Nh]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Zi)}_isShown(){return this.tip&&this.tip.classList.contains(Yr)}_createPopper(t){const n=Jt(this._config.placement,[this,t,this._element]),s=qh[n.toUpperCase()];return ks(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Jt(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...Jt(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")I.on(this._element,this.constructor.eventName(Hh),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(n!==xh){const s=n===zn?this.constructor.eventName(Vh):this.constructor.eventName(Kh),l=n===zn?this.constructor.eventName(Yh):this.constructor.eventName(Bh);I.on(this._element,s,this._config.selector,h=>{const f=this._initializeOnDelegatedTarget(h);f._activeTrigger[h.type==="focusin"?ts:zn]=!0,f._enter()}),I.on(this._element,l,this._config.selector,h=>{const f=this._initializeOnDelegatedTarget(h);f._activeTrigger[h.type==="focusout"?ts:zn]=f._element.contains(h.relatedTarget),f._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},I.on(this._element.closest(Yo),qo,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=Ae.getDataAttributes(this._element);for(const s of Object.keys(n))$h.has(s)&&delete n[s];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Be(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(t[n]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=Pn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ce(Pn);const Uh="popover",zh=".popover-header",Xh=".popover-body",Gh={...Pn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Qh={...Pn.DefaultType,content:"(null|string|element|function)"};class Rs extends Pn{static get Default(){return Gh}static get DefaultType(){return Qh}static get NAME(){return Uh}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[zh]:this._getTitle(),[Xh]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=Rs.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ce(Rs);const Jh="scrollspy",Zh="bs.scrollspy",Ms=`.${Zh}`,td=".data-api",ed=`activate${Ms}`,Fo=`click${Ms}`,nd=`load${Ms}${td}`,rd="dropdown-item",wn="active",id='[data-bs-spy="scroll"]',es="[href]",sd=".nav, .list-group",Wo=".nav-link",od=".nav-item",ad=".list-group-item",ld=`${Wo}, ${od} > ${Wo}, ${ad}`,cd=".dropdown",ud=".dropdown-toggle",fd={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},hd={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class oi extends he{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return fd}static get DefaultType(){return hd}static get NAME(){return Jh}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Be(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(I.off(this._config.target,Fo),I.on(this._config.target,Fo,es,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const s=this._rootElement||window,l=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:l,behavior:"smooth"});return}s.scrollTop=l}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=f=>this._targetLinks.get(`#${f.target.id}`),s=f=>{this._previousScrollData.visibleEntryTop=f.target.offsetTop,this._process(n(f))},l=(this._rootElement||document.documentElement).scrollTop,h=l>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=l;for(const f of t){if(!f.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(f));continue}const m=f.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(h&&m){if(s(f),!l)return;continue}!h&&!m&&s(f)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=nt.find(es,this._config.target);for(const n of t){if(!n.hash||Ve(n))continue;const s=nt.findOne(decodeURI(n.hash),this._element);xn(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(wn),this._activateParents(t),I.trigger(this._element,ed,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(rd)){nt.findOne(ud,t.closest(cd)).classList.add(wn);return}for(const n of nt.parents(t,sd))for(const s of nt.prev(n,ld))s.classList.add(wn)}_clearActiveClass(t){t.classList.remove(wn);const n=nt.find(`${es}.${wn}`,t);for(const s of n)s.classList.remove(wn)}static jQueryInterface(t){return this.each(function(){const n=oi.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}I.on(window,nd,()=>{for(const o of nt.find(id))oi.getOrCreateInstance(o)});ce(oi);const dd="tab",pd="bs.tab",cn=`.${pd}`,md=`hide${cn}`,vd=`hidden${cn}`,gd=`show${cn}`,yd=`shown${cn}`,_d=`click${cn}`,bd=`keydown${cn}`,wd=`load${cn}`,Ed="ArrowLeft",Uo="ArrowRight",Td="ArrowUp",zo="ArrowDown",ns="Home",Xo="End",nn="active",Go="fade",rs="show",Sd="dropdown",el=".dropdown-toggle",Ad=".dropdown-menu",is=`:not(${el})`,Od='.list-group, .nav, [role="tablist"]',Cd=".nav-item, .list-group-item",Dd=`.nav-link${is}, .list-group-item${is}, [role="tab"]${is}`,nl='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ss=`${Dd}, ${nl}`,$d=`.${nn}[data-bs-toggle="tab"], .${nn}[data-bs-toggle="pill"], .${nn}[data-bs-toggle="list"]`;class Nn extends he{constructor(t){super(t),this._parent=this._element.closest(Od),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),I.on(this._element,bd,n=>this._keydown(n)))}static get NAME(){return dd}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),s=n?I.trigger(n,md,{relatedTarget:t}):null;I.trigger(t,gd,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(nn),this._activate(nt.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(rs);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),I.trigger(t,yd,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Go))}_deactivate(t,n){if(!t)return;t.classList.remove(nn),t.blur(),this._deactivate(nt.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(rs);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),I.trigger(t,vd,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Go))}_keydown(t){if(![Ed,Uo,Td,zo,ns,Xo].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(l=>!Ve(l));let s;if([ns,Xo].includes(t.key))s=n[t.key===ns?0:n.length-1];else{const l=[Uo,zo].includes(t.key);s=xs(n,t.target,l,!0)}s&&(s.focus({preventScroll:!0}),Nn.getOrCreateInstance(s).show())}_getChildren(){return nt.find(ss,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",n),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=nt.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const s=this._getOuterElement(t);if(!s.classList.contains(Sd))return;const l=(h,f)=>{const m=nt.findOne(h,s);m&&m.classList.toggle(f,n)};l(el,nn),l(Ad,rs),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,s){t.hasAttribute(n)||t.setAttribute(n,s)}_elemIsActive(t){return t.classList.contains(nn)}_getInnerElement(t){return t.matches(ss)?t:nt.findOne(ss,t)}_getOuterElement(t){return t.closest(Cd)||t}static jQueryInterface(t){return this.each(function(){const n=Nn.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}I.on(document,_d,nl,function(o){["A","AREA"].includes(this.tagName)&&o.preventDefault(),!Ve(this)&&Nn.getOrCreateInstance(this).show()});I.on(window,wd,()=>{for(const o of nt.find($d))Nn.getOrCreateInstance(o)});ce(Nn);const Ld="toast",Nd="bs.toast",We=`.${Nd}`,kd=`mouseover${We}`,xd=`mouseout${We}`,Id=`focusin${We}`,Pd=`focusout${We}`,Rd=`hide${We}`,Md=`hidden${We}`,jd=`show${We}`,Hd=`shown${We}`,Kd="fade",Qo="hide",qr="show",Fr="showing",Bd={animation:"boolean",autohide:"boolean",delay:"number"},Vd={animation:!0,autohide:!0,delay:5e3};class ai extends he{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vd}static get DefaultType(){return Bd}static get NAME(){return Ld}show(){if(I.trigger(this._element,jd).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Kd);const n=()=>{this._element.classList.remove(Fr),I.trigger(this._element,Hd),this._maybeScheduleHide()};this._element.classList.remove(Qo),Zn(this._element),this._element.classList.add(qr,Fr),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||I.trigger(this._element,Rd).defaultPrevented)return;const n=()=>{this._element.classList.add(Qo),this._element.classList.remove(Fr,qr),I.trigger(this._element,Md)};this._element.classList.add(Fr),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(qr),super.dispose()}isShown(){return this._element.classList.contains(qr)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){I.on(this._element,kd,t=>this._onInteraction(t,!0)),I.on(this._element,xd,t=>this._onInteraction(t,!1)),I.on(this._element,Id,t=>this._onInteraction(t,!0)),I.on(this._element,Pd,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=ai.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}ri(ai);ce(ai);class Yd{constructor(){x(this,"id","ticketModal");x(this,"modal",null);x(this,"ticketId",null);const t=document.querySelector(`#${this.id}`);t&&(this.modal=new an(t))}handler(){const t=document.querySelector("#btnRedirectTicket");t&&t.addEventListener("click",()=>{this.modal&&(this.modal.hide(),window.location.href=`/ticket?id=${this.ticketId}`)})}show(t){if(this.modal&&t.ticket){this.ticketId=t.ticket.id;const n=document.querySelector("#modal_ticket_id");n&&(n.textContent=t.ticket.id_disp??"");const s=document.querySelector("#ticket_name");s&&(s.value=t.ticket.name??"");const l=document.querySelector("#description");if(l&&(l.innerHTML=t.ticket.description??""),t.members&&t.members.length>0){const C=document.querySelector("#members");if(C){let k='<table class="table table-hover">';k+="<thead>",k+="<tr>",k+='<th scope="col">メールアドレス</th>',k+='<th scope="col">名前</th>',k+="</tr>",k+="</thead>",k+="<tbody>";for(const H of t.members)k+="<tr>",k+=`<td>${H.email}</td>`,k+=`<td>${H.name}</td>`,k+="</tr>";k+="</tbody>",k+="</table>",C.innerHTML=k}}const h=document.querySelector("#start_date");if(h){let C='<label class="form-label" for="startdate">開始日</label>';C+=`<input class="form-control" id="startdate" type="date" value="${t.ticket.start_date??""}" disabled>`,h.innerHTML=C}const f=document.querySelector("#end_date");if(f){let C='<label class="form-label" for="enddate">終了日</label>';C+=`<input class="form-control" id="enddate" type="date" value="${t.ticket.end_date??""}" disabled>`,f.innerHTML=C}const m=document.querySelector("#progress");m&&(m.value=`${t.ticket.progress}`);const E=document.querySelector("#finished");E&&(E.checked=t.ticket.progress===100);const L=document.querySelector(`#priority${t.ticket.priority}`);if(L&&(L.checked=!0),t.parent){const C=document.querySelector("#parent");C&&(C.innerHTML=`${t.parent.id_disp}&nbsp;&nbsp;${t.parent.name}`)}if(t.children){const C=document.querySelector("#children");if(C){let k="";for(const H of t.children)k+=`<p class="mb-0">${H.id_disp}&nbsp;&nbsp;${H.name}</p>`;C.innerHTML=k}}this.modal.show()}}hide(){this.modal&&this.modal.hide()}}var rl={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Xr,function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])})(e,r)},s=function(){return(s=Object.assign||function(e){for(var r,i=1,a=arguments.length;i<a;i++)for(var c in r=arguments[i])Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c]);return e}).apply(this,arguments)};function l(e,r,i){for(var a,c=0,u=r.length;c<u;c++)!a&&c in r||((a=a||Array.prototype.slice.call(r,0,c))[c]=r[c]);return e.concat(a||Array.prototype.slice.call(r))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Xr,f=Object.keys,m=Array.isArray;function E(e,r){return typeof r!="object"||f(r).forEach(function(i){e[i]=r[i]}),e}typeof Promise>"u"||h.Promise||(h.Promise=Promise);var L=Object.getPrototypeOf,C={}.hasOwnProperty;function k(e,r){return C.call(e,r)}function H(e,r){typeof r=="function"&&(r=r(L(e))),(typeof Reflect>"u"?f:Reflect.ownKeys)(r).forEach(function(i){Q(e,i,r[i])})}var F=Object.defineProperty;function Q(e,r,i,a){F(e,r,E(i&&k(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},a))}function tt(e){return{from:function(r){return e.prototype=Object.create(r.prototype),Q(e.prototype,"constructor",e),{extend:H.bind(null,e.prototype)}}}}var it=Object.getOwnPropertyDescriptor,lt=[].slice;function _t(e,r,i){return lt.call(e,r,i)}function St(e,r){return r(e)}function ot(e){if(!e)throw new Error("Assertion Failed")}function mt(e){h.setImmediate?setImmediate(e):setTimeout(e,0)}function st(e,r){if(typeof r=="string"&&k(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var i=[],a=0,c=r.length;a<c;++a){var u=st(e,r[a]);i.push(u)}return i}var d=r.indexOf(".");if(d!==-1){var p=e[r.substr(0,d)];return p==null?void 0:st(p,r.substr(d+1))}}function ft(e,r,i){if(e&&r!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){ot(typeof i!="string"&&"length"in i);for(var a=0,c=r.length;a<c;++a)ft(e,r[a],i[a])}else{var u,d,p=r.indexOf(".");p!==-1?(u=r.substr(0,p),(d=r.substr(p+1))===""?i===void 0?m(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=i:ft(p=!(p=e[u])||!k(e,u)?e[u]={}:p,d,i)):i===void 0?m(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=i}}function Lt(e){var r,i={};for(r in e)k(e,r)&&(i[r]=e[r]);return i}var Dt=[].concat;function ut(e){return Dt.apply([],e)}var we="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ut([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(r){return r+e+"Array"})}))).filter(function(e){return h[e]}),rt=new Set(we.map(function(e){return h[e]})),xt=null;function At(e){return xt=new WeakMap,e=function r(i){if(!i||typeof i!="object")return i;var a=xt.get(i);if(a)return a;if(m(i)){a=[],xt.set(i,a);for(var c=0,u=i.length;c<u;++c)a.push(r(i[c]))}else if(rt.has(i.constructor))a=i;else{var d,p=L(i);for(d in a=p===Object.prototype?{}:Object.create(p),xt.set(i,a),i)k(i,d)&&(a[d]=r(i[d]))}return a}(e),xt=null,e}var et={}.toString;function q(e){return et.call(e).slice(8,-1)}var j=typeof Symbol<"u"?Symbol.iterator:"@@iterator",z=typeof j=="symbol"?function(e){var r;return e!=null&&(r=e[j])&&r.apply(e)}:function(){return null};function B(e,r){return r=e.indexOf(r),0<=r&&e.splice(r,1),0<=r}var J={};function Z(e){var r,i,a,c;if(arguments.length===1){if(m(e))return e.slice();if(this===J&&typeof e=="string")return[e];if(c=z(e)){for(i=[];!(a=c.next()).done;)i.push(a.value);return i}if(e==null)return[e];if(typeof(r=e.length)!="number")return[e];for(i=new Array(r);r--;)i[r]=e[r];return i}for(r=arguments.length,i=new Array(r);r--;)i[r]=arguments[r];return i}var gt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},$e=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],se=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat($e),Et={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function wt(e,r){this.name=e,this.message=r}function Ot(e,r){return e+". Errors: "+Object.keys(r).map(function(i){return r[i].toString()}).filter(function(i,a,c){return c.indexOf(i)===a}).join(`
`)}function Ct(e,r,i,a){this.failures=r,this.failedKeys=a,this.successCount=i,this.message=Ot(e,r)}function jt(e,r){this.name="BulkError",this.failures=Object.keys(r).map(function(i){return r[i]}),this.failuresByPos=r,this.message=Ot(e,this.failures)}tt(wt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),tt(Ct).from(wt),tt(jt).from(wt);var Yt=se.reduce(function(e,r){return e[r]=r+"Error",e},{}),Wt=wt,X=se.reduce(function(e,r){var i=r+"Error";function a(c,u){this.name=i,c?typeof c=="string"?(this.message="".concat(c).concat(u?`
 `+u:""),this.inner=u||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Et[r]||i,this.inner=null)}return tt(a).from(Wt),e[r]=a,e},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var Ht=$e.reduce(function(e,r){return e[r+"Error"]=X[r],e},{}),Vt=se.reduce(function(e,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=X[r]),e},{});function vt(){}function te(e){return e}function li(e,r){return e==null||e===te?r:function(i){return r(e(i))}}function _e(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function rr(e,r){return e===vt?r:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var a=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var u=r.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?_e(a,this.onsuccess):a),c&&(this.onerror=this.onerror?_e(c,this.onerror):c),u!==void 0?u:i}}function ir(e,r){return e===vt?r:function(){e.apply(this,arguments);var i=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?_e(i,this.onsuccess):i),a&&(this.onerror=this.onerror?_e(a,this.onerror):a)}}function ci(e,r){return e===vt?r:function(i){var a=e.apply(this,arguments);E(i,a);var c=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,i=r.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?_e(c,this.onsuccess):c),u&&(this.onerror=this.onerror?_e(u,this.onerror):u),a===void 0?i===void 0?void 0:i:E(a,i)}}function ui(e,r){return e===vt?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function ue(e,r){return e===vt?r:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var a=this,c=arguments.length,u=new Array(c);c--;)u[c]=arguments[c];return i.then(function(){return r.apply(a,u)})}return r.apply(this,arguments)}}Vt.ModifyError=Ct,Vt.DexieError=wt,Vt.BulkError=jt;var Ut=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Rn(e){Ut=e}var De={},un=100,we=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,L(e),e];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,L(r),e]}(),$e=we[0],se=we[1],we=we[2],se=se&&se.then,Le=$e&&$e.constructor,fn=!!we,Ne=function(e,r){Mn.push([e,r]),sr&&(queueMicrotask(sl),sr=!1)},fi=!0,sr=!0,Ue=[],or=[],hi=te,ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:vt,pgp:!1,env:{},finalize:vt},G=ke,Mn=[],ze=0,ar=[];function W(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=G;if(typeof e!="function"){if(e!==De)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&pi(this,this._value))}this._state=null,this._value=null,++r.ref,function i(a,c){try{c(function(u){if(a._state===null){if(u===a)throw new TypeError("A promise cannot be resolved with itself.");var d=a._lib&&hn();u&&typeof u.then=="function"?i(a,function(p,_){u instanceof W?u._then(p,_):u.then(p,_)}):(a._state=!0,a._value=u,Hs(a)),d&&dn()}},pi.bind(null,a))}catch(u){pi(a,u)}}(this,e)}var di={get:function(){var e=G,r=fr;function i(a,c){var u=this,d=!e.global&&(e!==G||r!==fr),p=d&&!Ie(),_=new W(function(g,T){mi(u,new js(Bs(a,e,d,p),Bs(c,e,d,p),g,T,e))});return this._consoleTask&&(_._consoleTask=this._consoleTask),_}return i.prototype=De,i},set:function(e){Q(this,"then",e&&e.prototype===De?di:{get:function(){return e},set:di.set})}};function js(e,r,i,a,c){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=i,this.reject=a,this.psd=c}function pi(e,r){var i,a;or.push(r),e._state===null&&(i=e._lib&&hn(),r=hi(r),e._state=!1,e._value=r,a=e,Ue.some(function(c){return c._value===a._value})||Ue.push(a),Hs(e),i&&dn())}function Hs(e){var r=e._listeners;e._listeners=[];for(var i=0,a=r.length;i<a;++i)mi(e,r[i]);var c=e._PSD;--c.ref||c.finalize(),ze===0&&(++ze,Ne(function(){--ze==0&&vi()},[]))}function mi(e,r){if(e._state!==null){var i=e._state?r.onFulfilled:r.onRejected;if(i===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++ze,Ne(il,[i,e,r])}else e._listeners.push(r)}function il(e,r,i){try{var a,c=r._value;!r._state&&or.length&&(or=[]),a=Ut&&r._consoleTask?r._consoleTask.run(function(){return e(c)}):e(c),r._state||or.indexOf(c)!==-1||function(u){for(var d=Ue.length;d;)if(Ue[--d]._value===u._value)return Ue.splice(d,1)}(r),i.resolve(a)}catch(u){i.reject(u)}finally{--ze==0&&vi(),--i.psd.ref||i.psd.finalize()}}function sl(){Xe(ke,function(){hn()&&dn()})}function hn(){var e=fi;return sr=fi=!1,e}function dn(){var e,r,i;do for(;0<Mn.length;)for(e=Mn,Mn=[],i=e.length,r=0;r<i;++r){var a=e[r];a[0].apply(null,a[1])}while(0<Mn.length);sr=fi=!0}function vi(){var e=Ue;Ue=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var r=ar.slice(0),i=r.length;i;)r[--i]()}function lr(e){return new W(De,!1,e)}function Nt(e,r){var i=G;return function(){var a=hn(),c=G;try{return Pe(i,!0),e.apply(this,arguments)}catch(u){r&&r(u)}finally{Pe(c,!1),a&&dn()}}}H(W.prototype,{then:di,_then:function(e,r){mi(this,new js(null,null,e,r,G))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=e,i=arguments[1];return typeof r=="function"?this.then(null,function(a){return(a instanceof r?i:lr)(a)}):this.then(null,function(a){return(a&&a.name===r?i:lr)(a)})},finally:function(e){return this.then(function(r){return W.resolve(e()).then(function(){return r})},function(r){return W.resolve(e()).then(function(){return lr(r)})})},timeout:function(e,r){var i=this;return e<1/0?new W(function(a,c){var u=setTimeout(function(){return c(new X.Timeout(r))},e);i.then(a,c).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Q(W.prototype,Symbol.toStringTag,"Dexie.Promise"),ke.env=Ks(),H(W,{all:function(){var e=Z.apply(null,arguments).map(hr);return new W(function(r,i){e.length===0&&r([]);var a=e.length;e.forEach(function(c,u){return W.resolve(c).then(function(d){e[u]=d,--a||r(e)},i)})})},resolve:function(e){return e instanceof W?e:e&&typeof e.then=="function"?new W(function(r,i){e.then(r,i)}):new W(De,!0,e)},reject:lr,race:function(){var e=Z.apply(null,arguments).map(hr);return new W(function(r,i){e.map(function(a){return W.resolve(a).then(r,i)})})},PSD:{get:function(){return G},set:function(e){return G=e}},totalEchoes:{get:function(){return fr}},newPSD:xe,usePSD:Xe,scheduler:{get:function(){return Ne},set:function(e){Ne=e}},rejectionMapper:{get:function(){return hi},set:function(e){hi=e}},follow:function(e,r){return new W(function(i,a){return xe(function(c,u){var d=G;d.unhandleds=[],d.onunhandled=u,d.finalize=_e(function(){var p,_=this;p=function(){_.unhandleds.length===0?c():u(_.unhandleds[0])},ar.push(function g(){p(),ar.splice(ar.indexOf(g),1)}),++ze,Ne(function(){--ze==0&&vi()},[])},d.finalize),e()},r,i,a)})}}),Le&&(Le.allSettled&&Q(W,"allSettled",function(){var e=Z.apply(null,arguments).map(hr);return new W(function(r){e.length===0&&r([]);var i=e.length,a=new Array(i);e.forEach(function(c,u){return W.resolve(c).then(function(d){return a[u]={status:"fulfilled",value:d}},function(d){return a[u]={status:"rejected",reason:d}}).then(function(){return--i||r(a)})})})}),Le.any&&typeof AggregateError<"u"&&Q(W,"any",function(){var e=Z.apply(null,arguments).map(hr);return new W(function(r,i){e.length===0&&i(new AggregateError([]));var a=e.length,c=new Array(a);e.forEach(function(u,d){return W.resolve(u).then(function(p){return r(p)},function(p){c[d]=p,--a||i(new AggregateError(c))})})})}));var Kt={awaits:0,echoes:0,id:0},ol=0,cr=[],ur=0,fr=0,al=0;function xe(e,r,i,a){var c=G,u=Object.create(c);return u.parent=c,u.ref=0,u.global=!1,u.id=++al,ke.env,u.env=fn?{Promise:W,PromiseProp:{value:W,configurable:!0,writable:!0},all:W.all,race:W.race,allSettled:W.allSettled,any:W.any,resolve:W.resolve,reject:W.reject}:{},r&&E(u,r),++c.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},a=Xe(u,e,i,a),u.ref===0&&u.finalize(),a}function pn(){return Kt.id||(Kt.id=++ol),++Kt.awaits,Kt.echoes+=un,Kt.id}function Ie(){return!!Kt.awaits&&(--Kt.awaits==0&&(Kt.id=0),Kt.echoes=Kt.awaits*un,!0)}function hr(e){return Kt.echoes&&e&&e.constructor===Le?(pn(),e.then(function(r){return Ie(),r},function(r){return Ie(),Pt(r)})):e}function ll(){var e=cr[cr.length-1];cr.pop(),Pe(e,!1)}function Pe(e,r){var i,a=G;(r?!Kt.echoes||ur++&&e===G:!ur||--ur&&e===G)||queueMicrotask(r?(function(c){++fr,Kt.echoes&&--Kt.echoes!=0||(Kt.echoes=Kt.awaits=Kt.id=0),cr.push(G),Pe(c,!0)}).bind(null,e):ll),e!==G&&(G=e,a===ke&&(ke.env=Ks()),fn&&(i=ke.env.Promise,r=e.env,(a.global||e.global)&&(Object.defineProperty(h,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))))}function Ks(){var e=h.Promise;return fn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Xe(e,r,i,a,c){var u=G;try{return Pe(e,!0),r(i,a,c)}finally{Pe(u,!1)}}function Bs(e,r,i,a){return typeof e!="function"?e:function(){var c=G;i&&pn(),Pe(r,!0);try{return e.apply(this,arguments)}finally{Pe(c,!1),a&&queueMicrotask(Ie)}}}function gi(e){Promise===Le&&Kt.echoes===0?ur===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+se).indexOf("[native code]")===-1&&(pn=Ie=vt);var Pt=W.reject,Ge="￿",be="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vs="String expected.",mn=[],dr="__dbnames",yi="readonly",_i="readwrite";function Qe(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}var Ys={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pr(e){return typeof e!="string"||/\./.test(e)?function(r){return r}:function(r){return r[e]===void 0&&e in r&&delete(r=At(r))[e],r}}function qs(){throw X.Type()}function yt(e,r){try{var i=Fs(e),a=Fs(r);if(i!==a)return i==="Array"?1:a==="Array"?-1:i==="binary"?1:a==="binary"?-1:i==="string"?1:a==="string"?-1:i==="Date"?1:a!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return r<e?1:e<r?-1:0;case"binary":return function(c,u){for(var d=c.length,p=u.length,_=d<p?d:p,g=0;g<_;++g)if(c[g]!==u[g])return c[g]<u[g]?-1:1;return d===p?0:d<p?-1:1}(Ws(e),Ws(r));case"Array":return function(c,u){for(var d=c.length,p=u.length,_=d<p?d:p,g=0;g<_;++g){var T=yt(c[g],u[g]);if(T!==0)return T}return d===p?0:d<p?-1:1}(e,r)}}catch{}return NaN}function Fs(e){var r=typeof e;return r!="object"?r:ArrayBuffer.isView(e)?"binary":(e=q(e),e==="ArrayBuffer"?"binary":e)}function Ws(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Us=($t.prototype._trans=function(e,r,i){var a=this._tx||G.trans,c=this.name,u=Ut&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function d(g,T,v){if(!v.schema[c])throw new X.NotFound("Table "+c+" not part of transaction");return r(v.idbtrans,v)}var p=hn();try{var _=a&&a.db._novip===this.db._novip?a===G.trans?a._promise(e,d,i):xe(function(){return a._promise(e,d,i)},{trans:a,transless:G.transless||G}):function g(T,v,S,y){if(T.idbdb&&(T._state.openComplete||G.letThrough||T._vip)){var w=T._createTransaction(v,S,T._dbSchema);try{w.create(),T._state.PR1398_maxLoop=3}catch(A){return A.name===Yt.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return g(T,v,S,y)})):Pt(A)}return w._promise(v,function(A,b){return xe(function(){return G.trans=w,y(A,b,w)})}).then(function(A){if(v==="readwrite")try{w.idbtrans.commit()}catch{}return v==="readonly"?A:w._completion.then(function(){return A})})}if(T._state.openComplete)return Pt(new X.DatabaseClosed(T._state.dbOpenError));if(!T._state.isBeingOpened){if(!T._state.autoOpen)return Pt(new X.DatabaseClosed);T.open().catch(vt)}return T._state.dbReadyPromise.then(function(){return g(T,v,S,y)})}(this.db,e,[this.name],d);return u&&(_._consoleTask=u,_=_.catch(function(g){return console.trace(g),Pt(g)})),_}finally{p&&dn()}},$t.prototype.get=function(e,r){var i=this;return e&&e.constructor===Object?this.where(e).first(r):e==null?Pt(new X.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return i.core.get({trans:a,key:e}).then(function(c){return i.hook.reading.fire(c)})}).then(r)},$t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(m(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var r=f(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(_){if(_.compound&&r.every(function(T){return 0<=_.keyPath.indexOf(T)})){for(var g=0;g<r.length;++g)if(r.indexOf(_.keyPath[g])===-1)return!1;return!0}return!1}).sort(function(_,g){return _.keyPath.length-g.keyPath.length})[0];if(i&&this.db._maxKey!==Ge){var d=i.keyPath.slice(0,r.length);return this.where(d).equals(d.map(function(g){return e[g]}))}!i&&Ut&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var a=this.schema.idxByName,c=this.db._deps.indexedDB;function u(_,g){return c.cmp(_,g)===0}var p=r.reduce(function(S,g){var T=S[0],v=S[1],S=a[g],y=e[g];return[T||S,T||!S?Qe(v,S&&S.multi?function(w){return w=st(w,g),m(w)&&w.some(function(A){return u(y,A)})}:function(w){return u(y,st(w,g))}):v]},[null,null]),d=p[0],p=p[1];return d?this.where(d.name).equals(e[d.keyPath]).filter(p):i?this.filter(p):this.where(r).equals("")},$t.prototype.filter=function(e){return this.toCollection().and(e)},$t.prototype.count=function(e){return this.toCollection().count(e)},$t.prototype.offset=function(e){return this.toCollection().offset(e)},$t.prototype.limit=function(e){return this.toCollection().limit(e)},$t.prototype.each=function(e){return this.toCollection().each(e)},$t.prototype.toArray=function(e){return this.toCollection().toArray(e)},$t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},$t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,m(e)?"[".concat(e.join("+"),"]"):e))},$t.prototype.reverse=function(){return this.toCollection().reverse()},$t.prototype.mapToClass=function(e){var r,i=this.db,a=this.name;function c(){return r!==null&&r.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof qs&&(function(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function T(){this.constructor=_}n(_,g),_.prototype=g===null?Object.create(g):(T.prototype=g.prototype,new T)}(c,r=e),Object.defineProperty(c.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),c.prototype.table=function(){return a},e=c);for(var u=new Set,d=e.prototype;d;d=L(d))Object.getOwnPropertyNames(d).forEach(function(_){return u.add(_)});function p(_){if(!_)return _;var g,T=Object.create(e.prototype);for(g in _)if(!u.has(g))try{T[g]=_[g]}catch{}return T}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},$t.prototype.defineClass=function(){return this.mapToClass(function(e){E(this,e)})},$t.prototype.add=function(e,r){var i=this,a=this.schema.primKey,c=a.auto,u=a.keyPath,d=e;return u&&c&&(d=pr(u)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"add",keys:r!=null?[r]:null,values:[d]})}).then(function(p){return p.numFailures?W.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{ft(e,u,p)}catch{}return p})},$t.prototype.update=function(e,r){return typeof e!="object"||m(e)?this.where(":id").equals(e).modify(r):(e=st(e,this.schema.primKey.keyPath),e===void 0?Pt(new X.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(r))},$t.prototype.put=function(e,r){var i=this,a=this.schema.primKey,c=a.auto,u=a.keyPath,d=e;return u&&c&&(d=pr(u)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"put",values:[d],keys:r!=null?[r]:null})}).then(function(p){return p.numFailures?W.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{ft(e,u,p)}catch{}return p})},$t.prototype.delete=function(e){var r=this;return this._trans("readwrite",function(i){return r.core.mutate({trans:i,type:"delete",keys:[e]})}).then(function(i){return i.numFailures?W.reject(i.failures[0]):void 0})},$t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"deleteRange",range:Ys})}).then(function(r){return r.numFailures?W.reject(r.failures[0]):void 0})},$t.prototype.bulkGet=function(e){var r=this;return this._trans("readonly",function(i){return r.core.getMany({keys:e,trans:i}).then(function(a){return a.map(function(c){return r.hook.reading.fire(c)})})})},$t.prototype.bulkAdd=function(e,r,i){var a=this,c=Array.isArray(r)?r:void 0,u=(i=i||(c?void 0:r))?i.allKeys:void 0;return this._trans("readwrite",function(d){var g=a.schema.primKey,p=g.auto,g=g.keyPath;if(g&&c)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var _=e.length,g=g&&p?e.map(pr(g)):e;return a.core.mutate({trans:d,type:"add",keys:c,values:g,wantResults:u}).then(function(w){var v=w.numFailures,S=w.results,y=w.lastResult,w=w.failures;if(v===0)return u?S:y;throw new jt("".concat(a.name,".bulkAdd(): ").concat(v," of ").concat(_," operations failed"),w)})})},$t.prototype.bulkPut=function(e,r,i){var a=this,c=Array.isArray(r)?r:void 0,u=(i=i||(c?void 0:r))?i.allKeys:void 0;return this._trans("readwrite",function(d){var g=a.schema.primKey,p=g.auto,g=g.keyPath;if(g&&c)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var _=e.length,g=g&&p?e.map(pr(g)):e;return a.core.mutate({trans:d,type:"put",keys:c,values:g,wantResults:u}).then(function(w){var v=w.numFailures,S=w.results,y=w.lastResult,w=w.failures;if(v===0)return u?S:y;throw new jt("".concat(a.name,".bulkPut(): ").concat(v," of ").concat(_," operations failed"),w)})})},$t.prototype.bulkUpdate=function(e){var r=this,i=this.core,a=e.map(function(d){return d.key}),c=e.map(function(d){return d.changes}),u=[];return this._trans("readwrite",function(d){return i.getMany({trans:d,keys:a,cache:"clone"}).then(function(p){var _=[],g=[];e.forEach(function(v,S){var y=v.key,w=v.changes,A=p[S];if(A){for(var b=0,O=Object.keys(w);b<O.length;b++){var D=O[b],$=w[D];if(D===r.schema.primKey.keyPath){if(yt($,y)!==0)throw new X.Constraint("Cannot update primary key in bulkUpdate()")}else ft(A,D,$)}u.push(S),_.push(y),g.push(A)}});var T=_.length;return i.mutate({trans:d,type:"put",keys:_,values:g,updates:{keys:a,changeSpecs:c}}).then(function(v){var S=v.numFailures,y=v.failures;if(S===0)return T;for(var w=0,A=Object.keys(y);w<A.length;w++){var b,O=A[w],D=u[Number(O)];D!=null&&(b=y[O],delete y[O],y[D]=b)}throw new jt("".concat(r.name,".bulkUpdate(): ").concat(S," of ").concat(T," operations failed"),y)})})})},$t.prototype.bulkDelete=function(e){var r=this,i=e.length;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"delete",keys:e})}).then(function(d){var c=d.numFailures,u=d.lastResult,d=d.failures;if(c===0)return u;throw new jt("".concat(r.name,".bulkDelete(): ").concat(c," of ").concat(i," operations failed"),d)})},$t);function $t(){}function jn(e){function r(d,p){if(p){for(var _=arguments.length,g=new Array(_-1);--_;)g[_-1]=arguments[_];return i[d].subscribe.apply(null,g),e}if(typeof d=="string")return i[d]}var i={};r.addEventType=u;for(var a=1,c=arguments.length;a<c;++a)u(arguments[a]);return r;function u(d,p,_){if(typeof d!="object"){var g;p=p||ui;var T={subscribers:[],fire:_=_||vt,subscribe:function(v){T.subscribers.indexOf(v)===-1&&(T.subscribers.push(v),T.fire=p(T.fire,v))},unsubscribe:function(v){T.subscribers=T.subscribers.filter(function(S){return S!==v}),T.fire=T.subscribers.reduce(p,_)}};return i[d]=r[d]=T}f(g=d).forEach(function(v){var S=g[v];if(m(S))u(v,g[v][0],g[v][1]);else{if(S!=="asap")throw new X.InvalidArgument("Invalid event config");var y=u(v,te,function(){for(var w=arguments.length,A=new Array(w);w--;)A[w]=arguments[w];y.subscribers.forEach(function(b){mt(function(){b.apply(null,A)})})})}})}}function Hn(e,r){return tt(r).from({prototype:e}),r}function vn(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function bi(e,r){e.filter=Qe(e.filter,r)}function wi(e,r,i){var a=e.replayFilter;e.replayFilter=a?function(){return Qe(a(),r())}:r,e.justLimit=i&&!a}function mr(e,r){if(e.isPrimKey)return r.primaryKey;var i=r.getIndexByKeyPath(e.index);if(!i)throw new X.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return i}function zs(e,r,i){var a=mr(e,r.schema);return r.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function vr(e,r,i,a){var c=e.replayFilter?Qe(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},d=function(p,_,g){var T,v;c&&!c(_,g,function(S){return _.stop(S)},function(S){return _.fail(S)})||((v=""+(T=_.primaryKey))=="[object ArrayBuffer]"&&(v=""+new Uint8Array(T)),k(u,v)||(u[v]=!0,r(p,_,g)))};return Promise.all([e.or._iterate(d,i),Xs(zs(e,a,i),e.algorithm,d,!e.keysOnly&&e.valueMapper)])}return Xs(zs(e,a,i),Qe(e.algorithm,c),r,!e.keysOnly&&e.valueMapper)}function Xs(e,r,i,a){var c=Nt(a?function(u,d,p){return i(a(u),d,p)}:i);return e.then(function(u){if(u)return u.start(function(){var d=function(){return u.continue()};r&&!r(u,function(p){return d=p},function(p){u.stop(p),d=vt},function(p){u.fail(p),d=vt})||c(u.value,u,function(p){return d=p}),d()})})}var we=Symbol(),Kn=(Gs.prototype.execute=function(e){if(this.add!==void 0){var r=this.add;if(m(r))return l(l([],m(e)?e:[],!0),r).sort();if(typeof r=="number")return(Number(e)||0)+r;if(typeof r=="bigint")try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(this.remove!==void 0){var i=this.remove;if(m(i))return m(e)?e.filter(function(a){return!i.includes(a)}).sort():[];if(typeof i=="number")return Number(e)-i;if(typeof i=="bigint")try{return BigInt(e)-i}catch{return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return r=(r=this.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof e=="string"&&e.startsWith(r)?this.replacePrefix[1]+e.substring(r.length):e},Gs);function Gs(e){Object.assign(this,e)}var cl=(bt.prototype._read=function(e,r){var i=this._ctx;return i.error?i.table._trans(null,Pt.bind(null,i.error)):i.table._trans("readonly",e).then(r)},bt.prototype._write=function(e){var r=this._ctx;return r.error?r.table._trans(null,Pt.bind(null,r.error)):r.table._trans("readwrite",e,"locked")},bt.prototype._addAlgorithm=function(e){var r=this._ctx;r.algorithm=Qe(r.algorithm,e)},bt.prototype._iterate=function(e,r){return vr(this._ctx,e,r,this._ctx.table.core)},bt.prototype.clone=function(e){var r=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&E(i,e),r._ctx=i,r},bt.prototype.raw=function(){return this._ctx.valueMapper=null,this},bt.prototype.each=function(e){var r=this._ctx;return this._read(function(i){return vr(r,e,i,r.table.core)})},bt.prototype.count=function(e){var r=this;return this._read(function(i){var a=r._ctx,c=a.table.core;if(vn(a,!0))return c.count({trans:i,query:{index:mr(a,c.schema),range:a.range}}).then(function(d){return Math.min(d,a.limit)});var u=0;return vr(a,function(){return++u,!1},i,c).then(function(){return u})}).then(e)},bt.prototype.sortBy=function(e,r){var i=e.split(".").reverse(),a=i[0],c=i.length-1;function u(_,g){return g?u(_[i[g]],g-1):_[a]}var d=this._ctx.dir==="next"?1:-1;function p(_,g){return _=u(_,c),g=u(g,c),_<g?-d:g<_?d:0}return this.toArray(function(_){return _.sort(p)}).then(r)},bt.prototype.toArray=function(e){var r=this;return this._read(function(i){var a=r._ctx;if(a.dir==="next"&&vn(a,!0)&&0<a.limit){var c=a.valueMapper,u=mr(a,a.table.core.schema);return a.table.core.query({trans:i,limit:a.limit,values:!0,query:{index:u,range:a.range}}).then(function(p){return p=p.result,c?p.map(c):p})}var d=[];return vr(a,function(p){return d.push(p)},i,a.table.core).then(function(){return d})},e)},bt.prototype.offset=function(e){var r=this._ctx;return e<=0||(r.offset+=e,vn(r)?wi(r,function(){var i=e;return function(a,c){return i===0||(i===1?--i:c(function(){a.advance(i),i=0}),!1)}}):wi(r,function(){var i=e;return function(){return--i<0}})),this},bt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),wi(this._ctx,function(){var r=e;return function(i,a,c){return--r<=0&&a(c),0<=r}},!0),this},bt.prototype.until=function(e,r){return bi(this._ctx,function(i,a,c){return!e(i.value)||(a(c),r)}),this},bt.prototype.first=function(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)},bt.prototype.last=function(e){return this.reverse().first(e)},bt.prototype.filter=function(e){var r;return bi(this._ctx,function(i){return e(i.value)}),(r=this._ctx).isMatch=Qe(r.isMatch,e),this},bt.prototype.and=function(e){return this.filter(e)},bt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},bt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},bt.prototype.desc=function(){return this.reverse()},bt.prototype.eachKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(i,a){e(a.key,a)})},bt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},bt.prototype.eachPrimaryKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(i,a){e(a.primaryKey,a)})},bt.prototype.keys=function(e){var r=this._ctx;r.keysOnly=!r.isMatch;var i=[];return this.each(function(a,c){i.push(c.key)}).then(function(){return i}).then(e)},bt.prototype.primaryKeys=function(e){var r=this._ctx;if(r.dir==="next"&&vn(r,!0)&&0<r.limit)return this._read(function(a){var c=mr(r,r.table.core.schema);return r.table.core.query({trans:a,values:!1,limit:r.limit,query:{index:c,range:r.range}})}).then(function(a){return a.result}).then(e);r.keysOnly=!r.isMatch;var i=[];return this.each(function(a,c){i.push(c.primaryKey)}).then(function(){return i}).then(e)},bt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},bt.prototype.firstKey=function(e){return this.limit(1).keys(function(r){return r[0]}).then(e)},bt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},bt.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var r={};return bi(this._ctx,function(c){var a=c.primaryKey.toString(),c=k(r,a);return r[a]=!0,!c}),this},bt.prototype.modify=function(e){var r=this,i=this._ctx;return this._write(function(a){var c,u,d;d=typeof e=="function"?e:(c=f(e),u=c.length,function(b){for(var O=!1,D=0;D<u;++D){var $=c[D],N=e[$],R=st(b,$);N instanceof Kn?(ft(b,$,N.execute(R)),O=!0):R!==N&&(ft(b,$,N),O=!0)}return O});function p(b,$){var D=$.failures,$=$.numFailures;w+=b-$;for(var N=0,R=f(D);N<R.length;N++){var V=R[N];y.push(D[V])}}var _=i.table.core,g=_.schema.primaryKey,T=g.outbound,v=g.extractKey,S=r.db._options.modifyChunkSize||200,y=[],w=0,A=[];return r.clone().primaryKeys().then(function(b){function O($){var N=Math.min(S,b.length-$);return _.getMany({trans:a,keys:b.slice($,$+N),cache:"immutable"}).then(function(R){for(var V=[],M=[],K=T?[]:null,Y=[],P=0;P<N;++P){var at=R[P],ct={value:At(at),primKey:b[$+P]};d.call(ct,ct.value,ct)!==!1&&(ct.value==null?Y.push(b[$+P]):T||yt(v(at),v(ct.value))===0?(M.push(ct.value),T&&K.push(b[$+P])):(Y.push(b[$+P]),V.push(ct.value)))}return Promise.resolve(0<V.length&&_.mutate({trans:a,type:"add",values:V}).then(function(pt){for(var ht in pt.failures)Y.splice(parseInt(ht),1);p(V.length,pt)})).then(function(){return(0<M.length||D&&typeof e=="object")&&_.mutate({trans:a,type:"put",keys:K,values:M,criteria:D,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<$}).then(function(pt){return p(M.length,pt)})}).then(function(){return(0<Y.length||D&&e===Ei)&&_.mutate({trans:a,type:"delete",keys:Y,criteria:D,isAdditionalChunk:0<$}).then(function(pt){return p(Y.length,pt)})}).then(function(){return b.length>$+N&&O($+S)})})}var D=vn(i)&&i.limit===1/0&&(typeof e!="function"||e===Ei)&&{index:i.index,range:i.range};return O(0).then(function(){if(0<y.length)throw new Ct("Error modifying one or more objects",y,w,A);return b.length})})})},bt.prototype.delete=function(){var e=this._ctx,r=e.range;return vn(e)&&(e.isPrimKey||r.type===3)?this._write(function(i){var a=e.table.core.schema.primaryKey,c=r;return e.table.core.count({trans:i,query:{index:a,range:c}}).then(function(u){return e.table.core.mutate({trans:i,type:"deleteRange",range:c}).then(function(d){var p=d.failures;if(d.lastResult,d.results,d=d.numFailures,d)throw new Ct("Could not delete some values",Object.keys(p).map(function(_){return p[_]}),u-d);return u-d})})}):this.modify(Ei)},bt);function bt(){}var Ei=function(e,r){return r.value=null};function ul(e,r){return e<r?-1:e===r?0:1}function fl(e,r){return r<e?-1:e===r?0:1}function ee(e,r,i){return e=e instanceof Js?new e.Collection(e):e,e._ctx.error=new(i||TypeError)(r),e}function gn(e){return new e.Collection(e,function(){return Qs("")}).limit(0)}function gr(e,r,i,a){var c,u,d,p,_,g,T,v=i.length;if(!i.every(function(w){return typeof w=="string"}))return ee(e,Vs);function S(w){c=w==="next"?function(b){return b.toUpperCase()}:function(b){return b.toLowerCase()},u=w==="next"?function(b){return b.toLowerCase()}:function(b){return b.toUpperCase()},d=w==="next"?ul:fl;var A=i.map(function(b){return{lower:u(b),upper:c(b)}}).sort(function(b,O){return d(b.lower,O.lower)});p=A.map(function(b){return b.upper}),_=A.map(function(b){return b.lower}),T=(g=w)==="next"?"":a}S("next"),e=new e.Collection(e,function(){return Re(p[0],_[v-1]+a)}),e._ondirectionchange=function(w){S(w)};var y=0;return e._addAlgorithm(function(w,A,b){var O=w.key;if(typeof O!="string")return!1;var D=u(O);if(r(D,_,y))return!0;for(var $=null,N=y;N<v;++N){var R=function(V,M,K,Y,P,at){for(var ct=Math.min(V.length,Y.length),pt=-1,ht=0;ht<ct;++ht){var fe=M[ht];if(fe!==Y[ht])return P(V[ht],K[ht])<0?V.substr(0,ht)+K[ht]+K.substr(ht+1):P(V[ht],Y[ht])<0?V.substr(0,ht)+Y[ht]+K.substr(ht+1):0<=pt?V.substr(0,pt)+M[pt]+K.substr(pt+1):null;P(V[ht],fe)<0&&(pt=ht)}return ct<Y.length&&at==="next"?V+K.substr(V.length):ct<V.length&&at==="prev"?V.substr(0,K.length):pt<0?null:V.substr(0,pt)+Y[pt]+K.substr(pt+1)}(O,D,p[N],_[N],d,g);R===null&&$===null?y=N+1:($===null||0<d($,R))&&($=R)}return A($!==null?function(){w.continue($+T)}:b),!1}),e}function Re(e,r,i,a){return{type:2,lower:e,upper:r,lowerOpen:i,upperOpen:a}}function Qs(e){return{type:1,lower:e,upper:e}}var Js=(Object.defineProperty(Bt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Bt.prototype.between=function(e,r,i,a){i=i!==!1,a=a===!0;try{return 0<this._cmp(e,r)||this._cmp(e,r)===0&&(i||a)&&(!i||!a)?gn(this):new this.Collection(this,function(){return Re(e,r,!i,!a)})}catch{return ee(this,be)}},Bt.prototype.equals=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Qs(e)})},Bt.prototype.above=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Re(e,void 0,!0)})},Bt.prototype.aboveOrEqual=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Re(e,void 0,!1)})},Bt.prototype.below=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Re(void 0,e,!1,!0)})},Bt.prototype.belowOrEqual=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Re(void 0,e)})},Bt.prototype.startsWith=function(e){return typeof e!="string"?ee(this,Vs):this.between(e,e+Ge,!0,!0)},Bt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):gr(this,function(r,i){return r.indexOf(i[0])===0},[e],Ge)},Bt.prototype.equalsIgnoreCase=function(e){return gr(this,function(r,i){return r===i[0]},[e],"")},Bt.prototype.anyOfIgnoreCase=function(){var e=Z.apply(J,arguments);return e.length===0?gn(this):gr(this,function(r,i){return i.indexOf(r)!==-1},e,"")},Bt.prototype.startsWithAnyOfIgnoreCase=function(){var e=Z.apply(J,arguments);return e.length===0?gn(this):gr(this,function(r,i){return i.some(function(a){return r.indexOf(a)===0})},e,Ge)},Bt.prototype.anyOf=function(){var e=this,r=Z.apply(J,arguments),i=this._cmp;try{r.sort(i)}catch{return ee(this,be)}if(r.length===0)return gn(this);var a=new this.Collection(this,function(){return Re(r[0],r[r.length-1])});a._ondirectionchange=function(u){i=u==="next"?e._ascending:e._descending,r.sort(i)};var c=0;return a._addAlgorithm(function(u,d,p){for(var _=u.key;0<i(_,r[c]);)if(++c===r.length)return d(p),!1;return i(_,r[c])===0||(d(function(){u.continue(r[c])}),!1)}),a},Bt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Bt.prototype.noneOf=function(){var e=Z.apply(J,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ee(this,be)}var r=e.reduce(function(i,a){return i?i.concat([[i[i.length-1][1],a]]):[[-1/0,a]]},null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},Bt.prototype.inAnyRange=function(O,r){var i=this,a=this._cmp,c=this._ascending,u=this._descending,d=this._min,p=this._max;if(O.length===0)return gn(this);if(!O.every(function(D){return D[0]!==void 0&&D[1]!==void 0&&c(D[0],D[1])<=0}))return ee(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);var _=!r||r.includeLowers!==!1,g=r&&r.includeUppers===!0,T,v=c;function S(D,$){return v(D[0],$[0])}try{(T=O.reduce(function(D,$){for(var N=0,R=D.length;N<R;++N){var V=D[N];if(a($[0],V[1])<0&&0<a($[1],V[0])){V[0]=d(V[0],$[0]),V[1]=p(V[1],$[1]);break}}return N===R&&D.push($),D},[])).sort(S)}catch{return ee(this,be)}var y=0,w=g?function(D){return 0<c(D,T[y][1])}:function(D){return 0<=c(D,T[y][1])},A=_?function(D){return 0<u(D,T[y][0])}:function(D){return 0<=u(D,T[y][0])},b=w,O=new this.Collection(this,function(){return Re(T[0][0],T[T.length-1][1],!_,!g)});return O._ondirectionchange=function(D){v=D==="next"?(b=w,c):(b=A,u),T.sort(S)},O._addAlgorithm(function(D,$,N){for(var R,V=D.key;b(V);)if(++y===T.length)return $(N),!1;return!w(R=V)&&!A(R)||(i._cmp(V,T[y][1])===0||i._cmp(V,T[y][0])===0||$(function(){v===c?D.continue(T[y][0]):D.continue(T[y][1])}),!1)}),O},Bt.prototype.startsWithAnyOf=function(){var e=Z.apply(J,arguments);return e.every(function(r){return typeof r=="string"})?e.length===0?gn(this):this.inAnyRange(e.map(function(r){return[r,r+Ge]})):ee(this,"startsWithAnyOf() only works with strings")},Bt);function Bt(){}function de(e){return Nt(function(r){return Bn(r),e(r.target.error),!1})}function Bn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Vn="storagemutated",Ti="x-storagemutated-1",Me=jn(null,Vn),hl=(pe.prototype._lock=function(){return ot(!G.global),++this._reculock,this._reculock!==1||G.global||(G.lockOwnerFor=this),this},pe.prototype._unlock=function(){if(ot(!G.global),--this._reculock==0)for(G.global||(G.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Xe(e[1],e[0])}catch{}}return this},pe.prototype._locked=function(){return this._reculock&&G.lockOwnerFor!==this},pe.prototype.create=function(e){var r=this;if(!this.mode)return this;var i=this.db.idbdb,a=this.db._state.dbOpenError;if(ot(!this.idbtrans),!e&&!i)switch(a&&a.name){case"DatabaseClosedError":throw new X.DatabaseClosed(a);case"MissingAPIError":throw new X.MissingAPI(a.message,a);default:throw new X.OpenFailed(a)}if(!this.active)throw new X.TransactionInactive;return ot(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Nt(function(c){Bn(c),r._reject(e.error)}),e.onabort=Nt(function(c){Bn(c),r.active&&r._reject(new X.Abort(e.error)),r.active=!1,r.on("abort").fire(c)}),e.oncomplete=Nt(function(){r.active=!1,r._resolve(),"mutatedParts"in e&&Me.storagemutated.fire(e.mutatedParts)}),this},pe.prototype._promise=function(e,r,i){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return Pt(new X.ReadOnly("Transaction is readonly"));if(!this.active)return Pt(new X.TransactionInactive);if(this._locked())return new W(function(u,d){a._blockedFuncs.push([function(){a._promise(e,r,i).then(u,d)},G])});if(i)return xe(function(){var u=new W(function(d,p){a._lock();var _=r(d,p,a);_&&_.then&&_.then(d,p)});return u.finally(function(){return a._unlock()}),u._lib=!0,u});var c=new W(function(u,d){var p=r(u,d,a);p&&p.then&&p.then(u,d)});return c._lib=!0,c},pe.prototype._root=function(){return this.parent?this.parent._root():this},pe.prototype.waitFor=function(e){var r,i=this._root(),a=W.resolve(e);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return a}):(i._waitingFor=a,i._waitingQueue=[],r=i.idbtrans.objectStore(i.storeNames[0]),function u(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(r.get(-1/0).onsuccess=u)}());var c=i._waitingFor;return new W(function(u,d){a.then(function(p){return i._waitingQueue.push(Nt(u.bind(null,p)))},function(p){return i._waitingQueue.push(Nt(d.bind(null,p)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},pe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))},pe.prototype.table=function(e){var r=this._memoizedTables||(this._memoizedTables={});if(k(r,e))return r[e];var i=this.schema[e];if(!i)throw new X.NotFound("Table "+e+" not part of transaction");return i=new this.db.Table(e,i,this),i.core=this.db.core.table(e),r[e]=i},pe);function pe(){}function Si(e,r,i,a,c,u,d){return{name:e,keyPath:r,unique:i,multi:a,auto:c,compound:u,src:(i&&!d?"&":"")+(a?"*":"")+(c?"++":"")+Zs(r)}}function Zs(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ai(e,r,i){return{name:e,primKey:r,indexes:i,mappedClass:null,idxByName:(a=function(c){return[c.name,c]},i.reduce(function(c,u,d){return d=a(u,d),d&&(c[d[0]]=d[1]),c},{}))};var a}var Yn=function(e){try{return e.only([[]]),Yn=function(){return[[]]},[[]]}catch{return Yn=function(){return Ge},Ge}};function Oi(e){return e==null?function(){}:typeof e=="string"?(r=e).split(".").length===1?function(i){return i[r]}:function(i){return st(i,r)}:function(i){return st(i,e)};var r}function to(e){return[].slice.call(e)}var dl=0;function qn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function pl(e,r,_){function a(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=b.lower,w=b.upper,A=b.lowerOpen,b=b.upperOpen;return y===void 0?w===void 0?null:r.upperBound(w,!!b):w===void 0?r.lowerBound(y,!!A):r.bound(y,w,!!A,!!b)}function c(S){var y,w=S.name;return{name:w,schema:S,mutate:function(A){var b=A.trans,O=A.type,D=A.keys,$=A.values,N=A.range;return new Promise(function(R,V){R=Nt(R);var M=b.objectStore(w),K=M.keyPath==null,Y=O==="put"||O==="add";if(!Y&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var P,at=(D||$||{length:1}).length;if(D&&$&&D.length!==$.length)throw new Error("Given keys array must have same length as given values array.");if(at===0)return R({numFailures:0,failures:{},results:[],lastResult:void 0});function ct(Xt){++fe,Bn(Xt)}var pt=[],ht=[],fe=0;if(O==="deleteRange"){if(N.type===4)return R({numFailures:fe,failures:ht,results:[],lastResult:void 0});N.type===3?pt.push(P=M.clear()):pt.push(P=M.delete(a(N)))}else{var K=Y?K?[$,D]:[$,null]:[D,null],dt=K[0],qt=K[1];if(Y)for(var Ft=0;Ft<at;++Ft)pt.push(P=qt&&qt[Ft]!==void 0?M[O](dt[Ft],qt[Ft]):M[O](dt[Ft])),P.onerror=ct;else for(Ft=0;Ft<at;++Ft)pt.push(P=M[O](dt[Ft])),P.onerror=ct}function Lr(Xt){Xt=Xt.target.result,pt.forEach(function(tn,qi){return tn.error!=null&&(ht[qi]=tn.error)}),R({numFailures:fe,failures:ht,results:O==="delete"?D:pt.map(function(tn){return tn.result}),lastResult:Xt})}P.onerror=function(Xt){ct(Xt),Lr(Xt)},P.onsuccess=Lr})},getMany:function(A){var b=A.trans,O=A.keys;return new Promise(function(D,$){D=Nt(D);for(var N,R=b.objectStore(w),V=O.length,M=new Array(V),K=0,Y=0,P=function(pt){pt=pt.target,M[pt._pos]=pt.result,++Y===K&&D(M)},at=de($),ct=0;ct<V;++ct)O[ct]!=null&&((N=R.get(O[ct]))._pos=ct,N.onsuccess=P,N.onerror=at,++K);K===0&&D(M)})},get:function(A){var b=A.trans,O=A.key;return new Promise(function(D,$){D=Nt(D);var N=b.objectStore(w).get(O);N.onsuccess=function(R){return D(R.target.result)},N.onerror=de($)})},query:(y=g,function(A){return new Promise(function(b,O){b=Nt(b);var D,$,N,K=A.trans,R=A.values,V=A.limit,P=A.query,M=V===1/0?void 0:V,Y=P.index,P=P.range,K=K.objectStore(w),Y=Y.isPrimaryKey?K:K.index(Y.name),P=a(P);if(V===0)return b({result:[]});y?((M=R?Y.getAll(P,M):Y.getAllKeys(P,M)).onsuccess=function(at){return b({result:at.target.result})},M.onerror=de(O)):(D=0,$=!R&&"openKeyCursor"in Y?Y.openKeyCursor(P):Y.openCursor(P),N=[],$.onsuccess=function(at){var ct=$.result;return ct?(N.push(R?ct.value:ct.primaryKey),++D===V?b({result:N}):void ct.continue()):b({result:N})},$.onerror=de(O))})}),openCursor:function(A){var b=A.trans,O=A.values,D=A.query,$=A.reverse,N=A.unique;return new Promise(function(R,V){R=Nt(R);var Y=D.index,M=D.range,K=b.objectStore(w),K=Y.isPrimaryKey?K:K.index(Y.name),Y=$?N?"prevunique":"prev":N?"nextunique":"next",P=!O&&"openKeyCursor"in K?K.openKeyCursor(a(M),Y):K.openCursor(a(M),Y);P.onerror=de(V),P.onsuccess=Nt(function(at){var ct,pt,ht,fe,dt=P.result;dt?(dt.___id=++dl,dt.done=!1,ct=dt.continue.bind(dt),pt=(pt=dt.continuePrimaryKey)&&pt.bind(dt),ht=dt.advance.bind(dt),fe=function(){throw new Error("Cursor not stopped")},dt.trans=b,dt.stop=dt.continue=dt.continuePrimaryKey=dt.advance=function(){throw new Error("Cursor not started")},dt.fail=Nt(V),dt.next=function(){var qt=this,Ft=1;return this.start(function(){return Ft--?qt.continue():qt.stop()}).then(function(){return qt})},dt.start=function(qt){function Ft(){if(P.result)try{qt()}catch(Xt){dt.fail(Xt)}else dt.done=!0,dt.start=function(){throw new Error("Cursor behind last entry")},dt.stop()}var Lr=new Promise(function(Xt,tn){Xt=Nt(Xt),P.onerror=de(tn),dt.fail=tn,dt.stop=function(qi){dt.stop=dt.continue=dt.continuePrimaryKey=dt.advance=fe,Xt(qi)}});return P.onsuccess=Nt(function(Xt){P.onsuccess=Ft,Ft()}),dt.continue=ct,dt.continuePrimaryKey=pt,dt.advance=ht,Ft(),Lr},R(dt)):R(null)},V)})},count:function(A){var b=A.query,O=A.trans,D=b.index,$=b.range;return new Promise(function(N,R){var V=O.objectStore(w),M=D.isPrimaryKey?V:V.index(D.name),V=a($),M=V?M.count(V):M.count();M.onsuccess=Nt(function(K){return N(K.target.result)}),M.onerror=de(R)})}}}var u,d,p,T=(d=_,p=to((u=e).objectStoreNames),{schema:{name:u.name,tables:p.map(function(S){return d.objectStore(S)}).map(function(S){var y=S.keyPath,b=S.autoIncrement,w=m(y),A={},b={name:S.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:w,keyPath:y,autoIncrement:b,unique:!0,extractKey:Oi(y)},indexes:to(S.indexNames).map(function(O){return S.index(O)}).map(function(N){var D=N.name,$=N.unique,R=N.multiEntry,N=N.keyPath,R={name:D,compound:m(N),keyPath:N,unique:$,multiEntry:R,extractKey:Oi(N)};return A[qn(N)]=R}),getIndexByKeyPath:function(O){return A[qn(O)]}};return A[":id"]=b.primaryKey,y!=null&&(A[qn(y)]=b.primaryKey),b})},hasGetAll:0<p.length&&"getAll"in d.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),_=T.schema,g=T.hasGetAll,T=_.tables.map(c),v={};return T.forEach(function(S){return v[S.name]=S}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(S){if(!v[S])throw new Error("Table '".concat(S,"' not found"));return v[S]},MIN_KEY:-1/0,MAX_KEY:Yn(r),schema:_}}function ml(e,r,i,a){var c=i.IDBKeyRange;return i.indexedDB,{dbcore:(a=pl(r,c,a),e.dbcore.reduce(function(u,d){return d=d.create,s(s({},u),d(u))},a))}}function yr(e,a){var i=a.db,a=ml(e._middlewares,i,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(c){var u=c.name;e.core.schema.tables.some(function(d){return d.name===u})&&(c.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=c.core))})}function _r(e,r,i,a){i.forEach(function(c){var u=a[c];r.forEach(function(d){var p=function _(g,T){return it(g,T)||(g=L(g))&&_(g,T)}(d,c);(!p||"value"in p&&p.value===void 0)&&(d===e.Transaction.prototype||d instanceof e.Transaction?Q(d,c,{get:function(){return this.table(c)},set:function(_){F(this,c,{value:_,writable:!0,configurable:!0,enumerable:!0})}}):d[c]=new e.Table(c,u))})})}function Ci(e,r){r.forEach(function(i){for(var a in i)i[a]instanceof e.Table&&delete i[a]})}function vl(e,r){return e._cfg.version-r._cfg.version}function gl(e,r,i,a){var c=e._dbSchema;i.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=Ai("$meta",no("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,c);u.create(i),u._completion.catch(a);var d=u._reject.bind(u),p=G.transless||G;xe(function(){return G.trans=u,G.transless=p,r!==0?(yr(e,i),g=r,((_=u).storeNames.includes("$meta")?_.table("$meta").get("version").then(function(T){return T??g}):W.resolve(g)).then(function(T){return S=T,y=u,w=i,A=[],T=(v=e)._versions,b=v._dbSchema=wr(0,v.idbdb,w),(T=T.filter(function(O){return O._cfg.version>=S})).length!==0?(T.forEach(function(O){A.push(function(){var D=b,$=O._cfg.dbschema;Er(v,D,w),Er(v,$,w),b=v._dbSchema=$;var N=Di(D,$);N.add.forEach(function(Y){$i(w,Y[0],Y[1].primKey,Y[1].indexes)}),N.change.forEach(function(Y){if(Y.recreate)throw new X.Upgrade("Not yet support for changing primary key");var P=w.objectStore(Y.name);Y.add.forEach(function(at){return br(P,at)}),Y.change.forEach(function(at){P.deleteIndex(at.name),br(P,at)}),Y.del.forEach(function(at){return P.deleteIndex(at)})});var R=O._cfg.contentUpgrade;if(R&&O._cfg.version>S){yr(v,w),y._memoizedTables={};var V=Lt($);N.del.forEach(function(Y){V[Y]=D[Y]}),Ci(v,[v.Transaction.prototype]),_r(v,[v.Transaction.prototype],f(V),V),y.schema=V;var M,K=gt(R);return K&&pn(),N=W.follow(function(){var Y;(M=R(y))&&K&&(Y=Ie.bind(null,null),M.then(Y,Y))}),M&&typeof M.then=="function"?W.resolve(M):N.then(function(){return M})}}),A.push(function(D){var $,N,R=O._cfg.dbschema;$=R,N=D,[].slice.call(N.db.objectStoreNames).forEach(function(V){return $[V]==null&&N.db.deleteObjectStore(V)}),Ci(v,[v.Transaction.prototype]),_r(v,[v.Transaction.prototype],v._storeNames,v._dbSchema),y.schema=v._dbSchema}),A.push(function(D){v.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(v.idbdb.version/10)===O._cfg.version?(v.idbdb.deleteObjectStore("$meta"),delete v._dbSchema.$meta,v._storeNames=v._storeNames.filter(function($){return $!=="$meta"})):D.objectStore("$meta").put(O._cfg.version,"version"))})}),function O(){return A.length?W.resolve(A.shift()(y.idbtrans)).then(O):W.resolve()}().then(function(){eo(b,w)})):W.resolve();var v,S,y,w,A,b}).catch(d)):(f(c).forEach(function(T){$i(i,T,c[T].primKey,c[T].indexes)}),yr(e,i),void W.follow(function(){return e.on.populate.fire(u)}).catch(d));var _,g})}function yl(e,r){eo(e._dbSchema,r),r.db.version%10!=0||r.objectStoreNames.contains("$meta")||r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var i=wr(0,e.idbdb,r);Er(e,e._dbSchema,r);for(var a=0,c=Di(i,e._dbSchema).change;a<c.length;a++){var u=function(d){if(d.change.length||d.recreate)return console.warn("Unable to patch indexes of table ".concat(d.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=r.objectStore(d.name);d.add.forEach(function(_){Ut&&console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name,".").concat(_.src)),br(p,_)})}(c[a]);if(typeof u=="object")return u.value}}function Di(e,r){var i,a={del:[],add:[],change:[]};for(i in e)r[i]||a.del.push(i);for(i in r){var c=e[i],u=r[i];if(c){var d={name:i,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||c.primKey.auto!==u.primKey.auto)d.recreate=!0,a.change.push(d);else{var p=c.idxByName,_=u.idxByName,g=void 0;for(g in p)_[g]||d.del.push(g);for(g in _){var T=p[g],v=_[g];T?T.src!==v.src&&d.change.push(v):d.add.push(v)}(0<d.del.length||0<d.add.length||0<d.change.length)&&a.change.push(d)}}else a.add.push([i,u])}return a}function $i(e,r,i,a){var c=e.db.createObjectStore(r,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return a.forEach(function(u){return br(c,u)}),c}function eo(e,r){f(e).forEach(function(i){r.db.objectStoreNames.contains(i)||(Ut&&console.debug("Dexie: Creating missing table",i),$i(r,i,e[i].primKey,e[i].indexes))})}function br(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function wr(e,r,i){var a={};return _t(r.objectStoreNames,0).forEach(function(c){for(var u=i.objectStore(c),d=Si(Zs(g=u.keyPath),g||"",!0,!1,!!u.autoIncrement,g&&typeof g!="string",!0),p=[],_=0;_<u.indexNames.length;++_){var T=u.index(u.indexNames[_]),g=T.keyPath,T=Si(T.name,g,!!T.unique,!!T.multiEntry,!1,g&&typeof g!="string",!1);p.push(T)}a[c]=Ai(c,d,p)}),a}function Er(e,r,i){for(var a=i.db.objectStoreNames,c=0;c<a.length;++c){var u=a[c],d=i.objectStore(u);e._hasGetAll="getAll"in d;for(var p=0;p<d.indexNames.length;++p){var _=d.indexNames[p],g=d.index(_).keyPath,T=typeof g=="string"?g:"["+_t(g).join("+")+"]";!r[u]||(g=r[u].idxByName[T])&&(g.name=_,delete r[u].idxByName[T],r[u].idxByName[_]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function no(e){return e.split(",").map(function(r,i){var a=(r=r.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return Si(a,c||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),m(c),i===0)})}var _l=(Tr.prototype._parseStoresSpec=function(e,r){f(e).forEach(function(i){if(e[i]!==null){var a=no(e[i]),c=a.shift();if(c.unique=!0,c.multi)throw new X.Schema("Primary key cannot be multi-valued");a.forEach(function(u){if(u.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")}),r[i]=Ai(i,c,a)}})},Tr.prototype.stores=function(i){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?E(this._cfg.storesSource,i):i;var i=r._versions,a={},c={};return i.forEach(function(u){E(a,u._cfg.storesSource),c=u._cfg.dbschema={},u._parseStoresSpec(a,c)}),r._dbSchema=c,Ci(r,[r._allTables,r,r.Transaction.prototype]),_r(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],f(c),c),r._storeNames=f(c),this},Tr.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||vt,e),this},Tr);function Tr(){}function Li(e,r){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new Ee(dr,{addons:[],indexedDB:e,IDBKeyRange:r})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function Ni(e){return e&&typeof e.databases=="function"}function ki(e){return xe(function(){return G.letThrough=!0,e()})}function xi(e){return!("from"in e)}var zt=function(e,r){if(!this){var i=new zt;return e&&"d"in e&&E(i,e),i}E(this,arguments.length?{d:1,from:e,to:1<arguments.length?r:e}:{d:0})};function Fn(e,r,i){var a=yt(r,i);if(!isNaN(a)){if(0<a)throw RangeError();if(xi(e))return E(e,{from:r,to:i,d:1});var c=e.l,a=e.r;if(yt(i,e.from)<0)return c?Fn(c,r,i):e.l={from:r,to:i,d:1,l:null,r:null},io(e);if(0<yt(r,e.to))return a?Fn(a,r,i):e.r={from:r,to:i,d:1,l:null,r:null},io(e);yt(r,e.from)<0&&(e.from=r,e.l=null,e.d=a?a.d+1:1),0<yt(i,e.to)&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1),i=!e.r,c&&!e.l&&Wn(e,c),a&&i&&Wn(e,a)}}function Wn(e,r){xi(r)||function i(a,_){var u=_.from,d=_.to,p=_.l,_=_.r;Fn(a,u,d),p&&i(a,p),_&&i(a,_)}(e,r)}function ro(e,r){var i=Sr(r),a=i.next();if(a.done)return!1;for(var c=a.value,u=Sr(e),d=u.next(c.from),p=d.value;!a.done&&!d.done;){if(yt(p.from,c.to)<=0&&0<=yt(p.to,c.from))return!0;yt(c.from,p.from)<0?c=(a=i.next(p.from)).value:p=(d=u.next(c.from)).value}return!1}function Sr(e){var r=xi(e)?null:{s:0,n:e};return{next:function(i){for(var a=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,a)for(;r.n.l&&yt(i,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!a||yt(i,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function io(e){var r,i,a=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),c=1<a?"r":a<-1?"l":"";c&&(r=c=="r"?"l":"r",i=s({},e),a=e[c],e.from=a.from,e.to=a.to,e[c]=a[c],i[c]=a[r],(e[r]=i).d=so(i)),e.d=so(e)}function so(i){var r=i.r,i=i.l;return(r?i?Math.max(r.d,i.d):r.d:i?i.d:0)+1}function Ar(e,r){return f(r).forEach(function(i){e[i]?Wn(e[i],r[i]):e[i]=function a(c){var u,d,p={};for(u in c)k(c,u)&&(d=c[u],p[u]=!d||typeof d!="object"||rt.has(d.constructor)?d:a(d));return p}(r[i])}),e}function Ii(e,r){return e.all||r.all||Object.keys(e).some(function(i){return r[i]&&ro(r[i],e[i])})}H(zt.prototype,((se={add:function(e){return Wn(this,e),this},addKey:function(e){return Fn(this,e,e),this},addKeys:function(e){var r=this;return e.forEach(function(i){return Fn(r,i,i)}),this},hasKey:function(e){var r=Sr(this).next(e).value;return r&&yt(r.from,e)<=0&&0<=yt(r.to,e)}})[j]=function(){return Sr(this)},se));var Je={},Pi={},Ri=!1;function Or(e){Ar(Pi,e),Ri||(Ri=!0,setTimeout(function(){Ri=!1,Mi(Pi,!(Pi={}))},0))}function Mi(e,r){r===void 0&&(r=!1);var i=new Set;if(e.all)for(var a=0,c=Object.values(Je);a<c.length;a++)oo(d=c[a],e,i,r);else for(var u in e){var d,p=/^idb\:\/\/(.*)\/(.*)\//.exec(u);p&&(u=p[1],p=p[2],(d=Je["idb://".concat(u,"/").concat(p)])&&oo(d,e,i,r))}i.forEach(function(_){return _()})}function oo(e,r,i,a){for(var c=[],u=0,d=Object.entries(e.queries.query);u<d.length;u++){for(var p=d[u],_=p[0],g=[],T=0,v=p[1];T<v.length;T++){var S=v[T];Ii(r,S.obsSet)?S.subscribers.forEach(function(b){return i.add(b)}):a&&g.push(S)}a&&c.push([_,g])}if(a)for(var y=0,w=c;y<w.length;y++){var A=w[y],_=A[0],g=A[1];e.queries.query[_]=g}}function bl(e){var r=e._state,i=e._deps.indexedDB;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?Pt(r.dbOpenError):e});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var a=r.openCanceller,c=Math.round(10*e.verno),u=!1;function d(){if(r.openCanceller!==a)throw new X.DatabaseClosed("db.open() was cancelled")}function p(){return new W(function(S,y){if(d(),!i)throw new X.MissingAPI;var w=e.name,A=r.autoSchema||!c?i.open(w):i.open(w,c);if(!A)throw new X.MissingAPI;A.onerror=de(y),A.onblocked=Nt(e._fireOnBlocked),A.onupgradeneeded=Nt(function(b){var O;T=A.transaction,r.autoSchema&&!e._options.allowEmptyDB?(A.onerror=Bn,T.abort(),A.result.close(),(O=i.deleteDatabase(w)).onsuccess=O.onerror=Nt(function(){y(new X.NoSuchDatabase("Database ".concat(w," doesnt exist")))})):(T.onerror=de(y),b=b.oldVersion>Math.pow(2,62)?0:b.oldVersion,v=b<1,e.idbdb=A.result,u&&yl(e,T),gl(e,b/10,T,y))},y),A.onsuccess=Nt(function(){T=null;var b,O,D,$,N,R=e.idbdb=A.result,V=_t(R.objectStoreNames);if(0<V.length)try{var M=R.transaction(($=V).length===1?$[0]:$,"readonly");if(r.autoSchema)O=R,D=M,(b=e).verno=O.version/10,D=b._dbSchema=wr(0,O,D),b._storeNames=_t(O.objectStoreNames,0),_r(b,[b._allTables],f(D),D);else if(Er(e,e._dbSchema,M),((N=Di(wr(0,(N=e).idbdb,M),N._dbSchema)).add.length||N.change.some(function(K){return K.add.length||K.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),R.close(),c=R.version+1,u=!0,S(p());yr(e,M)}catch{}mn.push(e),R.onversionchange=Nt(function(K){r.vcFired=!0,e.on("versionchange").fire(K)}),R.onclose=Nt(function(K){e.on("close").fire(K)}),v&&(N=e._deps,M=w,R=N.indexedDB,N=N.IDBKeyRange,Ni(R)||M===dr||Li(R,N).put({name:M}).catch(vt)),S()},y)}).catch(function(S){switch(S==null?void 0:S.name){case"UnknownError":if(0<r.PR1398_maxLoop)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<c)return c=0,p()}return W.reject(S)})}var _,g=r.dbReadyResolve,T=null,v=!1;return W.race([a,(typeof navigator>"u"?W.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(S){function y(){return indexedDB.databases().finally(S)}_=setInterval(y,100),y()}).finally(function(){return clearInterval(_)}):Promise.resolve()).then(p)]).then(function(){return d(),r.onReadyBeingFired=[],W.resolve(ki(function(){return e.on.ready.fire(e.vip)})).then(function S(){if(0<r.onReadyBeingFired.length){var y=r.onReadyBeingFired.reduce(ue,vt);return r.onReadyBeingFired=[],W.resolve(ki(function(){return y(e.vip)})).then(S)}})}).finally(function(){r.openCanceller===a&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(S){r.dbOpenError=S;try{T&&T.abort()}catch{}return a===r.openCanceller&&e._close(),Pt(S)}).finally(function(){r.openComplete=!0,g()}).then(function(){var S;return v&&(S={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(w){w.name&&(S["idb://".concat(e.name,"/").concat(y.name,"/").concat(w.name)]=new zt(-1/0,[[[]]]))}),S["idb://".concat(e.name,"/").concat(y.name,"/")]=S["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new zt(-1/0,[[[]]])}),Me(Vn).fire(S),Mi(S,!0)),e})}function ji(e){function r(u){return e.next(u)}var i=c(r),a=c(function(u){return e.throw(u)});function c(u){return function(_){var p=u(_),_=p.value;return p.done?_:_&&typeof _.then=="function"?_.then(i,a):m(_)?Promise.all(_).then(i,a):i(_)}}return c(r)()}function Cr(e,r,i){for(var a=m(e)?e.slice():[e],c=0;c<i;++c)a.push(r);return a}var wl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(r){var i=e.table(r),a=i.schema,c={},u=[];function d(v,S,y){var w=qn(v),A=c[w]=c[w]||[],b=v==null?0:typeof v=="string"?1:v.length,O=0<S,O=s(s({},y),{name:O?"".concat(w,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:O,keyTail:S,keyLength:b,extractKey:Oi(v),unique:!O&&y.unique});return A.push(O),O.isPrimaryKey||u.push(O),1<b&&d(b===2?v[0]:v.slice(0,b-1),S+1,y),A.sort(function(D,$){return D.keyTail-$.keyTail}),O}r=d(a.primaryKey.keyPath,0,a.primaryKey),c[":id"]=[r];for(var p=0,_=a.indexes;p<_.length;p++){var g=_[p];d(g.keyPath,0,g)}function T(v){var S,y=v.query.index;return y.isVirtual?s(s({},v),{query:{index:y.lowLevelIndex,range:(S=v.query.range,y=y.keyTail,{type:S.type===1?2:S.type,lower:Cr(S.lower,S.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:Cr(S.upper,S.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):v}return s(s({},i),{schema:s(s({},a),{primaryKey:r,indexes:u,getIndexByKeyPath:function(v){return(v=c[qn(v)])&&v[0]}}),count:function(v){return i.count(T(v))},query:function(v){return i.query(T(v))},openCursor:function(v){var S=v.query.index,y=S.keyTail,w=S.isVirtual,A=S.keyLength;return w?i.openCursor(T(v)).then(function(O){return O&&b(O)}):i.openCursor(v);function b(O){return Object.create(O,{continue:{value:function(D){D!=null?O.continue(Cr(D,v.reverse?e.MAX_KEY:e.MIN_KEY,y)):v.unique?O.continue(O.key.slice(0,A).concat(v.reverse?e.MIN_KEY:e.MAX_KEY,y)):O.continue()}},continuePrimaryKey:{value:function(D,$){O.continuePrimaryKey(Cr(D,e.MAX_KEY,y),$)}},primaryKey:{get:function(){return O.primaryKey}},key:{get:function(){var D=O.key;return A===1?D[0]:D.slice(0,A)}},value:{get:function(){return O.value}}})}}})}})}};function Hi(e,r,i,a){return i=i||{},a=a||"",f(e).forEach(function(c){var u,d,p;k(r,c)?(u=e[c],d=r[c],typeof u=="object"&&typeof d=="object"&&u&&d?(p=q(u))!==q(d)?i[a+c]=r[c]:p==="Object"?Hi(u,d,i,a+c+"."):u!==d&&(i[a+c]=r[c]):u!==d&&(i[a+c]=r[c])):i[a+c]=void 0}),f(r).forEach(function(c){k(e,c)||(i[a+c]=r[c])}),i}function Ki(e,r){return r.type==="delete"?r.keys:r.keys||r.values.map(e.extractKey)}var El={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(r){var i=e.table(r),a=i.schema.primaryKey;return s(s({},i),{mutate:function(c){var u=G.trans,d=u.table(r).hook,p=d.deleting,_=d.creating,g=d.updating;switch(c.type){case"add":if(_.fire===vt)break;return u._promise("readwrite",function(){return T(c)},!0);case"put":if(_.fire===vt&&g.fire===vt)break;return u._promise("readwrite",function(){return T(c)},!0);case"delete":if(p.fire===vt)break;return u._promise("readwrite",function(){return T(c)},!0);case"deleteRange":if(p.fire===vt)break;return u._promise("readwrite",function(){return function v(S,y,w){return i.query({trans:S,values:!1,query:{index:a,range:y},limit:w}).then(function(A){var b=A.result;return T({type:"delete",keys:b,trans:S}).then(function(O){return 0<O.numFailures?Promise.reject(O.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:v(S,s(s({},y),{lower:b[b.length-1],lowerOpen:!0}),w)})})}(c.trans,c.range,1e4)},!0)}return i.mutate(c);function T(v){var S,y,w,A=G.trans,b=v.keys||Ki(a,v);if(!b)throw new Error("Keys missing");return(v=v.type==="add"||v.type==="put"?s(s({},v),{keys:b}):s({},v)).type!=="delete"&&(v.values=l([],v.values)),v.keys&&(v.keys=l([],v.keys)),S=i,w=b,((y=v).type==="add"?Promise.resolve([]):S.getMany({trans:y.trans,keys:w,cache:"immutable"})).then(function(O){var D=b.map(function($,N){var R,V,M,K=O[N],Y={onerror:null,onsuccess:null};return v.type==="delete"?p.fire.call(Y,$,K,A):v.type==="add"||K===void 0?(R=_.fire.call(Y,$,v.values[N],A),$==null&&R!=null&&(v.keys[N]=$=R,a.outbound||ft(v.values[N],a.keyPath,$))):(R=Hi(K,v.values[N]),(V=g.fire.call(Y,R,$,K,A))&&(M=v.values[N],Object.keys(V).forEach(function(P){k(M,P)?M[P]=V[P]:ft(M,P,V[P])}))),Y});return i.mutate(v).then(function($){for(var N=$.failures,R=$.results,V=$.numFailures,$=$.lastResult,M=0;M<b.length;++M){var K=(R||b)[M],Y=D[M];K==null?Y.onerror&&Y.onerror(N[M]):Y.onsuccess&&Y.onsuccess(v.type==="put"&&O[M]?v.values[M]:K)}return{failures:N,results:R,numFailures:V,lastResult:$}}).catch(function($){return D.forEach(function(N){return N.onerror&&N.onerror($)}),Promise.reject($)})})}}})}})}};function ao(e,r,i){try{if(!r||r.keys.length<e.length)return null;for(var a=[],c=0,u=0;c<r.keys.length&&u<e.length;++c)yt(r.keys[c],e[u])===0&&(a.push(i?At(r.values[c]):r.values[c]),++u);return a.length===e.length?a:null}catch{return null}}var Tl={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var i=e.table(r);return s(s({},i),{getMany:function(a){if(!a.cache)return i.getMany(a);var c=ao(a.keys,a.trans._cache,a.cache==="clone");return c?W.resolve(c):i.getMany(a).then(function(u){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?At(u):u},u})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),i.mutate(a)}})}}}};function lo(e,r){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function co(e,r){switch(e){case"query":return r.values&&!r.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Sl={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,i=new zt(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(a,c,u){if(G.subscr&&c!=="readonly")throw new X.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(G.querier));return e.transaction(a,c,u)},table:function(a){var c=e.table(a),u=c.schema,d=u.primaryKey,v=u.indexes,p=d.extractKey,_=d.outbound,g=d.autoIncrement&&v.filter(function(y){return y.compound&&y.keyPath.includes(d.keyPath)}),T=s(s({},c),{mutate:function(y){function w(P){return P="idb://".concat(r,"/").concat(a,"/").concat(P),$[P]||($[P]=new zt)}var A,b,O,D=y.trans,$=y.mutatedParts||(y.mutatedParts={}),N=w(""),R=w(":dels"),V=y.type,Y=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[Ki(d,y).filter(function(P){return P}),y.values]:[],M=Y[0],K=Y[1],Y=y.trans._cache;return m(M)?(N.addKeys(M),(Y=V==="delete"||M.length===K.length?ao(M,Y):null)||R.addKeys(M),(Y||K)&&(A=w,b=Y,O=K,u.indexes.forEach(function(P){var at=A(P.name||"");function ct(ht){return ht!=null?P.extractKey(ht):null}function pt(ht){return P.multiEntry&&m(ht)?ht.forEach(function(fe){return at.addKey(fe)}):at.addKey(ht)}(b||O).forEach(function(ht,qt){var dt=b&&ct(b[qt]),qt=O&&ct(O[qt]);yt(dt,qt)!==0&&(dt!=null&&pt(dt),qt!=null&&pt(qt))})}))):M?(K={from:M.lower,to:M.upper},R.add(K),N.add(K)):(N.add(i),R.add(i),u.indexes.forEach(function(P){return w(P.name).add(i)})),c.mutate(y).then(function(P){return!M||y.type!=="add"&&y.type!=="put"||(N.addKeys(P.results),g&&g.forEach(function(at){var ct=y.values.map(function(ht){return at.extractKey(ht)}),pt=at.keyPath.findIndex(function(ht){return ht===d.keyPath});P.results.forEach(function(ht){return ct[pt]=ht}),w(at.name).addKeys(ct)})),D.mutatedParts=Ar(D.mutatedParts||{},$),P})}}),v=function(w){var A=w.query,w=A.index,A=A.range;return[w,new zt((w=A.lower)!==null&&w!==void 0?w:e.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:e.MAX_KEY)]},S={get:function(y){return[d,new zt(y.key)]},getMany:function(y){return[d,new zt().addKeys(y.keys)]},count:v,query:v,openCursor:v};return f(S).forEach(function(y){T[y]=function(w){var A=G.subscr,b=!!A,O=lo(G,c)&&co(y,w)?w.obsSet={}:A;if(b){var D=function(K){return K="idb://".concat(r,"/").concat(a,"/").concat(K),O[K]||(O[K]=new zt)},$=D(""),N=D(":dels"),A=S[y](w),b=A[0],A=A[1];if((y==="query"&&b.isPrimaryKey&&!w.values?N:D(b.name||"")).add(A),!b.isPrimaryKey){if(y!=="count"){var R=y==="query"&&_&&w.values&&c.query(s(s({},w),{values:!1}));return c[y].apply(this,arguments).then(function(K){if(y==="query"){if(_&&w.values)return R.then(function(ct){return ct=ct.result,$.addKeys(ct),K});var Y=w.values?K.result.map(p):K.result;(w.values?$:N).addKeys(Y)}else if(y==="openCursor"){var P=K,at=w.values;return P&&Object.create(P,{key:{get:function(){return N.addKey(P.primaryKey),P.key}},primaryKey:{get:function(){var ct=P.primaryKey;return N.addKey(ct),ct}},value:{get:function(){return at&&$.addKey(P.primaryKey),P.value}}})}return K})}N.add(i)}}return c[y].apply(this,arguments)}}),T}})}};function uo(e,r,i){if(i.numFailures===0)return r;if(r.type==="deleteRange")return null;var a=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return i.numFailures===a?null:(r=s({},r),m(r.keys)&&(r.keys=r.keys.filter(function(c,u){return!(u in i.failures)})),"values"in r&&m(r.values)&&(r.values=r.values.filter(function(c,u){return!(u in i.failures)})),r)}function Bi(e,r){return i=e,((a=r).lower===void 0||(a.lowerOpen?0<yt(i,a.lower):0<=yt(i,a.lower)))&&(e=e,(r=r).upper===void 0||(r.upperOpen?yt(e,r.upper)<0:yt(e,r.upper)<=0));var i,a}function fo(e,r,S,a,c,u){if(!S||S.length===0)return e;var d=r.query.index,p=d.multiEntry,_=r.query.range,g=a.schema.primaryKey.extractKey,T=d.extractKey,v=(d.lowLevelIndex||d).extractKey,S=S.reduce(function(y,w){var A=y,b=[];if(w.type==="add"||w.type==="put")for(var O=new zt,D=w.values.length-1;0<=D;--D){var $,N=w.values[D],R=g(N);O.hasKey(R)||($=T(N),(p&&m($)?$.some(function(Y){return Bi(Y,_)}):Bi($,_))&&(O.addKey(R),b.push(N)))}switch(w.type){case"add":A=y.concat(r.values?b:b.map(function(P){return g(P)}));break;case"put":var V=new zt().addKeys(w.values.map(function(P){return g(P)})),A=y.filter(function(P){return!V.hasKey(r.values?g(P):P)}).concat(r.values?b:b.map(function(P){return g(P)}));break;case"delete":var M=new zt().addKeys(w.keys);A=y.filter(function(P){return!M.hasKey(r.values?g(P):P)});break;case"deleteRange":var K=w.range;A=y.filter(function(P){return!Bi(g(P),K)})}return A},e);return S===e?e:(S.sort(function(y,w){return yt(v(y),v(w))||yt(g(y),g(w))}),r.limit&&r.limit<1/0&&(S.length>r.limit?S.length=r.limit:e.length===r.limit&&S.length<r.limit&&(c.dirty=!0)),u?Object.freeze(S):S)}function ho(e,r){return yt(e.lower,r.lower)===0&&yt(e.upper,r.upper)===0&&!!e.lowerOpen==!!r.lowerOpen&&!!e.upperOpen==!!r.upperOpen}function Al(e,r){return function(i,a,c,u){if(i===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=yt(i,a))===0){if(c&&u)return 0;if(c)return 1;if(u)return-1}return a}(e.lower,r.lower,e.lowerOpen,r.lowerOpen)<=0&&0<=function(i,a,c,u){if(i===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=yt(i,a))===0){if(c&&u)return 0;if(c)return-1;if(u)return 1}return a}(e.upper,r.upper,e.upperOpen,r.upperOpen)}function Ol(e,r,i,a){e.subscribers.add(i),a.addEventListener("abort",function(){var c,u;e.subscribers.delete(i),e.subscribers.size===0&&(c=e,u=r,setTimeout(function(){c.subscribers.size===0&&B(u,c)},3e3))})}var Cl={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return s(s({},e),{transaction:function(i,a,c){var u,d,p=e.transaction(i,a,c);return a==="readwrite"&&(d=(u=new AbortController).signal,c=function(_){return function(){if(u.abort(),a==="readwrite"){for(var g=new Set,T=0,v=i;T<v.length;T++){var S=v[T],y=Je["idb://".concat(r,"/").concat(S)];if(y){var w=e.table(S),A=y.optimisticOps.filter(function(at){return at.trans===p});if(p._explicit&&_&&p.mutatedParts)for(var b=0,O=Object.values(y.queries.query);b<O.length;b++)for(var D=0,$=(V=O[b]).slice();D<$.length;D++)Ii((M=$[D]).obsSet,p.mutatedParts)&&(B(V,M),M.subscribers.forEach(function(at){return g.add(at)}));else if(0<A.length){y.optimisticOps=y.optimisticOps.filter(function(at){return at.trans!==p});for(var N=0,R=Object.values(y.queries.query);N<R.length;N++)for(var V,M,K,Y=0,P=(V=R[N]).slice();Y<P.length;Y++)(M=P[Y]).res!=null&&p.mutatedParts&&(_&&!M.dirty?(K=Object.isFrozen(M.res),K=fo(M.res,M.req,A,w,M,K),M.dirty?(B(V,M),M.subscribers.forEach(function(at){return g.add(at)})):K!==M.res&&(M.res=K,M.promise=W.resolve({result:K}))):(M.dirty&&B(V,M),M.subscribers.forEach(function(at){return g.add(at)})))}}}g.forEach(function(at){return at()})}}},p.addEventListener("abort",c(!1),{signal:d}),p.addEventListener("error",c(!1),{signal:d}),p.addEventListener("complete",c(!0),{signal:d})),p},table:function(i){var a=e.table(i),c=a.schema.primaryKey;return s(s({},a),{mutate:function(u){var d=G.trans;if(c.outbound||d.db._options.cache==="disabled"||d.explicit)return a.mutate(u);var p=Je["idb://".concat(r,"/").concat(i)];return p?(d=a.mutate(u),u.type!=="add"&&u.type!=="put"||!(50<=u.values.length||Ki(c,u).some(function(_){return _==null}))?(p.optimisticOps.push(u),u.mutatedParts&&Or(u.mutatedParts),d.then(function(_){0<_.numFailures&&(B(p.optimisticOps,u),(_=uo(0,u,_))&&p.optimisticOps.push(_),u.mutatedParts&&Or(u.mutatedParts))}),d.catch(function(){B(p.optimisticOps,u),u.mutatedParts&&Or(u.mutatedParts)})):d.then(function(_){var g=uo(0,s(s({},u),{values:u.values.map(function(y,v){var S,y=(S=c.keyPath)!==null&&S!==void 0&&S.includes(".")?At(y):s({},y);return ft(y,c.keyPath,_.results[v]),y})}),_);p.optimisticOps.push(g),queueMicrotask(function(){return u.mutatedParts&&Or(u.mutatedParts)})}),d):a.mutate(u)},query:function(u){if(!lo(G,a)||!co("query",u))return a.query(u);var d=((g=G.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",v=G,p=v.requery,_=v.signal,g=function(w,A,b,O){var D=Je["idb://".concat(w,"/").concat(A)];if(!D)return[];if(!(A=D.queries[b]))return[null,!1,D,null];var $=A[(O.query?O.query.index.name:null)||""];if(!$)return[null,!1,D,null];switch(b){case"query":var N=$.find(function(R){return R.req.limit===O.limit&&R.req.values===O.values&&ho(R.req.query.range,O.query.range)});return N?[N,!0,D,$]:[$.find(function(R){return("limit"in R.req?R.req.limit:1/0)>=O.limit&&(!O.values||R.req.values)&&Al(R.req.query.range,O.query.range)}),!1,D,$];case"count":return N=$.find(function(R){return ho(R.req.query.range,O.query.range)}),[N,!!N,D,$]}}(r,i,"query",u),T=g[0],v=g[1],S=g[2],y=g[3];return T&&v?T.obsSet=u.obsSet:(v=a.query(u).then(function(w){var A=w.result;if(T&&(T.res=A),d){for(var b=0,O=A.length;b<O;++b)Object.freeze(A[b]);Object.freeze(A)}else w.result=At(A);return w}).catch(function(w){return y&&T&&B(y,T),Promise.reject(w)}),T={obsSet:u.obsSet,promise:v,subscribers:new Set,type:"query",req:u,dirty:!1},y?y.push(T):(y=[T],(S=S||(Je["idb://".concat(r,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=y)),Ol(T,y,p,_),T.promise.then(function(w){return{result:fo(w.result,u,S==null?void 0:S.optimisticOps,a,T,d)}})}})}})}};function Dr(e,r){return new Proxy(e,{get:function(i,a,c){return a==="db"?r:Reflect.get(i,a,c)}})}var Ee=(Rt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new X.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var r=this._versions,i=r.filter(function(a){return a._cfg.version===e})[0];return i||(i=new this.Version(e),r.push(i),r.sort(vl),i.stores({}),this._state.autoSchema=!1,i)},Rt.prototype._whenReady=function(e){var r=this;return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?e():new W(function(i,a){if(r._state.openComplete)return a(new X.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return void a(new X.DatabaseClosed);r.open().catch(vt)}r._state.dbReadyPromise.then(i,a)}).then(e)},Rt.prototype.use=function(e){var r=e.stack,i=e.create,a=e.level,c=e.name;return c&&this.unuse({stack:r,name:c}),e=this._middlewares[r]||(this._middlewares[r]=[]),e.push({stack:r,create:i,level:a??10,name:c}),e.sort(function(u,d){return u.level-d.level}),this},Rt.prototype.unuse=function(e){var r=e.stack,i=e.name,a=e.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(c){return a?c.create!==a:!!i&&c.name!==i})),this},Rt.prototype.open=function(){var e=this;return Xe(ke,function(){return bl(e)})},Rt.prototype._close=function(){var e=this._state,r=mn.indexOf(this);if(0<=r&&mn.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new W(function(i){e.dbReadyResolve=i}),e.openCanceller=new W(function(i,a){e.cancelOpen=a}))},Rt.prototype.close=function(i){var r=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new X.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new X.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},Rt.prototype.delete=function(e){var r=this;e===void 0&&(e={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new W(function(c,u){function d(){r.close(e);var p=r._deps.indexedDB.deleteDatabase(r.name);p.onsuccess=Nt(function(){var _,g,T;_=r._deps,g=r.name,T=_.indexedDB,_=_.IDBKeyRange,Ni(T)||g===dr||Li(T,_).delete(g).catch(vt),c()}),p.onerror=de(u),p.onblocked=r._fireOnBlocked}if(i)throw new X.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(d):d()})},Rt.prototype.backendDB=function(){return this.idbdb},Rt.prototype.isOpen=function(){return this.idbdb!==null},Rt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Rt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Rt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Rt.prototype,"tables",{get:function(){var e=this;return f(this._allTables).map(function(r){return e._allTables[r]})},enumerable:!1,configurable:!0}),Rt.prototype.transaction=function(){var e=(function(r,i,a){var c=arguments.length;if(c<2)throw new X.InvalidArgument("Too few arguments");for(var u=new Array(c-1);--c;)u[c-1]=arguments[c];return a=u.pop(),[r,ut(u),a]}).apply(this,arguments);return this._transaction.apply(this,e)},Rt.prototype._transaction=function(e,r,i){var a=this,c=G.trans;c&&c.db===this&&e.indexOf("!")===-1||(c=null);var u,d,p=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(d=r.map(function(g){if(g=g instanceof a.Table?g.name:g,typeof g!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),e=="r"||e===yi)u=yi;else{if(e!="rw"&&e!=_i)throw new X.InvalidArgument("Invalid transaction mode: "+e);u=_i}if(c){if(c.mode===yi&&u===_i){if(!p)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&d.forEach(function(g){if(c&&c.storeNames.indexOf(g)===-1){if(!p)throw new X.SubTransaction("Table "+g+" not included in parent transaction.");c=null}}),p&&c&&!c.active&&(c=null)}}catch(g){return c?c._promise(null,function(T,v){v(g)}):Pt(g)}var _=(function g(T,v,S,y,w){return W.resolve().then(function(){var A=G.transless||G,b=T._createTransaction(v,S,T._dbSchema,y);if(b.explicit=!0,A={trans:b,transless:A},y)b.idbtrans=y.idbtrans;else try{b.create(),b.idbtrans._explicit=!0,T._state.PR1398_maxLoop=3}catch($){return $.name===Yt.InvalidState&&T.isOpen()&&0<--T._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),T.close({disableAutoOpen:!1}),T.open().then(function(){return g(T,v,S,null,w)})):Pt($)}var O,D=gt(w);return D&&pn(),A=W.follow(function(){var $;(O=w.call(b,b))&&(D?($=Ie.bind(null,null),O.then($,$)):typeof O.next=="function"&&typeof O.throw=="function"&&(O=ji(O)))},A),(O&&typeof O.then=="function"?W.resolve(O).then(function($){return b.active?$:Pt(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return O})).then(function($){return y&&b._resolve(),b._completion.then(function(){return $})}).catch(function($){return b._reject($),Pt($)})})}).bind(null,this,u,d,c,i);return c?c._promise(u,_,"lock"):G.trans?Xe(G.transless,function(){return a._whenReady(_)}):this._whenReady(_)},Rt.prototype.table=function(e){if(!k(this._allTables,e))throw new X.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Rt);function Rt(e,r){var i=this;this._middlewares={},this.verno=0;var a=Rt.dependencies;this._options=r=s({addons:Rt.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},a=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,u,d,p,_,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:vt,dbReadyPromise:null,cancelOpen:vt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};g.dbReadyPromise=new W(function(v){g.dbReadyResolve=v}),g.openCanceller=new W(function(v,S){g.cancelOpen=S}),this._state=g,this.name=e,this.on=jn(this,"populate","blocked","versionchange","close",{ready:[ue,vt]}),this.on.ready.subscribe=St(this.on.ready.subscribe,function(v){return function(S,y){Rt.vip(function(){var w,A=i._state;A.openComplete?(A.dbOpenError||W.resolve().then(S),y&&v(S)):A.onReadyBeingFired?(A.onReadyBeingFired.push(S),y&&v(S)):(v(S),w=i,y||v(function b(){w.on.ready.unsubscribe(S),w.on.ready.unsubscribe(b)}))})}}),this.Collection=(c=this,Hn(cl.prototype,function(O,b){this.db=c;var y=Ys,w=null;if(b)try{y=b()}catch(D){w=D}var A=O._ctx,b=A.table,O=b.hook.reading.fire;this._ctx={table:b,index:A.index,isPrimKey:!A.index||b.schema.primKey.keyPath&&A.index===b.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:w,or:A.or,valueMapper:O!==te?O:null}})),this.Table=(u=this,Hn(Us.prototype,function(v,S,y){this.db=u,this._tx=y,this.name=v,this.schema=S,this.hook=u._allTables[v]?u._allTables[v].hook:jn(null,{creating:[rr,vt],reading:[li,te],updating:[ci,vt],deleting:[ir,vt]})})),this.Transaction=(d=this,Hn(hl.prototype,function(v,S,y,w,A){var b=this;this.db=d,this.mode=v,this.storeNames=S,this.schema=y,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=jn(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new W(function(O,D){b._resolve=O,b._reject=D}),this._completion.then(function(){b.active=!1,b.on.complete.fire()},function(O){var D=b.active;return b.active=!1,b.on.error.fire(O),b.parent?b.parent._reject(O):D&&b.idbtrans&&b.idbtrans.abort(),Pt(O)})})),this.Version=(p=this,Hn(_l.prototype,function(v){this.db=p,this._cfg={version:v,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(_=this,Hn(Js.prototype,function(v,S,y){if(this.db=_,this._ctx={table:v,index:S===":id"?null:S,or:y},this._cmp=this._ascending=yt,this._descending=function(w,A){return yt(A,w)},this._max=function(w,A){return 0<yt(w,A)?w:A},this._min=function(w,A){return yt(w,A)<0?w:A},this._IDBKeyRange=_._deps.IDBKeyRange,!this._IDBKeyRange)throw new X.MissingAPI})),this.on("versionchange",function(v){0<v.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(v){!v.newVersion||v.newVersion<v.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(v.oldVersion/10))}),this._maxKey=Yn(r.IDBKeyRange),this._createTransaction=function(v,S,y,w){return new i.Transaction(v,S,y,i._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(v){i.on("blocked").fire(v),mn.filter(function(S){return S.name===i.name&&S!==i&&!S._state.vcFired}).map(function(S){return S.on("versionchange").fire(v)})},this.use(Tl),this.use(Cl),this.use(Sl),this.use(wl),this.use(El);var T=new Proxy(this,{get:function(v,S,y){if(S==="_vip")return!0;if(S==="table")return function(A){return Dr(i.table(A),T)};var w=Reflect.get(v,S,y);return w instanceof Us?Dr(w,T):S==="tables"?w.map(function(A){return Dr(A,T)}):S==="_createTransaction"?function(){return Dr(w.apply(this,arguments),T)}:w}});this.vip=T,a.forEach(function(v){return v(i)})}var $r,se=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Dl=(Vi.prototype.subscribe=function(e,r,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:r,complete:i})},Vi.prototype[se]=function(){return this},Vi);function Vi(e){this._subscribe=e}try{$r={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{$r={indexedDB:null,IDBKeyRange:null}}function po(e){var r,i=!1,a=new Dl(function(c){var u=gt(e),d,p=!1,_={},g={},T={get closed(){return p},unsubscribe:function(){p||(p=!0,d&&d.abort(),v&&Me.storagemutated.unsubscribe(y))}};c.start&&c.start(T);var v=!1,S=function(){return gi(w)},y=function(A){Ar(_,A),Ii(g,_)&&S()},w=function(){var A,b,O;!p&&$r.indexedDB&&(_={},A={},d&&d.abort(),d=new AbortController,O=function(D){var $=hn();try{u&&pn();var N=xe(e,D);return N=u?N.finally(Ie):N}finally{$&&dn()}}(b={subscr:A,signal:d.signal,requery:S,querier:e,trans:null}),Promise.resolve(O).then(function(D){i=!0,r=D,p||b.signal.aborted||(_={},function($){for(var N in $)if(k($,N))return;return 1}(g=A)||v||(Me(Vn,y),v=!0),gi(function(){return!p&&c.next&&c.next(D)}))},function(D){i=!1,["DatabaseClosedError","AbortError"].includes(D==null?void 0:D.name)||p||gi(function(){p||c.error&&c.error(D)})}))};return setTimeout(S,0),T});return a.hasValue=function(){return i},a.getValue=function(){return r},a}var Ze=Ee;function Yi(e){var r=je;try{je=!0,Me.storagemutated.fire(e),Mi(e,!0)}finally{je=r}}H(Ze,s(s({},Vt),{delete:function(e){return new Ze(e,{addons:[]}).delete()},exists:function(e){return new Ze(e,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=Ze.dependencies,i=r.indexedDB,r=r.IDBKeyRange,(Ni(i)?Promise.resolve(i.databases()).then(function(a){return a.map(function(c){return c.name}).filter(function(c){return c!==dr})}):Li(i,r).toCollection().primaryKeys()).then(e)}catch{return Pt(new X.MissingAPI)}var r,i},defineClass:function(){return function(e){E(this,e)}},ignoreTransaction:function(e){return G.trans?Xe(G.transless,e):e()},vip:ki,async:function(e){return function(){try{var r=ji(e.apply(this,arguments));return r&&typeof r.then=="function"?r:W.resolve(r)}catch(i){return Pt(i)}}},spawn:function(e,r,i){try{var a=ji(e.apply(i,r||[]));return a&&typeof a.then=="function"?a:W.resolve(a)}catch(c){return Pt(c)}},currentTransaction:{get:function(){return G.trans||null}},waitFor:function(e,r){return r=W.resolve(typeof e=="function"?Ze.ignoreTransaction(e):e).timeout(r||6e4),G.trans?G.trans.waitFor(r):r},Promise:W,debug:{get:function(){return Ut},set:function(e){Rn(e)}},derive:tt,extend:E,props:H,override:St,Events:jn,on:Me,liveQuery:po,extendObservabilitySet:Ar,getByKeyPath:st,setByKeyPath:ft,delByKeyPath:function(e,r){typeof r=="string"?ft(e,r,void 0):"length"in r&&[].map.call(r,function(i){ft(e,i,void 0)})},shallowClone:Lt,deepClone:At,getObjectDiff:Hi,cmp:yt,asap:mt,minKey:-1/0,addons:[],connections:mn,errnames:Yt,dependencies:$r,cache:Je,semVer:"4.0.8",version:"4.0.8".split(".").map(function(e){return parseInt(e)}).reduce(function(e,r,i){return e+r/Math.pow(10,2*i)})})),Ze.maxKey=Yn(Ze.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Me(Vn,function(e){je||(e=new CustomEvent(Ti,{detail:e}),je=!0,dispatchEvent(e),je=!1)}),addEventListener(Ti,function(e){e=e.detail,je||Yi(e)}));var yn,je=!1,mo=function(){};return typeof BroadcastChannel<"u"&&((mo=function(){(yn=new BroadcastChannel(Ti)).onmessage=function(e){return e.data&&Yi(e.data)}})(),typeof yn.unref=="function"&&yn.unref(),Me(Vn,function(e){je||yn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ee.disableBfCache&&e.persisted){Ut&&console.debug("Dexie: handling persisted pagehide"),yn!=null&&yn.close();for(var r=0,i=mn;r<i.length;r++)i[r].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ee.disableBfCache&&e.persisted&&(Ut&&console.debug("Dexie: handling persisted pageshow"),mo(),Yi({all:new zt(-1/0,[[]])}))})),W.rejectionMapper=function(e,r){return!e||e instanceof wt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Ht[e.name]?e:(r=new Ht[e.name](r||e.message,e),"stack"in e&&Q(r,"stack",{get:function(){return this.inner.stack}}),r)},Rn(Ut),s(Ee,Object.freeze({__proto__:null,Dexie:Ee,liveQuery:po,Entity:qs,cmp:yt,PropModSymbol:we,PropModification:Kn,replacePrefix:function(e,r){return new Kn({replacePrefix:[e,r]})},add:function(e){return new Kn({add:e})},remove:function(e){return new Kn({remove:e})},default:Ee,RangeSet:zt,mergeRanges:Wn,rangesOverlap:ro}),{default:Ee}),Ee})})(rl);var qd=rl.exports;const gs=_s(qd),Jo=Symbol.for("Dexie"),ys=globalThis[Jo]||(globalThis[Jo]=gs);if(gs.semVer!==ys.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${gs.semVer} and ${ys.semVer}`);const Fd="yuimarldb1";class os extends ys{constructor(){super(Fd);x(this,"projects");x(this,"trees");this.version(1).stores({projects:"id",trees:"id"}),this.projects=this.table("projects"),this.trees=this.table("trees")}}class Zo{constructor(t,n,s){x(this,"id");x(this,"showDone");x(this,"delayRed");this.id=t,this.showDone=n,this.delayRed=s}}class Wd{constructor(t,n,s){x(this,"id");x(this,"open");x(this,"color");this.id=t,this.open=n,this.color=s}}class Ud{constructor(){x(this,"id","ganttframe");x(this,"width",0);x(this,"height",0);x(this,"columnHeader",new xl(this));x(this,"columnBody",new Il(this));x(this,"columnScroll",new Pl(this));x(this,"calendarHeader",new Ml(this));x(this,"calendarBody",new jl(this));x(this,"calendarScroll",new Hl(this));x(this,"ticketModal",new Yd);x(this,"ganttRow",new kl);x(this,"sch",new Kl(this));x(this,"scv",new Bl(this));x(this,"useIteration",!1);x(this,"iterationStart",null);x(this,"iterationNo",1);x(this,"iterationUnit","w1");x(this,"headerHeight",0);x(this,"colW",0);x(this,"calendarLeft",0);x(this,"calendarStart",kt());x(this,"calendarEnd",kt());x(this,"calendarTotalWidth",0);x(this,"ticketsTotalHeight",0);x(this,"ticketsFrameHeight",0);x(this,"schThreshold",0);x(this,"posX",0);x(this,"cols",[]);x(this,"holidays",[]);x(this,"tickets",[]);x(this,"lines",[]);x(this,"treeList",[]);x(this,"projectId",null);x(this,"showDone",!1);x(this,"delayRed",!1);x(this,"startY",0);x(this,"startX",0);x(this,"diffX",0);x(this,"diffY",0);x(this,"clicked",!1);x(this,"moving",!1);x(this,"movingTicket",null);x(this,"movingLine",-1);x(this,"hoverLine",-1);x(this,"dropPos","");x(this,"_idb");this._idb=new os;const t=document.querySelector("#projectId");t&&(this.projectId=t.value??null);const n=document.querySelector("#startdate");n&&(this.calendarStart=kt(`${n.value??""}`));const s=document.querySelector("#enddate");s&&(this.calendarEnd=kt(`${s.value??""}`));const l=document.querySelector("#useIteration");l&&(this.useIteration=l.value==="true"),this.headerHeight=(this.useIteration?It*3:It*2)+1;const h=document.querySelector("#sv1");h&&(h.style.height=`${this.useIteration?64:43}px`);const f=document.querySelector("#iterationStart");f&&(this.iterationStart=kt(f.value));const m=document.querySelector("#iterationNo");m&&(this.iterationNo=Number(m.value));const E=document.querySelector("#iterationUnit");E&&(this.iterationUnit=E.value);const L=document.querySelector("#holidays");L!=null&&L.value&&(this.holidays=L.value.split(",").map(k=>kt(k)).filter(k=>k.isValid()));const C=document.querySelector("#tickets");C!=null&&C.value&&(this.tickets=JSON.parse(C.value)),this.cols=[{name:"ID",width:56},{name:"チケット名",width:320},{name:"開始日",width:72},{name:"終了日",width:72},{name:"進捗",width:36}],this.build(),this.handler()}resetLines(t=""){this.lines=[],this.setPos(this.tickets,"",0,-1,t),this.ticketsTotalHeight=this.lines.length*Tt}getNow(){return kt()}initDtPos(){let t=Math.floor(this.getNow().diff(this.calendarStart)/me*Mt-this.calendarHeader.width/2),n=Math.floor(t*(this.calendarHeader.width-U-U)/this.calendarTotalWidth);this.calendarHeader.dtpos=t,this.calendarBody.dtpos=t,this.calendarScroll.barpos=n}setPos(t,n,s,l,h){let f=0,m=l;for(const E of t)E.progress===100&&this.showDone===!1||(E.pos=n.length===0?`${f}`:`${n},${f}`,f++,m++,E.level=s,E.line=m,E.y1=m*Tt,E.y2=(m+1)*Tt,this.lines.push(E),E.id===h?(this.ganttRow.y1=E.y1,this.ganttRow.y2=E.y2):!E.moving&&E.open&&E.children.length>0&&(m=this.setPos(E.children,E.pos,s+1,m,h)));return m}async readProject(){try{if(!this.projectId)return;this._idb||(this._idb=new os);let t=await this._idb.projects.get(this.projectId);if(t){this.showDone=t.showDone,this.delayRed=t.delayRed;const n=document.querySelector("#showdone");n&&(n.checked=this.showDone);const s=document.querySelector("#delayred");s&&(s.checked=this.delayRed)}}catch(t){throw Error(`${t}`)}}async readTreeList(){try{this.treeList=[],this._idb||(this._idb=new os),await this._idb.trees.each(t=>{this.setTreeOpen(t.id,t.open,this.tickets),this.treeList.push(t)})}catch(t){throw Error(`${t}`)}}setTreeOpen(t,n,s){for(const l of s){if(l.id===t)return l.open=n,!0;if(this.setTreeOpen(t,n,l.children))return!0}return!1}build(){const t=document.querySelector(`#${this.id}`);if(!t){console.error("Failed to get #ganttframe!");return}this.width=t.offsetWidth,this.height=t.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+Zt;const n=document.createDocumentFragment();this.columnBody.build(n),this.columnHeader.build(n),this.columnScroll.build(n),this.calendarBody.build(n),this.calendarHeader.build(n),this.calendarScroll.build(n);const s=this.calendarEnd.diff(this.calendarStart,"day");this.calendarTotalWidth=(s+1)*Mt,t.append(n)}handler(){this.columnBody.handler(),this.calendarScroll.handler(),this.sch.handler(),this.scv.handler(),this.ticketModal.handler();const t=document.querySelector("#btnSave");t&&t.addEventListener("click",()=>{this.save()})}save(){const t=document.querySelector("#loading");t&&t.classList.remove("d-none");const n=`project_id=${this.projectId??""}&tickets=${encodeURIComponent(JSON.stringify(this.tickets))}`;fetch("/api/ganttUpdate",{method:"POST",headers:{Accept:"*/*","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},mode:"cors",body:encodeURI(n)}).then(s=>(t&&t.classList.add("d-none"),s.json())).then(s=>{if(s.result){const l=document.querySelector("#projectId");l&&(window.location.href=`/project?id=${l.value}&tab=gantt`)}else window.alert(`エラーが発生しました。: ${s.message}`)}).catch(s=>window.alert(`エラーが発生しました。: ${s.message}`))}resize(){const t=document.querySelector("#flexbox");if(!t){console.error("Failed to get #flexbox!");return}const n=document.querySelector("#ganttbase");if(!n){console.error("Failed to get #ganttbase!");return}n.style.width=`${t.offsetWidth-U}px`;const s=document.querySelector(`#${this.id}`);if(!s){console.error("Failed to get #ganttframe!");return}this.width=s.offsetWidth,this.height=s.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+Zt,this.sch.pos=0,this.calendarScroll.pos=0,this.calendarBody.resize(),this.calendarHeader.resize(),this.calendarScroll.resize(),this.scrollH(0),this.initDtPos()}draw(){this.columnBody.draw(),this.calendarHeader.draw(),this.calendarBody.draw(),this.calendarScroll.draw(),this.sch.draw(),this.scv.draw()}scrollH(t){this.posX=Math.floor(t*this.schThreshold/(this.width-U-U)),this.columnBody.scrollH(this.posX),this.columnHeader.scrollH(this.posX),this.columnScroll.scrollH(this.posX),this.calendarHeader.scrollH(this.posX),this.calendarBody.scrollH(this.posX),this.calendarScroll.scrollH(this.posX)}scrollV(t){let n=Math.floor(t);this.columnBody.scrollV(n),this.calendarBody.scrollV(n)}columnWidth(){let t=2;for(let n of this.cols)t+=n.width;return t}mouseDownCalScroll(t){this.calendarScroll.mouseDownCalScroll(t)}mouseMoveCalScroll(t){this.calendarScroll.mouseMoveCalScroll(t)}mouseUpCalScroll(){this.calendarScroll.mouseUpCalScroll()}mouseDownScrollH(t){this.sch.mouseDownScrollH(t)}mouseMoveScrollH(t){this.sch.mouseMoveScrollH(t)}mouseUpScrollH(){this.sch.mouseUpScrollH()}mouseDownScrollV(t){this.scv.mouseDownScrollV(t)}mouseMoveScrollV(t){this.scv.mouseMoveScrollV(t)}mouseUpScrollV(){this.scv.mouseUpScrollV()}async nodeOpenClose(t,n){var s;try{let l=new Wd(t,n,"");await((s=this._idb)==null?void 0:s.trees.put(l)),await this.readTreeList(),this.resetLines(),this.draw()}catch(l){throw Error(`${l}`)}}async setShowDone(t){var n;this.showDone=t;try{if(!this.projectId)return;this.resetLines(),this.ganttRow.y1=-1,this.ganttRow.y2=-1;let s=new Zo(this.projectId,t,this.delayRed);await((n=this._idb)==null?void 0:n.projects.put(s)),this.scv.pos=0,this.scrollV(0),this.draw()}catch(s){throw Error(`${s}`)}}async setDelayRed(t){var n;this.delayRed=t;try{if(!this.projectId)return;let s=new Zo(this.projectId,this.showDone,t);await((n=this._idb)==null?void 0:n.projects.put(s)),this.draw()}catch(s){throw Error(`${s}`)}}}const Te=new Ud,zd=async()=>{await Te.readProject(),await Te.readTreeList(),Te.resetLines(),Te.initDtPos(),Te.draw()};zd().catch(o=>{console.error(o),window.alert(`エラーが発生しました。: ${o}`)});window.addEventListener("resize",function(){Te.resize(),Te.draw()});const as=document.querySelector("#showdone");as&&as.addEventListener("change",function(){Te.setShowDone(as.checked)});const ls=document.querySelector("#delayred");ls&&ls.addEventListener("change",function(){Te.setDelayRed(ls.checked)});
