var _l=Object.defineProperty;var bl=(o,t,n)=>t in o?_l(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var x=(o,t,n)=>bl(o,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var qo={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Hr,function(){var n=1e3,s=6e4,l=36e5,h="millisecond",f="second",m="minute",A="hour",k="day",$="week",N="month",H="quarter",U="year",Q="date",tt="Invalid Date",it=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,lt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_t={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(et){var q=["th","st","nd","rd"],j=et%100;return"["+et+(q[(j-20)%10]||q[j]||q[0])+"]"}},St=function(et,q,j){var z=String(et);return!z||z.length>=q?et:""+Array(q+1-z.length).join(j)+et},ot={s:St,z:function(et){var q=-et.utcOffset(),j=Math.abs(q),z=Math.floor(j/60),Y=j%60;return(q<=0?"+":"-")+St(z,2,"0")+":"+St(Y,2,"0")},m:function et(q,j){if(q.date()<j.date())return-et(j,q);var z=12*(j.year()-q.year())+(j.month()-q.month()),Y=q.clone().add(z,N),J=j-Y<0,Z=q.clone().add(z+(J?-1:1),N);return+(-(z+(j-Y)/(J?Y-Z:Z-Y))||0)},a:function(et){return et<0?Math.ceil(et)||0:Math.floor(et)},p:function(et){return{M:N,y:U,w:$,d:k,D:Q,h:A,m,s:f,ms:h,Q:H}[et]||String(et||"").toLowerCase().replace(/s$/,"")},u:function(et){return et===void 0}},mt="en",st={};st[mt]=_t;var ft="$isDayjsObject",Lt=function(et){return et instanceof Nt||!(!et||!et[ft])},Dt=function et(q,j,z){var Y;if(!q)return mt;if(typeof q=="string"){var J=q.toLowerCase();st[J]&&(Y=J),j&&(st[J]=j,Y=J);var Z=q.split("-");if(!Y&&Z.length>1)return et(Z[0])}else{var gt=q.name;st[gt]=q,Y=gt}return!z&&Y&&(mt=Y),Y||!z&&mt},ut=function(et,q){if(Lt(et))return et.clone();var j=typeof q=="object"?q:{};return j.date=et,j.args=arguments,new Nt(j)},rt=ot;rt.l=Dt,rt.i=Lt,rt.w=function(et,q){return ut(et,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var Nt=function(){function et(j){this.$L=Dt(j.locale,null,!0),this.parse(j),this.$x=this.$x||j.x||{},this[ft]=!0}var q=et.prototype;return q.parse=function(j){this.$d=function(z){var Y=z.date,J=z.utc;if(Y===null)return new Date(NaN);if(rt.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var Z=Y.match(it);if(Z){var gt=Z[2]-1||0,Tt=(Z[7]||"0").substring(0,3);return J?new Date(Date.UTC(Z[1],gt,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,Tt)):new Date(Z[1],gt,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,Tt)}}return new Date(Y)}(j),this.init()},q.init=function(){var j=this.$d;this.$y=j.getFullYear(),this.$M=j.getMonth(),this.$D=j.getDate(),this.$W=j.getDay(),this.$H=j.getHours(),this.$m=j.getMinutes(),this.$s=j.getSeconds(),this.$ms=j.getMilliseconds()},q.$utils=function(){return rt},q.isValid=function(){return this.$d.toString()!==tt},q.isSame=function(j,z){var Y=ut(j);return this.startOf(z)<=Y&&Y<=this.endOf(z)},q.isAfter=function(j,z){return ut(j)<this.startOf(z)},q.isBefore=function(j,z){return this.endOf(z)<ut(j)},q.$g=function(j,z,Y){return rt.u(j)?this[z]:this.set(Y,j)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(j,z){var Y=this,J=!!rt.u(z)||z,Z=rt.p(j),gt=function(X,Mt){var Yt=rt.w(Y.$u?Date.UTC(Y.$y,Mt,X):new Date(Y.$y,Mt,X),Y);return J?Yt:Yt.endOf(k)},Tt=function(X,Mt){return rt.w(Y.toDate()[X].apply(Y.toDate("s"),(J?[0,0,0,0]:[23,59,59,999]).slice(Mt)),Y)},wt=this.$W,Ot=this.$M,Ct=this.$D,Rt="set"+(this.$u?"UTC":"");switch(Z){case U:return J?gt(1,0):gt(31,11);case N:return J?gt(1,Ot):gt(0,Ot+1);case $:var Bt=this.$locale().weekStart||0,Ft=(wt<Bt?wt+7:wt)-Bt;return gt(J?Ct-Ft:Ct+(6-Ft),Ot);case k:case Q:return Tt(Rt+"Hours",0);case A:return Tt(Rt+"Minutes",1);case m:return Tt(Rt+"Seconds",2);case f:return Tt(Rt+"Milliseconds",3);default:return this.clone()}},q.endOf=function(j){return this.startOf(j,!1)},q.$set=function(j,z){var Y,J=rt.p(j),Z="set"+(this.$u?"UTC":""),gt=(Y={},Y[k]=Z+"Date",Y[Q]=Z+"Date",Y[N]=Z+"Month",Y[U]=Z+"FullYear",Y[A]=Z+"Hours",Y[m]=Z+"Minutes",Y[f]=Z+"Seconds",Y[h]=Z+"Milliseconds",Y)[J],Tt=J===k?this.$D+(z-this.$W):z;if(J===N||J===U){var wt=this.clone().set(Q,1);wt.$d[gt](Tt),wt.init(),this.$d=wt.set(Q,Math.min(this.$D,wt.daysInMonth())).$d}else gt&&this.$d[gt](Tt);return this.init(),this},q.set=function(j,z){return this.clone().$set(j,z)},q.get=function(j){return this[rt.p(j)]()},q.add=function(j,z){var Y,J=this;j=Number(j);var Z=rt.p(z),gt=function(Ot){var Ct=ut(J);return rt.w(Ct.date(Ct.date()+Math.round(Ot*j)),J)};if(Z===N)return this.set(N,this.$M+j);if(Z===U)return this.set(U,this.$y+j);if(Z===k)return gt(1);if(Z===$)return gt(7);var Tt=(Y={},Y[m]=s,Y[A]=l,Y[f]=n,Y)[Z]||1,wt=this.$d.getTime()+j*Tt;return rt.w(wt,this)},q.subtract=function(j,z){return this.add(-1*j,z)},q.format=function(j){var z=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||tt;var J=j||"YYYY-MM-DDTHH:mm:ssZ",Z=rt.z(this),gt=this.$H,Tt=this.$m,wt=this.$M,Ot=Y.weekdays,Ct=Y.months,Rt=Y.meridiem,Bt=function(Mt,Yt,vt,te){return Mt&&(Mt[Yt]||Mt(z,J))||vt[Yt].slice(0,te)},Ft=function(Mt){return rt.s(gt%12||12,Mt,"0")},X=Rt||function(Mt,Yt,vt){var te=Mt<12?"AM":"PM";return vt?te.toLowerCase():te};return J.replace(lt,function(Mt,Yt){return Yt||function(vt){switch(vt){case"YY":return String(z.$y).slice(-2);case"YYYY":return rt.s(z.$y,4,"0");case"M":return wt+1;case"MM":return rt.s(wt+1,2,"0");case"MMM":return Bt(Y.monthsShort,wt,Ct,3);case"MMMM":return Bt(Ct,wt);case"D":return z.$D;case"DD":return rt.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return Bt(Y.weekdaysMin,z.$W,Ot,2);case"ddd":return Bt(Y.weekdaysShort,z.$W,Ot,3);case"dddd":return Ot[z.$W];case"H":return String(gt);case"HH":return rt.s(gt,2,"0");case"h":return Ft(1);case"hh":return Ft(2);case"a":return X(gt,Tt,!0);case"A":return X(gt,Tt,!1);case"m":return String(Tt);case"mm":return rt.s(Tt,2,"0");case"s":return String(z.$s);case"ss":return rt.s(z.$s,2,"0");case"SSS":return rt.s(z.$ms,3,"0");case"Z":return Z}return null}(Mt)||Z.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(j,z,Y){var J,Z=this,gt=rt.p(z),Tt=ut(j),wt=(Tt.utcOffset()-this.utcOffset())*s,Ot=this-Tt,Ct=function(){return rt.m(Z,Tt)};switch(gt){case U:J=Ct()/12;break;case N:J=Ct();break;case H:J=Ct()/3;break;case $:J=(Ot-wt)/6048e5;break;case k:J=(Ot-wt)/864e5;break;case A:J=Ot/l;break;case m:J=Ot/s;break;case f:J=Ot/n;break;default:J=Ot}return Y?J:rt.a(J)},q.daysInMonth=function(){return this.endOf(N).$D},q.$locale=function(){return st[this.$L]},q.locale=function(j,z){if(!j)return this.$L;var Y=this.clone(),J=Dt(j,z,!0);return J&&(Y.$L=J),Y},q.clone=function(){return rt.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},et}(),At=Nt.prototype;return ut.prototype=At,[["$ms",h],["$s",f],["$m",m],["$H",A],["$W",k],["$M",N],["$y",U],["$D",Q]].forEach(function(et){At[et[1]]=function(q){return this.$g(q,et[0],et[1])}}),ut.extend=function(et,q){return et.$i||(et(q,Nt,ut),et.$i=!0),ut},ut.locale=Dt,ut.isDayjs=Lt,ut.unix=function(et){return ut(1e3*et)},ut.en=st[mt],ut.Ls=st,ut.p={},ut})})(qo);var wl=qo.exports;const It=cs(wl),W=16,El=42,Qt=21,he=63,Et=22,Ht=22,Zt=Ht*10,Te=1e3*60*60*24;class Tl{constructor(){x(this,"y1",-1);x(this,"y2",-1)}}class Sl{constructor(t){x(this,"id","colhead");x(this,"pos",0);this.frame=t}build(t){const n=document.createElement("div");n.id=this.id,n.className="header",n.style.top="0px",n.style.left=`${this.pos}px`,n.style.width=`${this.frame.calendarLeft}px`,n.style.height=`${he}px`,t.append(n);let s=document.createElement("div");s.className="line",s.style.top=`${he}px`,s.style.left="0px",s.style.width=`${this.frame.calendarLeft}px`,s.style.height="1px",t.append(s);let l=0;for(let h of this.frame.cols){let f=document.createElement("div");f.className="label",f.style.top=`${El}px`,f.style.left=`${l}px`,f.style.width=`${h.width}px`,f.textContent=h.name,n.append(f),l+=h.width,s=document.createElement("div"),s.className="line",s.style.top="0px",s.style.left=`${l}px`,s.style.width="1px",s.style.height=`${he}px`,n.append(s)}l+=2,s=document.createElement("div"),s.className="line",s.style.top="0px",s.style.left=`${l}px`,s.style.width="1px",s.style.height=`${he}px`,n.append(s)}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos}px`)}}class Al{constructor(t){x(this,"id","colbody");x(this,"width",0);x(this,"height",0);x(this,"posX",0);x(this,"posY",0);x(this,"clickedId","");x(this,"movingLevel",0);x(this,"upper",null);x(this,"lower",null);this.frame=t}build(t){const n=document.createElement("canvas");this.height=this.frame.height-he-W,this.frame.ticketsFrameHeight=this.height,n.id=this.id,this.width=this.frame.calendarLeft,n.className="gantt-body",n.style.top=`${he+1}px`,n.style.left=`${this.posX}px`,n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,t.append(n)}handler(){const t=document.querySelector("#ganttframe"),n=document.querySelector(`#${this.id}`),s=this.frame;t&&n&&(n.addEventListener("mousedown",function(l){l.preventDefault(),s.columnBody.mouseDown(l.layerX,l.layerY)}),n.addEventListener("touchstart",function(l){l.preventDefault(),s.columnBody.mouseDown(l.touches[0].pageX-t.offsetLeft-n.offsetLeft,l.touches[0].pageY-t.offsetTop-n.offsetTop)}),n.addEventListener("mousemove",function(l){l.preventDefault(),s.columnBody.mouseMove(l.layerX,l.layerY)}),n.addEventListener("touchmove",function(l){l.preventDefault(),s.columnBody.mouseMove(l.touches[0].pageX-t.offsetLeft-n.offsetLeft,l.touches[0].pageY-t.offsetTop-n.offsetTop)}),n.addEventListener("mouseup",function(l){l.preventDefault(),s.columnBody.mouseUp()}),n.addEventListener("mouseleave",function(l){l.preventDefault(),s.columnBody.mouseLeave()}),n.addEventListener("touchend",function(l){l.preventDefault(),s.columnBody.mouseUp()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetWidth,s=t.offsetHeight;t.width=n,t.height=s;const l=t.getContext("2d");if(l){l.save();for(let f of this.frame.lines)this.drawTicket(l,f);this.frame.moving&&this.frame.ganttRow.y1!=-1&&(l.fillStyle="#fffdef",l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,n,Et),l.fill(),this.frame.movingTicket&&this.drawMovingTicket(l,this.frame.movingTicket,this.frame.ganttRow.y1+this.posY+this.frame.diffY)),l.fillStyle="#82a4c1";let h=0;for(let f of this.frame.cols)h+=f.width,l.fillRect(h,0,1,s),l.fill();h+=2,l.fillRect(h,0,1,s),l.fill(),this.frame.ganttRow.y1!=-1&&(l.fillStyle="#f6f",l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,n,1),l.fill(),l.fillRect(0,this.frame.ganttRow.y2+this.posY+this.frame.diffY,n,1),l.fill(),l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,1,Et),l.fill()),l.restore()}}}getFrameHeight(t,n){let s=n;for(let l of t)s+=Et,l.open&&l.children.length>0&&(s=this.getFrameHeight(l.children,s));return s}drawTicket(t,n){var N;if(this.frame.moving&&n.id===((N=this.frame.movingTicket)==null?void 0:N.id))return;t.font="9.5pt sans-serif",t.textBaseline="bottom";let s=n.y1,l=n.y2;if(this.frame.moving&&this.frame.movingTicket&&this.frame.movingLine!==-1&&this.frame.hoverLine!==-1)if(this.frame.diffY<0)if(n.line===this.frame.hoverLine){let H=this.frame.movingLine-this.frame.hoverLine;-this.frame.diffY-(H-1)*Et>10&&(s+=Et,l+=Et)}else n.line>this.frame.hoverLine&&n.line<this.frame.movingLine&&(s+=Et,l+=Et);else if(n.line===this.frame.hoverLine){let H=this.frame.hoverLine-this.frame.movingLine;this.frame.diffY-(H-1)*Et>10&&(s-=Et,l-=Et)}else n.line<this.frame.hoverLine&&n.line>this.frame.movingLine&&(s-=Et,l-=Et);const h=s+18;t.fillStyle="#00f",t.fillText(n.id_disp,3,h+this.posY),t.fillStyle="#808080";let f=this.frame.cols[0].width+n.level*12+6;t.fillRect(f,s+7+this.posY,1,8),t.fill(),t.fillRect(f,s+7+this.posY,8,1),t.fill(),t.fillRect(f,s+15+this.posY,8,1),t.fill(),t.fillRect(f+8,s+7+this.posY,1,9),t.fill(),t.fillStyle="#000",n.children.length>0&&(t.fillRect(f+2,s+11+this.posY,5,1),t.fill(),n.open||(t.fillRect(f+4,s+9+this.posY,1,5),t.fill()));let m=this.frame.cols[0].width+this.frame.cols[1].width-(f+14);if(t.measureText(n.name).width<=m)t.fillText(n.name,f+14,h+this.posY);else{let H=n.name;for(;t.measureText(`${H}…`).width>m;)H=H.slice(0,-1);t.fillText(`${H}…`,f+14,h+this.posY)}f=this.frame.cols[0].width+this.frame.cols[1].width+3,n.start_date&&t.fillText(It(n.start_date).format("YY/MM/DD"),f,h+this.posY),f+=this.frame.cols[2].width,n.end_date&&t.fillText(It(n.end_date).format("YY/MM/DD"),f,h+this.posY),f+=this.frame.cols[3].width+this.frame.cols[4].width-6;const k=`${n.progress}`,$=t.measureText(k).width;t.fillText(k,f-$,h+this.posY),t.fillStyle="#e5ebf2",t.fillRect(0,l+this.posY,this.width,1),t.fill()}drawMovingTicket(t,n,s){t.font="9.5pt sans-serif",t.textBaseline="bottom";let l=s;const h=l+18;if(t.fillStyle="#00f",t.fillText(n.id_disp,3,h+this.posY),t.fillStyle="#808080",this.movingLevel=n.level,this.frame.movingLine!==-1&&this.frame.hoverLine!=-1&&this.frame.movingTicket){let N=this.frame.lines[this.frame.hoverLine];if(this.frame.diffY<0){this.upper=N,this.frame.lines.length>this.frame.hoverLine+1?(this.lower=this.frame.lines[this.frame.hoverLine+1],this.lower===this.frame.movingTicket&&(this.frame.lines.length>this.frame.hoverLine+2?this.lower=this.frame.lines[this.frame.hoverLine+2]:this.lower=null)):this.lower=null;let H=this.frame.movingLine-this.frame.hoverLine;-this.frame.diffY-(H-1)*Et>10&&(this.frame.hoverLine===0?(this.upper=null,this.frame.lines.length>0?(this.lower=this.frame.lines[0],this.lower===this.frame.movingTicket&&(this.frame.lines.length>1?this.lower=this.frame.lines[1]:this.lower=null)):this.lower=null):(this.upper=this.frame.lines[this.frame.hoverLine-1],this.lower=this.frame.lines[this.frame.hoverLine],this.lower===this.frame.movingTicket&&(this.frame.lines.length>this.frame.hoverLine+1?this.lower=this.frame.lines[this.frame.hoverLine+1]:this.lower=null)))}else{this.frame.movingLine===0?(this.upper=null,this.frame.lines.length>0?(this.lower=this.frame.lines[0],this.lower===this.frame.movingTicket&&(this.frame.lines.length>1?this.lower=this.frame.lines[1]:this.lower=null)):this.lower=null):(this.upper=this.frame.lines[this.frame.movingLine-1],this.lower=this.frame.lines[this.frame.movingLine],this.lower===this.frame.movingTicket&&(this.frame.lines.length>this.frame.movingLine+1?this.lower=this.frame.lines[this.frame.movingLine+1]:this.lower=null));let H=this.frame.hoverLine-this.frame.movingLine;this.frame.diffY-(H-1)*Et>10&&(this.upper=N,this.frame.lines.length>this.frame.hoverLine+1?(this.lower=this.frame.lines[this.frame.hoverLine+1],this.lower===this.frame.movingTicket&&(this.frame.lines.length>this.frame.hoverLine+2?this.lower=this.frame.lines[this.frame.hoverLine+2]:this.lower=null)):this.lower=null)}this.upper?this.upper.children.length>0&&this.upper.open?(this.movingLevel=this.upper.level+1,this.upper.children[this.upper.children.length-1]===this.frame.movingTicket&&this.frame.diffX<-12&&(this.movingLevel=this.frame.movingTicket.level-Math.floor(-this.frame.diffX/12),this.lower?this.movingLevel<this.lower.level&&(this.movingLevel=this.lower.level):this.movingLevel<0&&(this.movingLevel=0))):(this.movingLevel=this.upper.level,this.frame.diffX>12?this.movingLevel++:this.frame.diffX<-12&&(this.lower?(this.movingLevel=this.frame.movingTicket.level-Math.floor(-this.frame.diffX/12),this.movingLevel<this.lower.level&&(this.movingLevel=this.lower.level)):(this.movingLevel=this.frame.movingTicket.level-Math.floor(-this.frame.diffX/12),this.movingLevel<0&&(this.movingLevel=0)))):this.movingLevel=0}let f=this.frame.cols[0].width+this.movingLevel*12+6;t.fillRect(f,l+7+this.posY,1,8),t.fill(),t.fillRect(f,l+7+this.posY,8,1),t.fill(),t.fillRect(f,l+15+this.posY,8,1),t.fill(),t.fillRect(f+8,l+7+this.posY,1,9),t.fill(),t.fillStyle="#000",n.children.length>0&&(t.fillRect(f+2,l+11+this.posY,5,1),t.fill(),t.fillRect(f+4,l+9+this.posY,1,5),t.fill());let m=this.frame.cols[0].width+this.frame.cols[1].width-(f+14);if(t.measureText(n.name).width<=m)t.fillText(n.name,f+14,h+this.posY);else{let N=n.name;for(;t.measureText(`${N}…`).width>m;)N=N.slice(0,-1);t.fillText(`${N}…`,f+14,h+this.posY)}f=this.frame.cols[0].width+this.frame.cols[1].width+3,n.start_date&&t.fillText(It(n.start_date).format("YY/MM/DD"),f,h+this.posY),f+=this.frame.cols[2].width,n.end_date&&t.fillText(It(n.end_date).format("YY/MM/DD"),f,h+this.posY),f+=this.frame.cols[3].width+this.frame.cols[4].width-6;const k=`${n.progress}`,$=t.measureText(k).width;t.fillText(k,f-$,h+this.posY),t.fillStyle="#e5ebf2",t.fillRect(0,l+Et+this.posY,this.width,1),t.fill()}scrollH(t){this.posX=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.posX}px`)}scrollV(t){this.posY=-t,this.draw()}mouseDown(t,n){try{this.frame.clicked=!0,this.frame.startX=t,this.frame.startY=n,this.frame.movingLine=-1,this.clickedId="";for(let s=0;s<this.frame.lines.length;s++){let l=this.frame.lines[s];if(l.y1<=n&&n<=l.y2){this.frame.movingLine=s,this.clickTicket(l,t);break}}this.clickedId?fetch(`/api/ticket/${this.clickedId}`,{method:"GET"}).then(s=>s.json()).then(s=>{s.result?this.frame.ticketModal.show(s):window.alert(`エラーが発生しました。: ${s.message}`)}).catch(s=>window.alert(`エラーが発生しました。: ${s.message}`)):this.frame.draw()}catch(s){window.alert(`エラーが発生しました。: ${s}`)}}mouseMove(t,n){var s;if(this.frame.clicked)try{this.frame.moving||(this.frame.resetLines(((s=this.frame.movingTicket)==null?void 0:s.id)??""),this.frame.moving=!0),this.frame.diffX=t-this.frame.startX,this.frame.diffY=n-this.frame.startY,this.frame.hoverLine=-1;for(let l=0;l<this.frame.lines.length;l++){let h=this.frame.lines[l];if(h!=this.frame.movingTicket&&h.y1<this.frame.ganttRow.y2+this.posY+this.frame.diffY&&h.y2>this.frame.ganttRow.y1+this.posY+this.frame.diffY){this.frame.hoverLine=l;break}}this.frame.dropPos="",this.frame.draw()}catch(l){window.alert(`エラーが発生しました。: ${l}`)}}mouseUp(){var t,n;if(!this.frame.moving){this.frame.clicked=!1;return}try{const s=`${(t=this.frame.movingTicket)==null?void 0:t.pos}`.split(",");let l=null,h=null,f=null,m=0,A=null,k=-1,$=this.frame.tickets;for(let N=0;N<s.length;N++){let H=s[N],U=Number(H);if(this.frame.showDone)l=$[U];else{let Q=U,tt=0;for(let it=0;it<$.length;it++){let lt=$[it];if(lt.progress<100&&tt++,tt>Q){l=lt,U=it;break}}}if(!l)break;$=l.children,N==s.length-2&&(f=l),N==s.length-1&&(m=U)}if(this.upper){const N=`${this.upper.pos}`.split(",");$=this.frame.tickets;for(let H=0;H<N.length;H++){let U=N[H],Q=Number(U);if(this.frame.showDone)h=$[Q];else{let tt=Q,it=0;for(let lt=0;lt<$.length;lt++){let _t=$[lt];if(_t.progress<100&&it++,it>tt){h=_t,Q=lt;break}}}if(!h)break;if($=h.children,H===0&&(k=Q),H<this.movingLevel&&(A=h,k=-1,H+1<N.length))if(Q=Number(N[H+1]),this.frame.showDone)k=Q;else{let tt=Q,it=0;for(let lt=0;lt<$.length;lt++)if($[lt].progress<100&&it++,it>tt){k=lt;break}}}}this.frame.movingTicket&&(f?A?f===A?m>k?(f.children.splice(m,1),A.children.splice(k+1,0,this.frame.movingTicket)):m<k&&(A.children.splice(k+1,0,this.frame.movingTicket),f.children.splice(m,1)):(f.children.splice(m,1),A.children.splice(k+1,0,this.frame.movingTicket)):(f.children.splice(m,1),this.frame.tickets.splice(k+1,0,this.frame.movingTicket)):A?(this.frame.tickets.splice(m,1),A.children.splice(k+1,0,this.frame.movingTicket)):m>k?(this.frame.tickets.splice(m,1),this.frame.tickets.splice(k+1,0,this.frame.movingTicket)):m<k&&(this.frame.tickets.splice(k+1,0,this.frame.movingTicket),this.frame.tickets.splice(m,1)),this.frame.movingTicket.open=!1),this.frame.clicked=!1,this.frame.moving=!1,this.frame.diffY=0,this.frame.resetLines(((n=this.frame.movingTicket)==null?void 0:n.id)??""),this.frame.draw(),this.frame.movingTicket=null}catch(s){window.alert(`エラーが発生しました。: ${s}`)}}mouseLeave(){try{this.frame.clicked=!1,this.frame.moving=!1,this.frame.diffY=0,this.frame.movingTicket=null,this.frame.draw()}catch(t){window.alert(`エラーが発生しました。: ${t}`)}}clickTicket(t,n){if(this.frame.ganttRow.y1=t.y1,this.frame.ganttRow.y2=t.y2,this.frame.movingTicket=t,this.frame.dropPos="",n<this.frame.cols[0].width){this.clickedId=t.id;return}if(n<this.frame.cols[0].width+this.frame.cols[1].width){const s=this.frame.cols[0].width+t.level*12+2;n>s&&n<s+16&&(t.open=!t.open,this.frame.nodeOpenClose(t.id,t.open),this.frame.draw(),this.frame.ticketsTotalHeight<this.frame.ticketsFrameHeight&&this.posY!=0&&(this.posY=0,this.frame.calendarBody.posY=0,this.frame.scv.pos=0,this.frame.draw()))}}}class Ol{constructor(t){x(this,"id","colscr");x(this,"pos",0);this.frame=t}build(t){const n=document.createElement("div");n.id=this.id,n.className="scroll-corner",n.style.top=`${this.frame.height-W}px`,n.style.left=`${this.pos}px`,n.style.width=`${this.frame.calendarLeft}px`,n.style.height=`${W}px`,t.append(n)}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos}px`)}}var Fo={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Hr,function(){return function(n,s){s.prototype.isSameOrAfter=function(l,h){return this.isSame(l,h)||this.isAfter(l,h)}}})})(Fo);var Cl=Fo.exports;const Wo=cs(Cl);It.extend(Wo);class Dl{constructor(t){x(this,"id","calhead");x(this,"width",0);x(this,"pos",0);x(this,"dtpos",0);this.frame=t}build(t){const n=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt),n.id=this.id,n.className="header",n.style.top="0px",n.style.left=`${this.pos+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${he+1}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetHeight;t.width=this.width,t.height=n;const s=Qt+Qt,l=t.getContext("2d"),h="9.5pt sans-serif";if(l){l.save(),l.fillStyle="#82a4c1",l.fillRect(0,Qt,this.width,1),l.fill(),l.fillRect(0,Qt+Qt,this.width,1),l.fill(),l.fillRect(0,he,this.width,1),l.fill();let f=this.frame.calendarStart.clone(),m=0,A=!0;l.font=h,l.textBaseline="bottom",l.textAlign="left";let k=1,$=-1;for(;this.frame.calendarEnd.isSameOrAfter(f);){if($++,$>13&&($=0,k++),m<this.dtpos-Ht){m+=Ht,f=f.add(1,"day"),A=!1;continue}if(m>this.width+this.dtpos)break;if($===0&&(l.fillStyle="#000",l.fillText(`${k}`,m+3-this.dtpos,Qt-3),A||(l.fillStyle="#bdcede",l.fillRect(m-this.dtpos,0,1,Qt),l.fill())),A?(A=!1,(f.date()==1||f.date()<25)&&(l.fillStyle="#000",l.fillText(`${f.format("YYYY/M")}`,m+3-this.dtpos,Qt+Qt-3))):f.date()===1&&(l.fillStyle="#000",l.fillText(`${f.format("YYYY/M")}`,m+3-this.dtpos,Qt+Qt-3),l.fillStyle="#bdcede",l.fillRect(m-this.dtpos,Qt,1,Qt),l.fill()),this.frame.holidays.filter(H=>H.isSame(f)).length>0)l.fillStyle="#f00";else switch(f.day()){case 0:l.fillStyle="#f00";break;case 6:l.fillStyle="#00f";break;default:l.fillStyle="#000";break}l.fillText(`${f.date()}`,m+3-this.dtpos,he-3),m+=Ht,f=f.add(1,"day"),l.fillStyle="#bdcede",l.fillRect(m-this.dtpos,s,1,Qt),l.fill()}l.restore()}}}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos+this.frame.calendarLeft}px`)}scroll(t){this.dtpos=t*this.frame.calendarTotalWidth/(this.width-W-W),this.draw(),this.frame.calendarBody.dtpos=this.dtpos,this.frame.calendarBody.draw()}}It.extend(Wo);class $l{constructor(t){x(this,"id","calbody");x(this,"width",0);x(this,"posX",0);x(this,"posY",0);x(this,"dtpos",0);this.frame=t}build(t){const n=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const s=this.frame.height-he-W;n.id=this.id,n.className="gantt-body",n.style.top=`${he+1}px`,n.style.left=`${this.posX+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${s}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetWidth,s=t.offsetHeight;t.width=n,t.height=s;const l=t.getContext("2d");if(l){l.save();let h=this.frame.calendarStart.clone(),f=0;for(;this.frame.calendarEnd.isSameOrAfter(h);){if(f<this.dtpos-Ht){f+=Ht,h=h.add(1,"day");continue}if(f>this.width+this.dtpos)break;let m=!1;if(this.frame.holidays.filter(k=>k.isSame(h)).length>0)m=!0;else switch(h.day()){case 0:case 6:m=!0;break}if(m&&(l.fillStyle="#f2fef2",l.fillRect(f+1-this.dtpos,0,Ht-1,s),l.fill()),h=h.add(1,"day"),f+=Ht,f>n+this.dtpos)break;l.fillStyle="#bdcede",l.fillRect(f-this.dtpos,0,1,s),l.fill()}for(let m of this.frame.lines)this.drawTicket(l,m);f=It().diff(this.frame.calendarStart)/Te*Ht,l.fillStyle="#0a0";for(let m=0;m<s;m+=7)l.fillRect(f-this.dtpos,m,1,4),l.fill();this.frame.ganttRow.y1!=-1&&(this.frame.moving&&(l.fillStyle="#fffdef",l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,n,Et),l.fill(),this.frame.movingTicket&&this.drawMovingTicket(l,this.frame.movingTicket,this.frame.ganttRow.y1+this.posY+this.frame.diffY)),l.fillStyle="#f6f",l.fillRect(0,this.frame.ganttRow.y1+this.posY+this.frame.diffY,n,1),l.fill(),l.fillRect(0,this.frame.ganttRow.y2+this.posY+this.frame.diffY,n,1),l.fill()),l.restore()}}}drawTicket(t,n){var h;if(this.frame.moving&&n.id===((h=this.frame.movingTicket)==null?void 0:h.id))return;let s=n.y1,l=n.y2;if(this.frame.moving&&this.frame.movingTicket&&this.frame.movingLine!==-1&&this.frame.hoverLine!==-1)if(this.frame.diffY<0)if(n.line===this.frame.hoverLine){let f=this.frame.movingLine-this.frame.hoverLine;-this.frame.diffY-(f-1)*Et>10&&(s+=Et,l+=Et)}else n.line>this.frame.hoverLine&&n.line<this.frame.movingLine&&(s+=Et,l+=Et);else if(n.line===this.frame.hoverLine){let f=this.frame.hoverLine-this.frame.movingLine;this.frame.diffY-(f-1)*Et>10&&(s-=Et,l-=Et)}else n.line<this.frame.hoverLine&&n.line>this.frame.movingLine&&(s-=Et,l-=Et);if(n.start_date)if(n.end_date){let f=It(n.start_date).diff(this.frame.calendarStart)/Te;f=f*Ht-this.dtpos;let m=It(n.end_date).diff(this.frame.calendarStart)/Te;if(m=(m+1)*Ht-this.dtpos,n.progress===0)t.fillStyle="#9bf",t.fillRect(f,s+8+this.posY,m-f,6),t.fill();else if(n.progress===100)t.fillStyle="#57f",t.fillRect(f,s+8+this.posY,m-f,6),t.fill();else{t.fillStyle="#9bf",t.fillRect(f,s+8+this.posY,m-f,6),t.fill();const A=(m-f)*n.progress/100;t.fillStyle="#57f",t.fillRect(f,s+8+this.posY,A,6),t.fill()}}else{t.fillStyle="#57f";let f=It(n.start_date).diff(this.frame.calendarStart)/Te;f=f*Ht-this.dtpos,t.fillRect(f,s+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",f+=12,t.fillRect(f,s+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",f+=7,t.fillRect(f,s+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",f+=6,t.fillRect(f,s+8+this.posY,5,6),t.fill()}else if(n.end_date){t.fillStyle="#57f";let f=It(n.end_date).diff(this.frame.calendarStart)/Te;f=(f+1)*Ht-this.dtpos,f-=12,t.fillRect(f,s+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",f-=7,t.fillRect(f,s+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",f-=6,t.fillRect(f,s+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",f-=5,t.fillRect(f,s+8+this.posY,5,6),t.fill()}t.fillStyle="#e5ebf2",t.fillRect(0,l+this.posY,this.width,1),t.fill()}drawMovingTicket(t,n,s){let l=s;if(n.start_date)if(n.end_date){let h=It(n.start_date).diff(this.frame.calendarStart)/Te;h=h*Ht-this.dtpos;let f=It(n.end_date).diff(this.frame.calendarStart)/Te;if(f=(f+1)*Ht-this.dtpos,n.progress===0)t.fillStyle="#9bf",t.fillRect(h,l+8+this.posY,f-h,6),t.fill();else if(n.progress===100)t.fillStyle="#57f",t.fillRect(h,l+8+this.posY,f-h,6),t.fill();else{t.fillStyle="#9bf",t.fillRect(h,l+8+this.posY,f-h,6),t.fill();const m=(f-h)*n.progress/100;t.fillStyle="#57f",t.fillRect(h,l+8+this.posY,m,6),t.fill()}}else{t.fillStyle="#57f";let h=It(n.start_date).diff(this.frame.calendarStart)/Te;h=h*Ht-this.dtpos,t.fillRect(h,l+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",h+=12,t.fillRect(h,l+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",h+=7,t.fillRect(h,l+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",h+=6,t.fillRect(h,l+8+this.posY,5,6),t.fill()}else if(n.end_date){t.fillStyle="#57f";let h=It(n.end_date).diff(this.frame.calendarStart)/Te;h=(h+1)*Ht-this.dtpos,h-=12,t.fillRect(h,l+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",h-=7,t.fillRect(h,l+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",h-=6,t.fillRect(h,l+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",h-=5,t.fillRect(h,l+8+this.posY,5,6),t.fill()}t.fillStyle="#e5ebf2",t.fillRect(0,l+Et+this.posY,this.width,1),t.fill()}scrollH(t){this.posX=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.posX+this.frame.calendarLeft}px`)}scrollV(t){this.posY=-t,this.draw()}}class Ll{constructor(t){x(this,"id","calscroll");x(this,"width",0);x(this,"pos",0);x(this,"barWidth",0);x(this,"height",W);x(this,"moving",!1);x(this,"startX",0);x(this,"barpos",0);x(this,"startPos",0);this.frame=t}build(t){this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const n=document.createElement("canvas");n.id=this.id,n.className="scroll-bar",n.style.top=`${this.frame.height-W}px`,n.style.left=`${this.pos+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Zt&&(this.width=Zt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.scrollH(0),this.barpos=0}handler(){const t=document.querySelector("#ganttframe"),n=document.querySelector(`#${this.id}`),s=this.frame;t&&n&&(n.addEventListener("mousedown",function(l){l.preventDefault(),s.mouseDownCalScroll(l.layerX)}),n.addEventListener("touchstart",function(l){l.preventDefault(),s.mouseDownCalScroll(l.touches[0].pageX-t.offsetLeft-n.offsetLeft)}),n.addEventListener("mousemove",function(l){l.preventDefault(),s.mouseMoveCalScroll(l.layerX)}),n.addEventListener("touchmove",function(l){l.preventDefault(),s.mouseMoveCalScroll(l.touches[0].pageX-t.offsetLeft-n.offsetLeft)}),n.addEventListener("mouseup",function(l){l.preventDefault(),s.mouseUpCalScroll()}),n.addEventListener("mouseleave",function(l){l.preventDefault(),s.mouseUpCalScroll()}),n.addEventListener("touchend",function(l){l.preventDefault(),s.mouseUpCalScroll()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){t.width=this.width,t.height=this.height;const n=t.getContext("2d");n&&(n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(5,8),n.lineTo(9,12),n.lineTo(9,4),n.closePath(),n.fill(),n.beginPath(),n.moveTo(this.width-10,4),n.lineTo(this.width-10,12),n.lineTo(this.width-6,8),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barWidth=(this.width-W-W)*this.width/this.frame.calendarTotalWidth,n.fillRect(W+this.barpos,2,this.barWidth<4?4:this.barWidth,13),n.restore())}}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos+this.frame.calendarLeft}px`)}mouseDownCalScroll(t){if(W+this.barpos<t&&t<W+this.barpos+this.barWidth){this.moving=!0,this.startX=t-W,this.startPos=this.barpos;return}t<W?this.barpos-=W:t<W+this.barpos?this.barpos-=this.barWidth:this.width-W<t?this.barpos+=W:this.barpos+=this.barWidth,this.barpos<0&&(this.barpos=0),this.width-W-W-this.barWidth<this.barpos&&(this.barpos=this.width-W-W-this.barWidth),this.frame.calendarHeader.scroll(this.barpos),this.draw(),this.moving=!1}mouseMoveCalScroll(t){if(!this.moving)return;this.barpos=t-W-this.startX+this.startPos,this.barpos<0&&(this.barpos=0);const n=this.width-this.barWidth-W-W;this.barpos>n&&(this.barpos=n),this.frame.calendarHeader.scroll(this.barpos),this.draw()}mouseUpCalScroll(){this.moving=!1}}class kl{constructor(t){x(this,"id","scrollh");x(this,"width",0);x(this,"barWidth",0);x(this,"height",W);x(this,"moving",!1);x(this,"startX",0);x(this,"pos",0);x(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),n=this.frame;t&&(t.addEventListener("mousedown",function(s){s.preventDefault(),n.mouseDownScrollH(s.pageX-t.offsetLeft)}),t.addEventListener("touchstart",function(s){s.preventDefault(),n.mouseDownScrollH(s.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mousemove",function(s){s.preventDefault(),n.mouseMoveScrollH(s.pageX-t.offsetLeft)}),t.addEventListener("touchmove",function(s){s.preventDefault(),n.mouseMoveScrollH(s.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mouseup",function(s){s.preventDefault(),n.mouseUpScrollH()}),t.addEventListener("mouseleave",function(s){s.preventDefault(),n.mouseUpScrollH()}),t.addEventListener("touchend",function(s){s.preventDefault(),n.mouseUpScrollH()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){if(this.width=t.offsetWidth,t.width=this.width,t.height=this.height,this.width>this.frame.schThreshold)return;const n=t.getContext("2d");n&&(n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(5,8),n.lineTo(9,12),n.lineTo(9,4),n.closePath(),n.fill(),n.beginPath(),n.moveTo(this.width-10,4),n.lineTo(this.width-10,12),n.lineTo(this.width-6,8),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barWidth=(this.width-W-W)*this.width/this.frame.schThreshold,n.fillRect(W+this.pos,2,this.barWidth<4?4:this.barWidth,13),n.restore())}}mouseDownScrollH(t){if(W+this.pos<t&&t<W+this.pos+this.barWidth){this.moving=!0,this.startX=t-W,this.startPos=this.pos;return}t<W?this.pos-=W:t<W+this.pos?this.pos-=this.barWidth:this.width-W<t?this.pos+=W:this.pos+=this.barWidth,this.pos<0&&(this.pos=0),this.width-W-W-this.barWidth<this.pos&&(this.pos=this.width-W-W-this.barWidth),this.frame.scrollH(this.pos),this.draw(),this.moving=!1}mouseMoveScrollH(t){if(!this.moving)return;this.pos=t-W-this.startX+this.startPos,this.pos<0&&(this.pos=0);const n=this.width-this.barWidth-W-W;this.pos>n&&(this.pos=n),this.frame.scrollH(this.pos),this.draw()}mouseUpScrollH(){this.moving=!1}}class Nl{constructor(t){x(this,"id","scrollv");x(this,"width",W);x(this,"height",0);x(this,"barHeight",0);x(this,"moving",!1);x(this,"visible",!1);x(this,"startY",0);x(this,"pos",0);x(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),n=this.frame;t&&(t.addEventListener("mousedown",function(s){s.preventDefault(),n.mouseDownScrollV(s.pageY-t.offsetTop)}),t.addEventListener("touchstart",function(s){s.preventDefault(),n.mouseDownScrollV(s.touches[0].pageY-t.offsetTop)}),t.addEventListener("mousemove",function(s){s.preventDefault(),n.mouseMoveScrollV(s.pageY-t.offsetTop)}),t.addEventListener("touchmove",function(s){s.preventDefault(),n.mouseMoveScrollV(s.touches[0].pageY-t.offsetTop)}),t.addEventListener("mouseup",function(s){s.preventDefault(),n.mouseUpScrollV()}),t.addEventListener("mouseleave",function(s){s.preventDefault(),n.mouseUpScrollV()}),t.addEventListener("touchend",function(s){s.preventDefault(),n.mouseUpScrollV()}))}draw(){this.visible=!1;const t=document.querySelector(`#${this.id}`);if(t){this.height=t.offsetHeight,t.width=this.width,t.height=this.height;const n=t.getContext("2d");n&&this.frame.ticketsFrameHeight<this.frame.ticketsTotalHeight&&(this.visible=!0,n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(8,5),n.lineTo(4,9),n.lineTo(12,9),n.closePath(),n.fill(),n.beginPath(),n.moveTo(4,this.height-10),n.lineTo(8,this.height-6),n.lineTo(12,this.height-10),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barHeight=(this.height-W-W)*this.frame.ticketsFrameHeight/this.frame.ticketsTotalHeight,n.fillRect(2,W+this.pos,13,this.barHeight<4?4:this.barHeight),n.restore())}}mouseDownScrollV(t){if(!this.visible)return;if(W+this.pos<t&&t<W+this.pos+this.barHeight){this.moving=!0,this.startY=t-W,this.startPos=this.pos;return}t<W?this.pos-=W:t<W+this.pos?this.pos-=this.barHeight:this.height-W<t?this.pos+=W:this.pos+=this.barHeight,this.pos<0&&(this.pos=0);let n=this.pos/(this.height-W-W-this.barHeight);n>1&&(n=1,this.pos=this.height-W-W-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*n),this.draw(),this.moving=!1}mouseMoveScrollV(t){if(!this.visible||!this.moving)return;this.pos=t-W-this.startY+this.startPos,this.pos<0&&(this.pos=0);let n=this.pos/(this.height-W-W-this.barHeight);n>1&&(n=1,this.pos=this.height-W-W-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*n),this.draw()}mouseUpScrollV(){this.moving=!1}}var Xt="top",ne="bottom",re="right",Gt="left",Fr="auto",kn=[Xt,ne,re,Gt],sn="start",An="end",Uo="clippingParents",us="viewport",wn="popper",zo="reference",ts=kn.reduce(function(o,t){return o.concat([t+"-"+sn,t+"-"+An])},[]),fs=[].concat(kn,[Fr]).reduce(function(o,t){return o.concat([t,t+"-"+sn,t+"-"+An])},[]),Xo="beforeRead",Go="read",Qo="afterRead",Jo="beforeMain",Zo="main",ta="afterMain",ea="beforeWrite",na="write",ra="afterWrite",ia=[Xo,Go,Qo,Jo,Zo,ta,ea,na,ra];function ye(o){return o?(o.nodeName||"").toLowerCase():null}function ie(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var t=o.ownerDocument;return t&&t.defaultView||window}return o}function on(o){var t=ie(o).Element;return o instanceof t||o instanceof Element}function oe(o){var t=ie(o).HTMLElement;return o instanceof t||o instanceof HTMLElement}function hs(o){if(typeof ShadowRoot>"u")return!1;var t=ie(o).ShadowRoot;return o instanceof t||o instanceof ShadowRoot}function xl(o){var t=o.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},l=t.attributes[n]||{},h=t.elements[n];!oe(h)||!ye(h)||(Object.assign(h.style,s),Object.keys(l).forEach(function(f){var m=l[f];m===!1?h.removeAttribute(f):h.setAttribute(f,m===!0?"":m)}))})}function Pl(o){var t=o.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var l=t.elements[s],h=t.attributes[s]||{},f=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),m=f.reduce(function(A,k){return A[k]="",A},{});!oe(l)||!ye(l)||(Object.assign(l.style,m),Object.keys(h).forEach(function(A){l.removeAttribute(A)}))})}}const ds={name:"applyStyles",enabled:!0,phase:"write",fn:xl,effect:Pl,requires:["computeStyles"]};function ve(o){return o.split("-")[0]}var rn=Math.max,Yr=Math.min,On=Math.round;function es(){var o=navigator.userAgentData;return o!=null&&o.brands&&Array.isArray(o.brands)?o.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function sa(){return!/^((?!chrome|android).)*safari/i.test(es())}function Cn(o,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=o.getBoundingClientRect(),l=1,h=1;t&&oe(o)&&(l=o.offsetWidth>0&&On(s.width)/o.offsetWidth||1,h=o.offsetHeight>0&&On(s.height)/o.offsetHeight||1);var f=on(o)?ie(o):window,m=f.visualViewport,A=!sa()&&n,k=(s.left+(A&&m?m.offsetLeft:0))/l,$=(s.top+(A&&m?m.offsetTop:0))/h,N=s.width/l,H=s.height/h;return{width:N,height:H,top:$,right:k+N,bottom:$+H,left:k,x:k,y:$}}function ps(o){var t=Cn(o),n=o.offsetWidth,s=o.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:o.offsetLeft,y:o.offsetTop,width:n,height:s}}function oa(o,t){var n=t.getRootNode&&t.getRootNode();if(o.contains(t))return!0;if(n&&hs(n)){var s=t;do{if(s&&o.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Oe(o){return ie(o).getComputedStyle(o)}function Il(o){return["table","td","th"].indexOf(ye(o))>=0}function qe(o){return((on(o)?o.ownerDocument:o.document)||window.document).documentElement}function Wr(o){return ye(o)==="html"?o:o.assignedSlot||o.parentNode||(hs(o)?o.host:null)||qe(o)}function so(o){return!oe(o)||Oe(o).position==="fixed"?null:o.offsetParent}function Rl(o){var t=/firefox/i.test(es()),n=/Trident/i.test(es());if(n&&oe(o)){var s=Oe(o);if(s.position==="fixed")return null}var l=Wr(o);for(hs(l)&&(l=l.host);oe(l)&&["html","body"].indexOf(ye(l))<0;){var h=Oe(l);if(h.transform!=="none"||h.perspective!=="none"||h.contain==="paint"||["transform","perspective"].indexOf(h.willChange)!==-1||t&&h.willChange==="filter"||t&&h.filter&&h.filter!=="none")return l;l=l.parentNode}return null}function Qn(o){for(var t=ie(o),n=so(o);n&&Il(n)&&Oe(n).position==="static";)n=so(n);return n&&(ye(n)==="html"||ye(n)==="body"&&Oe(n).position==="static")?t:n||Rl(o)||t}function ms(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function zn(o,t,n){return rn(o,Yr(t,n))}function Ml(o,t,n){var s=zn(o,t,n);return s>n?n:s}function aa(){return{top:0,right:0,bottom:0,left:0}}function la(o){return Object.assign({},aa(),o)}function ca(o,t){return t.reduce(function(n,s){return n[s]=o,n},{})}var jl=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,la(typeof t!="number"?t:ca(t,kn))};function Kl(o){var t,n=o.state,s=o.name,l=o.options,h=n.elements.arrow,f=n.modifiersData.popperOffsets,m=ve(n.placement),A=ms(m),k=[Gt,re].indexOf(m)>=0,$=k?"height":"width";if(!(!h||!f)){var N=jl(l.padding,n),H=ps(h),U=A==="y"?Xt:Gt,Q=A==="y"?ne:re,tt=n.rects.reference[$]+n.rects.reference[A]-f[A]-n.rects.popper[$],it=f[A]-n.rects.reference[A],lt=Qn(h),_t=lt?A==="y"?lt.clientHeight||0:lt.clientWidth||0:0,St=tt/2-it/2,ot=N[U],mt=_t-H[$]-N[Q],st=_t/2-H[$]/2+St,ft=zn(ot,st,mt),Lt=A;n.modifiersData[s]=(t={},t[Lt]=ft,t.centerOffset=ft-st,t)}}function Hl(o){var t=o.state,n=o.options,s=n.element,l=s===void 0?"[data-popper-arrow]":s;l!=null&&(typeof l=="string"&&(l=t.elements.popper.querySelector(l),!l)||oa(t.elements.popper,l)&&(t.elements.arrow=l))}const ua={name:"arrow",enabled:!0,phase:"main",fn:Kl,effect:Hl,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Dn(o){return o.split("-")[1]}var Yl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Bl(o,t){var n=o.x,s=o.y,l=t.devicePixelRatio||1;return{x:On(n*l)/l||0,y:On(s*l)/l||0}}function oo(o){var t,n=o.popper,s=o.popperRect,l=o.placement,h=o.variation,f=o.offsets,m=o.position,A=o.gpuAcceleration,k=o.adaptive,$=o.roundOffsets,N=o.isFixed,H=f.x,U=H===void 0?0:H,Q=f.y,tt=Q===void 0?0:Q,it=typeof $=="function"?$({x:U,y:tt}):{x:U,y:tt};U=it.x,tt=it.y;var lt=f.hasOwnProperty("x"),_t=f.hasOwnProperty("y"),St=Gt,ot=Xt,mt=window;if(k){var st=Qn(n),ft="clientHeight",Lt="clientWidth";if(st===ie(n)&&(st=qe(n),Oe(st).position!=="static"&&m==="absolute"&&(ft="scrollHeight",Lt="scrollWidth")),st=st,l===Xt||(l===Gt||l===re)&&h===An){ot=ne;var Dt=N&&st===mt&&mt.visualViewport?mt.visualViewport.height:st[ft];tt-=Dt-s.height,tt*=A?1:-1}if(l===Gt||(l===Xt||l===ne)&&h===An){St=re;var ut=N&&st===mt&&mt.visualViewport?mt.visualViewport.width:st[Lt];U-=ut-s.width,U*=A?1:-1}}var rt=Object.assign({position:m},k&&Yl),Nt=$===!0?Bl({x:U,y:tt},ie(n)):{x:U,y:tt};if(U=Nt.x,tt=Nt.y,A){var At;return Object.assign({},rt,(At={},At[ot]=_t?"0":"",At[St]=lt?"0":"",At.transform=(mt.devicePixelRatio||1)<=1?"translate("+U+"px, "+tt+"px)":"translate3d("+U+"px, "+tt+"px, 0)",At))}return Object.assign({},rt,(t={},t[ot]=_t?tt+"px":"",t[St]=lt?U+"px":"",t.transform="",t))}function Vl(o){var t=o.state,n=o.options,s=n.gpuAcceleration,l=s===void 0?!0:s,h=n.adaptive,f=h===void 0?!0:h,m=n.roundOffsets,A=m===void 0?!0:m,k={placement:ve(t.placement),variation:Dn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:l,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,oo(Object.assign({},k,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:f,roundOffsets:A})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,oo(Object.assign({},k,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:A})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const vs={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Vl,data:{}};var Lr={passive:!0};function ql(o){var t=o.state,n=o.instance,s=o.options,l=s.scroll,h=l===void 0?!0:l,f=s.resize,m=f===void 0?!0:f,A=ie(t.elements.popper),k=[].concat(t.scrollParents.reference,t.scrollParents.popper);return h&&k.forEach(function($){$.addEventListener("scroll",n.update,Lr)}),m&&A.addEventListener("resize",n.update,Lr),function(){h&&k.forEach(function($){$.removeEventListener("scroll",n.update,Lr)}),m&&A.removeEventListener("resize",n.update,Lr)}}const gs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ql,data:{}};var Fl={left:"right",right:"left",bottom:"top",top:"bottom"};function Mr(o){return o.replace(/left|right|bottom|top/g,function(t){return Fl[t]})}var Wl={start:"end",end:"start"};function ao(o){return o.replace(/start|end/g,function(t){return Wl[t]})}function ys(o){var t=ie(o),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function _s(o){return Cn(qe(o)).left+ys(o).scrollLeft}function Ul(o,t){var n=ie(o),s=qe(o),l=n.visualViewport,h=s.clientWidth,f=s.clientHeight,m=0,A=0;if(l){h=l.width,f=l.height;var k=sa();(k||!k&&t==="fixed")&&(m=l.offsetLeft,A=l.offsetTop)}return{width:h,height:f,x:m+_s(o),y:A}}function zl(o){var t,n=qe(o),s=ys(o),l=(t=o.ownerDocument)==null?void 0:t.body,h=rn(n.scrollWidth,n.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),f=rn(n.scrollHeight,n.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),m=-s.scrollLeft+_s(o),A=-s.scrollTop;return Oe(l||n).direction==="rtl"&&(m+=rn(n.clientWidth,l?l.clientWidth:0)-h),{width:h,height:f,x:m,y:A}}function bs(o){var t=Oe(o),n=t.overflow,s=t.overflowX,l=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+l+s)}function fa(o){return["html","body","#document"].indexOf(ye(o))>=0?o.ownerDocument.body:oe(o)&&bs(o)?o:fa(Wr(o))}function Xn(o,t){var n;t===void 0&&(t=[]);var s=fa(o),l=s===((n=o.ownerDocument)==null?void 0:n.body),h=ie(s),f=l?[h].concat(h.visualViewport||[],bs(s)?s:[]):s,m=t.concat(f);return l?m:m.concat(Xn(Wr(f)))}function ns(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function Xl(o,t){var n=Cn(o,!1,t==="fixed");return n.top=n.top+o.clientTop,n.left=n.left+o.clientLeft,n.bottom=n.top+o.clientHeight,n.right=n.left+o.clientWidth,n.width=o.clientWidth,n.height=o.clientHeight,n.x=n.left,n.y=n.top,n}function lo(o,t,n){return t===us?ns(Ul(o,n)):on(t)?Xl(t,n):ns(zl(qe(o)))}function Gl(o){var t=Xn(Wr(o)),n=["absolute","fixed"].indexOf(Oe(o).position)>=0,s=n&&oe(o)?Qn(o):o;return on(s)?t.filter(function(l){return on(l)&&oa(l,s)&&ye(l)!=="body"}):[]}function Ql(o,t,n,s){var l=t==="clippingParents"?Gl(o):[].concat(t),h=[].concat(l,[n]),f=h[0],m=h.reduce(function(A,k){var $=lo(o,k,s);return A.top=rn($.top,A.top),A.right=Yr($.right,A.right),A.bottom=Yr($.bottom,A.bottom),A.left=rn($.left,A.left),A},lo(o,f,s));return m.width=m.right-m.left,m.height=m.bottom-m.top,m.x=m.left,m.y=m.top,m}function ha(o){var t=o.reference,n=o.element,s=o.placement,l=s?ve(s):null,h=s?Dn(s):null,f=t.x+t.width/2-n.width/2,m=t.y+t.height/2-n.height/2,A;switch(l){case Xt:A={x:f,y:t.y-n.height};break;case ne:A={x:f,y:t.y+t.height};break;case re:A={x:t.x+t.width,y:m};break;case Gt:A={x:t.x-n.width,y:m};break;default:A={x:t.x,y:t.y}}var k=l?ms(l):null;if(k!=null){var $=k==="y"?"height":"width";switch(h){case sn:A[k]=A[k]-(t[$]/2-n[$]/2);break;case An:A[k]=A[k]+(t[$]/2-n[$]/2);break}}return A}function $n(o,t){t===void 0&&(t={});var n=t,s=n.placement,l=s===void 0?o.placement:s,h=n.strategy,f=h===void 0?o.strategy:h,m=n.boundary,A=m===void 0?Uo:m,k=n.rootBoundary,$=k===void 0?us:k,N=n.elementContext,H=N===void 0?wn:N,U=n.altBoundary,Q=U===void 0?!1:U,tt=n.padding,it=tt===void 0?0:tt,lt=la(typeof it!="number"?it:ca(it,kn)),_t=H===wn?zo:wn,St=o.rects.popper,ot=o.elements[Q?_t:H],mt=Ql(on(ot)?ot:ot.contextElement||qe(o.elements.popper),A,$,f),st=Cn(o.elements.reference),ft=ha({reference:st,element:St,strategy:"absolute",placement:l}),Lt=ns(Object.assign({},St,ft)),Dt=H===wn?Lt:st,ut={top:mt.top-Dt.top+lt.top,bottom:Dt.bottom-mt.bottom+lt.bottom,left:mt.left-Dt.left+lt.left,right:Dt.right-mt.right+lt.right},rt=o.modifiersData.offset;if(H===wn&&rt){var Nt=rt[l];Object.keys(ut).forEach(function(At){var et=[re,ne].indexOf(At)>=0?1:-1,q=[Xt,ne].indexOf(At)>=0?"y":"x";ut[At]+=Nt[q]*et})}return ut}function Jl(o,t){t===void 0&&(t={});var n=t,s=n.placement,l=n.boundary,h=n.rootBoundary,f=n.padding,m=n.flipVariations,A=n.allowedAutoPlacements,k=A===void 0?fs:A,$=Dn(s),N=$?m?ts:ts.filter(function(Q){return Dn(Q)===$}):kn,H=N.filter(function(Q){return k.indexOf(Q)>=0});H.length===0&&(H=N);var U=H.reduce(function(Q,tt){return Q[tt]=$n(o,{placement:tt,boundary:l,rootBoundary:h,padding:f})[ve(tt)],Q},{});return Object.keys(U).sort(function(Q,tt){return U[Q]-U[tt]})}function Zl(o){if(ve(o)===Fr)return[];var t=Mr(o);return[ao(o),t,ao(t)]}function tc(o){var t=o.state,n=o.options,s=o.name;if(!t.modifiersData[s]._skip){for(var l=n.mainAxis,h=l===void 0?!0:l,f=n.altAxis,m=f===void 0?!0:f,A=n.fallbackPlacements,k=n.padding,$=n.boundary,N=n.rootBoundary,H=n.altBoundary,U=n.flipVariations,Q=U===void 0?!0:U,tt=n.allowedAutoPlacements,it=t.options.placement,lt=ve(it),_t=lt===it,St=A||(_t||!Q?[Mr(it)]:Zl(it)),ot=[it].concat(St).reduce(function(Ot,Ct){return Ot.concat(ve(Ct)===Fr?Jl(t,{placement:Ct,boundary:$,rootBoundary:N,padding:k,flipVariations:Q,allowedAutoPlacements:tt}):Ct)},[]),mt=t.rects.reference,st=t.rects.popper,ft=new Map,Lt=!0,Dt=ot[0],ut=0;ut<ot.length;ut++){var rt=ot[ut],Nt=ve(rt),At=Dn(rt)===sn,et=[Xt,ne].indexOf(Nt)>=0,q=et?"width":"height",j=$n(t,{placement:rt,boundary:$,rootBoundary:N,altBoundary:H,padding:k}),z=et?At?re:Gt:At?ne:Xt;mt[q]>st[q]&&(z=Mr(z));var Y=Mr(z),J=[];if(h&&J.push(j[Nt]<=0),m&&J.push(j[z]<=0,j[Y]<=0),J.every(function(Ot){return Ot})){Dt=rt,Lt=!1;break}ft.set(rt,J)}if(Lt)for(var Z=Q?3:1,gt=function(Ct){var Rt=ot.find(function(Bt){var Ft=ft.get(Bt);if(Ft)return Ft.slice(0,Ct).every(function(X){return X})});if(Rt)return Dt=Rt,"break"},Tt=Z;Tt>0;Tt--){var wt=gt(Tt);if(wt==="break")break}t.placement!==Dt&&(t.modifiersData[s]._skip=!0,t.placement=Dt,t.reset=!0)}}const da={name:"flip",enabled:!0,phase:"main",fn:tc,requiresIfExists:["offset"],data:{_skip:!1}};function co(o,t,n){return n===void 0&&(n={x:0,y:0}),{top:o.top-t.height-n.y,right:o.right-t.width+n.x,bottom:o.bottom-t.height+n.y,left:o.left-t.width-n.x}}function uo(o){return[Xt,re,ne,Gt].some(function(t){return o[t]>=0})}function ec(o){var t=o.state,n=o.name,s=t.rects.reference,l=t.rects.popper,h=t.modifiersData.preventOverflow,f=$n(t,{elementContext:"reference"}),m=$n(t,{altBoundary:!0}),A=co(f,s),k=co(m,l,h),$=uo(A),N=uo(k);t.modifiersData[n]={referenceClippingOffsets:A,popperEscapeOffsets:k,isReferenceHidden:$,hasPopperEscaped:N},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":$,"data-popper-escaped":N})}const pa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ec};function nc(o,t,n){var s=ve(o),l=[Gt,Xt].indexOf(s)>=0?-1:1,h=typeof n=="function"?n(Object.assign({},t,{placement:o})):n,f=h[0],m=h[1];return f=f||0,m=(m||0)*l,[Gt,re].indexOf(s)>=0?{x:m,y:f}:{x:f,y:m}}function rc(o){var t=o.state,n=o.options,s=o.name,l=n.offset,h=l===void 0?[0,0]:l,f=fs.reduce(function($,N){return $[N]=nc(N,t.rects,h),$},{}),m=f[t.placement],A=m.x,k=m.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=A,t.modifiersData.popperOffsets.y+=k),t.modifiersData[s]=f}const ma={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:rc};function ic(o){var t=o.state,n=o.name;t.modifiersData[n]=ha({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const ws={name:"popperOffsets",enabled:!0,phase:"read",fn:ic,data:{}};function sc(o){return o==="x"?"y":"x"}function oc(o){var t=o.state,n=o.options,s=o.name,l=n.mainAxis,h=l===void 0?!0:l,f=n.altAxis,m=f===void 0?!1:f,A=n.boundary,k=n.rootBoundary,$=n.altBoundary,N=n.padding,H=n.tether,U=H===void 0?!0:H,Q=n.tetherOffset,tt=Q===void 0?0:Q,it=$n(t,{boundary:A,rootBoundary:k,padding:N,altBoundary:$}),lt=ve(t.placement),_t=Dn(t.placement),St=!_t,ot=ms(lt),mt=sc(ot),st=t.modifiersData.popperOffsets,ft=t.rects.reference,Lt=t.rects.popper,Dt=typeof tt=="function"?tt(Object.assign({},t.rects,{placement:t.placement})):tt,ut=typeof Dt=="number"?{mainAxis:Dt,altAxis:Dt}:Object.assign({mainAxis:0,altAxis:0},Dt),rt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Nt={x:0,y:0};if(st){if(h){var At,et=ot==="y"?Xt:Gt,q=ot==="y"?ne:re,j=ot==="y"?"height":"width",z=st[ot],Y=z+it[et],J=z-it[q],Z=U?-Lt[j]/2:0,gt=_t===sn?ft[j]:Lt[j],Tt=_t===sn?-Lt[j]:-ft[j],wt=t.elements.arrow,Ot=U&&wt?ps(wt):{width:0,height:0},Ct=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:aa(),Rt=Ct[et],Bt=Ct[q],Ft=zn(0,ft[j],Ot[j]),X=St?ft[j]/2-Z-Ft-Rt-ut.mainAxis:gt-Ft-Rt-ut.mainAxis,Mt=St?-ft[j]/2+Z+Ft+Bt+ut.mainAxis:Tt+Ft+Bt+ut.mainAxis,Yt=t.elements.arrow&&Qn(t.elements.arrow),vt=Yt?ot==="y"?Yt.clientTop||0:Yt.clientLeft||0:0,te=(At=rt==null?void 0:rt[ot])!=null?At:0,Zr=z+X-te-vt,_e=z+Mt-te,nr=zn(U?Yr(Y,Zr):Y,z,U?rn(J,_e):J);st[ot]=nr,Nt[ot]=nr-z}if(m){var rr,ti=ot==="x"?Xt:Gt,ei=ot==="x"?ne:re,ue=st[mt],Wt=mt==="y"?"height":"width",In=ue+it[ti],De=ue-it[ei],un=[Xt,Gt].indexOf(lt)!==-1,$e=(rr=rt==null?void 0:rt[mt])!=null?rr:0,Le=un?In:ue-ft[Wt]-Lt[Wt]-$e+ut.altAxis,fn=un?ue+ft[Wt]+Lt[Wt]-$e-ut.altAxis:De,ke=U&&un?Ml(Le,ue,fn):zn(U?Le:In,ue,U?fn:De);st[mt]=ke,Nt[mt]=ke-ue}t.modifiersData[s]=Nt}}const va={name:"preventOverflow",enabled:!0,phase:"main",fn:oc,requiresIfExists:["offset"]};function ac(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}function lc(o){return o===ie(o)||!oe(o)?ys(o):ac(o)}function cc(o){var t=o.getBoundingClientRect(),n=On(t.width)/o.offsetWidth||1,s=On(t.height)/o.offsetHeight||1;return n!==1||s!==1}function uc(o,t,n){n===void 0&&(n=!1);var s=oe(t),l=oe(t)&&cc(t),h=qe(t),f=Cn(o,l,n),m={scrollLeft:0,scrollTop:0},A={x:0,y:0};return(s||!s&&!n)&&((ye(t)!=="body"||bs(h))&&(m=lc(t)),oe(t)?(A=Cn(t,!0),A.x+=t.clientLeft,A.y+=t.clientTop):h&&(A.x=_s(h))),{x:f.left+m.scrollLeft-A.x,y:f.top+m.scrollTop-A.y,width:f.width,height:f.height}}function fc(o){var t=new Map,n=new Set,s=[];o.forEach(function(h){t.set(h.name,h)});function l(h){n.add(h.name);var f=[].concat(h.requires||[],h.requiresIfExists||[]);f.forEach(function(m){if(!n.has(m)){var A=t.get(m);A&&l(A)}}),s.push(h)}return o.forEach(function(h){n.has(h.name)||l(h)}),s}function hc(o){var t=fc(o);return ia.reduce(function(n,s){return n.concat(t.filter(function(l){return l.phase===s}))},[])}function dc(o){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(o())})})),t}}function pc(o){var t=o.reduce(function(n,s){var l=n[s.name];return n[s.name]=l?Object.assign({},l,s,{options:Object.assign({},l.options,s.options),data:Object.assign({},l.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var fo={placement:"bottom",modifiers:[],strategy:"absolute"};function ho(){for(var o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Ur(o){o===void 0&&(o={});var t=o,n=t.defaultModifiers,s=n===void 0?[]:n,l=t.defaultOptions,h=l===void 0?fo:l;return function(m,A,k){k===void 0&&(k=h);var $={placement:"bottom",orderedModifiers:[],options:Object.assign({},fo,h),modifiersData:{},elements:{reference:m,popper:A},attributes:{},styles:{}},N=[],H=!1,U={state:$,setOptions:function(lt){var _t=typeof lt=="function"?lt($.options):lt;tt(),$.options=Object.assign({},h,$.options,_t),$.scrollParents={reference:on(m)?Xn(m):m.contextElement?Xn(m.contextElement):[],popper:Xn(A)};var St=hc(pc([].concat(s,$.options.modifiers)));return $.orderedModifiers=St.filter(function(ot){return ot.enabled}),Q(),U.update()},forceUpdate:function(){if(!H){var lt=$.elements,_t=lt.reference,St=lt.popper;if(ho(_t,St)){$.rects={reference:uc(_t,Qn(St),$.options.strategy==="fixed"),popper:ps(St)},$.reset=!1,$.placement=$.options.placement,$.orderedModifiers.forEach(function(ut){return $.modifiersData[ut.name]=Object.assign({},ut.data)});for(var ot=0;ot<$.orderedModifiers.length;ot++){if($.reset===!0){$.reset=!1,ot=-1;continue}var mt=$.orderedModifiers[ot],st=mt.fn,ft=mt.options,Lt=ft===void 0?{}:ft,Dt=mt.name;typeof st=="function"&&($=st({state:$,options:Lt,name:Dt,instance:U})||$)}}}},update:dc(function(){return new Promise(function(it){U.forceUpdate(),it($)})}),destroy:function(){tt(),H=!0}};if(!ho(m,A))return U;U.setOptions(k).then(function(it){!H&&k.onFirstUpdate&&k.onFirstUpdate(it)});function Q(){$.orderedModifiers.forEach(function(it){var lt=it.name,_t=it.options,St=_t===void 0?{}:_t,ot=it.effect;if(typeof ot=="function"){var mt=ot({state:$,name:lt,instance:U,options:St}),st=function(){};N.push(mt||st)}})}function tt(){N.forEach(function(it){return it()}),N=[]}return U}}var mc=Ur(),vc=[gs,ws,vs,ds],gc=Ur({defaultModifiers:vc}),yc=[gs,ws,vs,ds,ma,da,va,ua,pa],Es=Ur({defaultModifiers:yc});const ga=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ta,afterRead:Qo,afterWrite:ra,applyStyles:ds,arrow:ua,auto:Fr,basePlacements:kn,beforeMain:Jo,beforeRead:Xo,beforeWrite:ea,bottom:ne,clippingParents:Uo,computeStyles:vs,createPopper:Es,createPopperBase:mc,createPopperLite:gc,detectOverflow:$n,end:An,eventListeners:gs,flip:da,hide:pa,left:Gt,main:Zo,modifierPhases:ia,offset:ma,placements:fs,popper:wn,popperGenerator:Ur,popperOffsets:ws,preventOverflow:va,read:Go,reference:zo,right:re,start:sn,top:Xt,variationPlacements:ts,viewport:us,write:na},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Ke=new Map,Ri={set(o,t,n){Ke.has(o)||Ke.set(o,new Map);const s=Ke.get(o);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,n)},get(o,t){return Ke.has(o)&&Ke.get(o).get(t)||null},remove(o,t){if(!Ke.has(o))return;const n=Ke.get(o);n.delete(t),n.size===0&&Ke.delete(o)}},_c=1e6,bc=1e3,rs="transitionend",ya=o=>(o&&window.CSS&&window.CSS.escape&&(o=o.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),o),wc=o=>o==null?`${o}`:Object.prototype.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase(),Ec=o=>{do o+=Math.floor(Math.random()*_c);while(document.getElementById(o));return o},Tc=o=>{if(!o)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(o);const s=Number.parseFloat(t),l=Number.parseFloat(n);return!s&&!l?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*bc)},_a=o=>{o.dispatchEvent(new Event(rs))},Se=o=>!o||typeof o!="object"?!1:(typeof o.jquery<"u"&&(o=o[0]),typeof o.nodeType<"u"),Ye=o=>Se(o)?o.jquery?o[0]:o:typeof o=="string"&&o.length>0?document.querySelector(ya(o)):null,Nn=o=>{if(!Se(o)||o.getClientRects().length===0)return!1;const t=getComputedStyle(o).getPropertyValue("visibility")==="visible",n=o.closest("details:not([open])");if(!n)return t;if(n!==o){const s=o.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return t},Be=o=>!o||o.nodeType!==Node.ELEMENT_NODE||o.classList.contains("disabled")?!0:typeof o.disabled<"u"?o.disabled:o.hasAttribute("disabled")&&o.getAttribute("disabled")!=="false",ba=o=>{if(!document.documentElement.attachShadow)return null;if(typeof o.getRootNode=="function"){const t=o.getRootNode();return t instanceof ShadowRoot?t:null}return o instanceof ShadowRoot?o:o.parentNode?ba(o.parentNode):null},Br=()=>{},Jn=o=>{o.offsetHeight},wa=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Mi=[],Sc=o=>{document.readyState==="loading"?(Mi.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Mi)t()}),Mi.push(o)):o()},ae=()=>document.documentElement.dir==="rtl",ce=o=>{Sc(()=>{const t=wa();if(t){const n=o.NAME,s=t.fn[n];t.fn[n]=o.jQueryInterface,t.fn[n].Constructor=o,t.fn[n].noConflict=()=>(t.fn[n]=s,o.jQueryInterface)}})},Jt=(o,t=[],n=o)=>typeof o=="function"?o(...t):n,Ea=(o,t,n=!0)=>{if(!n){Jt(o);return}const l=Tc(t)+5;let h=!1;const f=({target:m})=>{m===t&&(h=!0,t.removeEventListener(rs,f),Jt(o))};t.addEventListener(rs,f),setTimeout(()=>{h||_a(t)},l)},Ts=(o,t,n,s)=>{const l=o.length;let h=o.indexOf(t);return h===-1?!n&&s?o[l-1]:o[0]:(h+=n?1:-1,s&&(h=(h+l)%l),o[Math.max(0,Math.min(h,l-1))])},Ac=/[^.]*(?=\..*)\.|.*/,Oc=/\..*/,Cc=/::\d+$/,ji={};let po=1;const Ta={mouseenter:"mouseover",mouseleave:"mouseout"},Dc=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Sa(o,t){return t&&`${t}::${po++}`||o.uidEvent||po++}function Aa(o){const t=Sa(o);return o.uidEvent=t,ji[t]=ji[t]||{},ji[t]}function $c(o,t){return function n(s){return Ss(s,{delegateTarget:o}),n.oneOff&&P.off(o,s.type,t),t.apply(o,[s])}}function Lc(o,t,n){return function s(l){const h=o.querySelectorAll(t);for(let{target:f}=l;f&&f!==this;f=f.parentNode)for(const m of h)if(m===f)return Ss(l,{delegateTarget:f}),s.oneOff&&P.off(o,l.type,t,n),n.apply(f,[l])}}function Oa(o,t,n=null){return Object.values(o).find(s=>s.callable===t&&s.delegationSelector===n)}function Ca(o,t,n){const s=typeof t=="string",l=s?n:t||n;let h=Da(o);return Dc.has(h)||(h=o),[s,l,h]}function mo(o,t,n,s,l){if(typeof t!="string"||!o)return;let[h,f,m]=Ca(t,n,s);t in Ta&&(f=(Q=>function(tt){if(!tt.relatedTarget||tt.relatedTarget!==tt.delegateTarget&&!tt.delegateTarget.contains(tt.relatedTarget))return Q.call(this,tt)})(f));const A=Aa(o),k=A[m]||(A[m]={}),$=Oa(k,f,h?n:null);if($){$.oneOff=$.oneOff&&l;return}const N=Sa(f,t.replace(Ac,"")),H=h?Lc(o,n,f):$c(o,f);H.delegationSelector=h?n:null,H.callable=f,H.oneOff=l,H.uidEvent=N,k[N]=H,o.addEventListener(m,H,h)}function is(o,t,n,s,l){const h=Oa(t[n],s,l);h&&(o.removeEventListener(n,h,!!l),delete t[n][h.uidEvent])}function kc(o,t,n,s){const l=t[n]||{};for(const[h,f]of Object.entries(l))h.includes(s)&&is(o,t,n,f.callable,f.delegationSelector)}function Da(o){return o=o.replace(Oc,""),Ta[o]||o}const P={on(o,t,n,s){mo(o,t,n,s,!1)},one(o,t,n,s){mo(o,t,n,s,!0)},off(o,t,n,s){if(typeof t!="string"||!o)return;const[l,h,f]=Ca(t,n,s),m=f!==t,A=Aa(o),k=A[f]||{},$=t.startsWith(".");if(typeof h<"u"){if(!Object.keys(k).length)return;is(o,A,f,h,l?n:null);return}if($)for(const N of Object.keys(A))kc(o,A,N,t.slice(1));for(const[N,H]of Object.entries(k)){const U=N.replace(Cc,"");(!m||t.includes(U))&&is(o,A,f,H.callable,H.delegationSelector)}},trigger(o,t,n){if(typeof t!="string"||!o)return null;const s=wa(),l=Da(t),h=t!==l;let f=null,m=!0,A=!0,k=!1;h&&s&&(f=s.Event(t,n),s(o).trigger(f),m=!f.isPropagationStopped(),A=!f.isImmediatePropagationStopped(),k=f.isDefaultPrevented());const $=Ss(new Event(t,{bubbles:m,cancelable:!0}),n);return k&&$.preventDefault(),A&&o.dispatchEvent($),$.defaultPrevented&&f&&f.preventDefault(),$}};function Ss(o,t={}){for(const[n,s]of Object.entries(t))try{o[n]=s}catch{Object.defineProperty(o,n,{configurable:!0,get(){return s}})}return o}function vo(o){if(o==="true")return!0;if(o==="false")return!1;if(o===Number(o).toString())return Number(o);if(o===""||o==="null")return null;if(typeof o!="string")return o;try{return JSON.parse(decodeURIComponent(o))}catch{return o}}function Ki(o){return o.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Ae={setDataAttribute(o,t,n){o.setAttribute(`data-bs-${Ki(t)}`,n)},removeDataAttribute(o,t){o.removeAttribute(`data-bs-${Ki(t)}`)},getDataAttributes(o){if(!o)return{};const t={},n=Object.keys(o.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let l=s.replace(/^bs/,"");l=l.charAt(0).toLowerCase()+l.slice(1,l.length),t[l]=vo(o.dataset[s])}return t},getDataAttribute(o,t){return vo(o.getAttribute(`data-bs-${Ki(t)}`))}};class Zn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const s=Se(n)?Ae.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...Se(n)?Ae.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[s,l]of Object.entries(n)){const h=t[s],f=Se(h)?"element":wc(h);if(!new RegExp(l).test(f))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${f}" but expected type "${l}".`)}}}const Nc="5.3.3";class de extends Zn{constructor(t,n){super(),t=Ye(t),t&&(this._element=t,this._config=this._getConfig(n),Ri.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ri.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,s=!0){Ea(t,n,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Ri.get(Ye(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return Nc}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Hi=o=>{let t=o.getAttribute("data-bs-target");if(!t||t==="#"){let n=o.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>ya(n)).join(","):null},nt={find(o,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,o))},findOne(o,t=document.documentElement){return Element.prototype.querySelector.call(t,o)},children(o,t){return[].concat(...o.children).filter(n=>n.matches(t))},parents(o,t){const n=[];let s=o.parentNode.closest(t);for(;s;)n.push(s),s=s.parentNode.closest(t);return n},prev(o,t){let n=o.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(o,t){let n=o.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(o){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,o).filter(n=>!Be(n)&&Nn(n))},getSelectorFromElement(o){const t=Hi(o);return t&&nt.findOne(t)?t:null},getElementFromSelector(o){const t=Hi(o);return t?nt.findOne(t):null},getMultipleElementsFromSelector(o){const t=Hi(o);return t?nt.find(t):[]}},zr=(o,t="hide")=>{const n=`click.dismiss${o.EVENT_KEY}`,s=o.NAME;P.on(document,n,`[data-bs-dismiss="${s}"]`,function(l){if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),Be(this))return;const h=nt.getElementFromSelector(this)||this.closest(`.${s}`);o.getOrCreateInstance(h)[t]()})},xc="alert",Pc="bs.alert",$a=`.${Pc}`,Ic=`close${$a}`,Rc=`closed${$a}`,Mc="fade",jc="show";class Xr extends de{static get NAME(){return xc}close(){if(P.trigger(this._element,Ic).defaultPrevented)return;this._element.classList.remove(jc);const n=this._element.classList.contains(Mc);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),P.trigger(this._element,Rc),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=Xr.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}zr(Xr,"close");ce(Xr);const Kc="button",Hc="bs.button",Yc=`.${Hc}`,Bc=".data-api",Vc="active",go='[data-bs-toggle="button"]',qc=`click${Yc}${Bc}`;class Gr extends de{static get NAME(){return Kc}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Vc))}static jQueryInterface(t){return this.each(function(){const n=Gr.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}P.on(document,qc,go,o=>{o.preventDefault();const t=o.target.closest(go);Gr.getOrCreateInstance(t).toggle()});ce(Gr);const Fc="swipe",xn=".bs.swipe",Wc=`touchstart${xn}`,Uc=`touchmove${xn}`,zc=`touchend${xn}`,Xc=`pointerdown${xn}`,Gc=`pointerup${xn}`,Qc="touch",Jc="pen",Zc="pointer-event",tu=40,eu={endCallback:null,leftCallback:null,rightCallback:null},nu={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Vr extends Zn{constructor(t,n){super(),this._element=t,!(!t||!Vr.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return eu}static get DefaultType(){return nu}static get NAME(){return Fc}dispose(){P.off(this._element,xn)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Jt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=tu)return;const n=t/this._deltaX;this._deltaX=0,n&&Jt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,Xc,t=>this._start(t)),P.on(this._element,Gc,t=>this._end(t)),this._element.classList.add(Zc)):(P.on(this._element,Wc,t=>this._start(t)),P.on(this._element,Uc,t=>this._move(t)),P.on(this._element,zc,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Jc||t.pointerType===Qc)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ru="carousel",iu="bs.carousel",Fe=`.${iu}`,La=".data-api",su="ArrowLeft",ou="ArrowRight",au=500,Wn="next",_n="prev",En="left",jr="right",lu=`slide${Fe}`,Yi=`slid${Fe}`,cu=`keydown${Fe}`,uu=`mouseenter${Fe}`,fu=`mouseleave${Fe}`,hu=`dragstart${Fe}`,du=`load${Fe}${La}`,pu=`click${Fe}${La}`,ka="carousel",kr="active",mu="slide",vu="carousel-item-end",gu="carousel-item-start",yu="carousel-item-next",_u="carousel-item-prev",Na=".active",xa=".carousel-item",bu=Na+xa,wu=".carousel-item img",Eu=".carousel-indicators",Tu="[data-bs-slide], [data-bs-slide-to]",Su='[data-bs-ride="carousel"]',Au={[su]:jr,[ou]:En},Ou={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Cu={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class tr extends de{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=nt.findOne(Eu,this._element),this._addEventListeners(),this._config.ride===ka&&this.cycle()}static get Default(){return Ou}static get DefaultType(){return Cu}static get NAME(){return ru}next(){this._slide(Wn)}nextWhenVisible(){!document.hidden&&Nn(this._element)&&this.next()}prev(){this._slide(_n)}pause(){this._isSliding&&_a(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){P.one(this._element,Yi,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){P.one(this._element,Yi,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const l=t>s?Wn:_n;this._slide(l,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&P.on(this._element,cu,t=>this._keydown(t)),this._config.pause==="hover"&&(P.on(this._element,uu,()=>this.pause()),P.on(this._element,fu,()=>this._maybeEnableCycle())),this._config.touch&&Vr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of nt.find(wu,this._element))P.on(s,hu,l=>l.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(En)),rightCallback:()=>this._slide(this._directionToOrder(jr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),au+this._config.interval))}};this._swipeHelper=new Vr(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=Au[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=nt.findOne(Na,this._indicatorsElement);n.classList.remove(kr),n.removeAttribute("aria-current");const s=nt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(kr),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const s=this._getActive(),l=t===Wn,h=n||Ts(this._getItems(),s,l,this._config.wrap);if(h===s)return;const f=this._getItemIndex(h),m=U=>P.trigger(this._element,U,{relatedTarget:h,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:f});if(m(lu).defaultPrevented||!s||!h)return;const k=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(f),this._activeElement=h;const $=l?gu:vu,N=l?yu:_u;h.classList.add(N),Jn(h),s.classList.add($),h.classList.add($);const H=()=>{h.classList.remove($,N),h.classList.add(kr),s.classList.remove(kr,N,$),this._isSliding=!1,m(Yi)};this._queueCallback(H,s,this._isAnimated()),k&&this.cycle()}_isAnimated(){return this._element.classList.contains(mu)}_getActive(){return nt.findOne(bu,this._element)}_getItems(){return nt.find(xa,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ae()?t===En?_n:Wn:t===En?Wn:_n}_orderToDirection(t){return ae()?t===_n?En:jr:t===_n?jr:En}static jQueryInterface(t){return this.each(function(){const n=tr.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}P.on(document,pu,Tu,function(o){const t=nt.getElementFromSelector(this);if(!t||!t.classList.contains(ka))return;o.preventDefault();const n=tr.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(Ae.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});P.on(window,du,()=>{const o=nt.find(Su);for(const t of o)tr.getOrCreateInstance(t)});ce(tr);const Du="collapse",$u="bs.collapse",er=`.${$u}`,Lu=".data-api",ku=`show${er}`,Nu=`shown${er}`,xu=`hide${er}`,Pu=`hidden${er}`,Iu=`click${er}${Lu}`,Bi="show",Sn="collapse",Nr="collapsing",Ru="collapsed",Mu=`:scope .${Sn} .${Sn}`,ju="collapse-horizontal",Ku="width",Hu="height",Yu=".collapse.show, .collapse.collapsing",ss='[data-bs-toggle="collapse"]',Bu={parent:null,toggle:!0},Vu={parent:"(null|element)",toggle:"boolean"};class Gn extends de{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const s=nt.find(ss);for(const l of s){const h=nt.getSelectorFromElement(l),f=nt.find(h).filter(m=>m===this._element);h!==null&&f.length&&this._triggerArray.push(l)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Bu}static get DefaultType(){return Vu}static get NAME(){return Du}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Yu).filter(m=>m!==this._element).map(m=>Gn.getOrCreateInstance(m,{toggle:!1}))),t.length&&t[0]._isTransitioning||P.trigger(this._element,ku).defaultPrevented)return;for(const m of t)m.hide();const s=this._getDimension();this._element.classList.remove(Sn),this._element.classList.add(Nr),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const l=()=>{this._isTransitioning=!1,this._element.classList.remove(Nr),this._element.classList.add(Sn,Bi),this._element.style[s]="",P.trigger(this._element,Nu)},f=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(l,this._element,!0),this._element.style[s]=`${this._element[f]}px`}hide(){if(this._isTransitioning||!this._isShown()||P.trigger(this._element,xu).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Jn(this._element),this._element.classList.add(Nr),this._element.classList.remove(Sn,Bi);for(const l of this._triggerArray){const h=nt.getElementFromSelector(l);h&&!this._isShown(h)&&this._addAriaAndCollapsedClass([l],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Nr),this._element.classList.add(Sn),P.trigger(this._element,Pu)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Bi)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Ye(t.parent),t}_getDimension(){return this._element.classList.contains(ju)?Ku:Hu}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ss);for(const n of t){const s=nt.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(t){const n=nt.find(Mu,this._config.parent);return nt.find(t,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const s of t)s.classList.toggle(Ru,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const s=Gn.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}P.on(document,Iu,ss,function(o){(o.target.tagName==="A"||o.delegateTarget&&o.delegateTarget.tagName==="A")&&o.preventDefault();for(const t of nt.getMultipleElementsFromSelector(this))Gn.getOrCreateInstance(t,{toggle:!1}).toggle()});ce(Gn);const yo="dropdown",qu="bs.dropdown",ln=`.${qu}`,As=".data-api",Fu="Escape",_o="Tab",Wu="ArrowUp",bo="ArrowDown",Uu=2,zu=`hide${ln}`,Xu=`hidden${ln}`,Gu=`show${ln}`,Qu=`shown${ln}`,Pa=`click${ln}${As}`,Ia=`keydown${ln}${As}`,Ju=`keyup${ln}${As}`,Tn="show",Zu="dropup",tf="dropend",ef="dropstart",nf="dropup-center",rf="dropdown-center",en='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',sf=`${en}.${Tn}`,Kr=".dropdown-menu",of=".navbar",af=".navbar-nav",lf=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",cf=ae()?"top-end":"top-start",uf=ae()?"top-start":"top-end",ff=ae()?"bottom-end":"bottom-start",hf=ae()?"bottom-start":"bottom-end",df=ae()?"left-start":"right-start",pf=ae()?"right-start":"left-start",mf="top",vf="bottom",gf={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},yf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ge extends de{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=nt.next(this._element,Kr)[0]||nt.prev(this._element,Kr)[0]||nt.findOne(Kr,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return gf}static get DefaultType(){return yf}static get NAME(){return yo}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Be(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!P.trigger(this._element,Gu,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(af))for(const s of[].concat(...document.body.children))P.on(s,"mouseover",Br);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Tn),this._element.classList.add(Tn),P.trigger(this._element,Qu,t)}}hide(){if(Be(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!P.trigger(this._element,zu,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))P.off(s,"mouseover",Br);this._popper&&this._popper.destroy(),this._menu.classList.remove(Tn),this._element.classList.remove(Tn),this._element.setAttribute("aria-expanded","false"),Ae.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,Xu,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Se(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${yo.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof ga>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Se(this._config.reference)?t=Ye(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=Es(t,this._menu,n)}_isShown(){return this._menu.classList.contains(Tn)}_getPlacement(){const t=this._parent;if(t.classList.contains(tf))return df;if(t.classList.contains(ef))return pf;if(t.classList.contains(nf))return mf;if(t.classList.contains(rf))return vf;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(Zu)?n?uf:cf:n?hf:ff}_detectNavbar(){return this._element.closest(of)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ae.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Jt(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const s=nt.find(lf,this._menu).filter(l=>Nn(l));s.length&&Ts(s,n,t===bo,!s.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=ge.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===Uu||t.type==="keyup"&&t.key!==_o)return;const n=nt.find(sf);for(const s of n){const l=ge.getInstance(s);if(!l||l._config.autoClose===!1)continue;const h=t.composedPath(),f=h.includes(l._menu);if(h.includes(l._element)||l._config.autoClose==="inside"&&!f||l._config.autoClose==="outside"&&f||l._menu.contains(t.target)&&(t.type==="keyup"&&t.key===_o||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const m={relatedTarget:l._element};t.type==="click"&&(m.clickEvent=t),l._completeHide(m)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),s=t.key===Fu,l=[Wu,bo].includes(t.key);if(!l&&!s||n&&!s)return;t.preventDefault();const h=this.matches(en)?this:nt.prev(this,en)[0]||nt.next(this,en)[0]||nt.findOne(en,t.delegateTarget.parentNode),f=ge.getOrCreateInstance(h);if(l){t.stopPropagation(),f.show(),f._selectMenuItem(t);return}f._isShown()&&(t.stopPropagation(),f.hide(),h.focus())}}P.on(document,Ia,en,ge.dataApiKeydownHandler);P.on(document,Ia,Kr,ge.dataApiKeydownHandler);P.on(document,Pa,ge.clearMenus);P.on(document,Ju,ge.clearMenus);P.on(document,Pa,en,function(o){o.preventDefault(),ge.getOrCreateInstance(this).toggle()});ce(ge);const Ra="backdrop",_f="fade",wo="show",Eo=`mousedown.bs.${Ra}`,bf={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},wf={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ma extends Zn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return bf}static get DefaultType(){return wf}static get NAME(){return Ra}show(t){if(!this._config.isVisible){Jt(t);return}this._append();const n=this._getElement();this._config.isAnimated&&Jn(n),n.classList.add(wo),this._emulateAnimation(()=>{Jt(t)})}hide(t){if(!this._config.isVisible){Jt(t);return}this._getElement().classList.remove(wo),this._emulateAnimation(()=>{this.dispose(),Jt(t)})}dispose(){this._isAppended&&(P.off(this._element,Eo),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(_f),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Ye(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),P.on(t,Eo,()=>{Jt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Ea(t,this._getElement(),this._config.isAnimated)}}const Ef="focustrap",Tf="bs.focustrap",qr=`.${Tf}`,Sf=`focusin${qr}`,Af=`keydown.tab${qr}`,Of="Tab",Cf="forward",To="backward",Df={autofocus:!0,trapElement:null},$f={autofocus:"boolean",trapElement:"element"};class ja extends Zn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Df}static get DefaultType(){return $f}static get NAME(){return Ef}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,qr),P.on(document,Sf,t=>this._handleFocusin(t)),P.on(document,Af,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,qr))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const s=nt.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===To?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===Of&&(this._lastTabNavDirection=t.shiftKey?To:Cf)}}const So=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ao=".sticky-top",xr="padding-right",Oo="margin-right";class os{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,xr,n=>n+t),this._setElementAttributes(So,xr,n=>n+t),this._setElementAttributes(Ao,Oo,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,xr),this._resetElementAttributes(So,xr),this._resetElementAttributes(Ao,Oo)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,s){const l=this.getWidth(),h=f=>{if(f!==this._element&&window.innerWidth>f.clientWidth+l)return;this._saveInitialAttribute(f,n);const m=window.getComputedStyle(f).getPropertyValue(n);f.style.setProperty(n,`${s(Number.parseFloat(m))}px`)};this._applyManipulationCallback(t,h)}_saveInitialAttribute(t,n){const s=t.style.getPropertyValue(n);s&&Ae.setDataAttribute(t,n,s)}_resetElementAttributes(t,n){const s=l=>{const h=Ae.getDataAttribute(l,n);if(h===null){l.style.removeProperty(n);return}Ae.removeDataAttribute(l,n),l.style.setProperty(n,h)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,n){if(Se(t)){n(t);return}for(const s of nt.find(t,this._element))n(s)}}const Lf="modal",kf="bs.modal",le=`.${kf}`,Nf=".data-api",xf="Escape",Pf=`hide${le}`,If=`hidePrevented${le}`,Ka=`hidden${le}`,Ha=`show${le}`,Rf=`shown${le}`,Mf=`resize${le}`,jf=`click.dismiss${le}`,Kf=`mousedown.dismiss${le}`,Hf=`keydown.dismiss${le}`,Yf=`click${le}${Nf}`,Co="modal-open",Bf="fade",Do="show",Vi="modal-static",Vf=".modal.show",qf=".modal-dialog",Ff=".modal-body",Wf='[data-bs-toggle="modal"]',Uf={backdrop:!0,focus:!0,keyboard:!0},zf={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class an extends de{constructor(t,n){super(t,n),this._dialog=nt.findOne(qf,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new os,this._addEventListeners()}static get Default(){return Uf}static get DefaultType(){return zf}static get NAME(){return Lf}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||P.trigger(this._element,Ha,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Co),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||P.trigger(this._element,Pf).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Do),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){P.off(window,le),P.off(this._dialog,le),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ma({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ja({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=nt.findOne(Ff,this._dialog);n&&(n.scrollTop=0),Jn(this._element),this._element.classList.add(Do);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,Rf,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,Hf,t=>{if(t.key===xf){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),P.on(window,Mf,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),P.on(this._element,Kf,t=>{P.one(this._element,jf,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Co),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,Ka)})}_isAnimated(){return this._element.classList.contains(Bf)}_triggerBackdropTransition(){if(P.trigger(this._element,If).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Vi)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(Vi),this._queueCallback(()=>{this._element.classList.remove(Vi),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!t){const l=ae()?"paddingLeft":"paddingRight";this._element.style[l]=`${n}px`}if(!s&&t){const l=ae()?"paddingRight":"paddingLeft";this._element.style[l]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const s=an.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](n)}})}}P.on(document,Yf,Wf,function(o){const t=nt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&o.preventDefault(),P.one(t,Ha,l=>{l.defaultPrevented||P.one(t,Ka,()=>{Nn(this)&&this.focus()})});const n=nt.findOne(Vf);n&&an.getInstance(n).hide(),an.getOrCreateInstance(t).toggle(this)});zr(an);ce(an);const Xf="offcanvas",Gf="bs.offcanvas",Ce=`.${Gf}`,Ya=".data-api",Qf=`load${Ce}${Ya}`,Jf="Escape",$o="show",Lo="showing",ko="hiding",Zf="offcanvas-backdrop",Ba=".offcanvas.show",th=`show${Ce}`,eh=`shown${Ce}`,nh=`hide${Ce}`,No=`hidePrevented${Ce}`,Va=`hidden${Ce}`,rh=`resize${Ce}`,ih=`click${Ce}${Ya}`,sh=`keydown.dismiss${Ce}`,oh='[data-bs-toggle="offcanvas"]',ah={backdrop:!0,keyboard:!0,scroll:!1},lh={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ve extends de{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ah}static get DefaultType(){return lh}static get NAME(){return Xf}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||P.trigger(this._element,th,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new os().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Lo);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add($o),this._element.classList.remove(Lo),P.trigger(this._element,eh,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||P.trigger(this._element,nh).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ko),this._backdrop.hide();const n=()=>{this._element.classList.remove($o,ko),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new os().reset(),P.trigger(this._element,Va)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){P.trigger(this._element,No);return}this.hide()},n=!!this._config.backdrop;return new Ma({className:Zf,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new ja({trapElement:this._element})}_addEventListeners(){P.on(this._element,sh,t=>{if(t.key===Jf){if(this._config.keyboard){this.hide();return}P.trigger(this._element,No)}})}static jQueryInterface(t){return this.each(function(){const n=Ve.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}P.on(document,ih,oh,function(o){const t=nt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),Be(this))return;P.one(t,Va,()=>{Nn(this)&&this.focus()});const n=nt.findOne(Ba);n&&n!==t&&Ve.getInstance(n).hide(),Ve.getOrCreateInstance(t).toggle(this)});P.on(window,Qf,()=>{for(const o of nt.find(Ba))Ve.getOrCreateInstance(o).show()});P.on(window,rh,()=>{for(const o of nt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(o).position!=="fixed"&&Ve.getOrCreateInstance(o).hide()});zr(Ve);ce(Ve);const ch=/^aria-[\w-]*$/i,qa={"*":["class","dir","id","lang","role",ch],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},uh=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),fh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,hh=(o,t)=>{const n=o.nodeName.toLowerCase();return t.includes(n)?uh.has(n)?!!fh.test(o.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function dh(o,t,n){if(!o.length)return o;if(n&&typeof n=="function")return n(o);const l=new window.DOMParser().parseFromString(o,"text/html"),h=[].concat(...l.body.querySelectorAll("*"));for(const f of h){const m=f.nodeName.toLowerCase();if(!Object.keys(t).includes(m)){f.remove();continue}const A=[].concat(...f.attributes),k=[].concat(t["*"]||[],t[m]||[]);for(const $ of A)hh($,k)||f.removeAttribute($.nodeName)}return l.body.innerHTML}const ph="TemplateFactory",mh={allowList:qa,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},vh={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},gh={entry:"(string|element|function|null)",selector:"(string|element)"};class yh extends Zn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return mh}static get DefaultType(){return vh}static get NAME(){return ph}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[l,h]of Object.entries(this._config.content))this._setContent(t,h,l);const n=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,s]of Object.entries(t))super._typeCheckConfig({selector:n,entry:s},gh)}_setContent(t,n,s){const l=nt.findOne(s,t);if(l){if(n=this._resolvePossibleFunction(n),!n){l.remove();return}if(Se(n)){this._putElementInTemplate(Ye(n),l);return}if(this._config.html){l.innerHTML=this._maybeSanitize(n);return}l.textContent=n}}_maybeSanitize(t){return this._config.sanitize?dh(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Jt(t,[this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const _h="tooltip",bh=new Set(["sanitize","allowList","sanitizeFn"]),qi="fade",wh="modal",Pr="show",Eh=".tooltip-inner",xo=`.${wh}`,Po="hide.bs.modal",Un="hover",Fi="focus",Th="click",Sh="manual",Ah="hide",Oh="hidden",Ch="show",Dh="shown",$h="inserted",Lh="click",kh="focusin",Nh="focusout",xh="mouseenter",Ph="mouseleave",Ih={AUTO:"auto",TOP:"top",RIGHT:ae()?"left":"right",BOTTOM:"bottom",LEFT:ae()?"right":"left"},Rh={allowList:qa,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Mh={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Pn extends de{constructor(t,n){if(typeof ga>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Rh}static get DefaultType(){return Mh}static get NAME(){return _h}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(xo),Po,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=P.trigger(this._element,this.constructor.eventName(Ch)),s=(ba(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const l=this._getTipElement();this._element.setAttribute("aria-describedby",l.getAttribute("id"));const{container:h}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(h.append(l),P.trigger(this._element,this.constructor.eventName($h))),this._popper=this._createPopper(l),l.classList.add(Pr),"ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))P.on(m,"mouseover",Br);const f=()=>{P.trigger(this._element,this.constructor.eventName(Dh)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(f,this.tip,this._isAnimated())}hide(){if(!this._isShown()||P.trigger(this._element,this.constructor.eventName(Ah)).defaultPrevented)return;if(this._getTipElement().classList.remove(Pr),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))P.off(l,"mouseover",Br);this._activeTrigger[Th]=!1,this._activeTrigger[Fi]=!1,this._activeTrigger[Un]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.eventName(Oh)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(qi,Pr),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=Ec(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(qi),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new yh({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Eh]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(qi)}_isShown(){return this.tip&&this.tip.classList.contains(Pr)}_createPopper(t){const n=Jt(this._config.placement,[this,t,this._element]),s=Ih[n.toUpperCase()];return Es(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Jt(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...Jt(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")P.on(this._element,this.constructor.eventName(Lh),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(n!==Sh){const s=n===Un?this.constructor.eventName(xh):this.constructor.eventName(kh),l=n===Un?this.constructor.eventName(Ph):this.constructor.eventName(Nh);P.on(this._element,s,this._config.selector,h=>{const f=this._initializeOnDelegatedTarget(h);f._activeTrigger[h.type==="focusin"?Fi:Un]=!0,f._enter()}),P.on(this._element,l,this._config.selector,h=>{const f=this._initializeOnDelegatedTarget(h);f._activeTrigger[h.type==="focusout"?Fi:Un]=f._element.contains(h.relatedTarget),f._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(xo),Po,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=Ae.getDataAttributes(this._element);for(const s of Object.keys(n))bh.has(s)&&delete n[s];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Ye(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(t[n]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=Pn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ce(Pn);const jh="popover",Kh=".popover-header",Hh=".popover-body",Yh={...Pn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Bh={...Pn.DefaultType,content:"(null|string|element|function)"};class Os extends Pn{static get Default(){return Yh}static get DefaultType(){return Bh}static get NAME(){return jh}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Kh]:this._getTitle(),[Hh]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=Os.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ce(Os);const Vh="scrollspy",qh="bs.scrollspy",Cs=`.${qh}`,Fh=".data-api",Wh=`activate${Cs}`,Io=`click${Cs}`,Uh=`load${Cs}${Fh}`,zh="dropdown-item",bn="active",Xh='[data-bs-spy="scroll"]',Wi="[href]",Gh=".nav, .list-group",Ro=".nav-link",Qh=".nav-item",Jh=".list-group-item",Zh=`${Ro}, ${Qh} > ${Ro}, ${Jh}`,td=".dropdown",ed=".dropdown-toggle",nd={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},rd={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Qr extends de{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return nd}static get DefaultType(){return rd}static get NAME(){return Vh}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Ye(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(P.off(this._config.target,Io),P.on(this._config.target,Io,Wi,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const s=this._rootElement||window,l=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:l,behavior:"smooth"});return}s.scrollTop=l}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=f=>this._targetLinks.get(`#${f.target.id}`),s=f=>{this._previousScrollData.visibleEntryTop=f.target.offsetTop,this._process(n(f))},l=(this._rootElement||document.documentElement).scrollTop,h=l>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=l;for(const f of t){if(!f.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(f));continue}const m=f.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(h&&m){if(s(f),!l)return;continue}!h&&!m&&s(f)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=nt.find(Wi,this._config.target);for(const n of t){if(!n.hash||Be(n))continue;const s=nt.findOne(decodeURI(n.hash),this._element);Nn(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(bn),this._activateParents(t),P.trigger(this._element,Wh,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(zh)){nt.findOne(ed,t.closest(td)).classList.add(bn);return}for(const n of nt.parents(t,Gh))for(const s of nt.prev(n,Zh))s.classList.add(bn)}_clearActiveClass(t){t.classList.remove(bn);const n=nt.find(`${Wi}.${bn}`,t);for(const s of n)s.classList.remove(bn)}static jQueryInterface(t){return this.each(function(){const n=Qr.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}P.on(window,Uh,()=>{for(const o of nt.find(Xh))Qr.getOrCreateInstance(o)});ce(Qr);const id="tab",sd="bs.tab",cn=`.${sd}`,od=`hide${cn}`,ad=`hidden${cn}`,ld=`show${cn}`,cd=`shown${cn}`,ud=`click${cn}`,fd=`keydown${cn}`,hd=`load${cn}`,dd="ArrowLeft",Mo="ArrowRight",pd="ArrowUp",jo="ArrowDown",Ui="Home",Ko="End",nn="active",Ho="fade",zi="show",md="dropdown",Fa=".dropdown-toggle",vd=".dropdown-menu",Xi=`:not(${Fa})`,gd='.list-group, .nav, [role="tablist"]',yd=".nav-item, .list-group-item",_d=`.nav-link${Xi}, .list-group-item${Xi}, [role="tab"]${Xi}`,Wa='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Gi=`${_d}, ${Wa}`,bd=`.${nn}[data-bs-toggle="tab"], .${nn}[data-bs-toggle="pill"], .${nn}[data-bs-toggle="list"]`;class Ln extends de{constructor(t){super(t),this._parent=this._element.closest(gd),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),P.on(this._element,fd,n=>this._keydown(n)))}static get NAME(){return id}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),s=n?P.trigger(n,od,{relatedTarget:t}):null;P.trigger(t,ld,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(nn),this._activate(nt.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(zi);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),P.trigger(t,cd,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Ho))}_deactivate(t,n){if(!t)return;t.classList.remove(nn),t.blur(),this._deactivate(nt.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(zi);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),P.trigger(t,ad,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Ho))}_keydown(t){if(![dd,Mo,pd,jo,Ui,Ko].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(l=>!Be(l));let s;if([Ui,Ko].includes(t.key))s=n[t.key===Ui?0:n.length-1];else{const l=[Mo,jo].includes(t.key);s=Ts(n,t.target,l,!0)}s&&(s.focus({preventScroll:!0}),Ln.getOrCreateInstance(s).show())}_getChildren(){return nt.find(Gi,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",n),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=nt.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const s=this._getOuterElement(t);if(!s.classList.contains(md))return;const l=(h,f)=>{const m=nt.findOne(h,s);m&&m.classList.toggle(f,n)};l(Fa,nn),l(vd,zi),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,s){t.hasAttribute(n)||t.setAttribute(n,s)}_elemIsActive(t){return t.classList.contains(nn)}_getInnerElement(t){return t.matches(Gi)?t:nt.findOne(Gi,t)}_getOuterElement(t){return t.closest(yd)||t}static jQueryInterface(t){return this.each(function(){const n=Ln.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}P.on(document,ud,Wa,function(o){["A","AREA"].includes(this.tagName)&&o.preventDefault(),!Be(this)&&Ln.getOrCreateInstance(this).show()});P.on(window,hd,()=>{for(const o of nt.find(bd))Ln.getOrCreateInstance(o)});ce(Ln);const wd="toast",Ed="bs.toast",We=`.${Ed}`,Td=`mouseover${We}`,Sd=`mouseout${We}`,Ad=`focusin${We}`,Od=`focusout${We}`,Cd=`hide${We}`,Dd=`hidden${We}`,$d=`show${We}`,Ld=`shown${We}`,kd="fade",Yo="hide",Ir="show",Rr="showing",Nd={animation:"boolean",autohide:"boolean",delay:"number"},xd={animation:!0,autohide:!0,delay:5e3};class Jr extends de{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return xd}static get DefaultType(){return Nd}static get NAME(){return wd}show(){if(P.trigger(this._element,$d).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(kd);const n=()=>{this._element.classList.remove(Rr),P.trigger(this._element,Ld),this._maybeScheduleHide()};this._element.classList.remove(Yo),Jn(this._element),this._element.classList.add(Ir,Rr),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||P.trigger(this._element,Cd).defaultPrevented)return;const n=()=>{this._element.classList.add(Yo),this._element.classList.remove(Rr,Ir),P.trigger(this._element,Dd)};this._element.classList.add(Rr),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ir),super.dispose()}isShown(){return this._element.classList.contains(Ir)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,Td,t=>this._onInteraction(t,!0)),P.on(this._element,Sd,t=>this._onInteraction(t,!1)),P.on(this._element,Ad,t=>this._onInteraction(t,!0)),P.on(this._element,Od,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=Jr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}zr(Jr);ce(Jr);class Pd{constructor(){x(this,"id","ticketModal");x(this,"modal",null);x(this,"ticketId",null);const t=document.querySelector(`#${this.id}`);t&&(this.modal=new an(t))}handler(){const t=document.querySelector("#btnRedirectTicket");t&&t.addEventListener("click",()=>{this.modal&&(this.modal.hide(),window.location.href=`/ticket?id=${this.ticketId}`)})}show(t){if(this.modal&&t.ticket){this.ticketId=t.ticket.id;const n=document.querySelector("#modal_ticket_id");n&&(n.textContent=t.ticket.id_disp??"");const s=document.querySelector("#ticket_name");s&&(s.value=t.ticket.name??"");const l=document.querySelector("#description");if(l&&(l.innerHTML=t.ticket.description??""),t.members&&t.members.length>0){const $=document.querySelector("#members");if($){let N='<table class="table table-hover">';N+="<thead>",N+="<tr>",N+='<th scope="col">メールアドレス</th>',N+='<th scope="col">名前</th>',N+="</tr>",N+="</thead>",N+="<tbody>";for(const H of t.members)N+="<tr>",N+=`<td>${H.email}</td>`,N+=`<td>${H.name}</td>`,N+="</tr>";N+="</tbody>",N+="</table>",$.innerHTML=N}}const h=document.querySelector("#start_date");if(h){let $='<label class="form-label" for="startdate">開始日</label>';$+=`<input class="form-control" id="startdate" type="date" value="${t.ticket.start_date??""}">`,h.innerHTML=$}const f=document.querySelector("#end_date");if(f){let $='<label class="form-label" for="enddate">終了日</label>';$+=`<input class="form-control" id="enddate" type="date" value="${t.ticket.end_date??""}">`,f.innerHTML=$}const m=document.querySelector("#progress");m&&(m.value=`${t.ticket.progress}`);const A=document.querySelector("#finished");A&&(A.checked=t.ticket.progress===100);const k=document.querySelector(`#priority${t.ticket.priority}`);if(k&&(k.checked=!0),t.parent){const $=document.querySelector("#parent");$&&($.innerHTML=`${t.parent.id_disp}&nbsp;&nbsp;${t.parent.name}`)}if(t.children){const $=document.querySelector("#children");if($){let N="";for(const H of t.children)N+=`<p class="mb-0">${H.id_disp}&nbsp;&nbsp;${H.name}</p>`;$.innerHTML=N}}this.modal.show()}}hide(){this.modal&&this.modal.hide()}}var Ua={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Hr,function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])})(e,r)},s=function(){return(s=Object.assign||function(e){for(var r,i=1,a=arguments.length;i<a;i++)for(var c in r=arguments[i])Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c]);return e}).apply(this,arguments)};function l(e,r,i){for(var a,c=0,u=r.length;c<u;c++)!a&&c in r||((a=a||Array.prototype.slice.call(r,0,c))[c]=r[c]);return e.concat(a||Array.prototype.slice.call(r))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Hr,f=Object.keys,m=Array.isArray;function A(e,r){return typeof r!="object"||f(r).forEach(function(i){e[i]=r[i]}),e}typeof Promise>"u"||h.Promise||(h.Promise=Promise);var k=Object.getPrototypeOf,$={}.hasOwnProperty;function N(e,r){return $.call(e,r)}function H(e,r){typeof r=="function"&&(r=r(k(e))),(typeof Reflect>"u"?f:Reflect.ownKeys)(r).forEach(function(i){Q(e,i,r[i])})}var U=Object.defineProperty;function Q(e,r,i,a){U(e,r,A(i&&N(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},a))}function tt(e){return{from:function(r){return e.prototype=Object.create(r.prototype),Q(e.prototype,"constructor",e),{extend:H.bind(null,e.prototype)}}}}var it=Object.getOwnPropertyDescriptor,lt=[].slice;function _t(e,r,i){return lt.call(e,r,i)}function St(e,r){return r(e)}function ot(e){if(!e)throw new Error("Assertion Failed")}function mt(e){h.setImmediate?setImmediate(e):setTimeout(e,0)}function st(e,r){if(typeof r=="string"&&N(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var i=[],a=0,c=r.length;a<c;++a){var u=st(e,r[a]);i.push(u)}return i}var d=r.indexOf(".");if(d!==-1){var p=e[r.substr(0,d)];return p==null?void 0:st(p,r.substr(d+1))}}function ft(e,r,i){if(e&&r!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){ot(typeof i!="string"&&"length"in i);for(var a=0,c=r.length;a<c;++a)ft(e,r[a],i[a])}else{var u,d,p=r.indexOf(".");p!==-1?(u=r.substr(0,p),(d=r.substr(p+1))===""?i===void 0?m(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=i:ft(p=!(p=e[u])||!N(e,u)?e[u]={}:p,d,i)):i===void 0?m(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=i}}function Lt(e){var r,i={};for(r in e)N(e,r)&&(i[r]=e[r]);return i}var Dt=[].concat;function ut(e){return Dt.apply([],e)}var we="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ut([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(r){return r+e+"Array"})}))).filter(function(e){return h[e]}),rt=new Set(we.map(function(e){return h[e]})),Nt=null;function At(e){return Nt=new WeakMap,e=function r(i){if(!i||typeof i!="object")return i;var a=Nt.get(i);if(a)return a;if(m(i)){a=[],Nt.set(i,a);for(var c=0,u=i.length;c<u;++c)a.push(r(i[c]))}else if(rt.has(i.constructor))a=i;else{var d,p=k(i);for(d in a=p===Object.prototype?{}:Object.create(p),Nt.set(i,a),i)N(i,d)&&(a[d]=r(i[d]))}return a}(e),Nt=null,e}var et={}.toString;function q(e){return et.call(e).slice(8,-1)}var j=typeof Symbol<"u"?Symbol.iterator:"@@iterator",z=typeof j=="symbol"?function(e){var r;return e!=null&&(r=e[j])&&r.apply(e)}:function(){return null};function Y(e,r){return r=e.indexOf(r),0<=r&&e.splice(r,1),0<=r}var J={};function Z(e){var r,i,a,c;if(arguments.length===1){if(m(e))return e.slice();if(this===J&&typeof e=="string")return[e];if(c=z(e)){for(i=[];!(a=c.next()).done;)i.push(a.value);return i}if(e==null)return[e];if(typeof(r=e.length)!="number")return[e];for(i=new Array(r);r--;)i[r]=e[r];return i}for(r=arguments.length,i=new Array(r);r--;)i[r]=arguments[r];return i}var gt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},$e=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],se=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat($e),Tt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function wt(e,r){this.name=e,this.message=r}function Ot(e,r){return e+". Errors: "+Object.keys(r).map(function(i){return r[i].toString()}).filter(function(i,a,c){return c.indexOf(i)===a}).join(`
`)}function Ct(e,r,i,a){this.failures=r,this.failedKeys=a,this.successCount=i,this.message=Ot(e,r)}function Rt(e,r){this.name="BulkError",this.failures=Object.keys(r).map(function(i){return r[i]}),this.failuresByPos=r,this.message=Ot(e,this.failures)}tt(wt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),tt(Ct).from(wt),tt(Rt).from(wt);var Bt=se.reduce(function(e,r){return e[r]=r+"Error",e},{}),Ft=wt,X=se.reduce(function(e,r){var i=r+"Error";function a(c,u){this.name=i,c?typeof c=="string"?(this.message="".concat(c).concat(u?`
 `+u:""),this.inner=u||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Tt[r]||i,this.inner=null)}return tt(a).from(Ft),e[r]=a,e},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var Mt=$e.reduce(function(e,r){return e[r+"Error"]=X[r],e},{}),Yt=se.reduce(function(e,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=X[r]),e},{});function vt(){}function te(e){return e}function Zr(e,r){return e==null||e===te?r:function(i){return r(e(i))}}function _e(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function nr(e,r){return e===vt?r:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var a=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var u=r.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?_e(a,this.onsuccess):a),c&&(this.onerror=this.onerror?_e(c,this.onerror):c),u!==void 0?u:i}}function rr(e,r){return e===vt?r:function(){e.apply(this,arguments);var i=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?_e(i,this.onsuccess):i),a&&(this.onerror=this.onerror?_e(a,this.onerror):a)}}function ti(e,r){return e===vt?r:function(i){var a=e.apply(this,arguments);A(i,a);var c=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,i=r.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?_e(c,this.onsuccess):c),u&&(this.onerror=this.onerror?_e(u,this.onerror):u),a===void 0?i===void 0?void 0:i:A(a,i)}}function ei(e,r){return e===vt?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function ue(e,r){return e===vt?r:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var a=this,c=arguments.length,u=new Array(c);c--;)u[c]=arguments[c];return i.then(function(){return r.apply(a,u)})}return r.apply(this,arguments)}}Yt.ModifyError=Ct,Yt.DexieError=wt,Yt.BulkError=Rt;var Wt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function In(e){Wt=e}var De={},un=100,we=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,k(e),e];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,k(r),e]}(),$e=we[0],se=we[1],we=we[2],se=se&&se.then,Le=$e&&$e.constructor,fn=!!we,ke=function(e,r){Rn.push([e,r]),ir&&(queueMicrotask(Xa),ir=!1)},ni=!0,ir=!0,Ue=[],sr=[],ri=te,Ne={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:vt,pgp:!1,env:{},finalize:vt},G=Ne,Rn=[],ze=0,or=[];function F(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=G;if(typeof e!="function"){if(e!==De)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&si(this,this._value))}this._state=null,this._value=null,++r.ref,function i(a,c){try{c(function(u){if(a._state===null){if(u===a)throw new TypeError("A promise cannot be resolved with itself.");var d=a._lib&&hn();u&&typeof u.then=="function"?i(a,function(p,_){u instanceof F?u._then(p,_):u.then(p,_)}):(a._state=!0,a._value=u,$s(a)),d&&dn()}},si.bind(null,a))}catch(u){si(a,u)}}(this,e)}var ii={get:function(){var e=G,r=ur;function i(a,c){var u=this,d=!e.global&&(e!==G||r!==ur),p=d&&!Pe(),_=new F(function(g,E){oi(u,new Ds(ks(a,e,d,p),ks(c,e,d,p),g,E,e))});return this._consoleTask&&(_._consoleTask=this._consoleTask),_}return i.prototype=De,i},set:function(e){Q(this,"then",e&&e.prototype===De?ii:{get:function(){return e},set:ii.set})}};function Ds(e,r,i,a,c){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=i,this.reject=a,this.psd=c}function si(e,r){var i,a;sr.push(r),e._state===null&&(i=e._lib&&hn(),r=ri(r),e._state=!1,e._value=r,a=e,Ue.some(function(c){return c._value===a._value})||Ue.push(a),$s(e),i&&dn())}function $s(e){var r=e._listeners;e._listeners=[];for(var i=0,a=r.length;i<a;++i)oi(e,r[i]);var c=e._PSD;--c.ref||c.finalize(),ze===0&&(++ze,ke(function(){--ze==0&&ai()},[]))}function oi(e,r){if(e._state!==null){var i=e._state?r.onFulfilled:r.onRejected;if(i===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++ze,ke(za,[i,e,r])}else e._listeners.push(r)}function za(e,r,i){try{var a,c=r._value;!r._state&&sr.length&&(sr=[]),a=Wt&&r._consoleTask?r._consoleTask.run(function(){return e(c)}):e(c),r._state||sr.indexOf(c)!==-1||function(u){for(var d=Ue.length;d;)if(Ue[--d]._value===u._value)return Ue.splice(d,1)}(r),i.resolve(a)}catch(u){i.reject(u)}finally{--ze==0&&ai(),--i.psd.ref||i.psd.finalize()}}function Xa(){Xe(Ne,function(){hn()&&dn()})}function hn(){var e=ni;return ir=ni=!1,e}function dn(){var e,r,i;do for(;0<Rn.length;)for(e=Rn,Rn=[],i=e.length,r=0;r<i;++r){var a=e[r];a[0].apply(null,a[1])}while(0<Rn.length);ir=ni=!0}function ai(){var e=Ue;Ue=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var r=or.slice(0),i=r.length;i;)r[--i]()}function ar(e){return new F(De,!1,e)}function kt(e,r){var i=G;return function(){var a=hn(),c=G;try{return Ie(i,!0),e.apply(this,arguments)}catch(u){r&&r(u)}finally{Ie(c,!1),a&&dn()}}}H(F.prototype,{then:ii,_then:function(e,r){oi(this,new Ds(null,null,e,r,G))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=e,i=arguments[1];return typeof r=="function"?this.then(null,function(a){return(a instanceof r?i:ar)(a)}):this.then(null,function(a){return(a&&a.name===r?i:ar)(a)})},finally:function(e){return this.then(function(r){return F.resolve(e()).then(function(){return r})},function(r){return F.resolve(e()).then(function(){return ar(r)})})},timeout:function(e,r){var i=this;return e<1/0?new F(function(a,c){var u=setTimeout(function(){return c(new X.Timeout(r))},e);i.then(a,c).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Q(F.prototype,Symbol.toStringTag,"Dexie.Promise"),Ne.env=Ls(),H(F,{all:function(){var e=Z.apply(null,arguments).map(fr);return new F(function(r,i){e.length===0&&r([]);var a=e.length;e.forEach(function(c,u){return F.resolve(c).then(function(d){e[u]=d,--a||r(e)},i)})})},resolve:function(e){return e instanceof F?e:e&&typeof e.then=="function"?new F(function(r,i){e.then(r,i)}):new F(De,!0,e)},reject:ar,race:function(){var e=Z.apply(null,arguments).map(fr);return new F(function(r,i){e.map(function(a){return F.resolve(a).then(r,i)})})},PSD:{get:function(){return G},set:function(e){return G=e}},totalEchoes:{get:function(){return ur}},newPSD:xe,usePSD:Xe,scheduler:{get:function(){return ke},set:function(e){ke=e}},rejectionMapper:{get:function(){return ri},set:function(e){ri=e}},follow:function(e,r){return new F(function(i,a){return xe(function(c,u){var d=G;d.unhandleds=[],d.onunhandled=u,d.finalize=_e(function(){var p,_=this;p=function(){_.unhandleds.length===0?c():u(_.unhandleds[0])},or.push(function g(){p(),or.splice(or.indexOf(g),1)}),++ze,ke(function(){--ze==0&&ai()},[])},d.finalize),e()},r,i,a)})}}),Le&&(Le.allSettled&&Q(F,"allSettled",function(){var e=Z.apply(null,arguments).map(fr);return new F(function(r){e.length===0&&r([]);var i=e.length,a=new Array(i);e.forEach(function(c,u){return F.resolve(c).then(function(d){return a[u]={status:"fulfilled",value:d}},function(d){return a[u]={status:"rejected",reason:d}}).then(function(){return--i||r(a)})})})}),Le.any&&typeof AggregateError<"u"&&Q(F,"any",function(){var e=Z.apply(null,arguments).map(fr);return new F(function(r,i){e.length===0&&i(new AggregateError([]));var a=e.length,c=new Array(a);e.forEach(function(u,d){return F.resolve(u).then(function(p){return r(p)},function(p){c[d]=p,--a||i(new AggregateError(c))})})})}));var jt={awaits:0,echoes:0,id:0},Ga=0,lr=[],cr=0,ur=0,Qa=0;function xe(e,r,i,a){var c=G,u=Object.create(c);return u.parent=c,u.ref=0,u.global=!1,u.id=++Qa,Ne.env,u.env=fn?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject}:{},r&&A(u,r),++c.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},a=Xe(u,e,i,a),u.ref===0&&u.finalize(),a}function pn(){return jt.id||(jt.id=++Ga),++jt.awaits,jt.echoes+=un,jt.id}function Pe(){return!!jt.awaits&&(--jt.awaits==0&&(jt.id=0),jt.echoes=jt.awaits*un,!0)}function fr(e){return jt.echoes&&e&&e.constructor===Le?(pn(),e.then(function(r){return Pe(),r},function(r){return Pe(),xt(r)})):e}function Ja(){var e=lr[lr.length-1];lr.pop(),Ie(e,!1)}function Ie(e,r){var i,a=G;(r?!jt.echoes||cr++&&e===G:!cr||--cr&&e===G)||queueMicrotask(r?(function(c){++ur,jt.echoes&&--jt.echoes!=0||(jt.echoes=jt.awaits=jt.id=0),lr.push(G),Ie(c,!0)}).bind(null,e):Ja),e!==G&&(G=e,a===Ne&&(Ne.env=Ls()),fn&&(i=Ne.env.Promise,r=e.env,(a.global||e.global)&&(Object.defineProperty(h,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))))}function Ls(){var e=h.Promise;return fn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Xe(e,r,i,a,c){var u=G;try{return Ie(e,!0),r(i,a,c)}finally{Ie(u,!1)}}function ks(e,r,i,a){return typeof e!="function"?e:function(){var c=G;i&&pn(),Ie(r,!0);try{return e.apply(this,arguments)}finally{Ie(c,!1),a&&queueMicrotask(Pe)}}}function li(e){Promise===Le&&jt.echoes===0?cr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+se).indexOf("[native code]")===-1&&(pn=Pe=vt);var xt=F.reject,Ge="￿",be="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ns="String expected.",mn=[],hr="__dbnames",ci="readonly",ui="readwrite";function Qe(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}var xs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function dr(e){return typeof e!="string"||/\./.test(e)?function(r){return r}:function(r){return r[e]===void 0&&e in r&&delete(r=At(r))[e],r}}function Ps(){throw X.Type()}function yt(e,r){try{var i=Is(e),a=Is(r);if(i!==a)return i==="Array"?1:a==="Array"?-1:i==="binary"?1:a==="binary"?-1:i==="string"?1:a==="string"?-1:i==="Date"?1:a!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return r<e?1:e<r?-1:0;case"binary":return function(c,u){for(var d=c.length,p=u.length,_=d<p?d:p,g=0;g<_;++g)if(c[g]!==u[g])return c[g]<u[g]?-1:1;return d===p?0:d<p?-1:1}(Rs(e),Rs(r));case"Array":return function(c,u){for(var d=c.length,p=u.length,_=d<p?d:p,g=0;g<_;++g){var E=yt(c[g],u[g]);if(E!==0)return E}return d===p?0:d<p?-1:1}(e,r)}}catch{}return NaN}function Is(e){var r=typeof e;return r!="object"?r:ArrayBuffer.isView(e)?"binary":(e=q(e),e==="ArrayBuffer"?"binary":e)}function Rs(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ms=($t.prototype._trans=function(e,r,i){var a=this._tx||G.trans,c=this.name,u=Wt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function d(g,E,v){if(!v.schema[c])throw new X.NotFound("Table "+c+" not part of transaction");return r(v.idbtrans,v)}var p=hn();try{var _=a&&a.db._novip===this.db._novip?a===G.trans?a._promise(e,d,i):xe(function(){return a._promise(e,d,i)},{trans:a,transless:G.transless||G}):function g(E,v,T,y){if(E.idbdb&&(E._state.openComplete||G.letThrough||E._vip)){var w=E._createTransaction(v,T,E._dbSchema);try{w.create(),E._state.PR1398_maxLoop=3}catch(S){return S.name===Bt.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return g(E,v,T,y)})):xt(S)}return w._promise(v,function(S,b){return xe(function(){return G.trans=w,y(S,b,w)})}).then(function(S){if(v==="readwrite")try{w.idbtrans.commit()}catch{}return v==="readonly"?S:w._completion.then(function(){return S})})}if(E._state.openComplete)return xt(new X.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return xt(new X.DatabaseClosed);E.open().catch(vt)}return E._state.dbReadyPromise.then(function(){return g(E,v,T,y)})}(this.db,e,[this.name],d);return u&&(_._consoleTask=u,_=_.catch(function(g){return console.trace(g),xt(g)})),_}finally{p&&dn()}},$t.prototype.get=function(e,r){var i=this;return e&&e.constructor===Object?this.where(e).first(r):e==null?xt(new X.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return i.core.get({trans:a,key:e}).then(function(c){return i.hook.reading.fire(c)})}).then(r)},$t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(m(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var r=f(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(_){if(_.compound&&r.every(function(E){return 0<=_.keyPath.indexOf(E)})){for(var g=0;g<r.length;++g)if(r.indexOf(_.keyPath[g])===-1)return!1;return!0}return!1}).sort(function(_,g){return _.keyPath.length-g.keyPath.length})[0];if(i&&this.db._maxKey!==Ge){var d=i.keyPath.slice(0,r.length);return this.where(d).equals(d.map(function(g){return e[g]}))}!i&&Wt&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var a=this.schema.idxByName,c=this.db._deps.indexedDB;function u(_,g){return c.cmp(_,g)===0}var p=r.reduce(function(T,g){var E=T[0],v=T[1],T=a[g],y=e[g];return[E||T,E||!T?Qe(v,T&&T.multi?function(w){return w=st(w,g),m(w)&&w.some(function(S){return u(y,S)})}:function(w){return u(y,st(w,g))}):v]},[null,null]),d=p[0],p=p[1];return d?this.where(d.name).equals(e[d.keyPath]).filter(p):i?this.filter(p):this.where(r).equals("")},$t.prototype.filter=function(e){return this.toCollection().and(e)},$t.prototype.count=function(e){return this.toCollection().count(e)},$t.prototype.offset=function(e){return this.toCollection().offset(e)},$t.prototype.limit=function(e){return this.toCollection().limit(e)},$t.prototype.each=function(e){return this.toCollection().each(e)},$t.prototype.toArray=function(e){return this.toCollection().toArray(e)},$t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},$t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,m(e)?"[".concat(e.join("+"),"]"):e))},$t.prototype.reverse=function(){return this.toCollection().reverse()},$t.prototype.mapToClass=function(e){var r,i=this.db,a=this.name;function c(){return r!==null&&r.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Ps&&(function(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function E(){this.constructor=_}n(_,g),_.prototype=g===null?Object.create(g):(E.prototype=g.prototype,new E)}(c,r=e),Object.defineProperty(c.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),c.prototype.table=function(){return a},e=c);for(var u=new Set,d=e.prototype;d;d=k(d))Object.getOwnPropertyNames(d).forEach(function(_){return u.add(_)});function p(_){if(!_)return _;var g,E=Object.create(e.prototype);for(g in _)if(!u.has(g))try{E[g]=_[g]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},$t.prototype.defineClass=function(){return this.mapToClass(function(e){A(this,e)})},$t.prototype.add=function(e,r){var i=this,a=this.schema.primKey,c=a.auto,u=a.keyPath,d=e;return u&&c&&(d=dr(u)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"add",keys:r!=null?[r]:null,values:[d]})}).then(function(p){return p.numFailures?F.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{ft(e,u,p)}catch{}return p})},$t.prototype.update=function(e,r){return typeof e!="object"||m(e)?this.where(":id").equals(e).modify(r):(e=st(e,this.schema.primKey.keyPath),e===void 0?xt(new X.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(r))},$t.prototype.put=function(e,r){var i=this,a=this.schema.primKey,c=a.auto,u=a.keyPath,d=e;return u&&c&&(d=dr(u)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"put",values:[d],keys:r!=null?[r]:null})}).then(function(p){return p.numFailures?F.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{ft(e,u,p)}catch{}return p})},$t.prototype.delete=function(e){var r=this;return this._trans("readwrite",function(i){return r.core.mutate({trans:i,type:"delete",keys:[e]})}).then(function(i){return i.numFailures?F.reject(i.failures[0]):void 0})},$t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"deleteRange",range:xs})}).then(function(r){return r.numFailures?F.reject(r.failures[0]):void 0})},$t.prototype.bulkGet=function(e){var r=this;return this._trans("readonly",function(i){return r.core.getMany({keys:e,trans:i}).then(function(a){return a.map(function(c){return r.hook.reading.fire(c)})})})},$t.prototype.bulkAdd=function(e,r,i){var a=this,c=Array.isArray(r)?r:void 0,u=(i=i||(c?void 0:r))?i.allKeys:void 0;return this._trans("readwrite",function(d){var g=a.schema.primKey,p=g.auto,g=g.keyPath;if(g&&c)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var _=e.length,g=g&&p?e.map(dr(g)):e;return a.core.mutate({trans:d,type:"add",keys:c,values:g,wantResults:u}).then(function(w){var v=w.numFailures,T=w.results,y=w.lastResult,w=w.failures;if(v===0)return u?T:y;throw new Rt("".concat(a.name,".bulkAdd(): ").concat(v," of ").concat(_," operations failed"),w)})})},$t.prototype.bulkPut=function(e,r,i){var a=this,c=Array.isArray(r)?r:void 0,u=(i=i||(c?void 0:r))?i.allKeys:void 0;return this._trans("readwrite",function(d){var g=a.schema.primKey,p=g.auto,g=g.keyPath;if(g&&c)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var _=e.length,g=g&&p?e.map(dr(g)):e;return a.core.mutate({trans:d,type:"put",keys:c,values:g,wantResults:u}).then(function(w){var v=w.numFailures,T=w.results,y=w.lastResult,w=w.failures;if(v===0)return u?T:y;throw new Rt("".concat(a.name,".bulkPut(): ").concat(v," of ").concat(_," operations failed"),w)})})},$t.prototype.bulkUpdate=function(e){var r=this,i=this.core,a=e.map(function(d){return d.key}),c=e.map(function(d){return d.changes}),u=[];return this._trans("readwrite",function(d){return i.getMany({trans:d,keys:a,cache:"clone"}).then(function(p){var _=[],g=[];e.forEach(function(v,T){var y=v.key,w=v.changes,S=p[T];if(S){for(var b=0,O=Object.keys(w);b<O.length;b++){var C=O[b],D=w[C];if(C===r.schema.primKey.keyPath){if(yt(D,y)!==0)throw new X.Constraint("Cannot update primary key in bulkUpdate()")}else ft(S,C,D)}u.push(T),_.push(y),g.push(S)}});var E=_.length;return i.mutate({trans:d,type:"put",keys:_,values:g,updates:{keys:a,changeSpecs:c}}).then(function(v){var T=v.numFailures,y=v.failures;if(T===0)return E;for(var w=0,S=Object.keys(y);w<S.length;w++){var b,O=S[w],C=u[Number(O)];C!=null&&(b=y[O],delete y[O],y[C]=b)}throw new Rt("".concat(r.name,".bulkUpdate(): ").concat(T," of ").concat(E," operations failed"),y)})})})},$t.prototype.bulkDelete=function(e){var r=this,i=e.length;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"delete",keys:e})}).then(function(d){var c=d.numFailures,u=d.lastResult,d=d.failures;if(c===0)return u;throw new Rt("".concat(r.name,".bulkDelete(): ").concat(c," of ").concat(i," operations failed"),d)})},$t);function $t(){}function Mn(e){function r(d,p){if(p){for(var _=arguments.length,g=new Array(_-1);--_;)g[_-1]=arguments[_];return i[d].subscribe.apply(null,g),e}if(typeof d=="string")return i[d]}var i={};r.addEventType=u;for(var a=1,c=arguments.length;a<c;++a)u(arguments[a]);return r;function u(d,p,_){if(typeof d!="object"){var g;p=p||ei;var E={subscribers:[],fire:_=_||vt,subscribe:function(v){E.subscribers.indexOf(v)===-1&&(E.subscribers.push(v),E.fire=p(E.fire,v))},unsubscribe:function(v){E.subscribers=E.subscribers.filter(function(T){return T!==v}),E.fire=E.subscribers.reduce(p,_)}};return i[d]=r[d]=E}f(g=d).forEach(function(v){var T=g[v];if(m(T))u(v,g[v][0],g[v][1]);else{if(T!=="asap")throw new X.InvalidArgument("Invalid event config");var y=u(v,te,function(){for(var w=arguments.length,S=new Array(w);w--;)S[w]=arguments[w];y.subscribers.forEach(function(b){mt(function(){b.apply(null,S)})})})}})}}function jn(e,r){return tt(r).from({prototype:e}),r}function vn(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function fi(e,r){e.filter=Qe(e.filter,r)}function hi(e,r,i){var a=e.replayFilter;e.replayFilter=a?function(){return Qe(a(),r())}:r,e.justLimit=i&&!a}function pr(e,r){if(e.isPrimKey)return r.primaryKey;var i=r.getIndexByKeyPath(e.index);if(!i)throw new X.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return i}function js(e,r,i){var a=pr(e,r.schema);return r.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function mr(e,r,i,a){var c=e.replayFilter?Qe(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},d=function(p,_,g){var E,v;c&&!c(_,g,function(T){return _.stop(T)},function(T){return _.fail(T)})||((v=""+(E=_.primaryKey))=="[object ArrayBuffer]"&&(v=""+new Uint8Array(E)),N(u,v)||(u[v]=!0,r(p,_,g)))};return Promise.all([e.or._iterate(d,i),Ks(js(e,a,i),e.algorithm,d,!e.keysOnly&&e.valueMapper)])}return Ks(js(e,a,i),Qe(e.algorithm,c),r,!e.keysOnly&&e.valueMapper)}function Ks(e,r,i,a){var c=kt(a?function(u,d,p){return i(a(u),d,p)}:i);return e.then(function(u){if(u)return u.start(function(){var d=function(){return u.continue()};r&&!r(u,function(p){return d=p},function(p){u.stop(p),d=vt},function(p){u.fail(p),d=vt})||c(u.value,u,function(p){return d=p}),d()})})}var we=Symbol(),Kn=(Hs.prototype.execute=function(e){if(this.add!==void 0){var r=this.add;if(m(r))return l(l([],m(e)?e:[],!0),r).sort();if(typeof r=="number")return(Number(e)||0)+r;if(typeof r=="bigint")try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(this.remove!==void 0){var i=this.remove;if(m(i))return m(e)?e.filter(function(a){return!i.includes(a)}).sort():[];if(typeof i=="number")return Number(e)-i;if(typeof i=="bigint")try{return BigInt(e)-i}catch{return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return r=(r=this.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof e=="string"&&e.startsWith(r)?this.replacePrefix[1]+e.substring(r.length):e},Hs);function Hs(e){Object.assign(this,e)}var Za=(bt.prototype._read=function(e,r){var i=this._ctx;return i.error?i.table._trans(null,xt.bind(null,i.error)):i.table._trans("readonly",e).then(r)},bt.prototype._write=function(e){var r=this._ctx;return r.error?r.table._trans(null,xt.bind(null,r.error)):r.table._trans("readwrite",e,"locked")},bt.prototype._addAlgorithm=function(e){var r=this._ctx;r.algorithm=Qe(r.algorithm,e)},bt.prototype._iterate=function(e,r){return mr(this._ctx,e,r,this._ctx.table.core)},bt.prototype.clone=function(e){var r=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&A(i,e),r._ctx=i,r},bt.prototype.raw=function(){return this._ctx.valueMapper=null,this},bt.prototype.each=function(e){var r=this._ctx;return this._read(function(i){return mr(r,e,i,r.table.core)})},bt.prototype.count=function(e){var r=this;return this._read(function(i){var a=r._ctx,c=a.table.core;if(vn(a,!0))return c.count({trans:i,query:{index:pr(a,c.schema),range:a.range}}).then(function(d){return Math.min(d,a.limit)});var u=0;return mr(a,function(){return++u,!1},i,c).then(function(){return u})}).then(e)},bt.prototype.sortBy=function(e,r){var i=e.split(".").reverse(),a=i[0],c=i.length-1;function u(_,g){return g?u(_[i[g]],g-1):_[a]}var d=this._ctx.dir==="next"?1:-1;function p(_,g){return _=u(_,c),g=u(g,c),_<g?-d:g<_?d:0}return this.toArray(function(_){return _.sort(p)}).then(r)},bt.prototype.toArray=function(e){var r=this;return this._read(function(i){var a=r._ctx;if(a.dir==="next"&&vn(a,!0)&&0<a.limit){var c=a.valueMapper,u=pr(a,a.table.core.schema);return a.table.core.query({trans:i,limit:a.limit,values:!0,query:{index:u,range:a.range}}).then(function(p){return p=p.result,c?p.map(c):p})}var d=[];return mr(a,function(p){return d.push(p)},i,a.table.core).then(function(){return d})},e)},bt.prototype.offset=function(e){var r=this._ctx;return e<=0||(r.offset+=e,vn(r)?hi(r,function(){var i=e;return function(a,c){return i===0||(i===1?--i:c(function(){a.advance(i),i=0}),!1)}}):hi(r,function(){var i=e;return function(){return--i<0}})),this},bt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),hi(this._ctx,function(){var r=e;return function(i,a,c){return--r<=0&&a(c),0<=r}},!0),this},bt.prototype.until=function(e,r){return fi(this._ctx,function(i,a,c){return!e(i.value)||(a(c),r)}),this},bt.prototype.first=function(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)},bt.prototype.last=function(e){return this.reverse().first(e)},bt.prototype.filter=function(e){var r;return fi(this._ctx,function(i){return e(i.value)}),(r=this._ctx).isMatch=Qe(r.isMatch,e),this},bt.prototype.and=function(e){return this.filter(e)},bt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},bt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},bt.prototype.desc=function(){return this.reverse()},bt.prototype.eachKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(i,a){e(a.key,a)})},bt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},bt.prototype.eachPrimaryKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(i,a){e(a.primaryKey,a)})},bt.prototype.keys=function(e){var r=this._ctx;r.keysOnly=!r.isMatch;var i=[];return this.each(function(a,c){i.push(c.key)}).then(function(){return i}).then(e)},bt.prototype.primaryKeys=function(e){var r=this._ctx;if(r.dir==="next"&&vn(r,!0)&&0<r.limit)return this._read(function(a){var c=pr(r,r.table.core.schema);return r.table.core.query({trans:a,values:!1,limit:r.limit,query:{index:c,range:r.range}})}).then(function(a){return a.result}).then(e);r.keysOnly=!r.isMatch;var i=[];return this.each(function(a,c){i.push(c.primaryKey)}).then(function(){return i}).then(e)},bt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},bt.prototype.firstKey=function(e){return this.limit(1).keys(function(r){return r[0]}).then(e)},bt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},bt.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var r={};return fi(this._ctx,function(c){var a=c.primaryKey.toString(),c=N(r,a);return r[a]=!0,!c}),this},bt.prototype.modify=function(e){var r=this,i=this._ctx;return this._write(function(a){var c,u,d;d=typeof e=="function"?e:(c=f(e),u=c.length,function(b){for(var O=!1,C=0;C<u;++C){var D=c[C],L=e[D],R=st(b,D);L instanceof Kn?(ft(b,D,L.execute(R)),O=!0):R!==L&&(ft(b,D,L),O=!0)}return O});function p(b,D){var C=D.failures,D=D.numFailures;w+=b-D;for(var L=0,R=f(C);L<R.length;L++){var B=R[L];y.push(C[B])}}var _=i.table.core,g=_.schema.primaryKey,E=g.outbound,v=g.extractKey,T=r.db._options.modifyChunkSize||200,y=[],w=0,S=[];return r.clone().primaryKeys().then(function(b){function O(D){var L=Math.min(T,b.length-D);return _.getMany({trans:a,keys:b.slice(D,D+L),cache:"immutable"}).then(function(R){for(var B=[],M=[],K=E?[]:null,V=[],I=0;I<L;++I){var at=R[I],ct={value:At(at),primKey:b[D+I]};d.call(ct,ct.value,ct)!==!1&&(ct.value==null?V.push(b[D+I]):E||yt(v(at),v(ct.value))===0?(M.push(ct.value),E&&K.push(b[D+I])):(V.push(b[D+I]),B.push(ct.value)))}return Promise.resolve(0<B.length&&_.mutate({trans:a,type:"add",values:B}).then(function(pt){for(var ht in pt.failures)V.splice(parseInt(ht),1);p(B.length,pt)})).then(function(){return(0<M.length||C&&typeof e=="object")&&_.mutate({trans:a,type:"put",keys:K,values:M,criteria:C,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<D}).then(function(pt){return p(M.length,pt)})}).then(function(){return(0<V.length||C&&e===di)&&_.mutate({trans:a,type:"delete",keys:V,criteria:C,isAdditionalChunk:0<D}).then(function(pt){return p(V.length,pt)})}).then(function(){return b.length>D+L&&O(D+T)})})}var C=vn(i)&&i.limit===1/0&&(typeof e!="function"||e===di)&&{index:i.index,range:i.range};return O(0).then(function(){if(0<y.length)throw new Ct("Error modifying one or more objects",y,w,S);return b.length})})})},bt.prototype.delete=function(){var e=this._ctx,r=e.range;return vn(e)&&(e.isPrimKey||r.type===3)?this._write(function(i){var a=e.table.core.schema.primaryKey,c=r;return e.table.core.count({trans:i,query:{index:a,range:c}}).then(function(u){return e.table.core.mutate({trans:i,type:"deleteRange",range:c}).then(function(d){var p=d.failures;if(d.lastResult,d.results,d=d.numFailures,d)throw new Ct("Could not delete some values",Object.keys(p).map(function(_){return p[_]}),u-d);return u-d})})}):this.modify(di)},bt);function bt(){}var di=function(e,r){return r.value=null};function tl(e,r){return e<r?-1:e===r?0:1}function el(e,r){return r<e?-1:e===r?0:1}function ee(e,r,i){return e=e instanceof Bs?new e.Collection(e):e,e._ctx.error=new(i||TypeError)(r),e}function gn(e){return new e.Collection(e,function(){return Ys("")}).limit(0)}function vr(e,r,i,a){var c,u,d,p,_,g,E,v=i.length;if(!i.every(function(w){return typeof w=="string"}))return ee(e,Ns);function T(w){c=w==="next"?function(b){return b.toUpperCase()}:function(b){return b.toLowerCase()},u=w==="next"?function(b){return b.toLowerCase()}:function(b){return b.toUpperCase()},d=w==="next"?tl:el;var S=i.map(function(b){return{lower:u(b),upper:c(b)}}).sort(function(b,O){return d(b.lower,O.lower)});p=S.map(function(b){return b.upper}),_=S.map(function(b){return b.lower}),E=(g=w)==="next"?"":a}T("next"),e=new e.Collection(e,function(){return Re(p[0],_[v-1]+a)}),e._ondirectionchange=function(w){T(w)};var y=0;return e._addAlgorithm(function(w,S,b){var O=w.key;if(typeof O!="string")return!1;var C=u(O);if(r(C,_,y))return!0;for(var D=null,L=y;L<v;++L){var R=function(B,M,K,V,I,at){for(var ct=Math.min(B.length,V.length),pt=-1,ht=0;ht<ct;++ht){var fe=M[ht];if(fe!==V[ht])return I(B[ht],K[ht])<0?B.substr(0,ht)+K[ht]+K.substr(ht+1):I(B[ht],V[ht])<0?B.substr(0,ht)+V[ht]+K.substr(ht+1):0<=pt?B.substr(0,pt)+M[pt]+K.substr(pt+1):null;I(B[ht],fe)<0&&(pt=ht)}return ct<V.length&&at==="next"?B+K.substr(B.length):ct<B.length&&at==="prev"?B.substr(0,K.length):pt<0?null:B.substr(0,pt)+V[pt]+K.substr(pt+1)}(O,C,p[L],_[L],d,g);R===null&&D===null?y=L+1:(D===null||0<d(D,R))&&(D=R)}return S(D!==null?function(){w.continue(D+E)}:b),!1}),e}function Re(e,r,i,a){return{type:2,lower:e,upper:r,lowerOpen:i,upperOpen:a}}function Ys(e){return{type:1,lower:e,upper:e}}var Bs=(Object.defineProperty(Kt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kt.prototype.between=function(e,r,i,a){i=i!==!1,a=a===!0;try{return 0<this._cmp(e,r)||this._cmp(e,r)===0&&(i||a)&&(!i||!a)?gn(this):new this.Collection(this,function(){return Re(e,r,!i,!a)})}catch{return ee(this,be)}},Kt.prototype.equals=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Ys(e)})},Kt.prototype.above=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Re(e,void 0,!0)})},Kt.prototype.aboveOrEqual=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Re(e,void 0,!1)})},Kt.prototype.below=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Re(void 0,e,!1,!0)})},Kt.prototype.belowOrEqual=function(e){return e==null?ee(this,be):new this.Collection(this,function(){return Re(void 0,e)})},Kt.prototype.startsWith=function(e){return typeof e!="string"?ee(this,Ns):this.between(e,e+Ge,!0,!0)},Kt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):vr(this,function(r,i){return r.indexOf(i[0])===0},[e],Ge)},Kt.prototype.equalsIgnoreCase=function(e){return vr(this,function(r,i){return r===i[0]},[e],"")},Kt.prototype.anyOfIgnoreCase=function(){var e=Z.apply(J,arguments);return e.length===0?gn(this):vr(this,function(r,i){return i.indexOf(r)!==-1},e,"")},Kt.prototype.startsWithAnyOfIgnoreCase=function(){var e=Z.apply(J,arguments);return e.length===0?gn(this):vr(this,function(r,i){return i.some(function(a){return r.indexOf(a)===0})},e,Ge)},Kt.prototype.anyOf=function(){var e=this,r=Z.apply(J,arguments),i=this._cmp;try{r.sort(i)}catch{return ee(this,be)}if(r.length===0)return gn(this);var a=new this.Collection(this,function(){return Re(r[0],r[r.length-1])});a._ondirectionchange=function(u){i=u==="next"?e._ascending:e._descending,r.sort(i)};var c=0;return a._addAlgorithm(function(u,d,p){for(var _=u.key;0<i(_,r[c]);)if(++c===r.length)return d(p),!1;return i(_,r[c])===0||(d(function(){u.continue(r[c])}),!1)}),a},Kt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kt.prototype.noneOf=function(){var e=Z.apply(J,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ee(this,be)}var r=e.reduce(function(i,a){return i?i.concat([[i[i.length-1][1],a]]):[[-1/0,a]]},null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},Kt.prototype.inAnyRange=function(O,r){var i=this,a=this._cmp,c=this._ascending,u=this._descending,d=this._min,p=this._max;if(O.length===0)return gn(this);if(!O.every(function(C){return C[0]!==void 0&&C[1]!==void 0&&c(C[0],C[1])<=0}))return ee(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);var _=!r||r.includeLowers!==!1,g=r&&r.includeUppers===!0,E,v=c;function T(C,D){return v(C[0],D[0])}try{(E=O.reduce(function(C,D){for(var L=0,R=C.length;L<R;++L){var B=C[L];if(a(D[0],B[1])<0&&0<a(D[1],B[0])){B[0]=d(B[0],D[0]),B[1]=p(B[1],D[1]);break}}return L===R&&C.push(D),C},[])).sort(T)}catch{return ee(this,be)}var y=0,w=g?function(C){return 0<c(C,E[y][1])}:function(C){return 0<=c(C,E[y][1])},S=_?function(C){return 0<u(C,E[y][0])}:function(C){return 0<=u(C,E[y][0])},b=w,O=new this.Collection(this,function(){return Re(E[0][0],E[E.length-1][1],!_,!g)});return O._ondirectionchange=function(C){v=C==="next"?(b=w,c):(b=S,u),E.sort(T)},O._addAlgorithm(function(C,D,L){for(var R,B=C.key;b(B);)if(++y===E.length)return D(L),!1;return!w(R=B)&&!S(R)||(i._cmp(B,E[y][1])===0||i._cmp(B,E[y][0])===0||D(function(){v===c?C.continue(E[y][0]):C.continue(E[y][1])}),!1)}),O},Kt.prototype.startsWithAnyOf=function(){var e=Z.apply(J,arguments);return e.every(function(r){return typeof r=="string"})?e.length===0?gn(this):this.inAnyRange(e.map(function(r){return[r,r+Ge]})):ee(this,"startsWithAnyOf() only works with strings")},Kt);function Kt(){}function pe(e){return kt(function(r){return Hn(r),e(r.target.error),!1})}function Hn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Yn="storagemutated",pi="x-storagemutated-1",Me=Mn(null,Yn),nl=(me.prototype._lock=function(){return ot(!G.global),++this._reculock,this._reculock!==1||G.global||(G.lockOwnerFor=this),this},me.prototype._unlock=function(){if(ot(!G.global),--this._reculock==0)for(G.global||(G.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Xe(e[1],e[0])}catch{}}return this},me.prototype._locked=function(){return this._reculock&&G.lockOwnerFor!==this},me.prototype.create=function(e){var r=this;if(!this.mode)return this;var i=this.db.idbdb,a=this.db._state.dbOpenError;if(ot(!this.idbtrans),!e&&!i)switch(a&&a.name){case"DatabaseClosedError":throw new X.DatabaseClosed(a);case"MissingAPIError":throw new X.MissingAPI(a.message,a);default:throw new X.OpenFailed(a)}if(!this.active)throw new X.TransactionInactive;return ot(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=kt(function(c){Hn(c),r._reject(e.error)}),e.onabort=kt(function(c){Hn(c),r.active&&r._reject(new X.Abort(e.error)),r.active=!1,r.on("abort").fire(c)}),e.oncomplete=kt(function(){r.active=!1,r._resolve(),"mutatedParts"in e&&Me.storagemutated.fire(e.mutatedParts)}),this},me.prototype._promise=function(e,r,i){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return xt(new X.ReadOnly("Transaction is readonly"));if(!this.active)return xt(new X.TransactionInactive);if(this._locked())return new F(function(u,d){a._blockedFuncs.push([function(){a._promise(e,r,i).then(u,d)},G])});if(i)return xe(function(){var u=new F(function(d,p){a._lock();var _=r(d,p,a);_&&_.then&&_.then(d,p)});return u.finally(function(){return a._unlock()}),u._lib=!0,u});var c=new F(function(u,d){var p=r(u,d,a);p&&p.then&&p.then(u,d)});return c._lib=!0,c},me.prototype._root=function(){return this.parent?this.parent._root():this},me.prototype.waitFor=function(e){var r,i=this._root(),a=F.resolve(e);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return a}):(i._waitingFor=a,i._waitingQueue=[],r=i.idbtrans.objectStore(i.storeNames[0]),function u(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(r.get(-1/0).onsuccess=u)}());var c=i._waitingFor;return new F(function(u,d){a.then(function(p){return i._waitingQueue.push(kt(u.bind(null,p)))},function(p){return i._waitingQueue.push(kt(d.bind(null,p)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},me.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))},me.prototype.table=function(e){var r=this._memoizedTables||(this._memoizedTables={});if(N(r,e))return r[e];var i=this.schema[e];if(!i)throw new X.NotFound("Table "+e+" not part of transaction");return i=new this.db.Table(e,i,this),i.core=this.db.core.table(e),r[e]=i},me);function me(){}function mi(e,r,i,a,c,u,d){return{name:e,keyPath:r,unique:i,multi:a,auto:c,compound:u,src:(i&&!d?"&":"")+(a?"*":"")+(c?"++":"")+Vs(r)}}function Vs(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function vi(e,r,i){return{name:e,primKey:r,indexes:i,mappedClass:null,idxByName:(a=function(c){return[c.name,c]},i.reduce(function(c,u,d){return d=a(u,d),d&&(c[d[0]]=d[1]),c},{}))};var a}var Bn=function(e){try{return e.only([[]]),Bn=function(){return[[]]},[[]]}catch{return Bn=function(){return Ge},Ge}};function gi(e){return e==null?function(){}:typeof e=="string"?(r=e).split(".").length===1?function(i){return i[r]}:function(i){return st(i,r)}:function(i){return st(i,e)};var r}function qs(e){return[].slice.call(e)}var rl=0;function Vn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function il(e,r,_){function a(b){if(b.type===3)return null;if(b.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var y=b.lower,w=b.upper,S=b.lowerOpen,b=b.upperOpen;return y===void 0?w===void 0?null:r.upperBound(w,!!b):w===void 0?r.lowerBound(y,!!S):r.bound(y,w,!!S,!!b)}function c(T){var y,w=T.name;return{name:w,schema:T,mutate:function(S){var b=S.trans,O=S.type,C=S.keys,D=S.values,L=S.range;return new Promise(function(R,B){R=kt(R);var M=b.objectStore(w),K=M.keyPath==null,V=O==="put"||O==="add";if(!V&&O!=="delete"&&O!=="deleteRange")throw new Error("Invalid operation type: "+O);var I,at=(C||D||{length:1}).length;if(C&&D&&C.length!==D.length)throw new Error("Given keys array must have same length as given values array.");if(at===0)return R({numFailures:0,failures:{},results:[],lastResult:void 0});function ct(zt){++fe,Hn(zt)}var pt=[],ht=[],fe=0;if(O==="deleteRange"){if(L.type===4)return R({numFailures:fe,failures:ht,results:[],lastResult:void 0});L.type===3?pt.push(I=M.clear()):pt.push(I=M.delete(a(L)))}else{var K=V?K?[D,C]:[D,null]:[C,null],dt=K[0],Vt=K[1];if(V)for(var qt=0;qt<at;++qt)pt.push(I=Vt&&Vt[qt]!==void 0?M[O](dt[qt],Vt[qt]):M[O](dt[qt])),I.onerror=ct;else for(qt=0;qt<at;++qt)pt.push(I=M[O](dt[qt])),I.onerror=ct}function $r(zt){zt=zt.target.result,pt.forEach(function(tn,Ii){return tn.error!=null&&(ht[Ii]=tn.error)}),R({numFailures:fe,failures:ht,results:O==="delete"?C:pt.map(function(tn){return tn.result}),lastResult:zt})}I.onerror=function(zt){ct(zt),$r(zt)},I.onsuccess=$r})},getMany:function(S){var b=S.trans,O=S.keys;return new Promise(function(C,D){C=kt(C);for(var L,R=b.objectStore(w),B=O.length,M=new Array(B),K=0,V=0,I=function(pt){pt=pt.target,M[pt._pos]=pt.result,++V===K&&C(M)},at=pe(D),ct=0;ct<B;++ct)O[ct]!=null&&((L=R.get(O[ct]))._pos=ct,L.onsuccess=I,L.onerror=at,++K);K===0&&C(M)})},get:function(S){var b=S.trans,O=S.key;return new Promise(function(C,D){C=kt(C);var L=b.objectStore(w).get(O);L.onsuccess=function(R){return C(R.target.result)},L.onerror=pe(D)})},query:(y=g,function(S){return new Promise(function(b,O){b=kt(b);var C,D,L,K=S.trans,R=S.values,B=S.limit,I=S.query,M=B===1/0?void 0:B,V=I.index,I=I.range,K=K.objectStore(w),V=V.isPrimaryKey?K:K.index(V.name),I=a(I);if(B===0)return b({result:[]});y?((M=R?V.getAll(I,M):V.getAllKeys(I,M)).onsuccess=function(at){return b({result:at.target.result})},M.onerror=pe(O)):(C=0,D=!R&&"openKeyCursor"in V?V.openKeyCursor(I):V.openCursor(I),L=[],D.onsuccess=function(at){var ct=D.result;return ct?(L.push(R?ct.value:ct.primaryKey),++C===B?b({result:L}):void ct.continue()):b({result:L})},D.onerror=pe(O))})}),openCursor:function(S){var b=S.trans,O=S.values,C=S.query,D=S.reverse,L=S.unique;return new Promise(function(R,B){R=kt(R);var V=C.index,M=C.range,K=b.objectStore(w),K=V.isPrimaryKey?K:K.index(V.name),V=D?L?"prevunique":"prev":L?"nextunique":"next",I=!O&&"openKeyCursor"in K?K.openKeyCursor(a(M),V):K.openCursor(a(M),V);I.onerror=pe(B),I.onsuccess=kt(function(at){var ct,pt,ht,fe,dt=I.result;dt?(dt.___id=++rl,dt.done=!1,ct=dt.continue.bind(dt),pt=(pt=dt.continuePrimaryKey)&&pt.bind(dt),ht=dt.advance.bind(dt),fe=function(){throw new Error("Cursor not stopped")},dt.trans=b,dt.stop=dt.continue=dt.continuePrimaryKey=dt.advance=function(){throw new Error("Cursor not started")},dt.fail=kt(B),dt.next=function(){var Vt=this,qt=1;return this.start(function(){return qt--?Vt.continue():Vt.stop()}).then(function(){return Vt})},dt.start=function(Vt){function qt(){if(I.result)try{Vt()}catch(zt){dt.fail(zt)}else dt.done=!0,dt.start=function(){throw new Error("Cursor behind last entry")},dt.stop()}var $r=new Promise(function(zt,tn){zt=kt(zt),I.onerror=pe(tn),dt.fail=tn,dt.stop=function(Ii){dt.stop=dt.continue=dt.continuePrimaryKey=dt.advance=fe,zt(Ii)}});return I.onsuccess=kt(function(zt){I.onsuccess=qt,qt()}),dt.continue=ct,dt.continuePrimaryKey=pt,dt.advance=ht,qt(),$r},R(dt)):R(null)},B)})},count:function(S){var b=S.query,O=S.trans,C=b.index,D=b.range;return new Promise(function(L,R){var B=O.objectStore(w),M=C.isPrimaryKey?B:B.index(C.name),B=a(D),M=B?M.count(B):M.count();M.onsuccess=kt(function(K){return L(K.target.result)}),M.onerror=pe(R)})}}}var u,d,p,E=(d=_,p=qs((u=e).objectStoreNames),{schema:{name:u.name,tables:p.map(function(T){return d.objectStore(T)}).map(function(T){var y=T.keyPath,b=T.autoIncrement,w=m(y),S={},b={name:T.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y==null,compound:w,keyPath:y,autoIncrement:b,unique:!0,extractKey:gi(y)},indexes:qs(T.indexNames).map(function(O){return T.index(O)}).map(function(L){var C=L.name,D=L.unique,R=L.multiEntry,L=L.keyPath,R={name:C,compound:m(L),keyPath:L,unique:D,multiEntry:R,extractKey:gi(L)};return S[Vn(L)]=R}),getIndexByKeyPath:function(O){return S[Vn(O)]}};return S[":id"]=b.primaryKey,y!=null&&(S[Vn(y)]=b.primaryKey),b})},hasGetAll:0<p.length&&"getAll"in d.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),_=E.schema,g=E.hasGetAll,E=_.tables.map(c),v={};return E.forEach(function(T){return v[T.name]=T}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(T){if(!v[T])throw new Error("Table '".concat(T,"' not found"));return v[T]},MIN_KEY:-1/0,MAX_KEY:Bn(r),schema:_}}function sl(e,r,i,a){var c=i.IDBKeyRange;return i.indexedDB,{dbcore:(a=il(r,c,a),e.dbcore.reduce(function(u,d){return d=d.create,s(s({},u),d(u))},a))}}function gr(e,a){var i=a.db,a=sl(e._middlewares,i,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(c){var u=c.name;e.core.schema.tables.some(function(d){return d.name===u})&&(c.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=c.core))})}function yr(e,r,i,a){i.forEach(function(c){var u=a[c];r.forEach(function(d){var p=function _(g,E){return it(g,E)||(g=k(g))&&_(g,E)}(d,c);(!p||"value"in p&&p.value===void 0)&&(d===e.Transaction.prototype||d instanceof e.Transaction?Q(d,c,{get:function(){return this.table(c)},set:function(_){U(this,c,{value:_,writable:!0,configurable:!0,enumerable:!0})}}):d[c]=new e.Table(c,u))})})}function yi(e,r){r.forEach(function(i){for(var a in i)i[a]instanceof e.Table&&delete i[a]})}function ol(e,r){return e._cfg.version-r._cfg.version}function al(e,r,i,a){var c=e._dbSchema;i.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=vi("$meta",Ws("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,c);u.create(i),u._completion.catch(a);var d=u._reject.bind(u),p=G.transless||G;xe(function(){return G.trans=u,G.transless=p,r!==0?(gr(e,i),g=r,((_=u).storeNames.includes("$meta")?_.table("$meta").get("version").then(function(E){return E??g}):F.resolve(g)).then(function(E){return T=E,y=u,w=i,S=[],E=(v=e)._versions,b=v._dbSchema=br(0,v.idbdb,w),(E=E.filter(function(O){return O._cfg.version>=T})).length!==0?(E.forEach(function(O){S.push(function(){var C=b,D=O._cfg.dbschema;wr(v,C,w),wr(v,D,w),b=v._dbSchema=D;var L=_i(C,D);L.add.forEach(function(V){bi(w,V[0],V[1].primKey,V[1].indexes)}),L.change.forEach(function(V){if(V.recreate)throw new X.Upgrade("Not yet support for changing primary key");var I=w.objectStore(V.name);V.add.forEach(function(at){return _r(I,at)}),V.change.forEach(function(at){I.deleteIndex(at.name),_r(I,at)}),V.del.forEach(function(at){return I.deleteIndex(at)})});var R=O._cfg.contentUpgrade;if(R&&O._cfg.version>T){gr(v,w),y._memoizedTables={};var B=Lt(D);L.del.forEach(function(V){B[V]=C[V]}),yi(v,[v.Transaction.prototype]),yr(v,[v.Transaction.prototype],f(B),B),y.schema=B;var M,K=gt(R);return K&&pn(),L=F.follow(function(){var V;(M=R(y))&&K&&(V=Pe.bind(null,null),M.then(V,V))}),M&&typeof M.then=="function"?F.resolve(M):L.then(function(){return M})}}),S.push(function(C){var D,L,R=O._cfg.dbschema;D=R,L=C,[].slice.call(L.db.objectStoreNames).forEach(function(B){return D[B]==null&&L.db.deleteObjectStore(B)}),yi(v,[v.Transaction.prototype]),yr(v,[v.Transaction.prototype],v._storeNames,v._dbSchema),y.schema=v._dbSchema}),S.push(function(C){v.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(v.idbdb.version/10)===O._cfg.version?(v.idbdb.deleteObjectStore("$meta"),delete v._dbSchema.$meta,v._storeNames=v._storeNames.filter(function(D){return D!=="$meta"})):C.objectStore("$meta").put(O._cfg.version,"version"))})}),function O(){return S.length?F.resolve(S.shift()(y.idbtrans)).then(O):F.resolve()}().then(function(){Fs(b,w)})):F.resolve();var v,T,y,w,S,b}).catch(d)):(f(c).forEach(function(E){bi(i,E,c[E].primKey,c[E].indexes)}),gr(e,i),void F.follow(function(){return e.on.populate.fire(u)}).catch(d));var _,g})}function ll(e,r){Fs(e._dbSchema,r),r.db.version%10!=0||r.objectStoreNames.contains("$meta")||r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var i=br(0,e.idbdb,r);wr(e,e._dbSchema,r);for(var a=0,c=_i(i,e._dbSchema).change;a<c.length;a++){var u=function(d){if(d.change.length||d.recreate)return console.warn("Unable to patch indexes of table ".concat(d.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=r.objectStore(d.name);d.add.forEach(function(_){Wt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(d.name,".").concat(_.src)),_r(p,_)})}(c[a]);if(typeof u=="object")return u.value}}function _i(e,r){var i,a={del:[],add:[],change:[]};for(i in e)r[i]||a.del.push(i);for(i in r){var c=e[i],u=r[i];if(c){var d={name:i,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||c.primKey.auto!==u.primKey.auto)d.recreate=!0,a.change.push(d);else{var p=c.idxByName,_=u.idxByName,g=void 0;for(g in p)_[g]||d.del.push(g);for(g in _){var E=p[g],v=_[g];E?E.src!==v.src&&d.change.push(v):d.add.push(v)}(0<d.del.length||0<d.add.length||0<d.change.length)&&a.change.push(d)}}else a.add.push([i,u])}return a}function bi(e,r,i,a){var c=e.db.createObjectStore(r,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return a.forEach(function(u){return _r(c,u)}),c}function Fs(e,r){f(e).forEach(function(i){r.db.objectStoreNames.contains(i)||(Wt&&console.debug("Dexie: Creating missing table",i),bi(r,i,e[i].primKey,e[i].indexes))})}function _r(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function br(e,r,i){var a={};return _t(r.objectStoreNames,0).forEach(function(c){for(var u=i.objectStore(c),d=mi(Vs(g=u.keyPath),g||"",!0,!1,!!u.autoIncrement,g&&typeof g!="string",!0),p=[],_=0;_<u.indexNames.length;++_){var E=u.index(u.indexNames[_]),g=E.keyPath,E=mi(E.name,g,!!E.unique,!!E.multiEntry,!1,g&&typeof g!="string",!1);p.push(E)}a[c]=vi(c,d,p)}),a}function wr(e,r,i){for(var a=i.db.objectStoreNames,c=0;c<a.length;++c){var u=a[c],d=i.objectStore(u);e._hasGetAll="getAll"in d;for(var p=0;p<d.indexNames.length;++p){var _=d.indexNames[p],g=d.index(_).keyPath,E=typeof g=="string"?g:"["+_t(g).join("+")+"]";!r[u]||(g=r[u].idxByName[E])&&(g.name=_,delete r[u].idxByName[E],r[u].idxByName[_]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ws(e){return e.split(",").map(function(r,i){var a=(r=r.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return mi(a,c||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),m(c),i===0)})}var cl=(Er.prototype._parseStoresSpec=function(e,r){f(e).forEach(function(i){if(e[i]!==null){var a=Ws(e[i]),c=a.shift();if(c.unique=!0,c.multi)throw new X.Schema("Primary key cannot be multi-valued");a.forEach(function(u){if(u.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")}),r[i]=vi(i,c,a)}})},Er.prototype.stores=function(i){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?A(this._cfg.storesSource,i):i;var i=r._versions,a={},c={};return i.forEach(function(u){A(a,u._cfg.storesSource),c=u._cfg.dbschema={},u._parseStoresSpec(a,c)}),r._dbSchema=c,yi(r,[r._allTables,r,r.Transaction.prototype]),yr(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],f(c),c),r._storeNames=f(c),this},Er.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||vt,e),this},Er);function Er(){}function wi(e,r){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new Ee(hr,{addons:[],indexedDB:e,IDBKeyRange:r})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function Ei(e){return e&&typeof e.databases=="function"}function Ti(e){return xe(function(){return G.letThrough=!0,e()})}function Si(e){return!("from"in e)}var Ut=function(e,r){if(!this){var i=new Ut;return e&&"d"in e&&A(i,e),i}A(this,arguments.length?{d:1,from:e,to:1<arguments.length?r:e}:{d:0})};function qn(e,r,i){var a=yt(r,i);if(!isNaN(a)){if(0<a)throw RangeError();if(Si(e))return A(e,{from:r,to:i,d:1});var c=e.l,a=e.r;if(yt(i,e.from)<0)return c?qn(c,r,i):e.l={from:r,to:i,d:1,l:null,r:null},zs(e);if(0<yt(r,e.to))return a?qn(a,r,i):e.r={from:r,to:i,d:1,l:null,r:null},zs(e);yt(r,e.from)<0&&(e.from=r,e.l=null,e.d=a?a.d+1:1),0<yt(i,e.to)&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1),i=!e.r,c&&!e.l&&Fn(e,c),a&&i&&Fn(e,a)}}function Fn(e,r){Si(r)||function i(a,_){var u=_.from,d=_.to,p=_.l,_=_.r;qn(a,u,d),p&&i(a,p),_&&i(a,_)}(e,r)}function Us(e,r){var i=Tr(r),a=i.next();if(a.done)return!1;for(var c=a.value,u=Tr(e),d=u.next(c.from),p=d.value;!a.done&&!d.done;){if(yt(p.from,c.to)<=0&&0<=yt(p.to,c.from))return!0;yt(c.from,p.from)<0?c=(a=i.next(p.from)).value:p=(d=u.next(c.from)).value}return!1}function Tr(e){var r=Si(e)?null:{s:0,n:e};return{next:function(i){for(var a=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,a)for(;r.n.l&&yt(i,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!a||yt(i,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function zs(e){var r,i,a=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),c=1<a?"r":a<-1?"l":"";c&&(r=c=="r"?"l":"r",i=s({},e),a=e[c],e.from=a.from,e.to=a.to,e[c]=a[c],i[c]=a[r],(e[r]=i).d=Xs(i)),e.d=Xs(e)}function Xs(i){var r=i.r,i=i.l;return(r?i?Math.max(r.d,i.d):r.d:i?i.d:0)+1}function Sr(e,r){return f(r).forEach(function(i){e[i]?Fn(e[i],r[i]):e[i]=function a(c){var u,d,p={};for(u in c)N(c,u)&&(d=c[u],p[u]=!d||typeof d!="object"||rt.has(d.constructor)?d:a(d));return p}(r[i])}),e}function Ai(e,r){return e.all||r.all||Object.keys(e).some(function(i){return r[i]&&Us(r[i],e[i])})}H(Ut.prototype,((se={add:function(e){return Fn(this,e),this},addKey:function(e){return qn(this,e,e),this},addKeys:function(e){var r=this;return e.forEach(function(i){return qn(r,i,i)}),this},hasKey:function(e){var r=Tr(this).next(e).value;return r&&yt(r.from,e)<=0&&0<=yt(r.to,e)}})[j]=function(){return Tr(this)},se));var Je={},Oi={},Ci=!1;function Ar(e){Sr(Oi,e),Ci||(Ci=!0,setTimeout(function(){Ci=!1,Di(Oi,!(Oi={}))},0))}function Di(e,r){r===void 0&&(r=!1);var i=new Set;if(e.all)for(var a=0,c=Object.values(Je);a<c.length;a++)Gs(d=c[a],e,i,r);else for(var u in e){var d,p=/^idb\:\/\/(.*)\/(.*)\//.exec(u);p&&(u=p[1],p=p[2],(d=Je["idb://".concat(u,"/").concat(p)])&&Gs(d,e,i,r))}i.forEach(function(_){return _()})}function Gs(e,r,i,a){for(var c=[],u=0,d=Object.entries(e.queries.query);u<d.length;u++){for(var p=d[u],_=p[0],g=[],E=0,v=p[1];E<v.length;E++){var T=v[E];Ai(r,T.obsSet)?T.subscribers.forEach(function(b){return i.add(b)}):a&&g.push(T)}a&&c.push([_,g])}if(a)for(var y=0,w=c;y<w.length;y++){var S=w[y],_=S[0],g=S[1];e.queries.query[_]=g}}function ul(e){var r=e._state,i=e._deps.indexedDB;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?xt(r.dbOpenError):e});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var a=r.openCanceller,c=Math.round(10*e.verno),u=!1;function d(){if(r.openCanceller!==a)throw new X.DatabaseClosed("db.open() was cancelled")}function p(){return new F(function(T,y){if(d(),!i)throw new X.MissingAPI;var w=e.name,S=r.autoSchema||!c?i.open(w):i.open(w,c);if(!S)throw new X.MissingAPI;S.onerror=pe(y),S.onblocked=kt(e._fireOnBlocked),S.onupgradeneeded=kt(function(b){var O;E=S.transaction,r.autoSchema&&!e._options.allowEmptyDB?(S.onerror=Hn,E.abort(),S.result.close(),(O=i.deleteDatabase(w)).onsuccess=O.onerror=kt(function(){y(new X.NoSuchDatabase("Database ".concat(w," doesnt exist")))})):(E.onerror=pe(y),b=b.oldVersion>Math.pow(2,62)?0:b.oldVersion,v=b<1,e.idbdb=S.result,u&&ll(e,E),al(e,b/10,E,y))},y),S.onsuccess=kt(function(){E=null;var b,O,C,D,L,R=e.idbdb=S.result,B=_t(R.objectStoreNames);if(0<B.length)try{var M=R.transaction((D=B).length===1?D[0]:D,"readonly");if(r.autoSchema)O=R,C=M,(b=e).verno=O.version/10,C=b._dbSchema=br(0,O,C),b._storeNames=_t(O.objectStoreNames,0),yr(b,[b._allTables],f(C),C);else if(wr(e,e._dbSchema,M),((L=_i(br(0,(L=e).idbdb,M),L._dbSchema)).add.length||L.change.some(function(K){return K.add.length||K.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),R.close(),c=R.version+1,u=!0,T(p());gr(e,M)}catch{}mn.push(e),R.onversionchange=kt(function(K){r.vcFired=!0,e.on("versionchange").fire(K)}),R.onclose=kt(function(K){e.on("close").fire(K)}),v&&(L=e._deps,M=w,R=L.indexedDB,L=L.IDBKeyRange,Ei(R)||M===hr||wi(R,L).put({name:M}).catch(vt)),T()},y)}).catch(function(T){switch(T==null?void 0:T.name){case"UnknownError":if(0<r.PR1398_maxLoop)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<c)return c=0,p()}return F.reject(T)})}var _,g=r.dbReadyResolve,E=null,v=!1;return F.race([a,(typeof navigator>"u"?F.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(T){function y(){return indexedDB.databases().finally(T)}_=setInterval(y,100),y()}).finally(function(){return clearInterval(_)}):Promise.resolve()).then(p)]).then(function(){return d(),r.onReadyBeingFired=[],F.resolve(Ti(function(){return e.on.ready.fire(e.vip)})).then(function T(){if(0<r.onReadyBeingFired.length){var y=r.onReadyBeingFired.reduce(ue,vt);return r.onReadyBeingFired=[],F.resolve(Ti(function(){return y(e.vip)})).then(T)}})}).finally(function(){r.openCanceller===a&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(T){r.dbOpenError=T;try{E&&E.abort()}catch{}return a===r.openCanceller&&e._close(),xt(T)}).finally(function(){r.openComplete=!0,g()}).then(function(){var T;return v&&(T={},e.tables.forEach(function(y){y.schema.indexes.forEach(function(w){w.name&&(T["idb://".concat(e.name,"/").concat(y.name,"/").concat(w.name)]=new Ut(-1/0,[[[]]]))}),T["idb://".concat(e.name,"/").concat(y.name,"/")]=T["idb://".concat(e.name,"/").concat(y.name,"/:dels")]=new Ut(-1/0,[[[]]])}),Me(Yn).fire(T),Di(T,!0)),e})}function $i(e){function r(u){return e.next(u)}var i=c(r),a=c(function(u){return e.throw(u)});function c(u){return function(_){var p=u(_),_=p.value;return p.done?_:_&&typeof _.then=="function"?_.then(i,a):m(_)?Promise.all(_).then(i,a):i(_)}}return c(r)()}function Or(e,r,i){for(var a=m(e)?e.slice():[e],c=0;c<i;++c)a.push(r);return a}var fl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(r){var i=e.table(r),a=i.schema,c={},u=[];function d(v,T,y){var w=Vn(v),S=c[w]=c[w]||[],b=v==null?0:typeof v=="string"?1:v.length,O=0<T,O=s(s({},y),{name:O?"".concat(w,"(virtual-from:").concat(y.name,")"):y.name,lowLevelIndex:y,isVirtual:O,keyTail:T,keyLength:b,extractKey:gi(v),unique:!O&&y.unique});return S.push(O),O.isPrimaryKey||u.push(O),1<b&&d(b===2?v[0]:v.slice(0,b-1),T+1,y),S.sort(function(C,D){return C.keyTail-D.keyTail}),O}r=d(a.primaryKey.keyPath,0,a.primaryKey),c[":id"]=[r];for(var p=0,_=a.indexes;p<_.length;p++){var g=_[p];d(g.keyPath,0,g)}function E(v){var T,y=v.query.index;return y.isVirtual?s(s({},v),{query:{index:y.lowLevelIndex,range:(T=v.query.range,y=y.keyTail,{type:T.type===1?2:T.type,lower:Or(T.lower,T.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:Or(T.upper,T.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0})}}):v}return s(s({},i),{schema:s(s({},a),{primaryKey:r,indexes:u,getIndexByKeyPath:function(v){return(v=c[Vn(v)])&&v[0]}}),count:function(v){return i.count(E(v))},query:function(v){return i.query(E(v))},openCursor:function(v){var T=v.query.index,y=T.keyTail,w=T.isVirtual,S=T.keyLength;return w?i.openCursor(E(v)).then(function(O){return O&&b(O)}):i.openCursor(v);function b(O){return Object.create(O,{continue:{value:function(C){C!=null?O.continue(Or(C,v.reverse?e.MAX_KEY:e.MIN_KEY,y)):v.unique?O.continue(O.key.slice(0,S).concat(v.reverse?e.MIN_KEY:e.MAX_KEY,y)):O.continue()}},continuePrimaryKey:{value:function(C,D){O.continuePrimaryKey(Or(C,e.MAX_KEY,y),D)}},primaryKey:{get:function(){return O.primaryKey}},key:{get:function(){var C=O.key;return S===1?C[0]:C.slice(0,S)}},value:{get:function(){return O.value}}})}}})}})}};function Li(e,r,i,a){return i=i||{},a=a||"",f(e).forEach(function(c){var u,d,p;N(r,c)?(u=e[c],d=r[c],typeof u=="object"&&typeof d=="object"&&u&&d?(p=q(u))!==q(d)?i[a+c]=r[c]:p==="Object"?Li(u,d,i,a+c+"."):u!==d&&(i[a+c]=r[c]):u!==d&&(i[a+c]=r[c])):i[a+c]=void 0}),f(r).forEach(function(c){N(e,c)||(i[a+c]=r[c])}),i}function ki(e,r){return r.type==="delete"?r.keys:r.keys||r.values.map(e.extractKey)}var hl={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(r){var i=e.table(r),a=i.schema.primaryKey;return s(s({},i),{mutate:function(c){var u=G.trans,d=u.table(r).hook,p=d.deleting,_=d.creating,g=d.updating;switch(c.type){case"add":if(_.fire===vt)break;return u._promise("readwrite",function(){return E(c)},!0);case"put":if(_.fire===vt&&g.fire===vt)break;return u._promise("readwrite",function(){return E(c)},!0);case"delete":if(p.fire===vt)break;return u._promise("readwrite",function(){return E(c)},!0);case"deleteRange":if(p.fire===vt)break;return u._promise("readwrite",function(){return function v(T,y,w){return i.query({trans:T,values:!1,query:{index:a,range:y},limit:w}).then(function(S){var b=S.result;return E({type:"delete",keys:b,trans:T}).then(function(O){return 0<O.numFailures?Promise.reject(O.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:v(T,s(s({},y),{lower:b[b.length-1],lowerOpen:!0}),w)})})}(c.trans,c.range,1e4)},!0)}return i.mutate(c);function E(v){var T,y,w,S=G.trans,b=v.keys||ki(a,v);if(!b)throw new Error("Keys missing");return(v=v.type==="add"||v.type==="put"?s(s({},v),{keys:b}):s({},v)).type!=="delete"&&(v.values=l([],v.values)),v.keys&&(v.keys=l([],v.keys)),T=i,w=b,((y=v).type==="add"?Promise.resolve([]):T.getMany({trans:y.trans,keys:w,cache:"immutable"})).then(function(O){var C=b.map(function(D,L){var R,B,M,K=O[L],V={onerror:null,onsuccess:null};return v.type==="delete"?p.fire.call(V,D,K,S):v.type==="add"||K===void 0?(R=_.fire.call(V,D,v.values[L],S),D==null&&R!=null&&(v.keys[L]=D=R,a.outbound||ft(v.values[L],a.keyPath,D))):(R=Li(K,v.values[L]),(B=g.fire.call(V,R,D,K,S))&&(M=v.values[L],Object.keys(B).forEach(function(I){N(M,I)?M[I]=B[I]:ft(M,I,B[I])}))),V});return i.mutate(v).then(function(D){for(var L=D.failures,R=D.results,B=D.numFailures,D=D.lastResult,M=0;M<b.length;++M){var K=(R||b)[M],V=C[M];K==null?V.onerror&&V.onerror(L[M]):V.onsuccess&&V.onsuccess(v.type==="put"&&O[M]?v.values[M]:K)}return{failures:L,results:R,numFailures:B,lastResult:D}}).catch(function(D){return C.forEach(function(L){return L.onerror&&L.onerror(D)}),Promise.reject(D)})})}}})}})}};function Qs(e,r,i){try{if(!r||r.keys.length<e.length)return null;for(var a=[],c=0,u=0;c<r.keys.length&&u<e.length;++c)yt(r.keys[c],e[u])===0&&(a.push(i?At(r.values[c]):r.values[c]),++u);return a.length===e.length?a:null}catch{return null}}var dl={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var i=e.table(r);return s(s({},i),{getMany:function(a){if(!a.cache)return i.getMany(a);var c=Qs(a.keys,a.trans._cache,a.cache==="clone");return c?F.resolve(c):i.getMany(a).then(function(u){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?At(u):u},u})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),i.mutate(a)}})}}}};function Js(e,r){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function Zs(e,r){switch(e){case"query":return r.values&&!r.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var pl={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,i=new Ut(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(a,c,u){if(G.subscr&&c!=="readonly")throw new X.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(G.querier));return e.transaction(a,c,u)},table:function(a){var c=e.table(a),u=c.schema,d=u.primaryKey,v=u.indexes,p=d.extractKey,_=d.outbound,g=d.autoIncrement&&v.filter(function(y){return y.compound&&y.keyPath.includes(d.keyPath)}),E=s(s({},c),{mutate:function(y){function w(I){return I="idb://".concat(r,"/").concat(a,"/").concat(I),D[I]||(D[I]=new Ut)}var S,b,O,C=y.trans,D=y.mutatedParts||(y.mutatedParts={}),L=w(""),R=w(":dels"),B=y.type,V=y.type==="deleteRange"?[y.range]:y.type==="delete"?[y.keys]:y.values.length<50?[ki(d,y).filter(function(I){return I}),y.values]:[],M=V[0],K=V[1],V=y.trans._cache;return m(M)?(L.addKeys(M),(V=B==="delete"||M.length===K.length?Qs(M,V):null)||R.addKeys(M),(V||K)&&(S=w,b=V,O=K,u.indexes.forEach(function(I){var at=S(I.name||"");function ct(ht){return ht!=null?I.extractKey(ht):null}function pt(ht){return I.multiEntry&&m(ht)?ht.forEach(function(fe){return at.addKey(fe)}):at.addKey(ht)}(b||O).forEach(function(ht,Vt){var dt=b&&ct(b[Vt]),Vt=O&&ct(O[Vt]);yt(dt,Vt)!==0&&(dt!=null&&pt(dt),Vt!=null&&pt(Vt))})}))):M?(K={from:M.lower,to:M.upper},R.add(K),L.add(K)):(L.add(i),R.add(i),u.indexes.forEach(function(I){return w(I.name).add(i)})),c.mutate(y).then(function(I){return!M||y.type!=="add"&&y.type!=="put"||(L.addKeys(I.results),g&&g.forEach(function(at){var ct=y.values.map(function(ht){return at.extractKey(ht)}),pt=at.keyPath.findIndex(function(ht){return ht===d.keyPath});I.results.forEach(function(ht){return ct[pt]=ht}),w(at.name).addKeys(ct)})),C.mutatedParts=Sr(C.mutatedParts||{},D),I})}}),v=function(w){var S=w.query,w=S.index,S=S.range;return[w,new Ut((w=S.lower)!==null&&w!==void 0?w:e.MIN_KEY,(S=S.upper)!==null&&S!==void 0?S:e.MAX_KEY)]},T={get:function(y){return[d,new Ut(y.key)]},getMany:function(y){return[d,new Ut().addKeys(y.keys)]},count:v,query:v,openCursor:v};return f(T).forEach(function(y){E[y]=function(w){var S=G.subscr,b=!!S,O=Js(G,c)&&Zs(y,w)?w.obsSet={}:S;if(b){var C=function(K){return K="idb://".concat(r,"/").concat(a,"/").concat(K),O[K]||(O[K]=new Ut)},D=C(""),L=C(":dels"),S=T[y](w),b=S[0],S=S[1];if((y==="query"&&b.isPrimaryKey&&!w.values?L:C(b.name||"")).add(S),!b.isPrimaryKey){if(y!=="count"){var R=y==="query"&&_&&w.values&&c.query(s(s({},w),{values:!1}));return c[y].apply(this,arguments).then(function(K){if(y==="query"){if(_&&w.values)return R.then(function(ct){return ct=ct.result,D.addKeys(ct),K});var V=w.values?K.result.map(p):K.result;(w.values?D:L).addKeys(V)}else if(y==="openCursor"){var I=K,at=w.values;return I&&Object.create(I,{key:{get:function(){return L.addKey(I.primaryKey),I.key}},primaryKey:{get:function(){var ct=I.primaryKey;return L.addKey(ct),ct}},value:{get:function(){return at&&D.addKey(I.primaryKey),I.value}}})}return K})}L.add(i)}}return c[y].apply(this,arguments)}}),E}})}};function to(e,r,i){if(i.numFailures===0)return r;if(r.type==="deleteRange")return null;var a=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return i.numFailures===a?null:(r=s({},r),m(r.keys)&&(r.keys=r.keys.filter(function(c,u){return!(u in i.failures)})),"values"in r&&m(r.values)&&(r.values=r.values.filter(function(c,u){return!(u in i.failures)})),r)}function Ni(e,r){return i=e,((a=r).lower===void 0||(a.lowerOpen?0<yt(i,a.lower):0<=yt(i,a.lower)))&&(e=e,(r=r).upper===void 0||(r.upperOpen?yt(e,r.upper)<0:yt(e,r.upper)<=0));var i,a}function eo(e,r,T,a,c,u){if(!T||T.length===0)return e;var d=r.query.index,p=d.multiEntry,_=r.query.range,g=a.schema.primaryKey.extractKey,E=d.extractKey,v=(d.lowLevelIndex||d).extractKey,T=T.reduce(function(y,w){var S=y,b=[];if(w.type==="add"||w.type==="put")for(var O=new Ut,C=w.values.length-1;0<=C;--C){var D,L=w.values[C],R=g(L);O.hasKey(R)||(D=E(L),(p&&m(D)?D.some(function(V){return Ni(V,_)}):Ni(D,_))&&(O.addKey(R),b.push(L)))}switch(w.type){case"add":S=y.concat(r.values?b:b.map(function(I){return g(I)}));break;case"put":var B=new Ut().addKeys(w.values.map(function(I){return g(I)})),S=y.filter(function(I){return!B.hasKey(r.values?g(I):I)}).concat(r.values?b:b.map(function(I){return g(I)}));break;case"delete":var M=new Ut().addKeys(w.keys);S=y.filter(function(I){return!M.hasKey(r.values?g(I):I)});break;case"deleteRange":var K=w.range;S=y.filter(function(I){return!Ni(g(I),K)})}return S},e);return T===e?e:(T.sort(function(y,w){return yt(v(y),v(w))||yt(g(y),g(w))}),r.limit&&r.limit<1/0&&(T.length>r.limit?T.length=r.limit:e.length===r.limit&&T.length<r.limit&&(c.dirty=!0)),u?Object.freeze(T):T)}function no(e,r){return yt(e.lower,r.lower)===0&&yt(e.upper,r.upper)===0&&!!e.lowerOpen==!!r.lowerOpen&&!!e.upperOpen==!!r.upperOpen}function ml(e,r){return function(i,a,c,u){if(i===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=yt(i,a))===0){if(c&&u)return 0;if(c)return 1;if(u)return-1}return a}(e.lower,r.lower,e.lowerOpen,r.lowerOpen)<=0&&0<=function(i,a,c,u){if(i===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=yt(i,a))===0){if(c&&u)return 0;if(c)return-1;if(u)return 1}return a}(e.upper,r.upper,e.upperOpen,r.upperOpen)}function vl(e,r,i,a){e.subscribers.add(i),a.addEventListener("abort",function(){var c,u;e.subscribers.delete(i),e.subscribers.size===0&&(c=e,u=r,setTimeout(function(){c.subscribers.size===0&&Y(u,c)},3e3))})}var gl={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return s(s({},e),{transaction:function(i,a,c){var u,d,p=e.transaction(i,a,c);return a==="readwrite"&&(d=(u=new AbortController).signal,c=function(_){return function(){if(u.abort(),a==="readwrite"){for(var g=new Set,E=0,v=i;E<v.length;E++){var T=v[E],y=Je["idb://".concat(r,"/").concat(T)];if(y){var w=e.table(T),S=y.optimisticOps.filter(function(at){return at.trans===p});if(p._explicit&&_&&p.mutatedParts)for(var b=0,O=Object.values(y.queries.query);b<O.length;b++)for(var C=0,D=(B=O[b]).slice();C<D.length;C++)Ai((M=D[C]).obsSet,p.mutatedParts)&&(Y(B,M),M.subscribers.forEach(function(at){return g.add(at)}));else if(0<S.length){y.optimisticOps=y.optimisticOps.filter(function(at){return at.trans!==p});for(var L=0,R=Object.values(y.queries.query);L<R.length;L++)for(var B,M,K,V=0,I=(B=R[L]).slice();V<I.length;V++)(M=I[V]).res!=null&&p.mutatedParts&&(_&&!M.dirty?(K=Object.isFrozen(M.res),K=eo(M.res,M.req,S,w,M,K),M.dirty?(Y(B,M),M.subscribers.forEach(function(at){return g.add(at)})):K!==M.res&&(M.res=K,M.promise=F.resolve({result:K}))):(M.dirty&&Y(B,M),M.subscribers.forEach(function(at){return g.add(at)})))}}}g.forEach(function(at){return at()})}}},p.addEventListener("abort",c(!1),{signal:d}),p.addEventListener("error",c(!1),{signal:d}),p.addEventListener("complete",c(!0),{signal:d})),p},table:function(i){var a=e.table(i),c=a.schema.primaryKey;return s(s({},a),{mutate:function(u){var d=G.trans;if(c.outbound||d.db._options.cache==="disabled"||d.explicit)return a.mutate(u);var p=Je["idb://".concat(r,"/").concat(i)];return p?(d=a.mutate(u),u.type!=="add"&&u.type!=="put"||!(50<=u.values.length||ki(c,u).some(function(_){return _==null}))?(p.optimisticOps.push(u),u.mutatedParts&&Ar(u.mutatedParts),d.then(function(_){0<_.numFailures&&(Y(p.optimisticOps,u),(_=to(0,u,_))&&p.optimisticOps.push(_),u.mutatedParts&&Ar(u.mutatedParts))}),d.catch(function(){Y(p.optimisticOps,u),u.mutatedParts&&Ar(u.mutatedParts)})):d.then(function(_){var g=to(0,s(s({},u),{values:u.values.map(function(y,v){var T,y=(T=c.keyPath)!==null&&T!==void 0&&T.includes(".")?At(y):s({},y);return ft(y,c.keyPath,_.results[v]),y})}),_);p.optimisticOps.push(g),queueMicrotask(function(){return u.mutatedParts&&Ar(u.mutatedParts)})}),d):a.mutate(u)},query:function(u){if(!Js(G,a)||!Zs("query",u))return a.query(u);var d=((g=G.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",v=G,p=v.requery,_=v.signal,g=function(w,S,b,O){var C=Je["idb://".concat(w,"/").concat(S)];if(!C)return[];if(!(S=C.queries[b]))return[null,!1,C,null];var D=S[(O.query?O.query.index.name:null)||""];if(!D)return[null,!1,C,null];switch(b){case"query":var L=D.find(function(R){return R.req.limit===O.limit&&R.req.values===O.values&&no(R.req.query.range,O.query.range)});return L?[L,!0,C,D]:[D.find(function(R){return("limit"in R.req?R.req.limit:1/0)>=O.limit&&(!O.values||R.req.values)&&ml(R.req.query.range,O.query.range)}),!1,C,D];case"count":return L=D.find(function(R){return no(R.req.query.range,O.query.range)}),[L,!!L,C,D]}}(r,i,"query",u),E=g[0],v=g[1],T=g[2],y=g[3];return E&&v?E.obsSet=u.obsSet:(v=a.query(u).then(function(w){var S=w.result;if(E&&(E.res=S),d){for(var b=0,O=S.length;b<O;++b)Object.freeze(S[b]);Object.freeze(S)}else w.result=At(S);return w}).catch(function(w){return y&&E&&Y(y,E),Promise.reject(w)}),E={obsSet:u.obsSet,promise:v,subscribers:new Set,type:"query",req:u,dirty:!1},y?y.push(E):(y=[E],(T=T||(Je["idb://".concat(r,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=y)),vl(E,y,p,_),E.promise.then(function(w){return{result:eo(w.result,u,T==null?void 0:T.optimisticOps,a,E,d)}})}})}})}};function Cr(e,r){return new Proxy(e,{get:function(i,a,c){return a==="db"?r:Reflect.get(i,a,c)}})}var Ee=(Pt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new X.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var r=this._versions,i=r.filter(function(a){return a._cfg.version===e})[0];return i||(i=new this.Version(e),r.push(i),r.sort(ol),i.stores({}),this._state.autoSchema=!1,i)},Pt.prototype._whenReady=function(e){var r=this;return this.idbdb&&(this._state.openComplete||G.letThrough||this._vip)?e():new F(function(i,a){if(r._state.openComplete)return a(new X.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return void a(new X.DatabaseClosed);r.open().catch(vt)}r._state.dbReadyPromise.then(i,a)}).then(e)},Pt.prototype.use=function(e){var r=e.stack,i=e.create,a=e.level,c=e.name;return c&&this.unuse({stack:r,name:c}),e=this._middlewares[r]||(this._middlewares[r]=[]),e.push({stack:r,create:i,level:a??10,name:c}),e.sort(function(u,d){return u.level-d.level}),this},Pt.prototype.unuse=function(e){var r=e.stack,i=e.name,a=e.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(c){return a?c.create!==a:!!i&&c.name!==i})),this},Pt.prototype.open=function(){var e=this;return Xe(Ne,function(){return ul(e)})},Pt.prototype._close=function(){var e=this._state,r=mn.indexOf(this);if(0<=r&&mn.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new F(function(i){e.dbReadyResolve=i}),e.openCanceller=new F(function(i,a){e.cancelOpen=a}))},Pt.prototype.close=function(i){var r=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new X.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new X.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},Pt.prototype.delete=function(e){var r=this;e===void 0&&(e={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new F(function(c,u){function d(){r.close(e);var p=r._deps.indexedDB.deleteDatabase(r.name);p.onsuccess=kt(function(){var _,g,E;_=r._deps,g=r.name,E=_.indexedDB,_=_.IDBKeyRange,Ei(E)||g===hr||wi(E,_).delete(g).catch(vt),c()}),p.onerror=pe(u),p.onblocked=r._fireOnBlocked}if(i)throw new X.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(d):d()})},Pt.prototype.backendDB=function(){return this.idbdb},Pt.prototype.isOpen=function(){return this.idbdb!==null},Pt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Pt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Pt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Pt.prototype,"tables",{get:function(){var e=this;return f(this._allTables).map(function(r){return e._allTables[r]})},enumerable:!1,configurable:!0}),Pt.prototype.transaction=function(){var e=(function(r,i,a){var c=arguments.length;if(c<2)throw new X.InvalidArgument("Too few arguments");for(var u=new Array(c-1);--c;)u[c-1]=arguments[c];return a=u.pop(),[r,ut(u),a]}).apply(this,arguments);return this._transaction.apply(this,e)},Pt.prototype._transaction=function(e,r,i){var a=this,c=G.trans;c&&c.db===this&&e.indexOf("!")===-1||(c=null);var u,d,p=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(d=r.map(function(g){if(g=g instanceof a.Table?g.name:g,typeof g!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),e=="r"||e===ci)u=ci;else{if(e!="rw"&&e!=ui)throw new X.InvalidArgument("Invalid transaction mode: "+e);u=ui}if(c){if(c.mode===ci&&u===ui){if(!p)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&d.forEach(function(g){if(c&&c.storeNames.indexOf(g)===-1){if(!p)throw new X.SubTransaction("Table "+g+" not included in parent transaction.");c=null}}),p&&c&&!c.active&&(c=null)}}catch(g){return c?c._promise(null,function(E,v){v(g)}):xt(g)}var _=(function g(E,v,T,y,w){return F.resolve().then(function(){var S=G.transless||G,b=E._createTransaction(v,T,E._dbSchema,y);if(b.explicit=!0,S={trans:b,transless:S},y)b.idbtrans=y.idbtrans;else try{b.create(),b.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(D){return D.name===Bt.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return g(E,v,T,null,w)})):xt(D)}var O,C=gt(w);return C&&pn(),S=F.follow(function(){var D;(O=w.call(b,b))&&(C?(D=Pe.bind(null,null),O.then(D,D)):typeof O.next=="function"&&typeof O.throw=="function"&&(O=$i(O)))},S),(O&&typeof O.then=="function"?F.resolve(O).then(function(D){return b.active?D:xt(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return O})).then(function(D){return y&&b._resolve(),b._completion.then(function(){return D})}).catch(function(D){return b._reject(D),xt(D)})})}).bind(null,this,u,d,c,i);return c?c._promise(u,_,"lock"):G.trans?Xe(G.transless,function(){return a._whenReady(_)}):this._whenReady(_)},Pt.prototype.table=function(e){if(!N(this._allTables,e))throw new X.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Pt);function Pt(e,r){var i=this;this._middlewares={},this.verno=0;var a=Pt.dependencies;this._options=r=s({addons:Pt.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},a=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,u,d,p,_,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:vt,dbReadyPromise:null,cancelOpen:vt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};g.dbReadyPromise=new F(function(v){g.dbReadyResolve=v}),g.openCanceller=new F(function(v,T){g.cancelOpen=T}),this._state=g,this.name=e,this.on=Mn(this,"populate","blocked","versionchange","close",{ready:[ue,vt]}),this.on.ready.subscribe=St(this.on.ready.subscribe,function(v){return function(T,y){Pt.vip(function(){var w,S=i._state;S.openComplete?(S.dbOpenError||F.resolve().then(T),y&&v(T)):S.onReadyBeingFired?(S.onReadyBeingFired.push(T),y&&v(T)):(v(T),w=i,y||v(function b(){w.on.ready.unsubscribe(T),w.on.ready.unsubscribe(b)}))})}}),this.Collection=(c=this,jn(Za.prototype,function(O,b){this.db=c;var y=xs,w=null;if(b)try{y=b()}catch(C){w=C}var S=O._ctx,b=S.table,O=b.hook.reading.fire;this._ctx={table:b,index:S.index,isPrimKey:!S.index||b.schema.primKey.keyPath&&S.index===b.schema.primKey.name,range:y,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:w,or:S.or,valueMapper:O!==te?O:null}})),this.Table=(u=this,jn(Ms.prototype,function(v,T,y){this.db=u,this._tx=y,this.name=v,this.schema=T,this.hook=u._allTables[v]?u._allTables[v].hook:Mn(null,{creating:[nr,vt],reading:[Zr,te],updating:[ti,vt],deleting:[rr,vt]})})),this.Transaction=(d=this,jn(nl.prototype,function(v,T,y,w,S){var b=this;this.db=d,this.mode=v,this.storeNames=T,this.schema=y,this.chromeTransactionDurability=w,this.idbtrans=null,this.on=Mn(this,"complete","error","abort"),this.parent=S||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F(function(O,C){b._resolve=O,b._reject=C}),this._completion.then(function(){b.active=!1,b.on.complete.fire()},function(O){var C=b.active;return b.active=!1,b.on.error.fire(O),b.parent?b.parent._reject(O):C&&b.idbtrans&&b.idbtrans.abort(),xt(O)})})),this.Version=(p=this,jn(cl.prototype,function(v){this.db=p,this._cfg={version:v,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(_=this,jn(Bs.prototype,function(v,T,y){if(this.db=_,this._ctx={table:v,index:T===":id"?null:T,or:y},this._cmp=this._ascending=yt,this._descending=function(w,S){return yt(S,w)},this._max=function(w,S){return 0<yt(w,S)?w:S},this._min=function(w,S){return yt(w,S)<0?w:S},this._IDBKeyRange=_._deps.IDBKeyRange,!this._IDBKeyRange)throw new X.MissingAPI})),this.on("versionchange",function(v){0<v.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(v){!v.newVersion||v.newVersion<v.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(v.oldVersion/10))}),this._maxKey=Bn(r.IDBKeyRange),this._createTransaction=function(v,T,y,w){return new i.Transaction(v,T,y,i._options.chromeTransactionDurability,w)},this._fireOnBlocked=function(v){i.on("blocked").fire(v),mn.filter(function(T){return T.name===i.name&&T!==i&&!T._state.vcFired}).map(function(T){return T.on("versionchange").fire(v)})},this.use(dl),this.use(gl),this.use(pl),this.use(fl),this.use(hl);var E=new Proxy(this,{get:function(v,T,y){if(T==="_vip")return!0;if(T==="table")return function(S){return Cr(i.table(S),E)};var w=Reflect.get(v,T,y);return w instanceof Ms?Cr(w,E):T==="tables"?w.map(function(S){return Cr(S,E)}):T==="_createTransaction"?function(){return Cr(w.apply(this,arguments),E)}:w}});this.vip=E,a.forEach(function(v){return v(i)})}var Dr,se=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",yl=(xi.prototype.subscribe=function(e,r,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:r,complete:i})},xi.prototype[se]=function(){return this},xi);function xi(e){this._subscribe=e}try{Dr={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{Dr={indexedDB:null,IDBKeyRange:null}}function ro(e){var r,i=!1,a=new yl(function(c){var u=gt(e),d,p=!1,_={},g={},E={get closed(){return p},unsubscribe:function(){p||(p=!0,d&&d.abort(),v&&Me.storagemutated.unsubscribe(y))}};c.start&&c.start(E);var v=!1,T=function(){return li(w)},y=function(S){Sr(_,S),Ai(g,_)&&T()},w=function(){var S,b,O;!p&&Dr.indexedDB&&(_={},S={},d&&d.abort(),d=new AbortController,O=function(C){var D=hn();try{u&&pn();var L=xe(e,C);return L=u?L.finally(Pe):L}finally{D&&dn()}}(b={subscr:S,signal:d.signal,requery:T,querier:e,trans:null}),Promise.resolve(O).then(function(C){i=!0,r=C,p||b.signal.aborted||(_={},function(D){for(var L in D)if(N(D,L))return;return 1}(g=S)||v||(Me(Yn,y),v=!0),li(function(){return!p&&c.next&&c.next(C)}))},function(C){i=!1,["DatabaseClosedError","AbortError"].includes(C==null?void 0:C.name)||p||li(function(){p||c.error&&c.error(C)})}))};return setTimeout(T,0),E});return a.hasValue=function(){return i},a.getValue=function(){return r},a}var Ze=Ee;function Pi(e){var r=je;try{je=!0,Me.storagemutated.fire(e),Di(e,!0)}finally{je=r}}H(Ze,s(s({},Yt),{delete:function(e){return new Ze(e,{addons:[]}).delete()},exists:function(e){return new Ze(e,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=Ze.dependencies,i=r.indexedDB,r=r.IDBKeyRange,(Ei(i)?Promise.resolve(i.databases()).then(function(a){return a.map(function(c){return c.name}).filter(function(c){return c!==hr})}):wi(i,r).toCollection().primaryKeys()).then(e)}catch{return xt(new X.MissingAPI)}var r,i},defineClass:function(){return function(e){A(this,e)}},ignoreTransaction:function(e){return G.trans?Xe(G.transless,e):e()},vip:Ti,async:function(e){return function(){try{var r=$i(e.apply(this,arguments));return r&&typeof r.then=="function"?r:F.resolve(r)}catch(i){return xt(i)}}},spawn:function(e,r,i){try{var a=$i(e.apply(i,r||[]));return a&&typeof a.then=="function"?a:F.resolve(a)}catch(c){return xt(c)}},currentTransaction:{get:function(){return G.trans||null}},waitFor:function(e,r){return r=F.resolve(typeof e=="function"?Ze.ignoreTransaction(e):e).timeout(r||6e4),G.trans?G.trans.waitFor(r):r},Promise:F,debug:{get:function(){return Wt},set:function(e){In(e)}},derive:tt,extend:A,props:H,override:St,Events:Mn,on:Me,liveQuery:ro,extendObservabilitySet:Sr,getByKeyPath:st,setByKeyPath:ft,delByKeyPath:function(e,r){typeof r=="string"?ft(e,r,void 0):"length"in r&&[].map.call(r,function(i){ft(e,i,void 0)})},shallowClone:Lt,deepClone:At,getObjectDiff:Li,cmp:yt,asap:mt,minKey:-1/0,addons:[],connections:mn,errnames:Bt,dependencies:Dr,cache:Je,semVer:"4.0.8",version:"4.0.8".split(".").map(function(e){return parseInt(e)}).reduce(function(e,r,i){return e+r/Math.pow(10,2*i)})})),Ze.maxKey=Bn(Ze.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Me(Yn,function(e){je||(e=new CustomEvent(pi,{detail:e}),je=!0,dispatchEvent(e),je=!1)}),addEventListener(pi,function(e){e=e.detail,je||Pi(e)}));var yn,je=!1,io=function(){};return typeof BroadcastChannel<"u"&&((io=function(){(yn=new BroadcastChannel(pi)).onmessage=function(e){return e.data&&Pi(e.data)}})(),typeof yn.unref=="function"&&yn.unref(),Me(Yn,function(e){je||yn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ee.disableBfCache&&e.persisted){Wt&&console.debug("Dexie: handling persisted pagehide"),yn!=null&&yn.close();for(var r=0,i=mn;r<i.length;r++)i[r].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ee.disableBfCache&&e.persisted&&(Wt&&console.debug("Dexie: handling persisted pageshow"),io(),Pi({all:new Ut(-1/0,[[]])}))})),F.rejectionMapper=function(e,r){return!e||e instanceof wt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Mt[e.name]?e:(r=new Mt[e.name](r||e.message,e),"stack"in e&&Q(r,"stack",{get:function(){return this.inner.stack}}),r)},In(Wt),s(Ee,Object.freeze({__proto__:null,Dexie:Ee,liveQuery:ro,Entity:Ps,cmp:yt,PropModSymbol:we,PropModification:Kn,replacePrefix:function(e,r){return new Kn({replacePrefix:[e,r]})},add:function(e){return new Kn({add:e})},remove:function(e){return new Kn({remove:e})},default:Ee,RangeSet:Ut,mergeRanges:Fn,rangesOverlap:Us}),{default:Ee}),Ee})})(Ua);var Id=Ua.exports;const as=cs(Id),Bo=Symbol.for("Dexie"),ls=globalThis[Bo]||(globalThis[Bo]=as);if(as.semVer!==ls.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${as.semVer} and ${ls.semVer}`);const Rd="yuimarldb1";class Qi extends ls{constructor(){super(Rd);x(this,"projects");x(this,"trees");this.version(1).stores({projects:"id",trees:"id"}),this.projects=this.table("projects"),this.trees=this.table("trees")}}class Vo{constructor(t,n,s){x(this,"id");x(this,"showDone");x(this,"delayRed");this.id=t,this.showDone=n,this.delayRed=s}}class Md{constructor(t,n,s){x(this,"id");x(this,"open");x(this,"color");this.id=t,this.open=n,this.color=s}}class jd{constructor(){x(this,"id","ganttframe");x(this,"width",0);x(this,"height",0);x(this,"columnHeader",new Sl(this));x(this,"columnBody",new Al(this));x(this,"columnScroll",new Ol(this));x(this,"calendarHeader",new Dl(this));x(this,"calendarBody",new $l(this));x(this,"calendarScroll",new Ll(this));x(this,"ticketModal",new Pd);x(this,"ganttRow",new Tl);x(this,"sch",new kl(this));x(this,"scv",new Nl(this));x(this,"colW",0);x(this,"calendarLeft",0);x(this,"calendarStart",It());x(this,"calendarEnd",It());x(this,"calendarTotalWidth",0);x(this,"ticketsTotalHeight",0);x(this,"ticketsFrameHeight",0);x(this,"schThreshold",0);x(this,"posX",0);x(this,"cols",[]);x(this,"holidays",[]);x(this,"tickets",[]);x(this,"lines",[]);x(this,"treeList",[]);x(this,"projectId",null);x(this,"showDone",!1);x(this,"delayRed",!1);x(this,"startY",0);x(this,"startX",0);x(this,"diffX",0);x(this,"diffY",0);x(this,"clicked",!1);x(this,"moving",!1);x(this,"movingTicket",null);x(this,"movingLine",-1);x(this,"hoverLine",-1);x(this,"dropPos","");x(this,"_idb");this._idb=new Qi;const t=document.querySelector("#projectId"),n=document.querySelector("#startdate"),s=document.querySelector("#enddate");this.projectId=(t==null?void 0:t.value)??null,this.calendarStart=It(`${(n==null?void 0:n.value)??""}`),this.calendarEnd=It(`${(s==null?void 0:s.value)??""}`);const l=document.querySelector("#holidays");l!=null&&l.value&&(this.holidays=l.value.split(",").map(f=>It(f)).filter(f=>f.isValid()));const h=document.querySelector("#tickets");h!=null&&h.value&&(this.tickets=JSON.parse(h.value)),this.cols=[{name:"ID",width:54},{name:"チケット名",width:320},{name:"開始日",width:67},{name:"終了日",width:67},{name:"進捗",width:36}],this.build(),this.handler()}resetLines(t=""){this.lines=[],this.setPos(this.tickets,"",0,-1,t)}setPos(t,n,s,l,h){let f=0,m=l;for(const A of t)A.progress===100&&this.showDone===!1||(A.pos=n.length===0?`${f}`:`${n},${f}`,f++,m++,A.level=s,A.line=m,A.y1=m*Et,A.y2=(m+1)*Et,this.lines.push(A),A.id===h?(this.ganttRow.y1=A.y1,this.ganttRow.y2=A.y2):!A.moving&&A.open&&A.children.length>0&&(m=this.setPos(A.children,A.pos,s+1,m,h)));return m}async readProject(){try{if(!this.projectId)return;this._idb||(this._idb=new Qi);let t=await this._idb.projects.get(this.projectId);if(t){this.showDone=t.showDone,this.delayRed=t.delayRed;const n=document.querySelector("#showdone");n&&(n.checked=this.showDone);const s=document.querySelector("#delayred");s&&(s.checked=this.delayRed)}}catch(t){throw Error(`${t}`)}}async readTreeList(){try{this.treeList=[],this._idb||(this._idb=new Qi),await this._idb.trees.each(t=>{this.setTreeOpen(t.id,t.open,this.tickets),this.treeList.push(t)})}catch(t){throw Error(`${t}`)}}setTreeOpen(t,n,s){for(const l of s){if(l.id===t)return l.open=n,!0;if(this.setTreeOpen(t,n,l.children))return!0}return!1}build(){const t=document.querySelector(`#${this.id}`);if(!t){console.error("Failed to get #ganttframe!");return}this.width=t.offsetWidth,this.height=t.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+Zt;const n=document.createDocumentFragment();this.columnBody.build(n),this.columnHeader.build(n),this.columnScroll.build(n),this.calendarBody.build(n),this.calendarHeader.build(n),this.calendarScroll.build(n);const s=this.calendarEnd.diff(this.calendarStart,"day");this.calendarTotalWidth=(s+1)*Ht,t.append(n)}handler(){this.columnBody.handler(),this.calendarScroll.handler(),this.sch.handler(),this.scv.handler(),this.ticketModal.handler();const t=document.querySelector("#btnSave");t&&t.addEventListener("click",()=>{this.save()})}save(){const t=document.querySelector("#tickets");if(t){t.value=JSON.stringify(this.tickets);const n=document.querySelector("#ganttform");n&&n.submit()}}resize(){const t=document.querySelector("#flexbox");if(!t){console.error("Failed to get #flexbox!");return}const n=document.querySelector("#ganttbase");if(!n){console.error("Failed to get #ganttbase!");return}n.style.width=`${t.offsetWidth-W}px`;const s=document.querySelector(`#${this.id}`);if(!s){console.error("Failed to get #ganttframe!");return}this.width=s.offsetWidth,this.height=s.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+Zt,this.sch.pos=0,this.calendarScroll.pos=0,this.calendarBody.resize(),this.calendarHeader.resize(),this.calendarScroll.resize(),this.scrollH(0)}draw(){this.columnBody.draw(),this.calendarHeader.draw(),this.calendarBody.draw(),this.calendarScroll.draw(),this.sch.draw(),this.scv.draw()}scrollH(t){this.posX=t*this.schThreshold/(this.width-W-W),this.columnBody.scrollH(this.posX),this.columnHeader.scrollH(this.posX),this.columnScroll.scrollH(this.posX),this.calendarHeader.scrollH(this.posX),this.calendarBody.scrollH(this.posX),this.calendarScroll.scrollH(this.posX)}scrollV(t){this.columnBody.scrollV(t),this.calendarBody.scrollV(t)}columnWidth(){let t=2;for(let n of this.cols)t+=n.width;return t}mouseDownCalScroll(t){this.calendarScroll.mouseDownCalScroll(t)}mouseMoveCalScroll(t){this.calendarScroll.mouseMoveCalScroll(t)}mouseUpCalScroll(){this.calendarScroll.mouseUpCalScroll()}mouseDownScrollH(t){this.sch.mouseDownScrollH(t)}mouseMoveScrollH(t){this.sch.mouseMoveScrollH(t)}mouseUpScrollH(){this.sch.mouseUpScrollH()}mouseDownScrollV(t){this.scv.mouseDownScrollV(t)}mouseMoveScrollV(t){this.scv.mouseMoveScrollV(t)}mouseUpScrollV(){this.scv.mouseUpScrollV()}async nodeOpenClose(t,n){var s;try{let l=new Md(t,n,"");await((s=this._idb)==null?void 0:s.trees.put(l)),await this.readTreeList(),this.resetLines(),this.draw()}catch(l){throw Error(`${l}`)}}async setShowDone(t){var n;this.showDone=t;try{if(!this.projectId)return;this.resetLines(),this.ganttRow.y1=-1,this.ganttRow.y2=-1;let s=new Vo(this.projectId,t,this.delayRed);await((n=this._idb)==null?void 0:n.projects.put(s)),this.draw()}catch(s){throw Error(`${s}`)}}async setDelayRed(t){var n;this.delayRed=t;try{if(!this.projectId)return;let s=new Vo(this.projectId,this.showDone,t);await((n=this._idb)==null?void 0:n.projects.put(s)),this.draw()}catch(s){throw Error(`${s}`)}}}const He=new jd,Kd=async()=>{await He.readProject(),await He.readTreeList(),He.resetLines(),He.draw()};Kd().catch(o=>{console.error(o),window.alert(`エラーが発生しました。: ${o}`)});window.addEventListener("resize",function(){He.resize(),He.draw()});const Ji=document.querySelector("#showdone");Ji&&Ji.addEventListener("change",function(){He.setShowDone(Ji.checked)});const Zi=document.querySelector("#delayred");Zi&&Zi.addEventListener("change",function(){He.setDelayRed(Zi.checked)});
