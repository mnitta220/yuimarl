var vc=Object.defineProperty;var yc=(o,t,n)=>t in o?vc(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var j=(o,t,n)=>yc(o,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const d of f.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function s(c){if(c.ep)return;c.ep=!0;const f=n(c);fetch(c.href,f)}})();var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Vo={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Hr,function(){var n=1e3,s=6e4,c=36e5,f="millisecond",d="second",w="minute",D="hour",M="day",x="week",L="month",X="quarter",G="year",ot="date",et="Invalid Date",pt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,bt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Et={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Z){var q=["th","st","nd","rd"],R=Z%100;return"["+Z+(q[(R-20)%10]||q[R]||q[0])+"]"}},Tt=function(Z,q,R){var Y=String(Z);return!Y||Y.length>=q?Z:""+Array(q+1-Y.length).join(R)+Z},it={s:Tt,z:function(Z){var q=-Z.utcOffset(),R=Math.abs(q),Y=Math.floor(R/60),H=R%60;return(q<=0?"+":"-")+Tt(Y,2,"0")+":"+Tt(H,2,"0")},m:function Z(q,R){if(q.date()<R.date())return-Z(R,q);var Y=12*(R.year()-q.year())+(R.month()-q.month()),H=q.clone().add(Y,L),Q=R-H<0,J=q.clone().add(Y+(Q?-1:1),L);return+(-(Y+(R-H)/(Q?H-J:J-H))||0)},a:function(Z){return Z<0?Math.ceil(Z)||0:Math.floor(Z)},p:function(Z){return{M:L,y:G,w:x,d:M,D:ot,h:D,m:w,s:d,ms:f,Q:X}[Z]||String(Z||"").toLowerCase().replace(/s$/,"")},u:function(Z){return Z===void 0}},dt="en",rt={};rt[dt]=Et;var lt="$isDayjsObject",$t=function(Z){return Z instanceof Nt||!(!Z||!Z[lt])},Ct=function Z(q,R,Y){var H;if(!q)return dt;if(typeof q=="string"){var Q=q.toLowerCase();rt[Q]&&(H=Q),R&&(rt[Q]=R,H=Q);var J=q.split("-");if(!H&&J.length>1)return Z(J[0])}else{var gt=q.name;rt[gt]=q,H=gt}return!Y&&H&&(dt=H),H||!Y&&dt},ct=function(Z,q){if($t(Z))return Z.clone();var R=typeof q=="object"?q:{};return R.date=Z,R.args=arguments,new Nt(R)},nt=it;nt.l=Ct,nt.i=$t,nt.w=function(Z,q){return ct(Z,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var Nt=function(){function Z(R){this.$L=Ct(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[lt]=!0}var q=Z.prototype;return q.parse=function(R){this.$d=function(Y){var H=Y.date,Q=Y.utc;if(H===null)return new Date(NaN);if(nt.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var J=H.match(pt);if(J){var gt=J[2]-1||0,wt=(J[7]||"0").substring(0,3);return Q?new Date(Date.UTC(J[1],gt,J[3]||1,J[4]||0,J[5]||0,J[6]||0,wt)):new Date(J[1],gt,J[3]||1,J[4]||0,J[5]||0,J[6]||0,wt)}}return new Date(H)}(R),this.init()},q.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},q.$utils=function(){return nt},q.isValid=function(){return this.$d.toString()!==et},q.isSame=function(R,Y){var H=ct(R);return this.startOf(Y)<=H&&H<=this.endOf(Y)},q.isAfter=function(R,Y){return ct(R)<this.startOf(Y)},q.isBefore=function(R,Y){return this.endOf(Y)<ct(R)},q.$g=function(R,Y,H){return nt.u(R)?this[Y]:this.set(H,R)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(R,Y){var H=this,Q=!!nt.u(Y)||Y,J=nt.p(R),gt=function(U,It){var jt=nt.w(H.$u?Date.UTC(H.$y,It,U):new Date(H.$y,It,U),H);return Q?jt:jt.endOf(M)},wt=function(U,It){return nt.w(H.toDate()[U].apply(H.toDate("s"),(Q?[0,0,0,0]:[23,59,59,999]).slice(It)),H)},_t=this.$W,At=this.$M,Ot=this.$D,Pt="set"+(this.$u?"UTC":"");switch(J){case G:return Q?gt(1,0):gt(31,11);case L:return Q?gt(1,At):gt(0,At+1);case x:var Kt=this.$locale().weekStart||0,Vt=(_t<Kt?_t+7:_t)-Kt;return gt(Q?Ot-Vt:Ot+(6-Vt),At);case M:case ot:return wt(Pt+"Hours",0);case D:return wt(Pt+"Minutes",1);case w:return wt(Pt+"Seconds",2);case d:return wt(Pt+"Milliseconds",3);default:return this.clone()}},q.endOf=function(R){return this.startOf(R,!1)},q.$set=function(R,Y){var H,Q=nt.p(R),J="set"+(this.$u?"UTC":""),gt=(H={},H[M]=J+"Date",H[ot]=J+"Date",H[L]=J+"Month",H[G]=J+"FullYear",H[D]=J+"Hours",H[w]=J+"Minutes",H[d]=J+"Seconds",H[f]=J+"Milliseconds",H)[Q],wt=Q===M?this.$D+(Y-this.$W):Y;if(Q===L||Q===G){var _t=this.clone().set(ot,1);_t.$d[gt](wt),_t.init(),this.$d=_t.set(ot,Math.min(this.$D,_t.daysInMonth())).$d}else gt&&this.$d[gt](wt);return this.init(),this},q.set=function(R,Y){return this.clone().$set(R,Y)},q.get=function(R){return this[nt.p(R)]()},q.add=function(R,Y){var H,Q=this;R=Number(R);var J=nt.p(Y),gt=function(At){var Ot=ct(Q);return nt.w(Ot.date(Ot.date()+Math.round(At*R)),Q)};if(J===L)return this.set(L,this.$M+R);if(J===G)return this.set(G,this.$y+R);if(J===M)return gt(1);if(J===x)return gt(7);var wt=(H={},H[w]=s,H[D]=c,H[d]=n,H)[J]||1,_t=this.$d.getTime()+R*wt;return nt.w(_t,this)},q.subtract=function(R,Y){return this.add(-1*R,Y)},q.format=function(R){var Y=this,H=this.$locale();if(!this.isValid())return H.invalidDate||et;var Q=R||"YYYY-MM-DDTHH:mm:ssZ",J=nt.z(this),gt=this.$H,wt=this.$m,_t=this.$M,At=H.weekdays,Ot=H.months,Pt=H.meridiem,Kt=function(It,jt,mt,Zt){return It&&(It[jt]||It(Y,Q))||mt[jt].slice(0,Zt)},Vt=function(It){return nt.s(gt%12||12,It,"0")},U=Pt||function(It,jt,mt){var Zt=It<12?"AM":"PM";return mt?Zt.toLowerCase():Zt};return Q.replace(bt,function(It,jt){return jt||function(mt){switch(mt){case"YY":return String(Y.$y).slice(-2);case"YYYY":return nt.s(Y.$y,4,"0");case"M":return _t+1;case"MM":return nt.s(_t+1,2,"0");case"MMM":return Kt(H.monthsShort,_t,Ot,3);case"MMMM":return Kt(Ot,_t);case"D":return Y.$D;case"DD":return nt.s(Y.$D,2,"0");case"d":return String(Y.$W);case"dd":return Kt(H.weekdaysMin,Y.$W,At,2);case"ddd":return Kt(H.weekdaysShort,Y.$W,At,3);case"dddd":return At[Y.$W];case"H":return String(gt);case"HH":return nt.s(gt,2,"0");case"h":return Vt(1);case"hh":return Vt(2);case"a":return U(gt,wt,!0);case"A":return U(gt,wt,!1);case"m":return String(wt);case"mm":return nt.s(wt,2,"0");case"s":return String(Y.$s);case"ss":return nt.s(Y.$s,2,"0");case"SSS":return nt.s(Y.$ms,3,"0");case"Z":return J}return null}(It)||J.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(R,Y,H){var Q,J=this,gt=nt.p(Y),wt=ct(R),_t=(wt.utcOffset()-this.utcOffset())*s,At=this-wt,Ot=function(){return nt.m(J,wt)};switch(gt){case G:Q=Ot()/12;break;case L:Q=Ot();break;case X:Q=Ot()/3;break;case x:Q=(At-_t)/6048e5;break;case M:Q=(At-_t)/864e5;break;case D:Q=At/c;break;case w:Q=At/s;break;case d:Q=At/n;break;default:Q=At}return H?Q:nt.a(Q)},q.daysInMonth=function(){return this.endOf(L).$D},q.$locale=function(){return rt[this.$L]},q.locale=function(R,Y){if(!R)return this.$L;var H=this.clone(),Q=Ct(R,Y,!0);return Q&&(H.$L=Q),H},q.clone=function(){return nt.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},Z}(),St=Nt.prototype;return ct.prototype=St,[["$ms",f],["$s",d],["$m",w],["$H",D],["$W",M],["$M",L],["$y",G],["$D",ot]].forEach(function(Z){St[Z[1]]=function(q){return this.$g(q,Z[0],Z[1])}}),ct.extend=function(Z,q){return Z.$i||(Z(q,Nt,ct),Z.$i=!0),ct},ct.locale=Ct,ct.isDayjs=$t,ct.unix=function(Z){return ct(1e3*Z)},ct.en=rt[dt],ct.Ls=rt,ct.p={},ct})})(Vo);var _c=Vo.exports;const Gt=cs(_c),W=16,bc=42,zt=21,he=63,Ee=22,Xt=22,Jt=Xt*10,Wn=1e3*60*60*24;class wc{constructor(t){j(this,"id","colhead");j(this,"pos",0);this.frame=t}build(t){const n=document.createElement("div");n.id=this.id,n.className="header",n.style.top="0px",n.style.left=`${this.pos}px`,n.style.width=`${this.frame.calendarLeft}px`,n.style.height=`${he}px`,t.append(n);let s=document.createElement("div");s.className="line",s.style.top=`${he}px`,s.style.left="0px",s.style.width=`${this.frame.calendarLeft}px`,s.style.height="1px",t.append(s);let c=0;for(let f of this.frame.cols){let d=document.createElement("div");d.className="label",d.style.top=`${bc}px`,d.style.left=`${c}px`,d.style.width=`${f.width}px`,d.textContent=f.name,n.append(d),c+=f.width,s=document.createElement("div"),s.className="line",s.style.top="0px",s.style.left=`${c}px`,s.style.width="1px",s.style.height=`${he}px`,n.append(s)}c+=2,s=document.createElement("div"),s.className="line",s.style.top="0px",s.style.left=`${c}px`,s.style.width="1px",s.style.height=`${he}px`,n.append(s)}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos}px`)}}class Ec{constructor(t){j(this,"id","colbody");j(this,"width",0);j(this,"height",0);j(this,"posX",0);j(this,"posY",0);j(this,"clicked","");this.frame=t}build(t){const n=document.createElement("canvas");this.height=this.frame.height-he-W,this.frame.ticketsFrameHeight=this.height,n.id=this.id,this.width=this.frame.calendarLeft,n.className="gantt-body",n.style.top=`${he}px`,n.style.left=`${this.posX}px`,n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,t.append(n)}handler(){const t=document.querySelector("#ganttframe"),n=document.querySelector(`#${this.id}`),s=this.frame;t&&n&&(n.addEventListener("mousedown",function(c){c.preventDefault(),s.columnBody.mouseDown(c.layerX,c.layerY)}),n.addEventListener("touchstart",function(c){c.preventDefault(),s.columnBody.mouseDown(c.touches[0].pageX-t.offsetLeft-n.offsetLeft,c.touches[0].pageY-t.offsetTop-n.offsetTop)}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetWidth,s=t.offsetHeight;t.width=n,t.height=s;const c=t.getContext("2d");if(c){c.save(),this.frame.ticketsTotalHeight=this.drawTickets(c,this.frame.tickets,0,0),c.fillStyle="#82a4c1";let f=0;for(let d of this.frame.cols)f+=d.width,c.fillRect(f,0,1,s),c.fill();f+=2,c.fillRect(f,0,1,s),c.fill(),this.frame.ganttRow.y1!=-1&&(c.fillStyle="#f6f",c.fillRect(0,this.frame.ganttRow.y1+this.posY,n,1),c.fill(),c.fillRect(0,this.frame.ganttRow.y2+this.posY,n,1),c.fill(),c.fillRect(0,this.frame.ganttRow.y1+this.posY,1,Ee),c.fill()),c.restore()}}}drawTickets(t,n,s,c){let f=c;for(let d of n)d.progress===100&&this.frame.showDone===!1||(this.drawTicket(t,d,s,f),f+=Ee,d.open&&d.children.length>0&&(f=this.drawTickets(t,d.children,s+1,f)));return f}getFrameHeight(t,n){let s=n;for(let c of t)s+=Ee,c.open&&c.children.length>0&&(s=this.getFrameHeight(c.children,s));return s}drawTicket(t,n,s,c){t.font="9.5pt sans-serif",t.textBaseline="bottom";const f=c+18;t.fillStyle="#00f",t.fillText(n.id_disp,3,f+this.posY),t.fillStyle="#808080";let d=this.frame.cols[0].width+s*12+6;t.fillRect(d,c+7+this.posY,1,8),t.fill(),t.fillRect(d,c+7+this.posY,8,1),t.fill(),t.fillRect(d,c+15+this.posY,8,1),t.fill(),t.fillRect(d+8,c+7+this.posY,1,9),t.fill(),t.fillStyle="#000",n.children.length>0&&(t.fillRect(d+2,c+11+this.posY,5,1),t.fill(),n.open||(t.fillRect(d+4,c+9+this.posY,1,5),t.fill()));let w=this.frame.cols[0].width+this.frame.cols[1].width-(d+14);if(t.measureText(n.name).width<=w)t.fillText(n.name,d+14,f+this.posY);else{let L=n.name;for(;t.measureText(`${L}…`).width>w;)L=L.slice(0,-1);t.fillText(`${L}…`,d+14,f+this.posY)}d=this.frame.cols[0].width+this.frame.cols[1].width+3,n.start_date&&t.fillText(Gt(n.start_date).format("YY/MM/DD"),d,f+this.posY),d+=this.frame.cols[2].width,n.end_date&&t.fillText(Gt(n.end_date).format("YY/MM/DD"),d,f+this.posY),d+=this.frame.cols[3].width+this.frame.cols[4].width-6;const M=`${n.progress}`,x=t.measureText(M).width;t.fillText(M,d-x,f+this.posY),t.fillStyle="#e5ebf2",t.fillRect(0,c+Ee+this.posY,this.width,1),t.fill()}scrollH(t){this.posX=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.posX}px`)}scrollV(t){this.posY=-t,this.draw()}mouseDown(t,n){try{this.clicked="",this.clickTickets(this.frame.tickets,t,n,0,0),this.clicked?fetch(`/api/ticket/${this.clicked}`,{method:"GET"}).then(s=>s.json()).then(s=>{s.result?this.frame.ticketModal.show(s):window.alert(`エラーが発生しました。: ${s.message}`)}).catch(s=>window.alert(`エラーが発生しました。: ${s.message}`)):this.frame.draw()}catch(s){window.alert(`エラーが発生しました。: ${s}`)}}clickTickets(t,n,s,c,f){let d=f;for(let w of t)if(!(w.progress===100&&this.frame.showDone===!1)){if(this.clickTicket(w,n,s,c,d))return d;if(d+=Ee,w.open&&w.children.length>0){let D=this.clickTickets(w.children,n,s,c+1,d);if(this.clicked)return D;d=D}}return d}clickTicket(t,n,s,c,f){if(s<f+this.posY||s>f+Ee+this.posY)return!1;if(this.frame.ganttRow.y1=f,this.frame.ganttRow.y2=f+Ee,n<this.frame.cols[0].width)return this.clicked=t.id,!0;if(n<this.frame.cols[0].width+this.frame.cols[1].width){const d=this.frame.cols[0].width+c*12+2;if(n>d&&n<d+16)return t.open=!t.open,this.frame.nodeOpenClose(t.id,t.open),this.frame.draw(),this.frame.ticketsTotalHeight<this.frame.ticketsFrameHeight&&this.posY!=0&&(this.posY=0,this.frame.calendarBody.posY=0,this.frame.scv.pos=0,this.frame.draw()),!0}return!1}}class Tc{constructor(t){j(this,"id","colscr");j(this,"pos",0);this.frame=t}build(t){const n=document.createElement("div");n.id=this.id,n.className="scroll-corner",n.style.top=`${this.frame.height-W}px`,n.style.left=`${this.pos}px`,n.style.width=`${this.frame.calendarLeft}px`,n.style.height=`${W}px`,t.append(n)}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos}px`)}}var qo={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Hr,function(){return function(n,s){s.prototype.isSameOrAfter=function(c,f){return this.isSame(c,f)||this.isAfter(c,f)}}})})(qo);var Sc=qo.exports;const Fo=cs(Sc);Gt.extend(Fo);class Ac{constructor(t){j(this,"id","calhead");j(this,"width",0);j(this,"pos",0);j(this,"dtpos",0);this.frame=t}build(t){const n=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt),n.id=this.id,n.className="header",n.style.top="0px",n.style.left=`${this.pos+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${he+1}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetHeight;t.width=this.width,t.height=n;const s=zt+zt,c=t.getContext("2d"),f="9.5pt sans-serif";if(c){c.save(),c.fillStyle="#82a4c1",c.fillRect(0,zt,this.width,1),c.fill(),c.fillRect(0,zt+zt,this.width,1),c.fill(),c.fillRect(0,he,this.width,1),c.fill();let d=this.frame.calendarStart.clone(),w=0,D=!0;c.font=f,c.textBaseline="bottom",c.textAlign="left";let M=1,x=-1;for(;this.frame.calendarEnd.isSameOrAfter(d);){if(x++,x>13&&(x=0,M++),w<this.dtpos-Xt){w+=Xt,d=d.add(1,"day"),D=!1;continue}if(w>this.width+this.dtpos)break;if(x===0&&(c.fillStyle="#000",c.fillText(`${M}`,w+3-this.dtpos,zt-3),D||(c.fillStyle="#bdcede",c.fillRect(w-this.dtpos,0,1,zt),c.fill())),D?(D=!1,(d.date()==1||d.date()<25)&&(c.fillStyle="#000",c.fillText(`${d.format("YYYY/M")}`,w+3-this.dtpos,zt+zt-3))):d.date()===1&&(c.fillStyle="#000",c.fillText(`${d.format("YYYY/M")}`,w+3-this.dtpos,zt+zt-3),c.fillStyle="#bdcede",c.fillRect(w-this.dtpos,zt,1,zt),c.fill()),this.frame.holidays.filter(X=>X.isSame(d)).length>0)c.fillStyle="#f00";else switch(d.day()){case 0:c.fillStyle="#f00";break;case 6:c.fillStyle="#00f";break;default:c.fillStyle="#000";break}c.fillText(`${d.date()}`,w+3-this.dtpos,he-3),w+=Xt,d=d.add(1,"day"),c.fillStyle="#bdcede",c.fillRect(w-this.dtpos,s,1,zt),c.fill()}c.restore()}}}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos+this.frame.calendarLeft}px`)}scroll(t){this.dtpos=t*this.frame.calendarTotalWidth/(this.width-W-W),this.draw(),this.frame.calendarBody.dtpos=this.dtpos,this.frame.calendarBody.draw()}}Gt.extend(Fo);class Oc{constructor(t){j(this,"id","calbody");j(this,"width",0);j(this,"posX",0);j(this,"posY",0);j(this,"dtpos",0);this.frame=t}build(t){const n=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const s=this.frame.height-he-W;n.id=this.id,n.className="gantt-body",n.style.top=`${he}px`,n.style.left=`${this.posX+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${s}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetWidth,s=t.offsetHeight;t.width=n,t.height=s;const c=t.getContext("2d");if(c){c.save();let f=this.frame.calendarStart.clone(),d=0;for(;this.frame.calendarEnd.isSameOrAfter(f);){if(d<this.dtpos-Xt){d+=Xt,f=f.add(1,"day");continue}if(d>this.width+this.dtpos)break;let w=!1;if(this.frame.holidays.filter(M=>M.isSame(f)).length>0)w=!0;else switch(f.day()){case 0:case 6:w=!0;break}if(w&&(c.fillStyle="#f2fef2",c.fillRect(d+1-this.dtpos,0,Xt-1,s),c.fill()),f=f.add(1,"day"),d+=Xt,d>n+this.dtpos)break;c.fillStyle="#bdcede",c.fillRect(d-this.dtpos,0,1,s),c.fill()}this.drawTickets(c,this.frame.tickets,0),d=Gt().diff(this.frame.calendarStart)/Wn*Xt,c.fillStyle="#0a0";for(let w=0;w<s;w+=7)c.fillRect(d-this.dtpos,w,1,4),c.fill();this.frame.ganttRow.y1!=-1&&(c.fillStyle="#f6f",c.fillRect(0,this.frame.ganttRow.y1+this.posY,n,1),c.fill(),c.fillRect(0,this.frame.ganttRow.y2+this.posY,n,1),c.fill()),c.restore()}}}drawTickets(t,n,s){let c=s;for(let f of n)f.progress===100&&this.frame.showDone===!1||(this.drawTicket(t,f,c),c+=Ee,f.open&&f.children.length>0&&(c=this.drawTickets(t,f.children,c)));return c}drawTicket(t,n,s){if(n.start_date)if(n.end_date){let c=Gt(n.start_date).diff(this.frame.calendarStart)/Wn;c=c*Xt-this.dtpos;let f=Gt(n.end_date).diff(this.frame.calendarStart)/Wn;if(f=(f+1)*Xt-this.dtpos,n.progress===0)t.fillStyle="#9bf",t.fillRect(c,s+8+this.posY,f-c,6),t.fill();else if(n.progress===100)t.fillStyle="#57f",t.fillRect(c,s+8+this.posY,f-c,6),t.fill();else{t.fillStyle="#9bf",t.fillRect(c,s+8+this.posY,f-c,6),t.fill();const d=(f-c)*n.progress/100;t.fillStyle="#57f",t.fillRect(c,s+8+this.posY,d,6),t.fill()}}else{t.fillStyle="#57f";let c=Gt(n.start_date).diff(this.frame.calendarStart)/Wn;c=c*Xt-this.dtpos,t.fillRect(c,s+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",c+=12,t.fillRect(c,s+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",c+=7,t.fillRect(c,s+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",c+=6,t.fillRect(c,s+8+this.posY,5,6),t.fill()}else if(n.end_date){t.fillStyle="#57f";let c=Gt(n.end_date).diff(this.frame.calendarStart)/Wn;c=(c+1)*Xt-this.dtpos,c-=12,t.fillRect(c,s+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",c-=7,t.fillRect(c,s+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",c-=6,t.fillRect(c,s+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",c-=5,t.fillRect(c,s+8+this.posY,5,6),t.fill()}t.fillStyle="#e5ebf2",t.fillRect(0,s+Ee+this.posY,this.width,1),t.fill()}scrollH(t){this.posX=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.posX+this.frame.calendarLeft}px`)}scrollV(t){this.posY=-t,this.draw()}}class Cc{constructor(t){j(this,"id","calscroll");j(this,"width",0);j(this,"pos",0);j(this,"barWidth",0);j(this,"height",W);j(this,"moving",!1);j(this,"startX",0);j(this,"barpos",0);j(this,"startPos",0);this.frame=t}build(t){this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const n=document.createElement("canvas");n.id=this.id,n.className="scroll-bar",n.style.top=`${this.frame.height-W}px`,n.style.left=`${this.pos+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.scrollH(0),this.barpos=0}handler(){const t=document.querySelector("#ganttframe"),n=document.querySelector(`#${this.id}`),s=this.frame;t&&n&&(n.addEventListener("mousedown",function(c){c.preventDefault(),s.mouseDownCalScroll(c.layerX)}),n.addEventListener("touchstart",function(c){c.preventDefault(),s.mouseDownCalScroll(c.touches[0].pageX-t.offsetLeft-n.offsetLeft)}),n.addEventListener("mousemove",function(c){c.preventDefault(),s.mouseMoveCalScroll(c.layerX)}),n.addEventListener("touchmove",function(c){c.preventDefault(),s.mouseMoveCalScroll(c.touches[0].pageX-t.offsetLeft-n.offsetLeft)}),n.addEventListener("mouseup",function(c){c.preventDefault(),s.mouseUpCalScroll()}),n.addEventListener("mouseleave",function(c){c.preventDefault(),s.mouseUpCalScroll()}),n.addEventListener("touchend",function(c){c.preventDefault(),s.mouseUpCalScroll()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){t.width=this.width,t.height=this.height;const n=t.getContext("2d");n&&(n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(5,8),n.lineTo(9,12),n.lineTo(9,4),n.closePath(),n.fill(),n.beginPath(),n.moveTo(this.width-10,4),n.lineTo(this.width-10,12),n.lineTo(this.width-6,8),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barWidth=(this.width-W-W)*this.width/this.frame.calendarTotalWidth,n.fillRect(W+this.barpos,2,this.barWidth<4?4:this.barWidth,13),n.restore())}}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos+this.frame.calendarLeft}px`)}mouseDownCalScroll(t){if(W+this.barpos<t&&t<W+this.barpos+this.barWidth){this.moving=!0,this.startX=t-W,this.startPos=this.barpos;return}t<W?this.barpos-=W:t<W+this.barpos?this.barpos-=this.barWidth:this.width-W<t?this.barpos+=W:this.barpos+=this.barWidth,this.barpos<0&&(this.barpos=0),this.width-W-W-this.barWidth<this.barpos&&(this.barpos=this.width-W-W-this.barWidth),this.frame.calendarHeader.scroll(this.barpos),this.draw(),this.moving=!1}mouseMoveCalScroll(t){if(!this.moving)return;this.barpos=t-W-this.startX+this.startPos,this.barpos<0&&(this.barpos=0);const n=this.width-this.barWidth-W-W;this.barpos>n&&(this.barpos=n),this.frame.calendarHeader.scroll(this.barpos),this.draw()}mouseUpCalScroll(){this.moving=!1}}class Dc{constructor(t){j(this,"id","scrollh");j(this,"width",0);j(this,"barWidth",0);j(this,"height",W);j(this,"moving",!1);j(this,"startX",0);j(this,"pos",0);j(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),n=this.frame;t&&(t.addEventListener("mousedown",function(s){s.preventDefault(),n.mouseDownScrollH(s.pageX-t.offsetLeft)}),t.addEventListener("touchstart",function(s){s.preventDefault(),n.mouseDownScrollH(s.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mousemove",function(s){s.preventDefault(),n.mouseMoveScrollH(s.pageX-t.offsetLeft)}),t.addEventListener("touchmove",function(s){s.preventDefault(),n.mouseMoveScrollH(s.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mouseup",function(s){s.preventDefault(),n.mouseUpScrollH()}),t.addEventListener("mouseleave",function(s){s.preventDefault(),n.mouseUpScrollH()}),t.addEventListener("touchend",function(s){s.preventDefault(),n.mouseUpScrollH()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){if(this.width=t.offsetWidth,t.width=this.width,t.height=this.height,this.width>this.frame.schThreshold)return;const n=t.getContext("2d");n&&(n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(5,8),n.lineTo(9,12),n.lineTo(9,4),n.closePath(),n.fill(),n.beginPath(),n.moveTo(this.width-10,4),n.lineTo(this.width-10,12),n.lineTo(this.width-6,8),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barWidth=(this.width-W-W)*this.width/this.frame.schThreshold,n.fillRect(W+this.pos,2,this.barWidth<4?4:this.barWidth,13),n.restore())}}mouseDownScrollH(t){if(W+this.pos<t&&t<W+this.pos+this.barWidth){this.moving=!0,this.startX=t-W,this.startPos=this.pos;return}t<W?this.pos-=W:t<W+this.pos?this.pos-=this.barWidth:this.width-W<t?this.pos+=W:this.pos+=this.barWidth,this.pos<0&&(this.pos=0),this.width-W-W-this.barWidth<this.pos&&(this.pos=this.width-W-W-this.barWidth),this.frame.scrollH(this.pos),this.draw(),this.moving=!1}mouseMoveScrollH(t){if(!this.moving)return;this.pos=t-W-this.startX+this.startPos,this.pos<0&&(this.pos=0);const n=this.width-this.barWidth-W-W;this.pos>n&&(this.pos=n),this.frame.scrollH(this.pos),this.draw()}mouseUpScrollH(){this.moving=!1}}class $c{constructor(t){j(this,"id","scrollv");j(this,"width",W);j(this,"height",0);j(this,"barHeight",0);j(this,"moving",!1);j(this,"visible",!1);j(this,"startY",0);j(this,"pos",0);j(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),n=this.frame;t&&(t.addEventListener("mousedown",function(s){s.preventDefault(),n.mouseDownScrollV(s.pageY-t.offsetTop)}),t.addEventListener("touchstart",function(s){s.preventDefault(),n.mouseDownScrollV(s.touches[0].pageY-t.offsetTop)}),t.addEventListener("mousemove",function(s){s.preventDefault(),n.mouseMoveScrollV(s.pageY-t.offsetTop)}),t.addEventListener("touchmove",function(s){s.preventDefault(),n.mouseMoveScrollV(s.touches[0].pageY-t.offsetTop)}),t.addEventListener("mouseup",function(s){s.preventDefault(),n.mouseUpScrollV()}),t.addEventListener("mouseleave",function(s){s.preventDefault(),n.mouseUpScrollV()}),t.addEventListener("touchend",function(s){s.preventDefault(),n.mouseUpScrollV()}))}draw(){this.visible=!1;const t=document.querySelector(`#${this.id}`);if(t){this.height=t.offsetHeight,t.width=this.width,t.height=this.height;const n=t.getContext("2d");n&&this.frame.ticketsFrameHeight<this.frame.ticketsTotalHeight&&(this.visible=!0,n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(8,5),n.lineTo(4,9),n.lineTo(12,9),n.closePath(),n.fill(),n.beginPath(),n.moveTo(4,this.height-10),n.lineTo(8,this.height-6),n.lineTo(12,this.height-10),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barHeight=(this.height-W-W)*this.frame.ticketsFrameHeight/this.frame.ticketsTotalHeight,n.fillRect(2,W+this.pos,13,this.barHeight<4?4:this.barHeight),n.restore())}}mouseDownScrollV(t){if(!this.visible)return;if(W+this.pos<t&&t<W+this.pos+this.barHeight){this.moving=!0,this.startY=t-W,this.startPos=this.pos;return}t<W?this.pos-=W:t<W+this.pos?this.pos-=this.barHeight:this.height-W<t?this.pos+=W:this.pos+=this.barHeight,this.pos<0&&(this.pos=0);let n=this.pos/(this.height-W-W-this.barHeight);n>1&&(n=1,this.pos=this.height-W-W-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*n),this.draw(),this.moving=!1}mouseMoveScrollV(t){if(!this.visible||!this.moving)return;this.pos=t-W-this.startY+this.startPos,this.pos<0&&(this.pos=0);let n=this.pos/(this.height-W-W-this.barHeight);n>1&&(n=1,this.pos=this.height-W-W-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*n),this.draw()}mouseUpScrollV(){this.moving=!1}}var Yt="top",ee="bottom",ne="right",Ut="left",Wr="auto",xn=[Yt,ee,ne,Ut],nn="start",Sn="end",Wo="clippingParents",ls="viewport",_n="popper",Yo="reference",Zi=xn.reduce(function(o,t){return o.concat([t+"-"+nn,t+"-"+Sn])},[]),us=[].concat(xn,[Wr]).reduce(function(o,t){return o.concat([t,t+"-"+nn,t+"-"+Sn])},[]),Uo="beforeRead",zo="read",Xo="afterRead",Go="beforeMain",Qo="main",Jo="afterMain",Zo="beforeWrite",ta="write",ea="afterWrite",na=[Uo,zo,Xo,Go,Qo,Jo,Zo,ta,ea];function ve(o){return o?(o.nodeName||"").toLowerCase():null}function re(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var t=o.ownerDocument;return t&&t.defaultView||window}return o}function rn(o){var t=re(o).Element;return o instanceof t||o instanceof Element}function se(o){var t=re(o).HTMLElement;return o instanceof t||o instanceof HTMLElement}function hs(o){if(typeof ShadowRoot>"u")return!1;var t=re(o).ShadowRoot;return o instanceof t||o instanceof ShadowRoot}function xc(o){var t=o.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},c=t.attributes[n]||{},f=t.elements[n];!se(f)||!ve(f)||(Object.assign(f.style,s),Object.keys(c).forEach(function(d){var w=c[d];w===!1?f.removeAttribute(d):f.setAttribute(d,w===!0?"":w)}))})}function Nc(o){var t=o.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var c=t.elements[s],f=t.attributes[s]||{},d=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),w=d.reduce(function(D,M){return D[M]="",D},{});!se(c)||!ve(c)||(Object.assign(c.style,w),Object.keys(f).forEach(function(D){c.removeAttribute(D)}))})}}const fs={name:"applyStyles",enabled:!0,phase:"write",fn:xc,effect:Nc,requires:["computeStyles"]};function me(o){return o.split("-")[0]}var en=Math.max,Br=Math.min,An=Math.round;function ts(){var o=navigator.userAgentData;return o!=null&&o.brands&&Array.isArray(o.brands)?o.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ra(){return!/^((?!chrome|android).)*safari/i.test(ts())}function On(o,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=o.getBoundingClientRect(),c=1,f=1;t&&se(o)&&(c=o.offsetWidth>0&&An(s.width)/o.offsetWidth||1,f=o.offsetHeight>0&&An(s.height)/o.offsetHeight||1);var d=rn(o)?re(o):window,w=d.visualViewport,D=!ra()&&n,M=(s.left+(D&&w?w.offsetLeft:0))/c,x=(s.top+(D&&w?w.offsetTop:0))/f,L=s.width/c,X=s.height/f;return{width:L,height:X,top:x,right:M+L,bottom:x+X,left:M,x:M,y:x}}function ds(o){var t=On(o),n=o.offsetWidth,s=o.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:o.offsetLeft,y:o.offsetTop,width:n,height:s}}function ia(o,t){var n=t.getRootNode&&t.getRootNode();if(o.contains(t))return!0;if(n&&hs(n)){var s=t;do{if(s&&o.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ae(o){return re(o).getComputedStyle(o)}function kc(o){return["table","td","th"].indexOf(ve(o))>=0}function Ve(o){return((rn(o)?o.ownerDocument:o.document)||window.document).documentElement}function Yr(o){return ve(o)==="html"?o:o.assignedSlot||o.parentNode||(hs(o)?o.host:null)||Ve(o)}function io(o){return!se(o)||Ae(o).position==="fixed"?null:o.offsetParent}function Lc(o){var t=/firefox/i.test(ts()),n=/Trident/i.test(ts());if(n&&se(o)){var s=Ae(o);if(s.position==="fixed")return null}var c=Yr(o);for(hs(c)&&(c=c.host);se(c)&&["html","body"].indexOf(ve(c))<0;){var f=Ae(c);if(f.transform!=="none"||f.perspective!=="none"||f.contain==="paint"||["transform","perspective"].indexOf(f.willChange)!==-1||t&&f.willChange==="filter"||t&&f.filter&&f.filter!=="none")return c;c=c.parentNode}return null}function Qn(o){for(var t=re(o),n=io(o);n&&kc(n)&&Ae(n).position==="static";)n=io(n);return n&&(ve(n)==="html"||ve(n)==="body"&&Ae(n).position==="static")?t:n||Lc(o)||t}function ps(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function zn(o,t,n){return en(o,Br(t,n))}function Pc(o,t,n){var s=zn(o,t,n);return s>n?n:s}function sa(){return{top:0,right:0,bottom:0,left:0}}function oa(o){return Object.assign({},sa(),o)}function aa(o,t){return t.reduce(function(n,s){return n[s]=o,n},{})}var Ic=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,oa(typeof t!="number"?t:aa(t,xn))};function Mc(o){var t,n=o.state,s=o.name,c=o.options,f=n.elements.arrow,d=n.modifiersData.popperOffsets,w=me(n.placement),D=ps(w),M=[Ut,ne].indexOf(w)>=0,x=M?"height":"width";if(!(!f||!d)){var L=Ic(c.padding,n),X=ds(f),G=D==="y"?Yt:Ut,ot=D==="y"?ee:ne,et=n.rects.reference[x]+n.rects.reference[D]-d[D]-n.rects.popper[x],pt=d[D]-n.rects.reference[D],bt=Qn(f),Et=bt?D==="y"?bt.clientHeight||0:bt.clientWidth||0:0,Tt=et/2-pt/2,it=L[G],dt=Et-X[x]-L[ot],rt=Et/2-X[x]/2+Tt,lt=zn(it,rt,dt),$t=D;n.modifiersData[s]=(t={},t[$t]=lt,t.centerOffset=lt-rt,t)}}function Rc(o){var t=o.state,n=o.options,s=n.element,c=s===void 0?"[data-popper-arrow]":s;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||ia(t.elements.popper,c)&&(t.elements.arrow=c))}const ca={name:"arrow",enabled:!0,phase:"main",fn:Mc,effect:Rc,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Cn(o){return o.split("-")[1]}var jc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kc(o,t){var n=o.x,s=o.y,c=t.devicePixelRatio||1;return{x:An(n*c)/c||0,y:An(s*c)/c||0}}function so(o){var t,n=o.popper,s=o.popperRect,c=o.placement,f=o.variation,d=o.offsets,w=o.position,D=o.gpuAcceleration,M=o.adaptive,x=o.roundOffsets,L=o.isFixed,X=d.x,G=X===void 0?0:X,ot=d.y,et=ot===void 0?0:ot,pt=typeof x=="function"?x({x:G,y:et}):{x:G,y:et};G=pt.x,et=pt.y;var bt=d.hasOwnProperty("x"),Et=d.hasOwnProperty("y"),Tt=Ut,it=Yt,dt=window;if(M){var rt=Qn(n),lt="clientHeight",$t="clientWidth";if(rt===re(n)&&(rt=Ve(n),Ae(rt).position!=="static"&&w==="absolute"&&(lt="scrollHeight",$t="scrollWidth")),rt=rt,c===Yt||(c===Ut||c===ne)&&f===Sn){it=ee;var Ct=L&&rt===dt&&dt.visualViewport?dt.visualViewport.height:rt[lt];et-=Ct-s.height,et*=D?1:-1}if(c===Ut||(c===Yt||c===ee)&&f===Sn){Tt=ne;var ct=L&&rt===dt&&dt.visualViewport?dt.visualViewport.width:rt[$t];G-=ct-s.width,G*=D?1:-1}}var nt=Object.assign({position:w},M&&jc),Nt=x===!0?Kc({x:G,y:et},re(n)):{x:G,y:et};if(G=Nt.x,et=Nt.y,D){var St;return Object.assign({},nt,(St={},St[it]=Et?"0":"",St[Tt]=bt?"0":"",St.transform=(dt.devicePixelRatio||1)<=1?"translate("+G+"px, "+et+"px)":"translate3d("+G+"px, "+et+"px, 0)",St))}return Object.assign({},nt,(t={},t[it]=Et?et+"px":"",t[Tt]=bt?G+"px":"",t.transform="",t))}function Hc(o){var t=o.state,n=o.options,s=n.gpuAcceleration,c=s===void 0?!0:s,f=n.adaptive,d=f===void 0?!0:f,w=n.roundOffsets,D=w===void 0?!0:w,M={placement:me(t.placement),variation:Cn(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,so(Object.assign({},M,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:d,roundOffsets:D})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,so(Object.assign({},M,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:D})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const ms={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Hc,data:{}};var xr={passive:!0};function Bc(o){var t=o.state,n=o.instance,s=o.options,c=s.scroll,f=c===void 0?!0:c,d=s.resize,w=d===void 0?!0:d,D=re(t.elements.popper),M=[].concat(t.scrollParents.reference,t.scrollParents.popper);return f&&M.forEach(function(x){x.addEventListener("scroll",n.update,xr)}),w&&D.addEventListener("resize",n.update,xr),function(){f&&M.forEach(function(x){x.removeEventListener("scroll",n.update,xr)}),w&&D.removeEventListener("resize",n.update,xr)}}const gs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Bc,data:{}};var Vc={left:"right",right:"left",bottom:"top",top:"bottom"};function Rr(o){return o.replace(/left|right|bottom|top/g,function(t){return Vc[t]})}var qc={start:"end",end:"start"};function oo(o){return o.replace(/start|end/g,function(t){return qc[t]})}function vs(o){var t=re(o),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function ys(o){return On(Ve(o)).left+vs(o).scrollLeft}function Fc(o,t){var n=re(o),s=Ve(o),c=n.visualViewport,f=s.clientWidth,d=s.clientHeight,w=0,D=0;if(c){f=c.width,d=c.height;var M=ra();(M||!M&&t==="fixed")&&(w=c.offsetLeft,D=c.offsetTop)}return{width:f,height:d,x:w+ys(o),y:D}}function Wc(o){var t,n=Ve(o),s=vs(o),c=(t=o.ownerDocument)==null?void 0:t.body,f=en(n.scrollWidth,n.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),d=en(n.scrollHeight,n.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),w=-s.scrollLeft+ys(o),D=-s.scrollTop;return Ae(c||n).direction==="rtl"&&(w+=en(n.clientWidth,c?c.clientWidth:0)-f),{width:f,height:d,x:w,y:D}}function _s(o){var t=Ae(o),n=t.overflow,s=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+c+s)}function la(o){return["html","body","#document"].indexOf(ve(o))>=0?o.ownerDocument.body:se(o)&&_s(o)?o:la(Yr(o))}function Xn(o,t){var n;t===void 0&&(t=[]);var s=la(o),c=s===((n=o.ownerDocument)==null?void 0:n.body),f=re(s),d=c?[f].concat(f.visualViewport||[],_s(s)?s:[]):s,w=t.concat(d);return c?w:w.concat(Xn(Yr(d)))}function es(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function Yc(o,t){var n=On(o,!1,t==="fixed");return n.top=n.top+o.clientTop,n.left=n.left+o.clientLeft,n.bottom=n.top+o.clientHeight,n.right=n.left+o.clientWidth,n.width=o.clientWidth,n.height=o.clientHeight,n.x=n.left,n.y=n.top,n}function ao(o,t,n){return t===ls?es(Fc(o,n)):rn(t)?Yc(t,n):es(Wc(Ve(o)))}function Uc(o){var t=Xn(Yr(o)),n=["absolute","fixed"].indexOf(Ae(o).position)>=0,s=n&&se(o)?Qn(o):o;return rn(s)?t.filter(function(c){return rn(c)&&ia(c,s)&&ve(c)!=="body"}):[]}function zc(o,t,n,s){var c=t==="clippingParents"?Uc(o):[].concat(t),f=[].concat(c,[n]),d=f[0],w=f.reduce(function(D,M){var x=ao(o,M,s);return D.top=en(x.top,D.top),D.right=Br(x.right,D.right),D.bottom=Br(x.bottom,D.bottom),D.left=en(x.left,D.left),D},ao(o,d,s));return w.width=w.right-w.left,w.height=w.bottom-w.top,w.x=w.left,w.y=w.top,w}function ua(o){var t=o.reference,n=o.element,s=o.placement,c=s?me(s):null,f=s?Cn(s):null,d=t.x+t.width/2-n.width/2,w=t.y+t.height/2-n.height/2,D;switch(c){case Yt:D={x:d,y:t.y-n.height};break;case ee:D={x:d,y:t.y+t.height};break;case ne:D={x:t.x+t.width,y:w};break;case Ut:D={x:t.x-n.width,y:w};break;default:D={x:t.x,y:t.y}}var M=c?ps(c):null;if(M!=null){var x=M==="y"?"height":"width";switch(f){case nn:D[M]=D[M]-(t[x]/2-n[x]/2);break;case Sn:D[M]=D[M]+(t[x]/2-n[x]/2);break}}return D}function Dn(o,t){t===void 0&&(t={});var n=t,s=n.placement,c=s===void 0?o.placement:s,f=n.strategy,d=f===void 0?o.strategy:f,w=n.boundary,D=w===void 0?Wo:w,M=n.rootBoundary,x=M===void 0?ls:M,L=n.elementContext,X=L===void 0?_n:L,G=n.altBoundary,ot=G===void 0?!1:G,et=n.padding,pt=et===void 0?0:et,bt=oa(typeof pt!="number"?pt:aa(pt,xn)),Et=X===_n?Yo:_n,Tt=o.rects.popper,it=o.elements[ot?Et:X],dt=zc(rn(it)?it:it.contextElement||Ve(o.elements.popper),D,x,d),rt=On(o.elements.reference),lt=ua({reference:rt,element:Tt,strategy:"absolute",placement:c}),$t=es(Object.assign({},Tt,lt)),Ct=X===_n?$t:rt,ct={top:dt.top-Ct.top+bt.top,bottom:Ct.bottom-dt.bottom+bt.bottom,left:dt.left-Ct.left+bt.left,right:Ct.right-dt.right+bt.right},nt=o.modifiersData.offset;if(X===_n&&nt){var Nt=nt[c];Object.keys(ct).forEach(function(St){var Z=[ne,ee].indexOf(St)>=0?1:-1,q=[Yt,ee].indexOf(St)>=0?"y":"x";ct[St]+=Nt[q]*Z})}return ct}function Xc(o,t){t===void 0&&(t={});var n=t,s=n.placement,c=n.boundary,f=n.rootBoundary,d=n.padding,w=n.flipVariations,D=n.allowedAutoPlacements,M=D===void 0?us:D,x=Cn(s),L=x?w?Zi:Zi.filter(function(ot){return Cn(ot)===x}):xn,X=L.filter(function(ot){return M.indexOf(ot)>=0});X.length===0&&(X=L);var G=X.reduce(function(ot,et){return ot[et]=Dn(o,{placement:et,boundary:c,rootBoundary:f,padding:d})[me(et)],ot},{});return Object.keys(G).sort(function(ot,et){return G[ot]-G[et]})}function Gc(o){if(me(o)===Wr)return[];var t=Rr(o);return[oo(o),t,oo(t)]}function Qc(o){var t=o.state,n=o.options,s=o.name;if(!t.modifiersData[s]._skip){for(var c=n.mainAxis,f=c===void 0?!0:c,d=n.altAxis,w=d===void 0?!0:d,D=n.fallbackPlacements,M=n.padding,x=n.boundary,L=n.rootBoundary,X=n.altBoundary,G=n.flipVariations,ot=G===void 0?!0:G,et=n.allowedAutoPlacements,pt=t.options.placement,bt=me(pt),Et=bt===pt,Tt=D||(Et||!ot?[Rr(pt)]:Gc(pt)),it=[pt].concat(Tt).reduce(function(At,Ot){return At.concat(me(Ot)===Wr?Xc(t,{placement:Ot,boundary:x,rootBoundary:L,padding:M,flipVariations:ot,allowedAutoPlacements:et}):Ot)},[]),dt=t.rects.reference,rt=t.rects.popper,lt=new Map,$t=!0,Ct=it[0],ct=0;ct<it.length;ct++){var nt=it[ct],Nt=me(nt),St=Cn(nt)===nn,Z=[Yt,ee].indexOf(Nt)>=0,q=Z?"width":"height",R=Dn(t,{placement:nt,boundary:x,rootBoundary:L,altBoundary:X,padding:M}),Y=Z?St?ne:Ut:St?ee:Yt;dt[q]>rt[q]&&(Y=Rr(Y));var H=Rr(Y),Q=[];if(f&&Q.push(R[Nt]<=0),w&&Q.push(R[Y]<=0,R[H]<=0),Q.every(function(At){return At})){Ct=nt,$t=!1;break}lt.set(nt,Q)}if($t)for(var J=ot?3:1,gt=function(Ot){var Pt=it.find(function(Kt){var Vt=lt.get(Kt);if(Vt)return Vt.slice(0,Ot).every(function(U){return U})});if(Pt)return Ct=Pt,"break"},wt=J;wt>0;wt--){var _t=gt(wt);if(_t==="break")break}t.placement!==Ct&&(t.modifiersData[s]._skip=!0,t.placement=Ct,t.reset=!0)}}const ha={name:"flip",enabled:!0,phase:"main",fn:Qc,requiresIfExists:["offset"],data:{_skip:!1}};function co(o,t,n){return n===void 0&&(n={x:0,y:0}),{top:o.top-t.height-n.y,right:o.right-t.width+n.x,bottom:o.bottom-t.height+n.y,left:o.left-t.width-n.x}}function lo(o){return[Yt,ne,ee,Ut].some(function(t){return o[t]>=0})}function Jc(o){var t=o.state,n=o.name,s=t.rects.reference,c=t.rects.popper,f=t.modifiersData.preventOverflow,d=Dn(t,{elementContext:"reference"}),w=Dn(t,{altBoundary:!0}),D=co(d,s),M=co(w,c,f),x=lo(D),L=lo(M);t.modifiersData[n]={referenceClippingOffsets:D,popperEscapeOffsets:M,isReferenceHidden:x,hasPopperEscaped:L},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":x,"data-popper-escaped":L})}const fa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Jc};function Zc(o,t,n){var s=me(o),c=[Ut,Yt].indexOf(s)>=0?-1:1,f=typeof n=="function"?n(Object.assign({},t,{placement:o})):n,d=f[0],w=f[1];return d=d||0,w=(w||0)*c,[Ut,ne].indexOf(s)>=0?{x:w,y:d}:{x:d,y:w}}function tl(o){var t=o.state,n=o.options,s=o.name,c=n.offset,f=c===void 0?[0,0]:c,d=us.reduce(function(x,L){return x[L]=Zc(L,t.rects,f),x},{}),w=d[t.placement],D=w.x,M=w.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=D,t.modifiersData.popperOffsets.y+=M),t.modifiersData[s]=d}const da={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:tl};function el(o){var t=o.state,n=o.name;t.modifiersData[n]=ua({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const bs={name:"popperOffsets",enabled:!0,phase:"read",fn:el,data:{}};function nl(o){return o==="x"?"y":"x"}function rl(o){var t=o.state,n=o.options,s=o.name,c=n.mainAxis,f=c===void 0?!0:c,d=n.altAxis,w=d===void 0?!1:d,D=n.boundary,M=n.rootBoundary,x=n.altBoundary,L=n.padding,X=n.tether,G=X===void 0?!0:X,ot=n.tetherOffset,et=ot===void 0?0:ot,pt=Dn(t,{boundary:D,rootBoundary:M,padding:L,altBoundary:x}),bt=me(t.placement),Et=Cn(t.placement),Tt=!Et,it=ps(bt),dt=nl(it),rt=t.modifiersData.popperOffsets,lt=t.rects.reference,$t=t.rects.popper,Ct=typeof et=="function"?et(Object.assign({},t.rects,{placement:t.placement})):et,ct=typeof Ct=="number"?{mainAxis:Ct,altAxis:Ct}:Object.assign({mainAxis:0,altAxis:0},Ct),nt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Nt={x:0,y:0};if(rt){if(f){var St,Z=it==="y"?Yt:Ut,q=it==="y"?ee:ne,R=it==="y"?"height":"width",Y=rt[it],H=Y+pt[Z],Q=Y-pt[q],J=G?-$t[R]/2:0,gt=Et===nn?lt[R]:$t[R],wt=Et===nn?-$t[R]:-lt[R],_t=t.elements.arrow,At=G&&_t?ds(_t):{width:0,height:0},Ot=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:sa(),Pt=Ot[Z],Kt=Ot[q],Vt=zn(0,lt[R],At[R]),U=Tt?lt[R]/2-J-Vt-Pt-ct.mainAxis:gt-Vt-Pt-ct.mainAxis,It=Tt?-lt[R]/2+J+Vt+Kt+ct.mainAxis:wt+Vt+Kt+ct.mainAxis,jt=t.elements.arrow&&Qn(t.elements.arrow),mt=jt?it==="y"?jt.clientTop||0:jt.clientLeft||0:0,Zt=(St=nt==null?void 0:nt[it])!=null?St:0,Zr=Y+U-Zt-mt,ye=Y+It-Zt,nr=zn(G?Br(H,Zr):H,Y,G?en(Q,ye):Q);rt[it]=nr,Nt[it]=nr-Y}if(w){var rr,ti=it==="x"?Yt:Ut,ei=it==="x"?ee:ne,le=rt[dt],qt=dt==="y"?"height":"width",Pn=le+pt[ti],Ce=le-pt[ei],cn=[Yt,Ut].indexOf(bt)!==-1,De=(rr=nt==null?void 0:nt[dt])!=null?rr:0,$e=cn?Pn:le-lt[qt]-$t[qt]-De+ct.altAxis,ln=cn?le+lt[qt]+$t[qt]-De-ct.altAxis:Ce,xe=G&&cn?Pc($e,le,ln):zn(G?$e:Pn,le,G?ln:Ce);rt[dt]=xe,Nt[dt]=xe-le}t.modifiersData[s]=Nt}}const pa={name:"preventOverflow",enabled:!0,phase:"main",fn:rl,requiresIfExists:["offset"]};function il(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}function sl(o){return o===re(o)||!se(o)?vs(o):il(o)}function ol(o){var t=o.getBoundingClientRect(),n=An(t.width)/o.offsetWidth||1,s=An(t.height)/o.offsetHeight||1;return n!==1||s!==1}function al(o,t,n){n===void 0&&(n=!1);var s=se(t),c=se(t)&&ol(t),f=Ve(t),d=On(o,c,n),w={scrollLeft:0,scrollTop:0},D={x:0,y:0};return(s||!s&&!n)&&((ve(t)!=="body"||_s(f))&&(w=sl(t)),se(t)?(D=On(t,!0),D.x+=t.clientLeft,D.y+=t.clientTop):f&&(D.x=ys(f))),{x:d.left+w.scrollLeft-D.x,y:d.top+w.scrollTop-D.y,width:d.width,height:d.height}}function cl(o){var t=new Map,n=new Set,s=[];o.forEach(function(f){t.set(f.name,f)});function c(f){n.add(f.name);var d=[].concat(f.requires||[],f.requiresIfExists||[]);d.forEach(function(w){if(!n.has(w)){var D=t.get(w);D&&c(D)}}),s.push(f)}return o.forEach(function(f){n.has(f.name)||c(f)}),s}function ll(o){var t=cl(o);return na.reduce(function(n,s){return n.concat(t.filter(function(c){return c.phase===s}))},[])}function ul(o){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(o())})})),t}}function hl(o){var t=o.reduce(function(n,s){var c=n[s.name];return n[s.name]=c?Object.assign({},c,s,{options:Object.assign({},c.options,s.options),data:Object.assign({},c.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var uo={placement:"bottom",modifiers:[],strategy:"absolute"};function ho(){for(var o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Ur(o){o===void 0&&(o={});var t=o,n=t.defaultModifiers,s=n===void 0?[]:n,c=t.defaultOptions,f=c===void 0?uo:c;return function(w,D,M){M===void 0&&(M=f);var x={placement:"bottom",orderedModifiers:[],options:Object.assign({},uo,f),modifiersData:{},elements:{reference:w,popper:D},attributes:{},styles:{}},L=[],X=!1,G={state:x,setOptions:function(bt){var Et=typeof bt=="function"?bt(x.options):bt;et(),x.options=Object.assign({},f,x.options,Et),x.scrollParents={reference:rn(w)?Xn(w):w.contextElement?Xn(w.contextElement):[],popper:Xn(D)};var Tt=ll(hl([].concat(s,x.options.modifiers)));return x.orderedModifiers=Tt.filter(function(it){return it.enabled}),ot(),G.update()},forceUpdate:function(){if(!X){var bt=x.elements,Et=bt.reference,Tt=bt.popper;if(ho(Et,Tt)){x.rects={reference:al(Et,Qn(Tt),x.options.strategy==="fixed"),popper:ds(Tt)},x.reset=!1,x.placement=x.options.placement,x.orderedModifiers.forEach(function(ct){return x.modifiersData[ct.name]=Object.assign({},ct.data)});for(var it=0;it<x.orderedModifiers.length;it++){if(x.reset===!0){x.reset=!1,it=-1;continue}var dt=x.orderedModifiers[it],rt=dt.fn,lt=dt.options,$t=lt===void 0?{}:lt,Ct=dt.name;typeof rt=="function"&&(x=rt({state:x,options:$t,name:Ct,instance:G})||x)}}}},update:ul(function(){return new Promise(function(pt){G.forceUpdate(),pt(x)})}),destroy:function(){et(),X=!0}};if(!ho(w,D))return G;G.setOptions(M).then(function(pt){!X&&M.onFirstUpdate&&M.onFirstUpdate(pt)});function ot(){x.orderedModifiers.forEach(function(pt){var bt=pt.name,Et=pt.options,Tt=Et===void 0?{}:Et,it=pt.effect;if(typeof it=="function"){var dt=it({state:x,name:bt,instance:G,options:Tt}),rt=function(){};L.push(dt||rt)}})}function et(){L.forEach(function(pt){return pt()}),L=[]}return G}}var fl=Ur(),dl=[gs,bs,ms,fs],pl=Ur({defaultModifiers:dl}),ml=[gs,bs,ms,fs,da,ha,pa,ca,fa],ws=Ur({defaultModifiers:ml});const ma=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Jo,afterRead:Xo,afterWrite:ea,applyStyles:fs,arrow:ca,auto:Wr,basePlacements:xn,beforeMain:Go,beforeRead:Uo,beforeWrite:Zo,bottom:ee,clippingParents:Wo,computeStyles:ms,createPopper:ws,createPopperBase:fl,createPopperLite:pl,detectOverflow:Dn,end:Sn,eventListeners:gs,flip:ha,hide:fa,left:Ut,main:Qo,modifierPhases:na,offset:da,placements:us,popper:_n,popperGenerator:Ur,popperOffsets:bs,preventOverflow:pa,read:zo,reference:Yo,right:ne,start:nn,top:Yt,variationPlacements:Zi,viewport:ls,write:ta},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const je=new Map,Mi={set(o,t,n){je.has(o)||je.set(o,new Map);const s=je.get(o);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,n)},get(o,t){return je.has(o)&&je.get(o).get(t)||null},remove(o,t){if(!je.has(o))return;const n=je.get(o);n.delete(t),n.size===0&&je.delete(o)}},gl=1e6,vl=1e3,ns="transitionend",ga=o=>(o&&window.CSS&&window.CSS.escape&&(o=o.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),o),yl=o=>o==null?`${o}`:Object.prototype.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase(),_l=o=>{do o+=Math.floor(Math.random()*gl);while(document.getElementById(o));return o},bl=o=>{if(!o)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(o);const s=Number.parseFloat(t),c=Number.parseFloat(n);return!s&&!c?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*vl)},va=o=>{o.dispatchEvent(new Event(ns))},Te=o=>!o||typeof o!="object"?!1:(typeof o.jquery<"u"&&(o=o[0]),typeof o.nodeType<"u"),Ke=o=>Te(o)?o.jquery?o[0]:o:typeof o=="string"&&o.length>0?document.querySelector(ga(o)):null,Nn=o=>{if(!Te(o)||o.getClientRects().length===0)return!1;const t=getComputedStyle(o).getPropertyValue("visibility")==="visible",n=o.closest("details:not([open])");if(!n)return t;if(n!==o){const s=o.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return t},He=o=>!o||o.nodeType!==Node.ELEMENT_NODE||o.classList.contains("disabled")?!0:typeof o.disabled<"u"?o.disabled:o.hasAttribute("disabled")&&o.getAttribute("disabled")!=="false",ya=o=>{if(!document.documentElement.attachShadow)return null;if(typeof o.getRootNode=="function"){const t=o.getRootNode();return t instanceof ShadowRoot?t:null}return o instanceof ShadowRoot?o:o.parentNode?ya(o.parentNode):null},Vr=()=>{},Jn=o=>{o.offsetHeight},_a=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ri=[],wl=o=>{document.readyState==="loading"?(Ri.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Ri)t()}),Ri.push(o)):o()},oe=()=>document.documentElement.dir==="rtl",ce=o=>{wl(()=>{const t=_a();if(t){const n=o.NAME,s=t.fn[n];t.fn[n]=o.jQueryInterface,t.fn[n].Constructor=o,t.fn[n].noConflict=()=>(t.fn[n]=s,o.jQueryInterface)}})},Qt=(o,t=[],n=o)=>typeof o=="function"?o(...t):n,ba=(o,t,n=!0)=>{if(!n){Qt(o);return}const c=bl(t)+5;let f=!1;const d=({target:w})=>{w===t&&(f=!0,t.removeEventListener(ns,d),Qt(o))};t.addEventListener(ns,d),setTimeout(()=>{f||va(t)},c)},Es=(o,t,n,s)=>{const c=o.length;let f=o.indexOf(t);return f===-1?!n&&s?o[c-1]:o[0]:(f+=n?1:-1,s&&(f=(f+c)%c),o[Math.max(0,Math.min(f,c-1))])},El=/[^.]*(?=\..*)\.|.*/,Tl=/\..*/,Sl=/::\d+$/,ji={};let fo=1;const wa={mouseenter:"mouseover",mouseleave:"mouseout"},Al=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ea(o,t){return t&&`${t}::${fo++}`||o.uidEvent||fo++}function Ta(o){const t=Ea(o);return o.uidEvent=t,ji[t]=ji[t]||{},ji[t]}function Ol(o,t){return function n(s){return Ts(s,{delegateTarget:o}),n.oneOff&&N.off(o,s.type,t),t.apply(o,[s])}}function Cl(o,t,n){return function s(c){const f=o.querySelectorAll(t);for(let{target:d}=c;d&&d!==this;d=d.parentNode)for(const w of f)if(w===d)return Ts(c,{delegateTarget:d}),s.oneOff&&N.off(o,c.type,t,n),n.apply(d,[c])}}function Sa(o,t,n=null){return Object.values(o).find(s=>s.callable===t&&s.delegationSelector===n)}function Aa(o,t,n){const s=typeof t=="string",c=s?n:t||n;let f=Oa(o);return Al.has(f)||(f=o),[s,c,f]}function po(o,t,n,s,c){if(typeof t!="string"||!o)return;let[f,d,w]=Aa(t,n,s);t in wa&&(d=(ot=>function(et){if(!et.relatedTarget||et.relatedTarget!==et.delegateTarget&&!et.delegateTarget.contains(et.relatedTarget))return ot.call(this,et)})(d));const D=Ta(o),M=D[w]||(D[w]={}),x=Sa(M,d,f?n:null);if(x){x.oneOff=x.oneOff&&c;return}const L=Ea(d,t.replace(El,"")),X=f?Cl(o,n,d):Ol(o,d);X.delegationSelector=f?n:null,X.callable=d,X.oneOff=c,X.uidEvent=L,M[L]=X,o.addEventListener(w,X,f)}function rs(o,t,n,s,c){const f=Sa(t[n],s,c);f&&(o.removeEventListener(n,f,!!c),delete t[n][f.uidEvent])}function Dl(o,t,n,s){const c=t[n]||{};for(const[f,d]of Object.entries(c))f.includes(s)&&rs(o,t,n,d.callable,d.delegationSelector)}function Oa(o){return o=o.replace(Tl,""),wa[o]||o}const N={on(o,t,n,s){po(o,t,n,s,!1)},one(o,t,n,s){po(o,t,n,s,!0)},off(o,t,n,s){if(typeof t!="string"||!o)return;const[c,f,d]=Aa(t,n,s),w=d!==t,D=Ta(o),M=D[d]||{},x=t.startsWith(".");if(typeof f<"u"){if(!Object.keys(M).length)return;rs(o,D,d,f,c?n:null);return}if(x)for(const L of Object.keys(D))Dl(o,D,L,t.slice(1));for(const[L,X]of Object.entries(M)){const G=L.replace(Sl,"");(!w||t.includes(G))&&rs(o,D,d,X.callable,X.delegationSelector)}},trigger(o,t,n){if(typeof t!="string"||!o)return null;const s=_a(),c=Oa(t),f=t!==c;let d=null,w=!0,D=!0,M=!1;f&&s&&(d=s.Event(t,n),s(o).trigger(d),w=!d.isPropagationStopped(),D=!d.isImmediatePropagationStopped(),M=d.isDefaultPrevented());const x=Ts(new Event(t,{bubbles:w,cancelable:!0}),n);return M&&x.preventDefault(),D&&o.dispatchEvent(x),x.defaultPrevented&&d&&d.preventDefault(),x}};function Ts(o,t={}){for(const[n,s]of Object.entries(t))try{o[n]=s}catch{Object.defineProperty(o,n,{configurable:!0,get(){return s}})}return o}function mo(o){if(o==="true")return!0;if(o==="false")return!1;if(o===Number(o).toString())return Number(o);if(o===""||o==="null")return null;if(typeof o!="string")return o;try{return JSON.parse(decodeURIComponent(o))}catch{return o}}function Ki(o){return o.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Se={setDataAttribute(o,t,n){o.setAttribute(`data-bs-${Ki(t)}`,n)},removeDataAttribute(o,t){o.removeAttribute(`data-bs-${Ki(t)}`)},getDataAttributes(o){if(!o)return{};const t={},n=Object.keys(o.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let c=s.replace(/^bs/,"");c=c.charAt(0).toLowerCase()+c.slice(1,c.length),t[c]=mo(o.dataset[s])}return t},getDataAttribute(o,t){return mo(o.getAttribute(`data-bs-${Ki(t)}`))}};class Zn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const s=Te(n)?Se.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...Te(n)?Se.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[s,c]of Object.entries(n)){const f=t[s],d=Te(f)?"element":yl(f);if(!new RegExp(c).test(d))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${d}" but expected type "${c}".`)}}}const $l="5.3.3";class fe extends Zn{constructor(t,n){super(),t=Ke(t),t&&(this._element=t,this._config=this._getConfig(n),Mi.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Mi.remove(this._element,this.constructor.DATA_KEY),N.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,s=!0){ba(t,n,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Mi.get(Ke(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return $l}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Hi=o=>{let t=o.getAttribute("data-bs-target");if(!t||t==="#"){let n=o.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>ga(n)).join(","):null},tt={find(o,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,o))},findOne(o,t=document.documentElement){return Element.prototype.querySelector.call(t,o)},children(o,t){return[].concat(...o.children).filter(n=>n.matches(t))},parents(o,t){const n=[];let s=o.parentNode.closest(t);for(;s;)n.push(s),s=s.parentNode.closest(t);return n},prev(o,t){let n=o.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(o,t){let n=o.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(o){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,o).filter(n=>!He(n)&&Nn(n))},getSelectorFromElement(o){const t=Hi(o);return t&&tt.findOne(t)?t:null},getElementFromSelector(o){const t=Hi(o);return t?tt.findOne(t):null},getMultipleElementsFromSelector(o){const t=Hi(o);return t?tt.find(t):[]}},zr=(o,t="hide")=>{const n=`click.dismiss${o.EVENT_KEY}`,s=o.NAME;N.on(document,n,`[data-bs-dismiss="${s}"]`,function(c){if(["A","AREA"].includes(this.tagName)&&c.preventDefault(),He(this))return;const f=tt.getElementFromSelector(this)||this.closest(`.${s}`);o.getOrCreateInstance(f)[t]()})},xl="alert",Nl="bs.alert",Ca=`.${Nl}`,kl=`close${Ca}`,Ll=`closed${Ca}`,Pl="fade",Il="show";class Xr extends fe{static get NAME(){return xl}close(){if(N.trigger(this._element,kl).defaultPrevented)return;this._element.classList.remove(Il);const n=this._element.classList.contains(Pl);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),N.trigger(this._element,Ll),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=Xr.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}zr(Xr,"close");ce(Xr);const Ml="button",Rl="bs.button",jl=`.${Rl}`,Kl=".data-api",Hl="active",go='[data-bs-toggle="button"]',Bl=`click${jl}${Kl}`;class Gr extends fe{static get NAME(){return Ml}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Hl))}static jQueryInterface(t){return this.each(function(){const n=Gr.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}N.on(document,Bl,go,o=>{o.preventDefault();const t=o.target.closest(go);Gr.getOrCreateInstance(t).toggle()});ce(Gr);const Vl="swipe",kn=".bs.swipe",ql=`touchstart${kn}`,Fl=`touchmove${kn}`,Wl=`touchend${kn}`,Yl=`pointerdown${kn}`,Ul=`pointerup${kn}`,zl="touch",Xl="pen",Gl="pointer-event",Ql=40,Jl={endCallback:null,leftCallback:null,rightCallback:null},Zl={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class qr extends Zn{constructor(t,n){super(),this._element=t,!(!t||!qr.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Jl}static get DefaultType(){return Zl}static get NAME(){return Vl}dispose(){N.off(this._element,kn)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Qt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Ql)return;const n=t/this._deltaX;this._deltaX=0,n&&Qt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(N.on(this._element,Yl,t=>this._start(t)),N.on(this._element,Ul,t=>this._end(t)),this._element.classList.add(Gl)):(N.on(this._element,ql,t=>this._start(t)),N.on(this._element,Fl,t=>this._move(t)),N.on(this._element,Wl,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Xl||t.pointerType===zl)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const tu="carousel",eu="bs.carousel",qe=`.${eu}`,Da=".data-api",nu="ArrowLeft",ru="ArrowRight",iu=500,Yn="next",vn="prev",bn="left",jr="right",su=`slide${qe}`,Bi=`slid${qe}`,ou=`keydown${qe}`,au=`mouseenter${qe}`,cu=`mouseleave${qe}`,lu=`dragstart${qe}`,uu=`load${qe}${Da}`,hu=`click${qe}${Da}`,$a="carousel",Nr="active",fu="slide",du="carousel-item-end",pu="carousel-item-start",mu="carousel-item-next",gu="carousel-item-prev",xa=".active",Na=".carousel-item",vu=xa+Na,yu=".carousel-item img",_u=".carousel-indicators",bu="[data-bs-slide], [data-bs-slide-to]",wu='[data-bs-ride="carousel"]',Eu={[nu]:jr,[ru]:bn},Tu={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Su={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class tr extends fe{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=tt.findOne(_u,this._element),this._addEventListeners(),this._config.ride===$a&&this.cycle()}static get Default(){return Tu}static get DefaultType(){return Su}static get NAME(){return tu}next(){this._slide(Yn)}nextWhenVisible(){!document.hidden&&Nn(this._element)&&this.next()}prev(){this._slide(vn)}pause(){this._isSliding&&va(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){N.one(this._element,Bi,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){N.one(this._element,Bi,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const c=t>s?Yn:vn;this._slide(c,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&N.on(this._element,ou,t=>this._keydown(t)),this._config.pause==="hover"&&(N.on(this._element,au,()=>this.pause()),N.on(this._element,cu,()=>this._maybeEnableCycle())),this._config.touch&&qr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of tt.find(yu,this._element))N.on(s,lu,c=>c.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(bn)),rightCallback:()=>this._slide(this._directionToOrder(jr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),iu+this._config.interval))}};this._swipeHelper=new qr(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=Eu[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=tt.findOne(xa,this._indicatorsElement);n.classList.remove(Nr),n.removeAttribute("aria-current");const s=tt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(Nr),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const s=this._getActive(),c=t===Yn,f=n||Es(this._getItems(),s,c,this._config.wrap);if(f===s)return;const d=this._getItemIndex(f),w=G=>N.trigger(this._element,G,{relatedTarget:f,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:d});if(w(su).defaultPrevented||!s||!f)return;const M=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(d),this._activeElement=f;const x=c?pu:du,L=c?mu:gu;f.classList.add(L),Jn(f),s.classList.add(x),f.classList.add(x);const X=()=>{f.classList.remove(x,L),f.classList.add(Nr),s.classList.remove(Nr,L,x),this._isSliding=!1,w(Bi)};this._queueCallback(X,s,this._isAnimated()),M&&this.cycle()}_isAnimated(){return this._element.classList.contains(fu)}_getActive(){return tt.findOne(vu,this._element)}_getItems(){return tt.find(Na,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return oe()?t===bn?vn:Yn:t===bn?Yn:vn}_orderToDirection(t){return oe()?t===vn?bn:jr:t===vn?jr:bn}static jQueryInterface(t){return this.each(function(){const n=tr.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}N.on(document,hu,bu,function(o){const t=tt.getElementFromSelector(this);if(!t||!t.classList.contains($a))return;o.preventDefault();const n=tr.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(Se.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});N.on(window,uu,()=>{const o=tt.find(wu);for(const t of o)tr.getOrCreateInstance(t)});ce(tr);const Au="collapse",Ou="bs.collapse",er=`.${Ou}`,Cu=".data-api",Du=`show${er}`,$u=`shown${er}`,xu=`hide${er}`,Nu=`hidden${er}`,ku=`click${er}${Cu}`,Vi="show",En="collapse",kr="collapsing",Lu="collapsed",Pu=`:scope .${En} .${En}`,Iu="collapse-horizontal",Mu="width",Ru="height",ju=".collapse.show, .collapse.collapsing",is='[data-bs-toggle="collapse"]',Ku={parent:null,toggle:!0},Hu={parent:"(null|element)",toggle:"boolean"};class Gn extends fe{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const s=tt.find(is);for(const c of s){const f=tt.getSelectorFromElement(c),d=tt.find(f).filter(w=>w===this._element);f!==null&&d.length&&this._triggerArray.push(c)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ku}static get DefaultType(){return Hu}static get NAME(){return Au}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(ju).filter(w=>w!==this._element).map(w=>Gn.getOrCreateInstance(w,{toggle:!1}))),t.length&&t[0]._isTransitioning||N.trigger(this._element,Du).defaultPrevented)return;for(const w of t)w.hide();const s=this._getDimension();this._element.classList.remove(En),this._element.classList.add(kr),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const c=()=>{this._isTransitioning=!1,this._element.classList.remove(kr),this._element.classList.add(En,Vi),this._element.style[s]="",N.trigger(this._element,$u)},d=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(c,this._element,!0),this._element.style[s]=`${this._element[d]}px`}hide(){if(this._isTransitioning||!this._isShown()||N.trigger(this._element,xu).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Jn(this._element),this._element.classList.add(kr),this._element.classList.remove(En,Vi);for(const c of this._triggerArray){const f=tt.getElementFromSelector(c);f&&!this._isShown(f)&&this._addAriaAndCollapsedClass([c],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(kr),this._element.classList.add(En),N.trigger(this._element,Nu)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Vi)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Ke(t.parent),t}_getDimension(){return this._element.classList.contains(Iu)?Mu:Ru}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(is);for(const n of t){const s=tt.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(t){const n=tt.find(Pu,this._config.parent);return tt.find(t,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const s of t)s.classList.toggle(Lu,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const s=Gn.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}N.on(document,ku,is,function(o){(o.target.tagName==="A"||o.delegateTarget&&o.delegateTarget.tagName==="A")&&o.preventDefault();for(const t of tt.getMultipleElementsFromSelector(this))Gn.getOrCreateInstance(t,{toggle:!1}).toggle()});ce(Gn);const vo="dropdown",Bu="bs.dropdown",on=`.${Bu}`,Ss=".data-api",Vu="Escape",yo="Tab",qu="ArrowUp",_o="ArrowDown",Fu=2,Wu=`hide${on}`,Yu=`hidden${on}`,Uu=`show${on}`,zu=`shown${on}`,ka=`click${on}${Ss}`,La=`keydown${on}${Ss}`,Xu=`keyup${on}${Ss}`,wn="show",Gu="dropup",Qu="dropend",Ju="dropstart",Zu="dropup-center",th="dropdown-center",Ze='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',eh=`${Ze}.${wn}`,Kr=".dropdown-menu",nh=".navbar",rh=".navbar-nav",ih=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",sh=oe()?"top-end":"top-start",oh=oe()?"top-start":"top-end",ah=oe()?"bottom-end":"bottom-start",ch=oe()?"bottom-start":"bottom-end",lh=oe()?"left-start":"right-start",uh=oe()?"right-start":"left-start",hh="top",fh="bottom",dh={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},ph={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ge extends fe{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=tt.next(this._element,Kr)[0]||tt.prev(this._element,Kr)[0]||tt.findOne(Kr,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return dh}static get DefaultType(){return ph}static get NAME(){return vo}toggle(){return this._isShown()?this.hide():this.show()}show(){if(He(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!N.trigger(this._element,Uu,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(rh))for(const s of[].concat(...document.body.children))N.on(s,"mouseover",Vr);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(wn),this._element.classList.add(wn),N.trigger(this._element,zu,t)}}hide(){if(He(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!N.trigger(this._element,Wu,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))N.off(s,"mouseover",Vr);this._popper&&this._popper.destroy(),this._menu.classList.remove(wn),this._element.classList.remove(wn),this._element.setAttribute("aria-expanded","false"),Se.removeDataAttribute(this._menu,"popper"),N.trigger(this._element,Yu,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!Te(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${vo.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof ma>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:Te(this._config.reference)?t=Ke(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=ws(t,this._menu,n)}_isShown(){return this._menu.classList.contains(wn)}_getPlacement(){const t=this._parent;if(t.classList.contains(Qu))return lh;if(t.classList.contains(Ju))return uh;if(t.classList.contains(Zu))return hh;if(t.classList.contains(th))return fh;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(Gu)?n?oh:sh:n?ch:ah}_detectNavbar(){return this._element.closest(nh)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Se.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Qt(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const s=tt.find(ih,this._menu).filter(c=>Nn(c));s.length&&Es(s,n,t===_o,!s.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=ge.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===Fu||t.type==="keyup"&&t.key!==yo)return;const n=tt.find(eh);for(const s of n){const c=ge.getInstance(s);if(!c||c._config.autoClose===!1)continue;const f=t.composedPath(),d=f.includes(c._menu);if(f.includes(c._element)||c._config.autoClose==="inside"&&!d||c._config.autoClose==="outside"&&d||c._menu.contains(t.target)&&(t.type==="keyup"&&t.key===yo||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const w={relatedTarget:c._element};t.type==="click"&&(w.clickEvent=t),c._completeHide(w)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),s=t.key===Vu,c=[qu,_o].includes(t.key);if(!c&&!s||n&&!s)return;t.preventDefault();const f=this.matches(Ze)?this:tt.prev(this,Ze)[0]||tt.next(this,Ze)[0]||tt.findOne(Ze,t.delegateTarget.parentNode),d=ge.getOrCreateInstance(f);if(c){t.stopPropagation(),d.show(),d._selectMenuItem(t);return}d._isShown()&&(t.stopPropagation(),d.hide(),f.focus())}}N.on(document,La,Ze,ge.dataApiKeydownHandler);N.on(document,La,Kr,ge.dataApiKeydownHandler);N.on(document,ka,ge.clearMenus);N.on(document,Xu,ge.clearMenus);N.on(document,ka,Ze,function(o){o.preventDefault(),ge.getOrCreateInstance(this).toggle()});ce(ge);const Pa="backdrop",mh="fade",bo="show",wo=`mousedown.bs.${Pa}`,gh={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},vh={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Ia extends Zn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return gh}static get DefaultType(){return vh}static get NAME(){return Pa}show(t){if(!this._config.isVisible){Qt(t);return}this._append();const n=this._getElement();this._config.isAnimated&&Jn(n),n.classList.add(bo),this._emulateAnimation(()=>{Qt(t)})}hide(t){if(!this._config.isVisible){Qt(t);return}this._getElement().classList.remove(bo),this._emulateAnimation(()=>{this.dispose(),Qt(t)})}dispose(){this._isAppended&&(N.off(this._element,wo),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(mh),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Ke(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),N.on(t,wo,()=>{Qt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){ba(t,this._getElement(),this._config.isAnimated)}}const yh="focustrap",_h="bs.focustrap",Fr=`.${_h}`,bh=`focusin${Fr}`,wh=`keydown.tab${Fr}`,Eh="Tab",Th="forward",Eo="backward",Sh={autofocus:!0,trapElement:null},Ah={autofocus:"boolean",trapElement:"element"};class Ma extends Zn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Sh}static get DefaultType(){return Ah}static get NAME(){return yh}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),N.off(document,Fr),N.on(document,bh,t=>this._handleFocusin(t)),N.on(document,wh,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,N.off(document,Fr))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const s=tt.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===Eo?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===Eh&&(this._lastTabNavDirection=t.shiftKey?Eo:Th)}}const To=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",So=".sticky-top",Lr="padding-right",Ao="margin-right";class ss{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Lr,n=>n+t),this._setElementAttributes(To,Lr,n=>n+t),this._setElementAttributes(So,Ao,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Lr),this._resetElementAttributes(To,Lr),this._resetElementAttributes(So,Ao)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,s){const c=this.getWidth(),f=d=>{if(d!==this._element&&window.innerWidth>d.clientWidth+c)return;this._saveInitialAttribute(d,n);const w=window.getComputedStyle(d).getPropertyValue(n);d.style.setProperty(n,`${s(Number.parseFloat(w))}px`)};this._applyManipulationCallback(t,f)}_saveInitialAttribute(t,n){const s=t.style.getPropertyValue(n);s&&Se.setDataAttribute(t,n,s)}_resetElementAttributes(t,n){const s=c=>{const f=Se.getDataAttribute(c,n);if(f===null){c.style.removeProperty(n);return}Se.removeDataAttribute(c,n),c.style.setProperty(n,f)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,n){if(Te(t)){n(t);return}for(const s of tt.find(t,this._element))n(s)}}const Oh="modal",Ch="bs.modal",ae=`.${Ch}`,Dh=".data-api",$h="Escape",xh=`hide${ae}`,Nh=`hidePrevented${ae}`,Ra=`hidden${ae}`,ja=`show${ae}`,kh=`shown${ae}`,Lh=`resize${ae}`,Ph=`click.dismiss${ae}`,Ih=`mousedown.dismiss${ae}`,Mh=`keydown.dismiss${ae}`,Rh=`click${ae}${Dh}`,Oo="modal-open",jh="fade",Co="show",qi="modal-static",Kh=".modal.show",Hh=".modal-dialog",Bh=".modal-body",Vh='[data-bs-toggle="modal"]',qh={backdrop:!0,focus:!0,keyboard:!0},Fh={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class sn extends fe{constructor(t,n){super(t,n),this._dialog=tt.findOne(Hh,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ss,this._addEventListeners()}static get Default(){return qh}static get DefaultType(){return Fh}static get NAME(){return Oh}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||N.trigger(this._element,ja,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Oo),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||N.trigger(this._element,xh).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Co),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){N.off(window,ae),N.off(this._dialog,ae),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ia({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ma({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=tt.findOne(Bh,this._dialog);n&&(n.scrollTop=0),Jn(this._element),this._element.classList.add(Co);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,N.trigger(this._element,kh,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){N.on(this._element,Mh,t=>{if(t.key===$h){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),N.on(window,Lh,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),N.on(this._element,Ih,t=>{N.one(this._element,Ph,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Oo),this._resetAdjustments(),this._scrollBar.reset(),N.trigger(this._element,Ra)})}_isAnimated(){return this._element.classList.contains(jh)}_triggerBackdropTransition(){if(N.trigger(this._element,Nh).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(qi)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(qi),this._queueCallback(()=>{this._element.classList.remove(qi),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!t){const c=oe()?"paddingLeft":"paddingRight";this._element.style[c]=`${n}px`}if(!s&&t){const c=oe()?"paddingRight":"paddingLeft";this._element.style[c]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const s=sn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](n)}})}}N.on(document,Rh,Vh,function(o){const t=tt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&o.preventDefault(),N.one(t,ja,c=>{c.defaultPrevented||N.one(t,Ra,()=>{Nn(this)&&this.focus()})});const n=tt.findOne(Kh);n&&sn.getInstance(n).hide(),sn.getOrCreateInstance(t).toggle(this)});zr(sn);ce(sn);const Wh="offcanvas",Yh="bs.offcanvas",Oe=`.${Yh}`,Ka=".data-api",Uh=`load${Oe}${Ka}`,zh="Escape",Do="show",$o="showing",xo="hiding",Xh="offcanvas-backdrop",Ha=".offcanvas.show",Gh=`show${Oe}`,Qh=`shown${Oe}`,Jh=`hide${Oe}`,No=`hidePrevented${Oe}`,Ba=`hidden${Oe}`,Zh=`resize${Oe}`,tf=`click${Oe}${Ka}`,ef=`keydown.dismiss${Oe}`,nf='[data-bs-toggle="offcanvas"]',rf={backdrop:!0,keyboard:!0,scroll:!1},sf={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Be extends fe{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return rf}static get DefaultType(){return sf}static get NAME(){return Wh}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||N.trigger(this._element,Gh,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new ss().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add($o);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Do),this._element.classList.remove($o),N.trigger(this._element,Qh,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||N.trigger(this._element,Jh).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(xo),this._backdrop.hide();const n=()=>{this._element.classList.remove(Do,xo),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ss().reset(),N.trigger(this._element,Ba)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){N.trigger(this._element,No);return}this.hide()},n=!!this._config.backdrop;return new Ia({className:Xh,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new Ma({trapElement:this._element})}_addEventListeners(){N.on(this._element,ef,t=>{if(t.key===zh){if(this._config.keyboard){this.hide();return}N.trigger(this._element,No)}})}static jQueryInterface(t){return this.each(function(){const n=Be.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}N.on(document,tf,nf,function(o){const t=tt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),He(this))return;N.one(t,Ba,()=>{Nn(this)&&this.focus()});const n=tt.findOne(Ha);n&&n!==t&&Be.getInstance(n).hide(),Be.getOrCreateInstance(t).toggle(this)});N.on(window,Uh,()=>{for(const o of tt.find(Ha))Be.getOrCreateInstance(o).show()});N.on(window,Zh,()=>{for(const o of tt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(o).position!=="fixed"&&Be.getOrCreateInstance(o).hide()});zr(Be);ce(Be);const of=/^aria-[\w-]*$/i,Va={"*":["class","dir","id","lang","role",of],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},af=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),cf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,lf=(o,t)=>{const n=o.nodeName.toLowerCase();return t.includes(n)?af.has(n)?!!cf.test(o.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function uf(o,t,n){if(!o.length)return o;if(n&&typeof n=="function")return n(o);const c=new window.DOMParser().parseFromString(o,"text/html"),f=[].concat(...c.body.querySelectorAll("*"));for(const d of f){const w=d.nodeName.toLowerCase();if(!Object.keys(t).includes(w)){d.remove();continue}const D=[].concat(...d.attributes),M=[].concat(t["*"]||[],t[w]||[]);for(const x of D)lf(x,M)||d.removeAttribute(x.nodeName)}return c.body.innerHTML}const hf="TemplateFactory",ff={allowList:Va,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},df={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},pf={entry:"(string|element|function|null)",selector:"(string|element)"};class mf extends Zn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return ff}static get DefaultType(){return df}static get NAME(){return hf}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[c,f]of Object.entries(this._config.content))this._setContent(t,f,c);const n=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,s]of Object.entries(t))super._typeCheckConfig({selector:n,entry:s},pf)}_setContent(t,n,s){const c=tt.findOne(s,t);if(c){if(n=this._resolvePossibleFunction(n),!n){c.remove();return}if(Te(n)){this._putElementInTemplate(Ke(n),c);return}if(this._config.html){c.innerHTML=this._maybeSanitize(n);return}c.textContent=n}}_maybeSanitize(t){return this._config.sanitize?uf(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Qt(t,[this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const gf="tooltip",vf=new Set(["sanitize","allowList","sanitizeFn"]),Fi="fade",yf="modal",Pr="show",_f=".tooltip-inner",ko=`.${yf}`,Lo="hide.bs.modal",Un="hover",Wi="focus",bf="click",wf="manual",Ef="hide",Tf="hidden",Sf="show",Af="shown",Of="inserted",Cf="click",Df="focusin",$f="focusout",xf="mouseenter",Nf="mouseleave",kf={AUTO:"auto",TOP:"top",RIGHT:oe()?"left":"right",BOTTOM:"bottom",LEFT:oe()?"right":"left"},Lf={allowList:Va,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Pf={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Ln extends fe{constructor(t,n){if(typeof ma>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Lf}static get DefaultType(){return Pf}static get NAME(){return gf}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),N.off(this._element.closest(ko),Lo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=N.trigger(this._element,this.constructor.eventName(Sf)),s=(ya(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const c=this._getTipElement();this._element.setAttribute("aria-describedby",c.getAttribute("id"));const{container:f}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(f.append(c),N.trigger(this._element,this.constructor.eventName(Of))),this._popper=this._createPopper(c),c.classList.add(Pr),"ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))N.on(w,"mouseover",Vr);const d=()=>{N.trigger(this._element,this.constructor.eventName(Af)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(d,this.tip,this._isAnimated())}hide(){if(!this._isShown()||N.trigger(this._element,this.constructor.eventName(Ef)).defaultPrevented)return;if(this._getTipElement().classList.remove(Pr),"ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))N.off(c,"mouseover",Vr);this._activeTrigger[bf]=!1,this._activeTrigger[Wi]=!1,this._activeTrigger[Un]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),N.trigger(this._element,this.constructor.eventName(Tf)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(Fi,Pr),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=_l(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(Fi),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new mf({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[_f]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Fi)}_isShown(){return this.tip&&this.tip.classList.contains(Pr)}_createPopper(t){const n=Qt(this._config.placement,[this,t,this._element]),s=kf[n.toUpperCase()];return ws(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Qt(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...Qt(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")N.on(this._element,this.constructor.eventName(Cf),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(n!==wf){const s=n===Un?this.constructor.eventName(xf):this.constructor.eventName(Df),c=n===Un?this.constructor.eventName(Nf):this.constructor.eventName($f);N.on(this._element,s,this._config.selector,f=>{const d=this._initializeOnDelegatedTarget(f);d._activeTrigger[f.type==="focusin"?Wi:Un]=!0,d._enter()}),N.on(this._element,c,this._config.selector,f=>{const d=this._initializeOnDelegatedTarget(f);d._activeTrigger[f.type==="focusout"?Wi:Un]=d._element.contains(f.relatedTarget),d._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},N.on(this._element.closest(ko),Lo,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=Se.getDataAttributes(this._element);for(const s of Object.keys(n))vf.has(s)&&delete n[s];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Ke(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(t[n]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=Ln.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ce(Ln);const If="popover",Mf=".popover-header",Rf=".popover-body",jf={...Ln.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Kf={...Ln.DefaultType,content:"(null|string|element|function)"};class As extends Ln{static get Default(){return jf}static get DefaultType(){return Kf}static get NAME(){return If}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Mf]:this._getTitle(),[Rf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=As.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ce(As);const Hf="scrollspy",Bf="bs.scrollspy",Os=`.${Bf}`,Vf=".data-api",qf=`activate${Os}`,Po=`click${Os}`,Ff=`load${Os}${Vf}`,Wf="dropdown-item",yn="active",Yf='[data-bs-spy="scroll"]',Yi="[href]",Uf=".nav, .list-group",Io=".nav-link",zf=".nav-item",Xf=".list-group-item",Gf=`${Io}, ${zf} > ${Io}, ${Xf}`,Qf=".dropdown",Jf=".dropdown-toggle",Zf={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},td={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Qr extends fe{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Zf}static get DefaultType(){return td}static get NAME(){return Hf}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Ke(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(N.off(this._config.target,Po),N.on(this._config.target,Po,Yi,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const s=this._rootElement||window,c=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:c,behavior:"smooth"});return}s.scrollTop=c}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=d=>this._targetLinks.get(`#${d.target.id}`),s=d=>{this._previousScrollData.visibleEntryTop=d.target.offsetTop,this._process(n(d))},c=(this._rootElement||document.documentElement).scrollTop,f=c>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=c;for(const d of t){if(!d.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(d));continue}const w=d.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(f&&w){if(s(d),!c)return;continue}!f&&!w&&s(d)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=tt.find(Yi,this._config.target);for(const n of t){if(!n.hash||He(n))continue;const s=tt.findOne(decodeURI(n.hash),this._element);Nn(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(yn),this._activateParents(t),N.trigger(this._element,qf,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Wf)){tt.findOne(Jf,t.closest(Qf)).classList.add(yn);return}for(const n of tt.parents(t,Uf))for(const s of tt.prev(n,Gf))s.classList.add(yn)}_clearActiveClass(t){t.classList.remove(yn);const n=tt.find(`${Yi}.${yn}`,t);for(const s of n)s.classList.remove(yn)}static jQueryInterface(t){return this.each(function(){const n=Qr.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}N.on(window,Ff,()=>{for(const o of tt.find(Yf))Qr.getOrCreateInstance(o)});ce(Qr);const ed="tab",nd="bs.tab",an=`.${nd}`,rd=`hide${an}`,id=`hidden${an}`,sd=`show${an}`,od=`shown${an}`,ad=`click${an}`,cd=`keydown${an}`,ld=`load${an}`,ud="ArrowLeft",Mo="ArrowRight",hd="ArrowUp",Ro="ArrowDown",Ui="Home",jo="End",tn="active",Ko="fade",zi="show",fd="dropdown",qa=".dropdown-toggle",dd=".dropdown-menu",Xi=`:not(${qa})`,pd='.list-group, .nav, [role="tablist"]',md=".nav-item, .list-group-item",gd=`.nav-link${Xi}, .list-group-item${Xi}, [role="tab"]${Xi}`,Fa='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Gi=`${gd}, ${Fa}`,vd=`.${tn}[data-bs-toggle="tab"], .${tn}[data-bs-toggle="pill"], .${tn}[data-bs-toggle="list"]`;class $n extends fe{constructor(t){super(t),this._parent=this._element.closest(pd),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),N.on(this._element,cd,n=>this._keydown(n)))}static get NAME(){return ed}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),s=n?N.trigger(n,rd,{relatedTarget:t}):null;N.trigger(t,sd,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(tn),this._activate(tt.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(zi);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),N.trigger(t,od,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Ko))}_deactivate(t,n){if(!t)return;t.classList.remove(tn),t.blur(),this._deactivate(tt.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(zi);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),N.trigger(t,id,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Ko))}_keydown(t){if(![ud,Mo,hd,Ro,Ui,jo].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(c=>!He(c));let s;if([Ui,jo].includes(t.key))s=n[t.key===Ui?0:n.length-1];else{const c=[Mo,Ro].includes(t.key);s=Es(n,t.target,c,!0)}s&&(s.focus({preventScroll:!0}),$n.getOrCreateInstance(s).show())}_getChildren(){return tt.find(Gi,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",n),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=tt.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const s=this._getOuterElement(t);if(!s.classList.contains(fd))return;const c=(f,d)=>{const w=tt.findOne(f,s);w&&w.classList.toggle(d,n)};c(qa,tn),c(dd,zi),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,s){t.hasAttribute(n)||t.setAttribute(n,s)}_elemIsActive(t){return t.classList.contains(tn)}_getInnerElement(t){return t.matches(Gi)?t:tt.findOne(Gi,t)}_getOuterElement(t){return t.closest(md)||t}static jQueryInterface(t){return this.each(function(){const n=$n.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}N.on(document,ad,Fa,function(o){["A","AREA"].includes(this.tagName)&&o.preventDefault(),!He(this)&&$n.getOrCreateInstance(this).show()});N.on(window,ld,()=>{for(const o of tt.find(vd))$n.getOrCreateInstance(o)});ce($n);const yd="toast",_d="bs.toast",Fe=`.${_d}`,bd=`mouseover${Fe}`,wd=`mouseout${Fe}`,Ed=`focusin${Fe}`,Td=`focusout${Fe}`,Sd=`hide${Fe}`,Ad=`hidden${Fe}`,Od=`show${Fe}`,Cd=`shown${Fe}`,Dd="fade",Ho="hide",Ir="show",Mr="showing",$d={animation:"boolean",autohide:"boolean",delay:"number"},xd={animation:!0,autohide:!0,delay:5e3};class Jr extends fe{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return xd}static get DefaultType(){return $d}static get NAME(){return yd}show(){if(N.trigger(this._element,Od).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Dd);const n=()=>{this._element.classList.remove(Mr),N.trigger(this._element,Cd),this._maybeScheduleHide()};this._element.classList.remove(Ho),Jn(this._element),this._element.classList.add(Ir,Mr),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||N.trigger(this._element,Sd).defaultPrevented)return;const n=()=>{this._element.classList.add(Ho),this._element.classList.remove(Mr,Ir),N.trigger(this._element,Ad)};this._element.classList.add(Mr),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ir),super.dispose()}isShown(){return this._element.classList.contains(Ir)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){N.on(this._element,bd,t=>this._onInteraction(t,!0)),N.on(this._element,wd,t=>this._onInteraction(t,!1)),N.on(this._element,Ed,t=>this._onInteraction(t,!0)),N.on(this._element,Td,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=Jr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}zr(Jr);ce(Jr);class Nd{constructor(){j(this,"id","ticketModal");j(this,"modal",null);j(this,"ticketId",null);const t=document.querySelector(`#${this.id}`);t&&(this.modal=new sn(t))}handler(){const t=document.querySelector("#btnRedirectTicket");t&&t.addEventListener("click",()=>{this.modal&&(this.modal.hide(),window.location.href=`/ticket?id=${this.ticketId}`)})}show(t){if(this.modal&&t.ticket){this.ticketId=t.ticket.id;const n=document.querySelector("#modal_ticket_id");n&&(n.textContent=t.ticket.id_disp??"");const s=document.querySelector("#ticket_name");s&&(s.value=t.ticket.name??"");const c=document.querySelector("#description");if(c&&(c.innerHTML=t.ticket.description??""),t.members&&t.members.length>0){const x=document.querySelector("#members");if(x){let L='<table class="table table-hover">';L+="<thead>",L+="<tr>",L+='<th scope="col">メールアドレス</th>',L+='<th scope="col">名前</th>',L+="</tr>",L+="</thead>",L+="<tbody>";for(const X of t.members)L+="<tr>",L+=`<td>${X.email}</td>`,L+=`<td>${X.name}</td>`,L+="</tr>";L+="</tbody>",L+="</table>",x.innerHTML=L}}const f=document.querySelector("#start_date");if(f){let x='<label class="form-label" for="startdate">開始日</label>';x+=`<input class="form-control" id="startdate" type="date" value="${t.ticket.start_date??""}">`,f.innerHTML=x}const d=document.querySelector("#end_date");if(d){let x='<label class="form-label" for="enddate">終了日</label>';x+=`<input class="form-control" id="enddate" type="date" value="${t.ticket.end_date??""}">`,d.innerHTML=x}const w=document.querySelector("#progress");w&&(w.value=`${t.ticket.progress}`);const D=document.querySelector("#finished");D&&(D.checked=t.ticket.progress===100);const M=document.querySelector(`#priority${t.ticket.priority}`);if(M&&(M.checked=!0),t.parent){const x=document.querySelector("#parent");x&&(x.innerHTML=`${t.parent.id_disp}&nbsp;&nbsp;${t.parent.name}`)}if(t.children){const x=document.querySelector("#children");if(x){let L="";for(const X of t.children)L+=`<p class="mb-0">${X.id_disp}&nbsp;&nbsp;${X.name}</p>`;x.innerHTML=L}}this.modal.show()}}hide(){this.modal&&this.modal.hide()}}class kd{constructor(){j(this,"y1",-1);j(this,"y2",-1)}}var Wa={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Hr,function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])})(e,r)},s=function(){return(s=Object.assign||function(e){for(var r,i=1,a=arguments.length;i<a;i++)for(var l in r=arguments[i])Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);return e}).apply(this,arguments)};function c(e,r,i){for(var a,l=0,u=r.length;l<u;l++)!a&&l in r||((a=a||Array.prototype.slice.call(r,0,l))[l]=r[l]);return e.concat(a||Array.prototype.slice.call(r))}var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Hr,d=Object.keys,w=Array.isArray;function D(e,r){return typeof r!="object"||d(r).forEach(function(i){e[i]=r[i]}),e}typeof Promise>"u"||f.Promise||(f.Promise=Promise);var M=Object.getPrototypeOf,x={}.hasOwnProperty;function L(e,r){return x.call(e,r)}function X(e,r){typeof r=="function"&&(r=r(M(e))),(typeof Reflect>"u"?d:Reflect.ownKeys)(r).forEach(function(i){ot(e,i,r[i])})}var G=Object.defineProperty;function ot(e,r,i,a){G(e,r,D(i&&L(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},a))}function et(e){return{from:function(r){return e.prototype=Object.create(r.prototype),ot(e.prototype,"constructor",e),{extend:X.bind(null,e.prototype)}}}}var pt=Object.getOwnPropertyDescriptor,bt=[].slice;function Et(e,r,i){return bt.call(e,r,i)}function Tt(e,r){return r(e)}function it(e){if(!e)throw new Error("Assertion Failed")}function dt(e){f.setImmediate?setImmediate(e):setTimeout(e,0)}function rt(e,r){if(typeof r=="string"&&L(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var i=[],a=0,l=r.length;a<l;++a){var u=rt(e,r[a]);i.push(u)}return i}var h=r.indexOf(".");if(h!==-1){var p=e[r.substr(0,h)];return p==null?void 0:rt(p,r.substr(h+1))}}function lt(e,r,i){if(e&&r!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){it(typeof i!="string"&&"length"in i);for(var a=0,l=r.length;a<l;++a)lt(e,r[a],i[a])}else{var u,h,p=r.indexOf(".");p!==-1?(u=r.substr(0,p),(h=r.substr(p+1))===""?i===void 0?w(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=i:lt(p=!(p=e[u])||!L(e,u)?e[u]={}:p,h,i)):i===void 0?w(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=i}}function $t(e){var r,i={};for(r in e)L(e,r)&&(i[r]=e[r]);return i}var Ct=[].concat;function ct(e){return Ct.apply([],e)}var be="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ct([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(r){return r+e+"Array"})}))).filter(function(e){return f[e]}),nt=new Set(be.map(function(e){return f[e]})),Nt=null;function St(e){return Nt=new WeakMap,e=function r(i){if(!i||typeof i!="object")return i;var a=Nt.get(i);if(a)return a;if(w(i)){a=[],Nt.set(i,a);for(var l=0,u=i.length;l<u;++l)a.push(r(i[l]))}else if(nt.has(i.constructor))a=i;else{var h,p=M(i);for(h in a=p===Object.prototype?{}:Object.create(p),Nt.set(i,a),i)L(i,h)&&(a[h]=r(i[h]))}return a}(e),Nt=null,e}var Z={}.toString;function q(e){return Z.call(e).slice(8,-1)}var R=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Y=typeof R=="symbol"?function(e){var r;return e!=null&&(r=e[R])&&r.apply(e)}:function(){return null};function H(e,r){return r=e.indexOf(r),0<=r&&e.splice(r,1),0<=r}var Q={};function J(e){var r,i,a,l;if(arguments.length===1){if(w(e))return e.slice();if(this===Q&&typeof e=="string")return[e];if(l=Y(e)){for(i=[];!(a=l.next()).done;)i.push(a.value);return i}if(e==null)return[e];if(typeof(r=e.length)!="number")return[e];for(i=new Array(r);r--;)i[r]=e[r];return i}for(r=arguments.length,i=new Array(r);r--;)i[r]=arguments[r];return i}var gt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},De=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ie=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(De),wt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _t(e,r){this.name=e,this.message=r}function At(e,r){return e+". Errors: "+Object.keys(r).map(function(i){return r[i].toString()}).filter(function(i,a,l){return l.indexOf(i)===a}).join(`
`)}function Ot(e,r,i,a){this.failures=r,this.failedKeys=a,this.successCount=i,this.message=At(e,r)}function Pt(e,r){this.name="BulkError",this.failures=Object.keys(r).map(function(i){return r[i]}),this.failuresByPos=r,this.message=At(e,this.failures)}et(_t).from(Error).extend({toString:function(){return this.name+": "+this.message}}),et(Ot).from(_t),et(Pt).from(_t);var Kt=ie.reduce(function(e,r){return e[r]=r+"Error",e},{}),Vt=_t,U=ie.reduce(function(e,r){var i=r+"Error";function a(l,u){this.name=i,l?typeof l=="string"?(this.message="".concat(l).concat(u?`
 `+u:""),this.inner=u||null):typeof l=="object"&&(this.message="".concat(l.name," ").concat(l.message),this.inner=l):(this.message=wt[r]||i,this.inner=null)}return et(a).from(Vt),e[r]=a,e},{});U.Syntax=SyntaxError,U.Type=TypeError,U.Range=RangeError;var It=De.reduce(function(e,r){return e[r+"Error"]=U[r],e},{}),jt=ie.reduce(function(e,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=U[r]),e},{});function mt(){}function Zt(e){return e}function Zr(e,r){return e==null||e===Zt?r:function(i){return r(e(i))}}function ye(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function nr(e,r){return e===mt?r:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var a=this.onsuccess,l=this.onerror;this.onsuccess=null,this.onerror=null;var u=r.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?ye(a,this.onsuccess):a),l&&(this.onerror=this.onerror?ye(l,this.onerror):l),u!==void 0?u:i}}function rr(e,r){return e===mt?r:function(){e.apply(this,arguments);var i=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?ye(i,this.onsuccess):i),a&&(this.onerror=this.onerror?ye(a,this.onerror):a)}}function ti(e,r){return e===mt?r:function(i){var a=e.apply(this,arguments);D(i,a);var l=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,i=r.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?ye(l,this.onsuccess):l),u&&(this.onerror=this.onerror?ye(u,this.onerror):u),a===void 0?i===void 0?void 0:i:D(a,i)}}function ei(e,r){return e===mt?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function le(e,r){return e===mt?r:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var a=this,l=arguments.length,u=new Array(l);l--;)u[l]=arguments[l];return i.then(function(){return r.apply(a,u)})}return r.apply(this,arguments)}}jt.ModifyError=Ot,jt.DexieError=_t,jt.BulkError=Pt;var qt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Pn(e){qt=e}var Ce={},cn=100,be=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,M(e),e];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,M(r),e]}(),De=be[0],ie=be[1],be=be[2],ie=ie&&ie.then,$e=De&&De.constructor,ln=!!be,xe=function(e,r){In.push([e,r]),ir&&(queueMicrotask(Ua),ir=!1)},ni=!0,ir=!0,We=[],sr=[],ri=Zt,Ne={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mt,pgp:!1,env:{},finalize:mt},z=Ne,In=[],Ye=0,or=[];function F(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=z;if(typeof e!="function"){if(e!==Ce)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&si(this,this._value))}this._state=null,this._value=null,++r.ref,function i(a,l){try{l(function(u){if(a._state===null){if(u===a)throw new TypeError("A promise cannot be resolved with itself.");var h=a._lib&&un();u&&typeof u.then=="function"?i(a,function(p,y){u instanceof F?u._then(p,y):u.then(p,y)}):(a._state=!0,a._value=u,Ds(a)),h&&hn()}},si.bind(null,a))}catch(u){si(a,u)}}(this,e)}var ii={get:function(){var e=z,r=ur;function i(a,l){var u=this,h=!e.global&&(e!==z||r!==ur),p=h&&!Le(),y=new F(function(g,E){oi(u,new Cs(xs(a,e,h,p),xs(l,e,h,p),g,E,e))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return i.prototype=Ce,i},set:function(e){ot(this,"then",e&&e.prototype===Ce?ii:{get:function(){return e},set:ii.set})}};function Cs(e,r,i,a,l){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=i,this.reject=a,this.psd=l}function si(e,r){var i,a;sr.push(r),e._state===null&&(i=e._lib&&un(),r=ri(r),e._state=!1,e._value=r,a=e,We.some(function(l){return l._value===a._value})||We.push(a),Ds(e),i&&hn())}function Ds(e){var r=e._listeners;e._listeners=[];for(var i=0,a=r.length;i<a;++i)oi(e,r[i]);var l=e._PSD;--l.ref||l.finalize(),Ye===0&&(++Ye,xe(function(){--Ye==0&&ai()},[]))}function oi(e,r){if(e._state!==null){var i=e._state?r.onFulfilled:r.onRejected;if(i===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++Ye,xe(Ya,[i,e,r])}else e._listeners.push(r)}function Ya(e,r,i){try{var a,l=r._value;!r._state&&sr.length&&(sr=[]),a=qt&&r._consoleTask?r._consoleTask.run(function(){return e(l)}):e(l),r._state||sr.indexOf(l)!==-1||function(u){for(var h=We.length;h;)if(We[--h]._value===u._value)return We.splice(h,1)}(r),i.resolve(a)}catch(u){i.reject(u)}finally{--Ye==0&&ai(),--i.psd.ref||i.psd.finalize()}}function Ua(){Ue(Ne,function(){un()&&hn()})}function un(){var e=ni;return ir=ni=!1,e}function hn(){var e,r,i;do for(;0<In.length;)for(e=In,In=[],i=e.length,r=0;r<i;++r){var a=e[r];a[0].apply(null,a[1])}while(0<In.length);ir=ni=!0}function ai(){var e=We;We=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var r=or.slice(0),i=r.length;i;)r[--i]()}function ar(e){return new F(Ce,!1,e)}function xt(e,r){var i=z;return function(){var a=un(),l=z;try{return Pe(i,!0),e.apply(this,arguments)}catch(u){r&&r(u)}finally{Pe(l,!1),a&&hn()}}}X(F.prototype,{then:ii,_then:function(e,r){oi(this,new Cs(null,null,e,r,z))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=e,i=arguments[1];return typeof r=="function"?this.then(null,function(a){return(a instanceof r?i:ar)(a)}):this.then(null,function(a){return(a&&a.name===r?i:ar)(a)})},finally:function(e){return this.then(function(r){return F.resolve(e()).then(function(){return r})},function(r){return F.resolve(e()).then(function(){return ar(r)})})},timeout:function(e,r){var i=this;return e<1/0?new F(function(a,l){var u=setTimeout(function(){return l(new U.Timeout(r))},e);i.then(a,l).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ot(F.prototype,Symbol.toStringTag,"Dexie.Promise"),Ne.env=$s(),X(F,{all:function(){var e=J.apply(null,arguments).map(hr);return new F(function(r,i){e.length===0&&r([]);var a=e.length;e.forEach(function(l,u){return F.resolve(l).then(function(h){e[u]=h,--a||r(e)},i)})})},resolve:function(e){return e instanceof F?e:e&&typeof e.then=="function"?new F(function(r,i){e.then(r,i)}):new F(Ce,!0,e)},reject:ar,race:function(){var e=J.apply(null,arguments).map(hr);return new F(function(r,i){e.map(function(a){return F.resolve(a).then(r,i)})})},PSD:{get:function(){return z},set:function(e){return z=e}},totalEchoes:{get:function(){return ur}},newPSD:ke,usePSD:Ue,scheduler:{get:function(){return xe},set:function(e){xe=e}},rejectionMapper:{get:function(){return ri},set:function(e){ri=e}},follow:function(e,r){return new F(function(i,a){return ke(function(l,u){var h=z;h.unhandleds=[],h.onunhandled=u,h.finalize=ye(function(){var p,y=this;p=function(){y.unhandleds.length===0?l():u(y.unhandleds[0])},or.push(function g(){p(),or.splice(or.indexOf(g),1)}),++Ye,xe(function(){--Ye==0&&ai()},[])},h.finalize),e()},r,i,a)})}}),$e&&($e.allSettled&&ot(F,"allSettled",function(){var e=J.apply(null,arguments).map(hr);return new F(function(r){e.length===0&&r([]);var i=e.length,a=new Array(i);e.forEach(function(l,u){return F.resolve(l).then(function(h){return a[u]={status:"fulfilled",value:h}},function(h){return a[u]={status:"rejected",reason:h}}).then(function(){return--i||r(a)})})})}),$e.any&&typeof AggregateError<"u"&&ot(F,"any",function(){var e=J.apply(null,arguments).map(hr);return new F(function(r,i){e.length===0&&i(new AggregateError([]));var a=e.length,l=new Array(a);e.forEach(function(u,h){return F.resolve(u).then(function(p){return r(p)},function(p){l[h]=p,--a||i(new AggregateError(l))})})})}));var Mt={awaits:0,echoes:0,id:0},za=0,cr=[],lr=0,ur=0,Xa=0;function ke(e,r,i,a){var l=z,u=Object.create(l);return u.parent=l,u.ref=0,u.global=!1,u.id=++Xa,Ne.env,u.env=ln?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject}:{},r&&D(u,r),++l.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},a=Ue(u,e,i,a),u.ref===0&&u.finalize(),a}function fn(){return Mt.id||(Mt.id=++za),++Mt.awaits,Mt.echoes+=cn,Mt.id}function Le(){return!!Mt.awaits&&(--Mt.awaits==0&&(Mt.id=0),Mt.echoes=Mt.awaits*cn,!0)}function hr(e){return Mt.echoes&&e&&e.constructor===$e?(fn(),e.then(function(r){return Le(),r},function(r){return Le(),kt(r)})):e}function Ga(){var e=cr[cr.length-1];cr.pop(),Pe(e,!1)}function Pe(e,r){var i,a=z;(r?!Mt.echoes||lr++&&e===z:!lr||--lr&&e===z)||queueMicrotask(r?(function(l){++ur,Mt.echoes&&--Mt.echoes!=0||(Mt.echoes=Mt.awaits=Mt.id=0),cr.push(z),Pe(l,!0)}).bind(null,e):Ga),e!==z&&(z=e,a===Ne&&(Ne.env=$s()),ln&&(i=Ne.env.Promise,r=e.env,(a.global||e.global)&&(Object.defineProperty(f,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))))}function $s(){var e=f.Promise;return ln?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(f,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ue(e,r,i,a,l){var u=z;try{return Pe(e,!0),r(i,a,l)}finally{Pe(u,!1)}}function xs(e,r,i,a){return typeof e!="function"?e:function(){var l=z;i&&fn(),Pe(r,!0);try{return e.apply(this,arguments)}finally{Pe(l,!1),a&&queueMicrotask(Le)}}}function ci(e){Promise===$e&&Mt.echoes===0?lr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+ie).indexOf("[native code]")===-1&&(fn=Le=mt);var kt=F.reject,ze="￿",_e="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ns="String expected.",dn=[],fr="__dbnames",li="readonly",ui="readwrite";function Xe(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}var ks={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function dr(e){return typeof e!="string"||/\./.test(e)?function(r){return r}:function(r){return r[e]===void 0&&e in r&&delete(r=St(r))[e],r}}function Ls(){throw U.Type()}function vt(e,r){try{var i=Ps(e),a=Ps(r);if(i!==a)return i==="Array"?1:a==="Array"?-1:i==="binary"?1:a==="binary"?-1:i==="string"?1:a==="string"?-1:i==="Date"?1:a!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return r<e?1:e<r?-1:0;case"binary":return function(l,u){for(var h=l.length,p=u.length,y=h<p?h:p,g=0;g<y;++g)if(l[g]!==u[g])return l[g]<u[g]?-1:1;return h===p?0:h<p?-1:1}(Is(e),Is(r));case"Array":return function(l,u){for(var h=l.length,p=u.length,y=h<p?h:p,g=0;g<y;++g){var E=vt(l[g],u[g]);if(E!==0)return E}return h===p?0:h<p?-1:1}(e,r)}}catch{}return NaN}function Ps(e){var r=typeof e;return r!="object"?r:ArrayBuffer.isView(e)?"binary":(e=q(e),e==="ArrayBuffer"?"binary":e)}function Is(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ms=(Dt.prototype._trans=function(e,r,i){var a=this._tx||z.trans,l=this.name,u=qt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function h(g,E,m){if(!m.schema[l])throw new U.NotFound("Table "+l+" not part of transaction");return r(m.idbtrans,m)}var p=un();try{var y=a&&a.db._novip===this.db._novip?a===z.trans?a._promise(e,h,i):ke(function(){return a._promise(e,h,i)},{trans:a,transless:z.transless||z}):function g(E,m,T,v){if(E.idbdb&&(E._state.openComplete||z.letThrough||E._vip)){var b=E._createTransaction(m,T,E._dbSchema);try{b.create(),E._state.PR1398_maxLoop=3}catch(S){return S.name===Kt.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return g(E,m,T,v)})):kt(S)}return b._promise(m,function(S,_){return ke(function(){return z.trans=b,v(S,_,b)})}).then(function(S){if(m==="readwrite")try{b.idbtrans.commit()}catch{}return m==="readonly"?S:b._completion.then(function(){return S})})}if(E._state.openComplete)return kt(new U.DatabaseClosed(E._state.dbOpenError));if(!E._state.isBeingOpened){if(!E._state.autoOpen)return kt(new U.DatabaseClosed);E.open().catch(mt)}return E._state.dbReadyPromise.then(function(){return g(E,m,T,v)})}(this.db,e,[this.name],h);return u&&(y._consoleTask=u,y=y.catch(function(g){return console.trace(g),kt(g)})),y}finally{p&&hn()}},Dt.prototype.get=function(e,r){var i=this;return e&&e.constructor===Object?this.where(e).first(r):e==null?kt(new U.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return i.core.get({trans:a,key:e}).then(function(l){return i.hook.reading.fire(l)})}).then(r)},Dt.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(w(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var r=d(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(y){if(y.compound&&r.every(function(E){return 0<=y.keyPath.indexOf(E)})){for(var g=0;g<r.length;++g)if(r.indexOf(y.keyPath[g])===-1)return!1;return!0}return!1}).sort(function(y,g){return y.keyPath.length-g.keyPath.length})[0];if(i&&this.db._maxKey!==ze){var h=i.keyPath.slice(0,r.length);return this.where(h).equals(h.map(function(g){return e[g]}))}!i&&qt&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var a=this.schema.idxByName,l=this.db._deps.indexedDB;function u(y,g){return l.cmp(y,g)===0}var p=r.reduce(function(T,g){var E=T[0],m=T[1],T=a[g],v=e[g];return[E||T,E||!T?Xe(m,T&&T.multi?function(b){return b=rt(b,g),w(b)&&b.some(function(S){return u(v,S)})}:function(b){return u(v,rt(b,g))}):m]},[null,null]),h=p[0],p=p[1];return h?this.where(h.name).equals(e[h.keyPath]).filter(p):i?this.filter(p):this.where(r).equals("")},Dt.prototype.filter=function(e){return this.toCollection().and(e)},Dt.prototype.count=function(e){return this.toCollection().count(e)},Dt.prototype.offset=function(e){return this.toCollection().offset(e)},Dt.prototype.limit=function(e){return this.toCollection().limit(e)},Dt.prototype.each=function(e){return this.toCollection().each(e)},Dt.prototype.toArray=function(e){return this.toCollection().toArray(e)},Dt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Dt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,w(e)?"[".concat(e.join("+"),"]"):e))},Dt.prototype.reverse=function(){return this.toCollection().reverse()},Dt.prototype.mapToClass=function(e){var r,i=this.db,a=this.name;function l(){return r!==null&&r.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Ls&&(function(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function E(){this.constructor=y}n(y,g),y.prototype=g===null?Object.create(g):(E.prototype=g.prototype,new E)}(l,r=e),Object.defineProperty(l.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),l.prototype.table=function(){return a},e=l);for(var u=new Set,h=e.prototype;h;h=M(h))Object.getOwnPropertyNames(h).forEach(function(y){return u.add(y)});function p(y){if(!y)return y;var g,E=Object.create(e.prototype);for(g in y)if(!u.has(g))try{E[g]=y[g]}catch{}return E}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},Dt.prototype.defineClass=function(){return this.mapToClass(function(e){D(this,e)})},Dt.prototype.add=function(e,r){var i=this,a=this.schema.primKey,l=a.auto,u=a.keyPath,h=e;return u&&l&&(h=dr(u)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"add",keys:r!=null?[r]:null,values:[h]})}).then(function(p){return p.numFailures?F.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{lt(e,u,p)}catch{}return p})},Dt.prototype.update=function(e,r){return typeof e!="object"||w(e)?this.where(":id").equals(e).modify(r):(e=rt(e,this.schema.primKey.keyPath),e===void 0?kt(new U.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(r))},Dt.prototype.put=function(e,r){var i=this,a=this.schema.primKey,l=a.auto,u=a.keyPath,h=e;return u&&l&&(h=dr(u)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"put",values:[h],keys:r!=null?[r]:null})}).then(function(p){return p.numFailures?F.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{lt(e,u,p)}catch{}return p})},Dt.prototype.delete=function(e){var r=this;return this._trans("readwrite",function(i){return r.core.mutate({trans:i,type:"delete",keys:[e]})}).then(function(i){return i.numFailures?F.reject(i.failures[0]):void 0})},Dt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"deleteRange",range:ks})}).then(function(r){return r.numFailures?F.reject(r.failures[0]):void 0})},Dt.prototype.bulkGet=function(e){var r=this;return this._trans("readonly",function(i){return r.core.getMany({keys:e,trans:i}).then(function(a){return a.map(function(l){return r.hook.reading.fire(l)})})})},Dt.prototype.bulkAdd=function(e,r,i){var a=this,l=Array.isArray(r)?r:void 0,u=(i=i||(l?void 0:r))?i.allKeys:void 0;return this._trans("readwrite",function(h){var g=a.schema.primKey,p=g.auto,g=g.keyPath;if(g&&l)throw new U.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(l&&l.length!==e.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,g=g&&p?e.map(dr(g)):e;return a.core.mutate({trans:h,type:"add",keys:l,values:g,wantResults:u}).then(function(b){var m=b.numFailures,T=b.results,v=b.lastResult,b=b.failures;if(m===0)return u?T:v;throw new Pt("".concat(a.name,".bulkAdd(): ").concat(m," of ").concat(y," operations failed"),b)})})},Dt.prototype.bulkPut=function(e,r,i){var a=this,l=Array.isArray(r)?r:void 0,u=(i=i||(l?void 0:r))?i.allKeys:void 0;return this._trans("readwrite",function(h){var g=a.schema.primKey,p=g.auto,g=g.keyPath;if(g&&l)throw new U.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(l&&l.length!==e.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,g=g&&p?e.map(dr(g)):e;return a.core.mutate({trans:h,type:"put",keys:l,values:g,wantResults:u}).then(function(b){var m=b.numFailures,T=b.results,v=b.lastResult,b=b.failures;if(m===0)return u?T:v;throw new Pt("".concat(a.name,".bulkPut(): ").concat(m," of ").concat(y," operations failed"),b)})})},Dt.prototype.bulkUpdate=function(e){var r=this,i=this.core,a=e.map(function(h){return h.key}),l=e.map(function(h){return h.changes}),u=[];return this._trans("readwrite",function(h){return i.getMany({trans:h,keys:a,cache:"clone"}).then(function(p){var y=[],g=[];e.forEach(function(m,T){var v=m.key,b=m.changes,S=p[T];if(S){for(var _=0,A=Object.keys(b);_<A.length;_++){var O=A[_],C=b[O];if(O===r.schema.primKey.keyPath){if(vt(C,v)!==0)throw new U.Constraint("Cannot update primary key in bulkUpdate()")}else lt(S,O,C)}u.push(T),y.push(v),g.push(S)}});var E=y.length;return i.mutate({trans:h,type:"put",keys:y,values:g,updates:{keys:a,changeSpecs:l}}).then(function(m){var T=m.numFailures,v=m.failures;if(T===0)return E;for(var b=0,S=Object.keys(v);b<S.length;b++){var _,A=S[b],O=u[Number(A)];O!=null&&(_=v[A],delete v[A],v[O]=_)}throw new Pt("".concat(r.name,".bulkUpdate(): ").concat(T," of ").concat(E," operations failed"),v)})})})},Dt.prototype.bulkDelete=function(e){var r=this,i=e.length;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"delete",keys:e})}).then(function(h){var l=h.numFailures,u=h.lastResult,h=h.failures;if(l===0)return u;throw new Pt("".concat(r.name,".bulkDelete(): ").concat(l," of ").concat(i," operations failed"),h)})},Dt);function Dt(){}function Mn(e){function r(h,p){if(p){for(var y=arguments.length,g=new Array(y-1);--y;)g[y-1]=arguments[y];return i[h].subscribe.apply(null,g),e}if(typeof h=="string")return i[h]}var i={};r.addEventType=u;for(var a=1,l=arguments.length;a<l;++a)u(arguments[a]);return r;function u(h,p,y){if(typeof h!="object"){var g;p=p||ei;var E={subscribers:[],fire:y=y||mt,subscribe:function(m){E.subscribers.indexOf(m)===-1&&(E.subscribers.push(m),E.fire=p(E.fire,m))},unsubscribe:function(m){E.subscribers=E.subscribers.filter(function(T){return T!==m}),E.fire=E.subscribers.reduce(p,y)}};return i[h]=r[h]=E}d(g=h).forEach(function(m){var T=g[m];if(w(T))u(m,g[m][0],g[m][1]);else{if(T!=="asap")throw new U.InvalidArgument("Invalid event config");var v=u(m,Zt,function(){for(var b=arguments.length,S=new Array(b);b--;)S[b]=arguments[b];v.subscribers.forEach(function(_){dt(function(){_.apply(null,S)})})})}})}}function Rn(e,r){return et(r).from({prototype:e}),r}function pn(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function hi(e,r){e.filter=Xe(e.filter,r)}function fi(e,r,i){var a=e.replayFilter;e.replayFilter=a?function(){return Xe(a(),r())}:r,e.justLimit=i&&!a}function pr(e,r){if(e.isPrimKey)return r.primaryKey;var i=r.getIndexByKeyPath(e.index);if(!i)throw new U.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return i}function Rs(e,r,i){var a=pr(e,r.schema);return r.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function mr(e,r,i,a){var l=e.replayFilter?Xe(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},h=function(p,y,g){var E,m;l&&!l(y,g,function(T){return y.stop(T)},function(T){return y.fail(T)})||((m=""+(E=y.primaryKey))=="[object ArrayBuffer]"&&(m=""+new Uint8Array(E)),L(u,m)||(u[m]=!0,r(p,y,g)))};return Promise.all([e.or._iterate(h,i),js(Rs(e,a,i),e.algorithm,h,!e.keysOnly&&e.valueMapper)])}return js(Rs(e,a,i),Xe(e.algorithm,l),r,!e.keysOnly&&e.valueMapper)}function js(e,r,i,a){var l=xt(a?function(u,h,p){return i(a(u),h,p)}:i);return e.then(function(u){if(u)return u.start(function(){var h=function(){return u.continue()};r&&!r(u,function(p){return h=p},function(p){u.stop(p),h=mt},function(p){u.fail(p),h=mt})||l(u.value,u,function(p){return h=p}),h()})})}var be=Symbol(),jn=(Ks.prototype.execute=function(e){if(this.add!==void 0){var r=this.add;if(w(r))return c(c([],w(e)?e:[],!0),r).sort();if(typeof r=="number")return(Number(e)||0)+r;if(typeof r=="bigint")try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(this.remove!==void 0){var i=this.remove;if(w(i))return w(e)?e.filter(function(a){return!i.includes(a)}).sort():[];if(typeof i=="number")return Number(e)-i;if(typeof i=="bigint")try{return BigInt(e)-i}catch{return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return r=(r=this.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof e=="string"&&e.startsWith(r)?this.replacePrefix[1]+e.substring(r.length):e},Ks);function Ks(e){Object.assign(this,e)}var Qa=(yt.prototype._read=function(e,r){var i=this._ctx;return i.error?i.table._trans(null,kt.bind(null,i.error)):i.table._trans("readonly",e).then(r)},yt.prototype._write=function(e){var r=this._ctx;return r.error?r.table._trans(null,kt.bind(null,r.error)):r.table._trans("readwrite",e,"locked")},yt.prototype._addAlgorithm=function(e){var r=this._ctx;r.algorithm=Xe(r.algorithm,e)},yt.prototype._iterate=function(e,r){return mr(this._ctx,e,r,this._ctx.table.core)},yt.prototype.clone=function(e){var r=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&D(i,e),r._ctx=i,r},yt.prototype.raw=function(){return this._ctx.valueMapper=null,this},yt.prototype.each=function(e){var r=this._ctx;return this._read(function(i){return mr(r,e,i,r.table.core)})},yt.prototype.count=function(e){var r=this;return this._read(function(i){var a=r._ctx,l=a.table.core;if(pn(a,!0))return l.count({trans:i,query:{index:pr(a,l.schema),range:a.range}}).then(function(h){return Math.min(h,a.limit)});var u=0;return mr(a,function(){return++u,!1},i,l).then(function(){return u})}).then(e)},yt.prototype.sortBy=function(e,r){var i=e.split(".").reverse(),a=i[0],l=i.length-1;function u(y,g){return g?u(y[i[g]],g-1):y[a]}var h=this._ctx.dir==="next"?1:-1;function p(y,g){return y=u(y,l),g=u(g,l),y<g?-h:g<y?h:0}return this.toArray(function(y){return y.sort(p)}).then(r)},yt.prototype.toArray=function(e){var r=this;return this._read(function(i){var a=r._ctx;if(a.dir==="next"&&pn(a,!0)&&0<a.limit){var l=a.valueMapper,u=pr(a,a.table.core.schema);return a.table.core.query({trans:i,limit:a.limit,values:!0,query:{index:u,range:a.range}}).then(function(p){return p=p.result,l?p.map(l):p})}var h=[];return mr(a,function(p){return h.push(p)},i,a.table.core).then(function(){return h})},e)},yt.prototype.offset=function(e){var r=this._ctx;return e<=0||(r.offset+=e,pn(r)?fi(r,function(){var i=e;return function(a,l){return i===0||(i===1?--i:l(function(){a.advance(i),i=0}),!1)}}):fi(r,function(){var i=e;return function(){return--i<0}})),this},yt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),fi(this._ctx,function(){var r=e;return function(i,a,l){return--r<=0&&a(l),0<=r}},!0),this},yt.prototype.until=function(e,r){return hi(this._ctx,function(i,a,l){return!e(i.value)||(a(l),r)}),this},yt.prototype.first=function(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)},yt.prototype.last=function(e){return this.reverse().first(e)},yt.prototype.filter=function(e){var r;return hi(this._ctx,function(i){return e(i.value)}),(r=this._ctx).isMatch=Xe(r.isMatch,e),this},yt.prototype.and=function(e){return this.filter(e)},yt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},yt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},yt.prototype.desc=function(){return this.reverse()},yt.prototype.eachKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(i,a){e(a.key,a)})},yt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},yt.prototype.eachPrimaryKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(i,a){e(a.primaryKey,a)})},yt.prototype.keys=function(e){var r=this._ctx;r.keysOnly=!r.isMatch;var i=[];return this.each(function(a,l){i.push(l.key)}).then(function(){return i}).then(e)},yt.prototype.primaryKeys=function(e){var r=this._ctx;if(r.dir==="next"&&pn(r,!0)&&0<r.limit)return this._read(function(a){var l=pr(r,r.table.core.schema);return r.table.core.query({trans:a,values:!1,limit:r.limit,query:{index:l,range:r.range}})}).then(function(a){return a.result}).then(e);r.keysOnly=!r.isMatch;var i=[];return this.each(function(a,l){i.push(l.primaryKey)}).then(function(){return i}).then(e)},yt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},yt.prototype.firstKey=function(e){return this.limit(1).keys(function(r){return r[0]}).then(e)},yt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},yt.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var r={};return hi(this._ctx,function(l){var a=l.primaryKey.toString(),l=L(r,a);return r[a]=!0,!l}),this},yt.prototype.modify=function(e){var r=this,i=this._ctx;return this._write(function(a){var l,u,h;h=typeof e=="function"?e:(l=d(e),u=l.length,function(_){for(var A=!1,O=0;O<u;++O){var C=l[O],$=e[C],P=rt(_,C);$ instanceof jn?(lt(_,C,$.execute(P)),A=!0):P!==$&&(lt(_,C,$),A=!0)}return A});function p(_,C){var O=C.failures,C=C.numFailures;b+=_-C;for(var $=0,P=d(O);$<P.length;$++){var B=P[$];v.push(O[B])}}var y=i.table.core,g=y.schema.primaryKey,E=g.outbound,m=g.extractKey,T=r.db._options.modifyChunkSize||200,v=[],b=0,S=[];return r.clone().primaryKeys().then(function(_){function A(C){var $=Math.min(T,_.length-C);return y.getMany({trans:a,keys:_.slice(C,C+$),cache:"immutable"}).then(function(P){for(var B=[],I=[],K=E?[]:null,V=[],k=0;k<$;++k){var st=P[k],at={value:St(st),primKey:_[C+k]};h.call(at,at.value,at)!==!1&&(at.value==null?V.push(_[C+k]):E||vt(m(st),m(at.value))===0?(I.push(at.value),E&&K.push(_[C+k])):(V.push(_[C+k]),B.push(at.value)))}return Promise.resolve(0<B.length&&y.mutate({trans:a,type:"add",values:B}).then(function(ft){for(var ut in ft.failures)V.splice(parseInt(ut),1);p(B.length,ft)})).then(function(){return(0<I.length||O&&typeof e=="object")&&y.mutate({trans:a,type:"put",keys:K,values:I,criteria:O,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<C}).then(function(ft){return p(I.length,ft)})}).then(function(){return(0<V.length||O&&e===di)&&y.mutate({trans:a,type:"delete",keys:V,criteria:O,isAdditionalChunk:0<C}).then(function(ft){return p(V.length,ft)})}).then(function(){return _.length>C+$&&A(C+T)})})}var O=pn(i)&&i.limit===1/0&&(typeof e!="function"||e===di)&&{index:i.index,range:i.range};return A(0).then(function(){if(0<v.length)throw new Ot("Error modifying one or more objects",v,b,S);return _.length})})})},yt.prototype.delete=function(){var e=this._ctx,r=e.range;return pn(e)&&(e.isPrimKey||r.type===3)?this._write(function(i){var a=e.table.core.schema.primaryKey,l=r;return e.table.core.count({trans:i,query:{index:a,range:l}}).then(function(u){return e.table.core.mutate({trans:i,type:"deleteRange",range:l}).then(function(h){var p=h.failures;if(h.lastResult,h.results,h=h.numFailures,h)throw new Ot("Could not delete some values",Object.keys(p).map(function(y){return p[y]}),u-h);return u-h})})}):this.modify(di)},yt);function yt(){}var di=function(e,r){return r.value=null};function Ja(e,r){return e<r?-1:e===r?0:1}function Za(e,r){return r<e?-1:e===r?0:1}function te(e,r,i){return e=e instanceof Bs?new e.Collection(e):e,e._ctx.error=new(i||TypeError)(r),e}function mn(e){return new e.Collection(e,function(){return Hs("")}).limit(0)}function gr(e,r,i,a){var l,u,h,p,y,g,E,m=i.length;if(!i.every(function(b){return typeof b=="string"}))return te(e,Ns);function T(b){l=b==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},u=b==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},h=b==="next"?Ja:Za;var S=i.map(function(_){return{lower:u(_),upper:l(_)}}).sort(function(_,A){return h(_.lower,A.lower)});p=S.map(function(_){return _.upper}),y=S.map(function(_){return _.lower}),E=(g=b)==="next"?"":a}T("next"),e=new e.Collection(e,function(){return Ie(p[0],y[m-1]+a)}),e._ondirectionchange=function(b){T(b)};var v=0;return e._addAlgorithm(function(b,S,_){var A=b.key;if(typeof A!="string")return!1;var O=u(A);if(r(O,y,v))return!0;for(var C=null,$=v;$<m;++$){var P=function(B,I,K,V,k,st){for(var at=Math.min(B.length,V.length),ft=-1,ut=0;ut<at;++ut){var ue=I[ut];if(ue!==V[ut])return k(B[ut],K[ut])<0?B.substr(0,ut)+K[ut]+K.substr(ut+1):k(B[ut],V[ut])<0?B.substr(0,ut)+V[ut]+K.substr(ut+1):0<=ft?B.substr(0,ft)+I[ft]+K.substr(ft+1):null;k(B[ut],ue)<0&&(ft=ut)}return at<V.length&&st==="next"?B+K.substr(B.length):at<B.length&&st==="prev"?B.substr(0,K.length):ft<0?null:B.substr(0,ft)+V[ft]+K.substr(ft+1)}(A,O,p[$],y[$],h,g);P===null&&C===null?v=$+1:(C===null||0<h(C,P))&&(C=P)}return S(C!==null?function(){b.continue(C+E)}:_),!1}),e}function Ie(e,r,i,a){return{type:2,lower:e,upper:r,lowerOpen:i,upperOpen:a}}function Hs(e){return{type:1,lower:e,upper:e}}var Bs=(Object.defineProperty(Rt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Rt.prototype.between=function(e,r,i,a){i=i!==!1,a=a===!0;try{return 0<this._cmp(e,r)||this._cmp(e,r)===0&&(i||a)&&(!i||!a)?mn(this):new this.Collection(this,function(){return Ie(e,r,!i,!a)})}catch{return te(this,_e)}},Rt.prototype.equals=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Hs(e)})},Rt.prototype.above=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Ie(e,void 0,!0)})},Rt.prototype.aboveOrEqual=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Ie(e,void 0,!1)})},Rt.prototype.below=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Ie(void 0,e,!1,!0)})},Rt.prototype.belowOrEqual=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Ie(void 0,e)})},Rt.prototype.startsWith=function(e){return typeof e!="string"?te(this,Ns):this.between(e,e+ze,!0,!0)},Rt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):gr(this,function(r,i){return r.indexOf(i[0])===0},[e],ze)},Rt.prototype.equalsIgnoreCase=function(e){return gr(this,function(r,i){return r===i[0]},[e],"")},Rt.prototype.anyOfIgnoreCase=function(){var e=J.apply(Q,arguments);return e.length===0?mn(this):gr(this,function(r,i){return i.indexOf(r)!==-1},e,"")},Rt.prototype.startsWithAnyOfIgnoreCase=function(){var e=J.apply(Q,arguments);return e.length===0?mn(this):gr(this,function(r,i){return i.some(function(a){return r.indexOf(a)===0})},e,ze)},Rt.prototype.anyOf=function(){var e=this,r=J.apply(Q,arguments),i=this._cmp;try{r.sort(i)}catch{return te(this,_e)}if(r.length===0)return mn(this);var a=new this.Collection(this,function(){return Ie(r[0],r[r.length-1])});a._ondirectionchange=function(u){i=u==="next"?e._ascending:e._descending,r.sort(i)};var l=0;return a._addAlgorithm(function(u,h,p){for(var y=u.key;0<i(y,r[l]);)if(++l===r.length)return h(p),!1;return i(y,r[l])===0||(h(function(){u.continue(r[l])}),!1)}),a},Rt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Rt.prototype.noneOf=function(){var e=J.apply(Q,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return te(this,_e)}var r=e.reduce(function(i,a){return i?i.concat([[i[i.length-1][1],a]]):[[-1/0,a]]},null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},Rt.prototype.inAnyRange=function(A,r){var i=this,a=this._cmp,l=this._ascending,u=this._descending,h=this._min,p=this._max;if(A.length===0)return mn(this);if(!A.every(function(O){return O[0]!==void 0&&O[1]!==void 0&&l(O[0],O[1])<=0}))return te(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",U.InvalidArgument);var y=!r||r.includeLowers!==!1,g=r&&r.includeUppers===!0,E,m=l;function T(O,C){return m(O[0],C[0])}try{(E=A.reduce(function(O,C){for(var $=0,P=O.length;$<P;++$){var B=O[$];if(a(C[0],B[1])<0&&0<a(C[1],B[0])){B[0]=h(B[0],C[0]),B[1]=p(B[1],C[1]);break}}return $===P&&O.push(C),O},[])).sort(T)}catch{return te(this,_e)}var v=0,b=g?function(O){return 0<l(O,E[v][1])}:function(O){return 0<=l(O,E[v][1])},S=y?function(O){return 0<u(O,E[v][0])}:function(O){return 0<=u(O,E[v][0])},_=b,A=new this.Collection(this,function(){return Ie(E[0][0],E[E.length-1][1],!y,!g)});return A._ondirectionchange=function(O){m=O==="next"?(_=b,l):(_=S,u),E.sort(T)},A._addAlgorithm(function(O,C,$){for(var P,B=O.key;_(B);)if(++v===E.length)return C($),!1;return!b(P=B)&&!S(P)||(i._cmp(B,E[v][1])===0||i._cmp(B,E[v][0])===0||C(function(){m===l?O.continue(E[v][0]):O.continue(E[v][1])}),!1)}),A},Rt.prototype.startsWithAnyOf=function(){var e=J.apply(Q,arguments);return e.every(function(r){return typeof r=="string"})?e.length===0?mn(this):this.inAnyRange(e.map(function(r){return[r,r+ze]})):te(this,"startsWithAnyOf() only works with strings")},Rt);function Rt(){}function de(e){return xt(function(r){return Kn(r),e(r.target.error),!1})}function Kn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Hn="storagemutated",pi="x-storagemutated-1",Me=Mn(null,Hn),tc=(pe.prototype._lock=function(){return it(!z.global),++this._reculock,this._reculock!==1||z.global||(z.lockOwnerFor=this),this},pe.prototype._unlock=function(){if(it(!z.global),--this._reculock==0)for(z.global||(z.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ue(e[1],e[0])}catch{}}return this},pe.prototype._locked=function(){return this._reculock&&z.lockOwnerFor!==this},pe.prototype.create=function(e){var r=this;if(!this.mode)return this;var i=this.db.idbdb,a=this.db._state.dbOpenError;if(it(!this.idbtrans),!e&&!i)switch(a&&a.name){case"DatabaseClosedError":throw new U.DatabaseClosed(a);case"MissingAPIError":throw new U.MissingAPI(a.message,a);default:throw new U.OpenFailed(a)}if(!this.active)throw new U.TransactionInactive;return it(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=xt(function(l){Kn(l),r._reject(e.error)}),e.onabort=xt(function(l){Kn(l),r.active&&r._reject(new U.Abort(e.error)),r.active=!1,r.on("abort").fire(l)}),e.oncomplete=xt(function(){r.active=!1,r._resolve(),"mutatedParts"in e&&Me.storagemutated.fire(e.mutatedParts)}),this},pe.prototype._promise=function(e,r,i){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return kt(new U.ReadOnly("Transaction is readonly"));if(!this.active)return kt(new U.TransactionInactive);if(this._locked())return new F(function(u,h){a._blockedFuncs.push([function(){a._promise(e,r,i).then(u,h)},z])});if(i)return ke(function(){var u=new F(function(h,p){a._lock();var y=r(h,p,a);y&&y.then&&y.then(h,p)});return u.finally(function(){return a._unlock()}),u._lib=!0,u});var l=new F(function(u,h){var p=r(u,h,a);p&&p.then&&p.then(u,h)});return l._lib=!0,l},pe.prototype._root=function(){return this.parent?this.parent._root():this},pe.prototype.waitFor=function(e){var r,i=this._root(),a=F.resolve(e);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return a}):(i._waitingFor=a,i._waitingQueue=[],r=i.idbtrans.objectStore(i.storeNames[0]),function u(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(r.get(-1/0).onsuccess=u)}());var l=i._waitingFor;return new F(function(u,h){a.then(function(p){return i._waitingQueue.push(xt(u.bind(null,p)))},function(p){return i._waitingQueue.push(xt(h.bind(null,p)))}).finally(function(){i._waitingFor===l&&(i._waitingFor=null)})})},pe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new U.Abort))},pe.prototype.table=function(e){var r=this._memoizedTables||(this._memoizedTables={});if(L(r,e))return r[e];var i=this.schema[e];if(!i)throw new U.NotFound("Table "+e+" not part of transaction");return i=new this.db.Table(e,i,this),i.core=this.db.core.table(e),r[e]=i},pe);function pe(){}function mi(e,r,i,a,l,u,h){return{name:e,keyPath:r,unique:i,multi:a,auto:l,compound:u,src:(i&&!h?"&":"")+(a?"*":"")+(l?"++":"")+Vs(r)}}function Vs(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function gi(e,r,i){return{name:e,primKey:r,indexes:i,mappedClass:null,idxByName:(a=function(l){return[l.name,l]},i.reduce(function(l,u,h){return h=a(u,h),h&&(l[h[0]]=h[1]),l},{}))};var a}var Bn=function(e){try{return e.only([[]]),Bn=function(){return[[]]},[[]]}catch{return Bn=function(){return ze},ze}};function vi(e){return e==null?function(){}:typeof e=="string"?(r=e).split(".").length===1?function(i){return i[r]}:function(i){return rt(i,r)}:function(i){return rt(i,e)};var r}function qs(e){return[].slice.call(e)}var ec=0;function Vn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function nc(e,r,y){function a(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var v=_.lower,b=_.upper,S=_.lowerOpen,_=_.upperOpen;return v===void 0?b===void 0?null:r.upperBound(b,!!_):b===void 0?r.lowerBound(v,!!S):r.bound(v,b,!!S,!!_)}function l(T){var v,b=T.name;return{name:b,schema:T,mutate:function(S){var _=S.trans,A=S.type,O=S.keys,C=S.values,$=S.range;return new Promise(function(P,B){P=xt(P);var I=_.objectStore(b),K=I.keyPath==null,V=A==="put"||A==="add";if(!V&&A!=="delete"&&A!=="deleteRange")throw new Error("Invalid operation type: "+A);var k,st=(O||C||{length:1}).length;if(O&&C&&O.length!==C.length)throw new Error("Given keys array must have same length as given values array.");if(st===0)return P({numFailures:0,failures:{},results:[],lastResult:void 0});function at(Wt){++ue,Kn(Wt)}var ft=[],ut=[],ue=0;if(A==="deleteRange"){if($.type===4)return P({numFailures:ue,failures:ut,results:[],lastResult:void 0});$.type===3?ft.push(k=I.clear()):ft.push(k=I.delete(a($)))}else{var K=V?K?[C,O]:[C,null]:[O,null],ht=K[0],Ht=K[1];if(V)for(var Bt=0;Bt<st;++Bt)ft.push(k=Ht&&Ht[Bt]!==void 0?I[A](ht[Bt],Ht[Bt]):I[A](ht[Bt])),k.onerror=at;else for(Bt=0;Bt<st;++Bt)ft.push(k=I[A](ht[Bt])),k.onerror=at}function $r(Wt){Wt=Wt.target.result,ft.forEach(function(Je,Ii){return Je.error!=null&&(ut[Ii]=Je.error)}),P({numFailures:ue,failures:ut,results:A==="delete"?O:ft.map(function(Je){return Je.result}),lastResult:Wt})}k.onerror=function(Wt){at(Wt),$r(Wt)},k.onsuccess=$r})},getMany:function(S){var _=S.trans,A=S.keys;return new Promise(function(O,C){O=xt(O);for(var $,P=_.objectStore(b),B=A.length,I=new Array(B),K=0,V=0,k=function(ft){ft=ft.target,I[ft._pos]=ft.result,++V===K&&O(I)},st=de(C),at=0;at<B;++at)A[at]!=null&&(($=P.get(A[at]))._pos=at,$.onsuccess=k,$.onerror=st,++K);K===0&&O(I)})},get:function(S){var _=S.trans,A=S.key;return new Promise(function(O,C){O=xt(O);var $=_.objectStore(b).get(A);$.onsuccess=function(P){return O(P.target.result)},$.onerror=de(C)})},query:(v=g,function(S){return new Promise(function(_,A){_=xt(_);var O,C,$,K=S.trans,P=S.values,B=S.limit,k=S.query,I=B===1/0?void 0:B,V=k.index,k=k.range,K=K.objectStore(b),V=V.isPrimaryKey?K:K.index(V.name),k=a(k);if(B===0)return _({result:[]});v?((I=P?V.getAll(k,I):V.getAllKeys(k,I)).onsuccess=function(st){return _({result:st.target.result})},I.onerror=de(A)):(O=0,C=!P&&"openKeyCursor"in V?V.openKeyCursor(k):V.openCursor(k),$=[],C.onsuccess=function(st){var at=C.result;return at?($.push(P?at.value:at.primaryKey),++O===B?_({result:$}):void at.continue()):_({result:$})},C.onerror=de(A))})}),openCursor:function(S){var _=S.trans,A=S.values,O=S.query,C=S.reverse,$=S.unique;return new Promise(function(P,B){P=xt(P);var V=O.index,I=O.range,K=_.objectStore(b),K=V.isPrimaryKey?K:K.index(V.name),V=C?$?"prevunique":"prev":$?"nextunique":"next",k=!A&&"openKeyCursor"in K?K.openKeyCursor(a(I),V):K.openCursor(a(I),V);k.onerror=de(B),k.onsuccess=xt(function(st){var at,ft,ut,ue,ht=k.result;ht?(ht.___id=++ec,ht.done=!1,at=ht.continue.bind(ht),ft=(ft=ht.continuePrimaryKey)&&ft.bind(ht),ut=ht.advance.bind(ht),ue=function(){throw new Error("Cursor not stopped")},ht.trans=_,ht.stop=ht.continue=ht.continuePrimaryKey=ht.advance=function(){throw new Error("Cursor not started")},ht.fail=xt(B),ht.next=function(){var Ht=this,Bt=1;return this.start(function(){return Bt--?Ht.continue():Ht.stop()}).then(function(){return Ht})},ht.start=function(Ht){function Bt(){if(k.result)try{Ht()}catch(Wt){ht.fail(Wt)}else ht.done=!0,ht.start=function(){throw new Error("Cursor behind last entry")},ht.stop()}var $r=new Promise(function(Wt,Je){Wt=xt(Wt),k.onerror=de(Je),ht.fail=Je,ht.stop=function(Ii){ht.stop=ht.continue=ht.continuePrimaryKey=ht.advance=ue,Wt(Ii)}});return k.onsuccess=xt(function(Wt){k.onsuccess=Bt,Bt()}),ht.continue=at,ht.continuePrimaryKey=ft,ht.advance=ut,Bt(),$r},P(ht)):P(null)},B)})},count:function(S){var _=S.query,A=S.trans,O=_.index,C=_.range;return new Promise(function($,P){var B=A.objectStore(b),I=O.isPrimaryKey?B:B.index(O.name),B=a(C),I=B?I.count(B):I.count();I.onsuccess=xt(function(K){return $(K.target.result)}),I.onerror=de(P)})}}}var u,h,p,E=(h=y,p=qs((u=e).objectStoreNames),{schema:{name:u.name,tables:p.map(function(T){return h.objectStore(T)}).map(function(T){var v=T.keyPath,_=T.autoIncrement,b=w(v),S={},_={name:T.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:v==null,compound:b,keyPath:v,autoIncrement:_,unique:!0,extractKey:vi(v)},indexes:qs(T.indexNames).map(function(A){return T.index(A)}).map(function($){var O=$.name,C=$.unique,P=$.multiEntry,$=$.keyPath,P={name:O,compound:w($),keyPath:$,unique:C,multiEntry:P,extractKey:vi($)};return S[Vn($)]=P}),getIndexByKeyPath:function(A){return S[Vn(A)]}};return S[":id"]=_.primaryKey,v!=null&&(S[Vn(v)]=_.primaryKey),_})},hasGetAll:0<p.length&&"getAll"in h.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),y=E.schema,g=E.hasGetAll,E=y.tables.map(l),m={};return E.forEach(function(T){return m[T.name]=T}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(T){if(!m[T])throw new Error("Table '".concat(T,"' not found"));return m[T]},MIN_KEY:-1/0,MAX_KEY:Bn(r),schema:y}}function rc(e,r,i,a){var l=i.IDBKeyRange;return i.indexedDB,{dbcore:(a=nc(r,l,a),e.dbcore.reduce(function(u,h){return h=h.create,s(s({},u),h(u))},a))}}function vr(e,a){var i=a.db,a=rc(e._middlewares,i,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(l){var u=l.name;e.core.schema.tables.some(function(h){return h.name===u})&&(l.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=l.core))})}function yr(e,r,i,a){i.forEach(function(l){var u=a[l];r.forEach(function(h){var p=function y(g,E){return pt(g,E)||(g=M(g))&&y(g,E)}(h,l);(!p||"value"in p&&p.value===void 0)&&(h===e.Transaction.prototype||h instanceof e.Transaction?ot(h,l,{get:function(){return this.table(l)},set:function(y){G(this,l,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):h[l]=new e.Table(l,u))})})}function yi(e,r){r.forEach(function(i){for(var a in i)i[a]instanceof e.Table&&delete i[a]})}function ic(e,r){return e._cfg.version-r._cfg.version}function sc(e,r,i,a){var l=e._dbSchema;i.objectStoreNames.contains("$meta")&&!l.$meta&&(l.$meta=gi("$meta",Ws("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,l);u.create(i),u._completion.catch(a);var h=u._reject.bind(u),p=z.transless||z;ke(function(){return z.trans=u,z.transless=p,r!==0?(vr(e,i),g=r,((y=u).storeNames.includes("$meta")?y.table("$meta").get("version").then(function(E){return E??g}):F.resolve(g)).then(function(E){return T=E,v=u,b=i,S=[],E=(m=e)._versions,_=m._dbSchema=br(0,m.idbdb,b),(E=E.filter(function(A){return A._cfg.version>=T})).length!==0?(E.forEach(function(A){S.push(function(){var O=_,C=A._cfg.dbschema;wr(m,O,b),wr(m,C,b),_=m._dbSchema=C;var $=_i(O,C);$.add.forEach(function(V){bi(b,V[0],V[1].primKey,V[1].indexes)}),$.change.forEach(function(V){if(V.recreate)throw new U.Upgrade("Not yet support for changing primary key");var k=b.objectStore(V.name);V.add.forEach(function(st){return _r(k,st)}),V.change.forEach(function(st){k.deleteIndex(st.name),_r(k,st)}),V.del.forEach(function(st){return k.deleteIndex(st)})});var P=A._cfg.contentUpgrade;if(P&&A._cfg.version>T){vr(m,b),v._memoizedTables={};var B=$t(C);$.del.forEach(function(V){B[V]=O[V]}),yi(m,[m.Transaction.prototype]),yr(m,[m.Transaction.prototype],d(B),B),v.schema=B;var I,K=gt(P);return K&&fn(),$=F.follow(function(){var V;(I=P(v))&&K&&(V=Le.bind(null,null),I.then(V,V))}),I&&typeof I.then=="function"?F.resolve(I):$.then(function(){return I})}}),S.push(function(O){var C,$,P=A._cfg.dbschema;C=P,$=O,[].slice.call($.db.objectStoreNames).forEach(function(B){return C[B]==null&&$.db.deleteObjectStore(B)}),yi(m,[m.Transaction.prototype]),yr(m,[m.Transaction.prototype],m._storeNames,m._dbSchema),v.schema=m._dbSchema}),S.push(function(O){m.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(m.idbdb.version/10)===A._cfg.version?(m.idbdb.deleteObjectStore("$meta"),delete m._dbSchema.$meta,m._storeNames=m._storeNames.filter(function(C){return C!=="$meta"})):O.objectStore("$meta").put(A._cfg.version,"version"))})}),function A(){return S.length?F.resolve(S.shift()(v.idbtrans)).then(A):F.resolve()}().then(function(){Fs(_,b)})):F.resolve();var m,T,v,b,S,_}).catch(h)):(d(l).forEach(function(E){bi(i,E,l[E].primKey,l[E].indexes)}),vr(e,i),void F.follow(function(){return e.on.populate.fire(u)}).catch(h));var y,g})}function oc(e,r){Fs(e._dbSchema,r),r.db.version%10!=0||r.objectStoreNames.contains("$meta")||r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var i=br(0,e.idbdb,r);wr(e,e._dbSchema,r);for(var a=0,l=_i(i,e._dbSchema).change;a<l.length;a++){var u=function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=r.objectStore(h.name);h.add.forEach(function(y){qt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(y.src)),_r(p,y)})}(l[a]);if(typeof u=="object")return u.value}}function _i(e,r){var i,a={del:[],add:[],change:[]};for(i in e)r[i]||a.del.push(i);for(i in r){var l=e[i],u=r[i];if(l){var h={name:i,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(l.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||l.primKey.auto!==u.primKey.auto)h.recreate=!0,a.change.push(h);else{var p=l.idxByName,y=u.idxByName,g=void 0;for(g in p)y[g]||h.del.push(g);for(g in y){var E=p[g],m=y[g];E?E.src!==m.src&&h.change.push(m):h.add.push(m)}(0<h.del.length||0<h.add.length||0<h.change.length)&&a.change.push(h)}}else a.add.push([i,u])}return a}function bi(e,r,i,a){var l=e.db.createObjectStore(r,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return a.forEach(function(u){return _r(l,u)}),l}function Fs(e,r){d(e).forEach(function(i){r.db.objectStoreNames.contains(i)||(qt&&console.debug("Dexie: Creating missing table",i),bi(r,i,e[i].primKey,e[i].indexes))})}function _r(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function br(e,r,i){var a={};return Et(r.objectStoreNames,0).forEach(function(l){for(var u=i.objectStore(l),h=mi(Vs(g=u.keyPath),g||"",!0,!1,!!u.autoIncrement,g&&typeof g!="string",!0),p=[],y=0;y<u.indexNames.length;++y){var E=u.index(u.indexNames[y]),g=E.keyPath,E=mi(E.name,g,!!E.unique,!!E.multiEntry,!1,g&&typeof g!="string",!1);p.push(E)}a[l]=gi(l,h,p)}),a}function wr(e,r,i){for(var a=i.db.objectStoreNames,l=0;l<a.length;++l){var u=a[l],h=i.objectStore(u);e._hasGetAll="getAll"in h;for(var p=0;p<h.indexNames.length;++p){var y=h.indexNames[p],g=h.index(y).keyPath,E=typeof g=="string"?g:"["+Et(g).join("+")+"]";!r[u]||(g=r[u].idxByName[E])&&(g.name=y,delete r[u].idxByName[E],r[u].idxByName[y]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&f.WorkerGlobalScope&&f instanceof f.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ws(e){return e.split(",").map(function(r,i){var a=(r=r.trim()).replace(/([&*]|\+\+)/g,""),l=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return mi(a,l||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),w(l),i===0)})}var ac=(Er.prototype._parseStoresSpec=function(e,r){d(e).forEach(function(i){if(e[i]!==null){var a=Ws(e[i]),l=a.shift();if(l.unique=!0,l.multi)throw new U.Schema("Primary key cannot be multi-valued");a.forEach(function(u){if(u.auto)throw new U.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new U.Schema("Index must have a name and cannot be an empty string")}),r[i]=gi(i,l,a)}})},Er.prototype.stores=function(i){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?D(this._cfg.storesSource,i):i;var i=r._versions,a={},l={};return i.forEach(function(u){D(a,u._cfg.storesSource),l=u._cfg.dbschema={},u._parseStoresSpec(a,l)}),r._dbSchema=l,yi(r,[r._allTables,r,r.Transaction.prototype]),yr(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],d(l),l),r._storeNames=d(l),this},Er.prototype.upgrade=function(e){return this._cfg.contentUpgrade=le(this._cfg.contentUpgrade||mt,e),this},Er);function Er(){}function wi(e,r){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new we(fr,{addons:[],indexedDB:e,IDBKeyRange:r})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function Ei(e){return e&&typeof e.databases=="function"}function Ti(e){return ke(function(){return z.letThrough=!0,e()})}function Si(e){return!("from"in e)}var Ft=function(e,r){if(!this){var i=new Ft;return e&&"d"in e&&D(i,e),i}D(this,arguments.length?{d:1,from:e,to:1<arguments.length?r:e}:{d:0})};function qn(e,r,i){var a=vt(r,i);if(!isNaN(a)){if(0<a)throw RangeError();if(Si(e))return D(e,{from:r,to:i,d:1});var l=e.l,a=e.r;if(vt(i,e.from)<0)return l?qn(l,r,i):e.l={from:r,to:i,d:1,l:null,r:null},Us(e);if(0<vt(r,e.to))return a?qn(a,r,i):e.r={from:r,to:i,d:1,l:null,r:null},Us(e);vt(r,e.from)<0&&(e.from=r,e.l=null,e.d=a?a.d+1:1),0<vt(i,e.to)&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1),i=!e.r,l&&!e.l&&Fn(e,l),a&&i&&Fn(e,a)}}function Fn(e,r){Si(r)||function i(a,y){var u=y.from,h=y.to,p=y.l,y=y.r;qn(a,u,h),p&&i(a,p),y&&i(a,y)}(e,r)}function Ys(e,r){var i=Tr(r),a=i.next();if(a.done)return!1;for(var l=a.value,u=Tr(e),h=u.next(l.from),p=h.value;!a.done&&!h.done;){if(vt(p.from,l.to)<=0&&0<=vt(p.to,l.from))return!0;vt(l.from,p.from)<0?l=(a=i.next(p.from)).value:p=(h=u.next(l.from)).value}return!1}function Tr(e){var r=Si(e)?null:{s:0,n:e};return{next:function(i){for(var a=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,a)for(;r.n.l&&vt(i,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!a||vt(i,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function Us(e){var r,i,a=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),l=1<a?"r":a<-1?"l":"";l&&(r=l=="r"?"l":"r",i=s({},e),a=e[l],e.from=a.from,e.to=a.to,e[l]=a[l],i[l]=a[r],(e[r]=i).d=zs(i)),e.d=zs(e)}function zs(i){var r=i.r,i=i.l;return(r?i?Math.max(r.d,i.d):r.d:i?i.d:0)+1}function Sr(e,r){return d(r).forEach(function(i){e[i]?Fn(e[i],r[i]):e[i]=function a(l){var u,h,p={};for(u in l)L(l,u)&&(h=l[u],p[u]=!h||typeof h!="object"||nt.has(h.constructor)?h:a(h));return p}(r[i])}),e}function Ai(e,r){return e.all||r.all||Object.keys(e).some(function(i){return r[i]&&Ys(r[i],e[i])})}X(Ft.prototype,((ie={add:function(e){return Fn(this,e),this},addKey:function(e){return qn(this,e,e),this},addKeys:function(e){var r=this;return e.forEach(function(i){return qn(r,i,i)}),this},hasKey:function(e){var r=Tr(this).next(e).value;return r&&vt(r.from,e)<=0&&0<=vt(r.to,e)}})[R]=function(){return Tr(this)},ie));var Ge={},Oi={},Ci=!1;function Ar(e){Sr(Oi,e),Ci||(Ci=!0,setTimeout(function(){Ci=!1,Di(Oi,!(Oi={}))},0))}function Di(e,r){r===void 0&&(r=!1);var i=new Set;if(e.all)for(var a=0,l=Object.values(Ge);a<l.length;a++)Xs(h=l[a],e,i,r);else for(var u in e){var h,p=/^idb\:\/\/(.*)\/(.*)\//.exec(u);p&&(u=p[1],p=p[2],(h=Ge["idb://".concat(u,"/").concat(p)])&&Xs(h,e,i,r))}i.forEach(function(y){return y()})}function Xs(e,r,i,a){for(var l=[],u=0,h=Object.entries(e.queries.query);u<h.length;u++){for(var p=h[u],y=p[0],g=[],E=0,m=p[1];E<m.length;E++){var T=m[E];Ai(r,T.obsSet)?T.subscribers.forEach(function(_){return i.add(_)}):a&&g.push(T)}a&&l.push([y,g])}if(a)for(var v=0,b=l;v<b.length;v++){var S=b[v],y=S[0],g=S[1];e.queries.query[y]=g}}function cc(e){var r=e._state,i=e._deps.indexedDB;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?kt(r.dbOpenError):e});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var a=r.openCanceller,l=Math.round(10*e.verno),u=!1;function h(){if(r.openCanceller!==a)throw new U.DatabaseClosed("db.open() was cancelled")}function p(){return new F(function(T,v){if(h(),!i)throw new U.MissingAPI;var b=e.name,S=r.autoSchema||!l?i.open(b):i.open(b,l);if(!S)throw new U.MissingAPI;S.onerror=de(v),S.onblocked=xt(e._fireOnBlocked),S.onupgradeneeded=xt(function(_){var A;E=S.transaction,r.autoSchema&&!e._options.allowEmptyDB?(S.onerror=Kn,E.abort(),S.result.close(),(A=i.deleteDatabase(b)).onsuccess=A.onerror=xt(function(){v(new U.NoSuchDatabase("Database ".concat(b," doesnt exist")))})):(E.onerror=de(v),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,m=_<1,e.idbdb=S.result,u&&oc(e,E),sc(e,_/10,E,v))},v),S.onsuccess=xt(function(){E=null;var _,A,O,C,$,P=e.idbdb=S.result,B=Et(P.objectStoreNames);if(0<B.length)try{var I=P.transaction((C=B).length===1?C[0]:C,"readonly");if(r.autoSchema)A=P,O=I,(_=e).verno=A.version/10,O=_._dbSchema=br(0,A,O),_._storeNames=Et(A.objectStoreNames,0),yr(_,[_._allTables],d(O),O);else if(wr(e,e._dbSchema,I),(($=_i(br(0,($=e).idbdb,I),$._dbSchema)).add.length||$.change.some(function(K){return K.add.length||K.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),P.close(),l=P.version+1,u=!0,T(p());vr(e,I)}catch{}dn.push(e),P.onversionchange=xt(function(K){r.vcFired=!0,e.on("versionchange").fire(K)}),P.onclose=xt(function(K){e.on("close").fire(K)}),m&&($=e._deps,I=b,P=$.indexedDB,$=$.IDBKeyRange,Ei(P)||I===fr||wi(P,$).put({name:I}).catch(mt)),T()},v)}).catch(function(T){switch(T==null?void 0:T.name){case"UnknownError":if(0<r.PR1398_maxLoop)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<l)return l=0,p()}return F.reject(T)})}var y,g=r.dbReadyResolve,E=null,m=!1;return F.race([a,(typeof navigator>"u"?F.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(T){function v(){return indexedDB.databases().finally(T)}y=setInterval(v,100),v()}).finally(function(){return clearInterval(y)}):Promise.resolve()).then(p)]).then(function(){return h(),r.onReadyBeingFired=[],F.resolve(Ti(function(){return e.on.ready.fire(e.vip)})).then(function T(){if(0<r.onReadyBeingFired.length){var v=r.onReadyBeingFired.reduce(le,mt);return r.onReadyBeingFired=[],F.resolve(Ti(function(){return v(e.vip)})).then(T)}})}).finally(function(){r.openCanceller===a&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(T){r.dbOpenError=T;try{E&&E.abort()}catch{}return a===r.openCanceller&&e._close(),kt(T)}).finally(function(){r.openComplete=!0,g()}).then(function(){var T;return m&&(T={},e.tables.forEach(function(v){v.schema.indexes.forEach(function(b){b.name&&(T["idb://".concat(e.name,"/").concat(v.name,"/").concat(b.name)]=new Ft(-1/0,[[[]]]))}),T["idb://".concat(e.name,"/").concat(v.name,"/")]=T["idb://".concat(e.name,"/").concat(v.name,"/:dels")]=new Ft(-1/0,[[[]]])}),Me(Hn).fire(T),Di(T,!0)),e})}function $i(e){function r(u){return e.next(u)}var i=l(r),a=l(function(u){return e.throw(u)});function l(u){return function(y){var p=u(y),y=p.value;return p.done?y:y&&typeof y.then=="function"?y.then(i,a):w(y)?Promise.all(y).then(i,a):i(y)}}return l(r)()}function Or(e,r,i){for(var a=w(e)?e.slice():[e],l=0;l<i;++l)a.push(r);return a}var lc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(r){var i=e.table(r),a=i.schema,l={},u=[];function h(m,T,v){var b=Vn(m),S=l[b]=l[b]||[],_=m==null?0:typeof m=="string"?1:m.length,A=0<T,A=s(s({},v),{name:A?"".concat(b,"(virtual-from:").concat(v.name,")"):v.name,lowLevelIndex:v,isVirtual:A,keyTail:T,keyLength:_,extractKey:vi(m),unique:!A&&v.unique});return S.push(A),A.isPrimaryKey||u.push(A),1<_&&h(_===2?m[0]:m.slice(0,_-1),T+1,v),S.sort(function(O,C){return O.keyTail-C.keyTail}),A}r=h(a.primaryKey.keyPath,0,a.primaryKey),l[":id"]=[r];for(var p=0,y=a.indexes;p<y.length;p++){var g=y[p];h(g.keyPath,0,g)}function E(m){var T,v=m.query.index;return v.isVirtual?s(s({},m),{query:{index:v.lowLevelIndex,range:(T=m.query.range,v=v.keyTail,{type:T.type===1?2:T.type,lower:Or(T.lower,T.lowerOpen?e.MAX_KEY:e.MIN_KEY,v),lowerOpen:!0,upper:Or(T.upper,T.upperOpen?e.MIN_KEY:e.MAX_KEY,v),upperOpen:!0})}}):m}return s(s({},i),{schema:s(s({},a),{primaryKey:r,indexes:u,getIndexByKeyPath:function(m){return(m=l[Vn(m)])&&m[0]}}),count:function(m){return i.count(E(m))},query:function(m){return i.query(E(m))},openCursor:function(m){var T=m.query.index,v=T.keyTail,b=T.isVirtual,S=T.keyLength;return b?i.openCursor(E(m)).then(function(A){return A&&_(A)}):i.openCursor(m);function _(A){return Object.create(A,{continue:{value:function(O){O!=null?A.continue(Or(O,m.reverse?e.MAX_KEY:e.MIN_KEY,v)):m.unique?A.continue(A.key.slice(0,S).concat(m.reverse?e.MIN_KEY:e.MAX_KEY,v)):A.continue()}},continuePrimaryKey:{value:function(O,C){A.continuePrimaryKey(Or(O,e.MAX_KEY,v),C)}},primaryKey:{get:function(){return A.primaryKey}},key:{get:function(){var O=A.key;return S===1?O[0]:O.slice(0,S)}},value:{get:function(){return A.value}}})}}})}})}};function xi(e,r,i,a){return i=i||{},a=a||"",d(e).forEach(function(l){var u,h,p;L(r,l)?(u=e[l],h=r[l],typeof u=="object"&&typeof h=="object"&&u&&h?(p=q(u))!==q(h)?i[a+l]=r[l]:p==="Object"?xi(u,h,i,a+l+"."):u!==h&&(i[a+l]=r[l]):u!==h&&(i[a+l]=r[l])):i[a+l]=void 0}),d(r).forEach(function(l){L(e,l)||(i[a+l]=r[l])}),i}function Ni(e,r){return r.type==="delete"?r.keys:r.keys||r.values.map(e.extractKey)}var uc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(r){var i=e.table(r),a=i.schema.primaryKey;return s(s({},i),{mutate:function(l){var u=z.trans,h=u.table(r).hook,p=h.deleting,y=h.creating,g=h.updating;switch(l.type){case"add":if(y.fire===mt)break;return u._promise("readwrite",function(){return E(l)},!0);case"put":if(y.fire===mt&&g.fire===mt)break;return u._promise("readwrite",function(){return E(l)},!0);case"delete":if(p.fire===mt)break;return u._promise("readwrite",function(){return E(l)},!0);case"deleteRange":if(p.fire===mt)break;return u._promise("readwrite",function(){return function m(T,v,b){return i.query({trans:T,values:!1,query:{index:a,range:v},limit:b}).then(function(S){var _=S.result;return E({type:"delete",keys:_,trans:T}).then(function(A){return 0<A.numFailures?Promise.reject(A.failures[0]):_.length<b?{failures:[],numFailures:0,lastResult:void 0}:m(T,s(s({},v),{lower:_[_.length-1],lowerOpen:!0}),b)})})}(l.trans,l.range,1e4)},!0)}return i.mutate(l);function E(m){var T,v,b,S=z.trans,_=m.keys||Ni(a,m);if(!_)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?s(s({},m),{keys:_}):s({},m)).type!=="delete"&&(m.values=c([],m.values)),m.keys&&(m.keys=c([],m.keys)),T=i,b=_,((v=m).type==="add"?Promise.resolve([]):T.getMany({trans:v.trans,keys:b,cache:"immutable"})).then(function(A){var O=_.map(function(C,$){var P,B,I,K=A[$],V={onerror:null,onsuccess:null};return m.type==="delete"?p.fire.call(V,C,K,S):m.type==="add"||K===void 0?(P=y.fire.call(V,C,m.values[$],S),C==null&&P!=null&&(m.keys[$]=C=P,a.outbound||lt(m.values[$],a.keyPath,C))):(P=xi(K,m.values[$]),(B=g.fire.call(V,P,C,K,S))&&(I=m.values[$],Object.keys(B).forEach(function(k){L(I,k)?I[k]=B[k]:lt(I,k,B[k])}))),V});return i.mutate(m).then(function(C){for(var $=C.failures,P=C.results,B=C.numFailures,C=C.lastResult,I=0;I<_.length;++I){var K=(P||_)[I],V=O[I];K==null?V.onerror&&V.onerror($[I]):V.onsuccess&&V.onsuccess(m.type==="put"&&A[I]?m.values[I]:K)}return{failures:$,results:P,numFailures:B,lastResult:C}}).catch(function(C){return O.forEach(function($){return $.onerror&&$.onerror(C)}),Promise.reject(C)})})}}})}})}};function Gs(e,r,i){try{if(!r||r.keys.length<e.length)return null;for(var a=[],l=0,u=0;l<r.keys.length&&u<e.length;++l)vt(r.keys[l],e[u])===0&&(a.push(i?St(r.values[l]):r.values[l]),++u);return a.length===e.length?a:null}catch{return null}}var hc={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var i=e.table(r);return s(s({},i),{getMany:function(a){if(!a.cache)return i.getMany(a);var l=Gs(a.keys,a.trans._cache,a.cache==="clone");return l?F.resolve(l):i.getMany(a).then(function(u){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?St(u):u},u})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),i.mutate(a)}})}}}};function Qs(e,r){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function Js(e,r){switch(e){case"query":return r.values&&!r.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var fc={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,i=new Ft(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(a,l,u){if(z.subscr&&l!=="readonly")throw new U.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(z.querier));return e.transaction(a,l,u)},table:function(a){var l=e.table(a),u=l.schema,h=u.primaryKey,m=u.indexes,p=h.extractKey,y=h.outbound,g=h.autoIncrement&&m.filter(function(v){return v.compound&&v.keyPath.includes(h.keyPath)}),E=s(s({},l),{mutate:function(v){function b(k){return k="idb://".concat(r,"/").concat(a,"/").concat(k),C[k]||(C[k]=new Ft)}var S,_,A,O=v.trans,C=v.mutatedParts||(v.mutatedParts={}),$=b(""),P=b(":dels"),B=v.type,V=v.type==="deleteRange"?[v.range]:v.type==="delete"?[v.keys]:v.values.length<50?[Ni(h,v).filter(function(k){return k}),v.values]:[],I=V[0],K=V[1],V=v.trans._cache;return w(I)?($.addKeys(I),(V=B==="delete"||I.length===K.length?Gs(I,V):null)||P.addKeys(I),(V||K)&&(S=b,_=V,A=K,u.indexes.forEach(function(k){var st=S(k.name||"");function at(ut){return ut!=null?k.extractKey(ut):null}function ft(ut){return k.multiEntry&&w(ut)?ut.forEach(function(ue){return st.addKey(ue)}):st.addKey(ut)}(_||A).forEach(function(ut,Ht){var ht=_&&at(_[Ht]),Ht=A&&at(A[Ht]);vt(ht,Ht)!==0&&(ht!=null&&ft(ht),Ht!=null&&ft(Ht))})}))):I?(K={from:I.lower,to:I.upper},P.add(K),$.add(K)):($.add(i),P.add(i),u.indexes.forEach(function(k){return b(k.name).add(i)})),l.mutate(v).then(function(k){return!I||v.type!=="add"&&v.type!=="put"||($.addKeys(k.results),g&&g.forEach(function(st){var at=v.values.map(function(ut){return st.extractKey(ut)}),ft=st.keyPath.findIndex(function(ut){return ut===h.keyPath});k.results.forEach(function(ut){return at[ft]=ut}),b(st.name).addKeys(at)})),O.mutatedParts=Sr(O.mutatedParts||{},C),k})}}),m=function(b){var S=b.query,b=S.index,S=S.range;return[b,new Ft((b=S.lower)!==null&&b!==void 0?b:e.MIN_KEY,(S=S.upper)!==null&&S!==void 0?S:e.MAX_KEY)]},T={get:function(v){return[h,new Ft(v.key)]},getMany:function(v){return[h,new Ft().addKeys(v.keys)]},count:m,query:m,openCursor:m};return d(T).forEach(function(v){E[v]=function(b){var S=z.subscr,_=!!S,A=Qs(z,l)&&Js(v,b)?b.obsSet={}:S;if(_){var O=function(K){return K="idb://".concat(r,"/").concat(a,"/").concat(K),A[K]||(A[K]=new Ft)},C=O(""),$=O(":dels"),S=T[v](b),_=S[0],S=S[1];if((v==="query"&&_.isPrimaryKey&&!b.values?$:O(_.name||"")).add(S),!_.isPrimaryKey){if(v!=="count"){var P=v==="query"&&y&&b.values&&l.query(s(s({},b),{values:!1}));return l[v].apply(this,arguments).then(function(K){if(v==="query"){if(y&&b.values)return P.then(function(at){return at=at.result,C.addKeys(at),K});var V=b.values?K.result.map(p):K.result;(b.values?C:$).addKeys(V)}else if(v==="openCursor"){var k=K,st=b.values;return k&&Object.create(k,{key:{get:function(){return $.addKey(k.primaryKey),k.key}},primaryKey:{get:function(){var at=k.primaryKey;return $.addKey(at),at}},value:{get:function(){return st&&C.addKey(k.primaryKey),k.value}}})}return K})}$.add(i)}}return l[v].apply(this,arguments)}}),E}})}};function Zs(e,r,i){if(i.numFailures===0)return r;if(r.type==="deleteRange")return null;var a=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return i.numFailures===a?null:(r=s({},r),w(r.keys)&&(r.keys=r.keys.filter(function(l,u){return!(u in i.failures)})),"values"in r&&w(r.values)&&(r.values=r.values.filter(function(l,u){return!(u in i.failures)})),r)}function ki(e,r){return i=e,((a=r).lower===void 0||(a.lowerOpen?0<vt(i,a.lower):0<=vt(i,a.lower)))&&(e=e,(r=r).upper===void 0||(r.upperOpen?vt(e,r.upper)<0:vt(e,r.upper)<=0));var i,a}function to(e,r,T,a,l,u){if(!T||T.length===0)return e;var h=r.query.index,p=h.multiEntry,y=r.query.range,g=a.schema.primaryKey.extractKey,E=h.extractKey,m=(h.lowLevelIndex||h).extractKey,T=T.reduce(function(v,b){var S=v,_=[];if(b.type==="add"||b.type==="put")for(var A=new Ft,O=b.values.length-1;0<=O;--O){var C,$=b.values[O],P=g($);A.hasKey(P)||(C=E($),(p&&w(C)?C.some(function(V){return ki(V,y)}):ki(C,y))&&(A.addKey(P),_.push($)))}switch(b.type){case"add":S=v.concat(r.values?_:_.map(function(k){return g(k)}));break;case"put":var B=new Ft().addKeys(b.values.map(function(k){return g(k)})),S=v.filter(function(k){return!B.hasKey(r.values?g(k):k)}).concat(r.values?_:_.map(function(k){return g(k)}));break;case"delete":var I=new Ft().addKeys(b.keys);S=v.filter(function(k){return!I.hasKey(r.values?g(k):k)});break;case"deleteRange":var K=b.range;S=v.filter(function(k){return!ki(g(k),K)})}return S},e);return T===e?e:(T.sort(function(v,b){return vt(m(v),m(b))||vt(g(v),g(b))}),r.limit&&r.limit<1/0&&(T.length>r.limit?T.length=r.limit:e.length===r.limit&&T.length<r.limit&&(l.dirty=!0)),u?Object.freeze(T):T)}function eo(e,r){return vt(e.lower,r.lower)===0&&vt(e.upper,r.upper)===0&&!!e.lowerOpen==!!r.lowerOpen&&!!e.upperOpen==!!r.upperOpen}function dc(e,r){return function(i,a,l,u){if(i===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=vt(i,a))===0){if(l&&u)return 0;if(l)return 1;if(u)return-1}return a}(e.lower,r.lower,e.lowerOpen,r.lowerOpen)<=0&&0<=function(i,a,l,u){if(i===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=vt(i,a))===0){if(l&&u)return 0;if(l)return-1;if(u)return 1}return a}(e.upper,r.upper,e.upperOpen,r.upperOpen)}function pc(e,r,i,a){e.subscribers.add(i),a.addEventListener("abort",function(){var l,u;e.subscribers.delete(i),e.subscribers.size===0&&(l=e,u=r,setTimeout(function(){l.subscribers.size===0&&H(u,l)},3e3))})}var mc={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return s(s({},e),{transaction:function(i,a,l){var u,h,p=e.transaction(i,a,l);return a==="readwrite"&&(h=(u=new AbortController).signal,l=function(y){return function(){if(u.abort(),a==="readwrite"){for(var g=new Set,E=0,m=i;E<m.length;E++){var T=m[E],v=Ge["idb://".concat(r,"/").concat(T)];if(v){var b=e.table(T),S=v.optimisticOps.filter(function(st){return st.trans===p});if(p._explicit&&y&&p.mutatedParts)for(var _=0,A=Object.values(v.queries.query);_<A.length;_++)for(var O=0,C=(B=A[_]).slice();O<C.length;O++)Ai((I=C[O]).obsSet,p.mutatedParts)&&(H(B,I),I.subscribers.forEach(function(st){return g.add(st)}));else if(0<S.length){v.optimisticOps=v.optimisticOps.filter(function(st){return st.trans!==p});for(var $=0,P=Object.values(v.queries.query);$<P.length;$++)for(var B,I,K,V=0,k=(B=P[$]).slice();V<k.length;V++)(I=k[V]).res!=null&&p.mutatedParts&&(y&&!I.dirty?(K=Object.isFrozen(I.res),K=to(I.res,I.req,S,b,I,K),I.dirty?(H(B,I),I.subscribers.forEach(function(st){return g.add(st)})):K!==I.res&&(I.res=K,I.promise=F.resolve({result:K}))):(I.dirty&&H(B,I),I.subscribers.forEach(function(st){return g.add(st)})))}}}g.forEach(function(st){return st()})}}},p.addEventListener("abort",l(!1),{signal:h}),p.addEventListener("error",l(!1),{signal:h}),p.addEventListener("complete",l(!0),{signal:h})),p},table:function(i){var a=e.table(i),l=a.schema.primaryKey;return s(s({},a),{mutate:function(u){var h=z.trans;if(l.outbound||h.db._options.cache==="disabled"||h.explicit)return a.mutate(u);var p=Ge["idb://".concat(r,"/").concat(i)];return p?(h=a.mutate(u),u.type!=="add"&&u.type!=="put"||!(50<=u.values.length||Ni(l,u).some(function(y){return y==null}))?(p.optimisticOps.push(u),u.mutatedParts&&Ar(u.mutatedParts),h.then(function(y){0<y.numFailures&&(H(p.optimisticOps,u),(y=Zs(0,u,y))&&p.optimisticOps.push(y),u.mutatedParts&&Ar(u.mutatedParts))}),h.catch(function(){H(p.optimisticOps,u),u.mutatedParts&&Ar(u.mutatedParts)})):h.then(function(y){var g=Zs(0,s(s({},u),{values:u.values.map(function(v,m){var T,v=(T=l.keyPath)!==null&&T!==void 0&&T.includes(".")?St(v):s({},v);return lt(v,l.keyPath,y.results[m]),v})}),y);p.optimisticOps.push(g),queueMicrotask(function(){return u.mutatedParts&&Ar(u.mutatedParts)})}),h):a.mutate(u)},query:function(u){if(!Qs(z,a)||!Js("query",u))return a.query(u);var h=((g=z.trans)===null||g===void 0?void 0:g.db._options.cache)==="immutable",m=z,p=m.requery,y=m.signal,g=function(b,S,_,A){var O=Ge["idb://".concat(b,"/").concat(S)];if(!O)return[];if(!(S=O.queries[_]))return[null,!1,O,null];var C=S[(A.query?A.query.index.name:null)||""];if(!C)return[null,!1,O,null];switch(_){case"query":var $=C.find(function(P){return P.req.limit===A.limit&&P.req.values===A.values&&eo(P.req.query.range,A.query.range)});return $?[$,!0,O,C]:[C.find(function(P){return("limit"in P.req?P.req.limit:1/0)>=A.limit&&(!A.values||P.req.values)&&dc(P.req.query.range,A.query.range)}),!1,O,C];case"count":return $=C.find(function(P){return eo(P.req.query.range,A.query.range)}),[$,!!$,O,C]}}(r,i,"query",u),E=g[0],m=g[1],T=g[2],v=g[3];return E&&m?E.obsSet=u.obsSet:(m=a.query(u).then(function(b){var S=b.result;if(E&&(E.res=S),h){for(var _=0,A=S.length;_<A;++_)Object.freeze(S[_]);Object.freeze(S)}else b.result=St(S);return b}).catch(function(b){return v&&E&&H(v,E),Promise.reject(b)}),E={obsSet:u.obsSet,promise:m,subscribers:new Set,type:"query",req:u,dirty:!1},v?v.push(E):(v=[E],(T=T||(Ge["idb://".concat(r,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=v)),pc(E,v,p,y),E.promise.then(function(b){return{result:to(b.result,u,T==null?void 0:T.optimisticOps,a,E,h)}})}})}})}};function Cr(e,r){return new Proxy(e,{get:function(i,a,l){return a==="db"?r:Reflect.get(i,a,l)}})}var we=(Lt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new U.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new U.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var r=this._versions,i=r.filter(function(a){return a._cfg.version===e})[0];return i||(i=new this.Version(e),r.push(i),r.sort(ic),i.stores({}),this._state.autoSchema=!1,i)},Lt.prototype._whenReady=function(e){var r=this;return this.idbdb&&(this._state.openComplete||z.letThrough||this._vip)?e():new F(function(i,a){if(r._state.openComplete)return a(new U.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return void a(new U.DatabaseClosed);r.open().catch(mt)}r._state.dbReadyPromise.then(i,a)}).then(e)},Lt.prototype.use=function(e){var r=e.stack,i=e.create,a=e.level,l=e.name;return l&&this.unuse({stack:r,name:l}),e=this._middlewares[r]||(this._middlewares[r]=[]),e.push({stack:r,create:i,level:a??10,name:l}),e.sort(function(u,h){return u.level-h.level}),this},Lt.prototype.unuse=function(e){var r=e.stack,i=e.name,a=e.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(l){return a?l.create!==a:!!i&&l.name!==i})),this},Lt.prototype.open=function(){var e=this;return Ue(Ne,function(){return cc(e)})},Lt.prototype._close=function(){var e=this._state,r=dn.indexOf(this);if(0<=r&&dn.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new F(function(i){e.dbReadyResolve=i}),e.openCanceller=new F(function(i,a){e.cancelOpen=a}))},Lt.prototype.close=function(i){var r=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new U.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new U.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},Lt.prototype.delete=function(e){var r=this;e===void 0&&(e={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new F(function(l,u){function h(){r.close(e);var p=r._deps.indexedDB.deleteDatabase(r.name);p.onsuccess=xt(function(){var y,g,E;y=r._deps,g=r.name,E=y.indexedDB,y=y.IDBKeyRange,Ei(E)||g===fr||wi(E,y).delete(g).catch(mt),l()}),p.onerror=de(u),p.onblocked=r._fireOnBlocked}if(i)throw new U.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(h):h()})},Lt.prototype.backendDB=function(){return this.idbdb},Lt.prototype.isOpen=function(){return this.idbdb!==null},Lt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Lt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Lt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Lt.prototype,"tables",{get:function(){var e=this;return d(this._allTables).map(function(r){return e._allTables[r]})},enumerable:!1,configurable:!0}),Lt.prototype.transaction=function(){var e=(function(r,i,a){var l=arguments.length;if(l<2)throw new U.InvalidArgument("Too few arguments");for(var u=new Array(l-1);--l;)u[l-1]=arguments[l];return a=u.pop(),[r,ct(u),a]}).apply(this,arguments);return this._transaction.apply(this,e)},Lt.prototype._transaction=function(e,r,i){var a=this,l=z.trans;l&&l.db===this&&e.indexOf("!")===-1||(l=null);var u,h,p=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(h=r.map(function(g){if(g=g instanceof a.Table?g.name:g,typeof g!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),e=="r"||e===li)u=li;else{if(e!="rw"&&e!=ui)throw new U.InvalidArgument("Invalid transaction mode: "+e);u=ui}if(l){if(l.mode===li&&u===ui){if(!p)throw new U.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");l=null}l&&h.forEach(function(g){if(l&&l.storeNames.indexOf(g)===-1){if(!p)throw new U.SubTransaction("Table "+g+" not included in parent transaction.");l=null}}),p&&l&&!l.active&&(l=null)}}catch(g){return l?l._promise(null,function(E,m){m(g)}):kt(g)}var y=(function g(E,m,T,v,b){return F.resolve().then(function(){var S=z.transless||z,_=E._createTransaction(m,T,E._dbSchema,v);if(_.explicit=!0,S={trans:_,transless:S},v)_.idbtrans=v.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,E._state.PR1398_maxLoop=3}catch(C){return C.name===Kt.InvalidState&&E.isOpen()&&0<--E._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),E.close({disableAutoOpen:!1}),E.open().then(function(){return g(E,m,T,null,b)})):kt(C)}var A,O=gt(b);return O&&fn(),S=F.follow(function(){var C;(A=b.call(_,_))&&(O?(C=Le.bind(null,null),A.then(C,C)):typeof A.next=="function"&&typeof A.throw=="function"&&(A=$i(A)))},S),(A&&typeof A.then=="function"?F.resolve(A).then(function(C){return _.active?C:kt(new U.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):S.then(function(){return A})).then(function(C){return v&&_._resolve(),_._completion.then(function(){return C})}).catch(function(C){return _._reject(C),kt(C)})})}).bind(null,this,u,h,l,i);return l?l._promise(u,y,"lock"):z.trans?Ue(z.transless,function(){return a._whenReady(y)}):this._whenReady(y)},Lt.prototype.table=function(e){if(!L(this._allTables,e))throw new U.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Lt);function Lt(e,r){var i=this;this._middlewares={},this.verno=0;var a=Lt.dependencies;this._options=r=s({addons:Lt.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},a=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l,u,h,p,y,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:mt,dbReadyPromise:null,cancelOpen:mt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};g.dbReadyPromise=new F(function(m){g.dbReadyResolve=m}),g.openCanceller=new F(function(m,T){g.cancelOpen=T}),this._state=g,this.name=e,this.on=Mn(this,"populate","blocked","versionchange","close",{ready:[le,mt]}),this.on.ready.subscribe=Tt(this.on.ready.subscribe,function(m){return function(T,v){Lt.vip(function(){var b,S=i._state;S.openComplete?(S.dbOpenError||F.resolve().then(T),v&&m(T)):S.onReadyBeingFired?(S.onReadyBeingFired.push(T),v&&m(T)):(m(T),b=i,v||m(function _(){b.on.ready.unsubscribe(T),b.on.ready.unsubscribe(_)}))})}}),this.Collection=(l=this,Rn(Qa.prototype,function(A,_){this.db=l;var v=ks,b=null;if(_)try{v=_()}catch(O){b=O}var S=A._ctx,_=S.table,A=_.hook.reading.fire;this._ctx={table:_,index:S.index,isPrimKey:!S.index||_.schema.primKey.keyPath&&S.index===_.schema.primKey.name,range:v,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:b,or:S.or,valueMapper:A!==Zt?A:null}})),this.Table=(u=this,Rn(Ms.prototype,function(m,T,v){this.db=u,this._tx=v,this.name=m,this.schema=T,this.hook=u._allTables[m]?u._allTables[m].hook:Mn(null,{creating:[nr,mt],reading:[Zr,Zt],updating:[ti,mt],deleting:[rr,mt]})})),this.Transaction=(h=this,Rn(tc.prototype,function(m,T,v,b,S){var _=this;this.db=h,this.mode=m,this.storeNames=T,this.schema=v,this.chromeTransactionDurability=b,this.idbtrans=null,this.on=Mn(this,"complete","error","abort"),this.parent=S||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F(function(A,O){_._resolve=A,_._reject=O}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(A){var O=_.active;return _.active=!1,_.on.error.fire(A),_.parent?_.parent._reject(A):O&&_.idbtrans&&_.idbtrans.abort(),kt(A)})})),this.Version=(p=this,Rn(ac.prototype,function(m){this.db=p,this._cfg={version:m,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(y=this,Rn(Bs.prototype,function(m,T,v){if(this.db=y,this._ctx={table:m,index:T===":id"?null:T,or:v},this._cmp=this._ascending=vt,this._descending=function(b,S){return vt(S,b)},this._max=function(b,S){return 0<vt(b,S)?b:S},this._min=function(b,S){return vt(b,S)<0?b:S},this._IDBKeyRange=y._deps.IDBKeyRange,!this._IDBKeyRange)throw new U.MissingAPI})),this.on("versionchange",function(m){0<m.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(m){!m.newVersion||m.newVersion<m.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(m.oldVersion/10))}),this._maxKey=Bn(r.IDBKeyRange),this._createTransaction=function(m,T,v,b){return new i.Transaction(m,T,v,i._options.chromeTransactionDurability,b)},this._fireOnBlocked=function(m){i.on("blocked").fire(m),dn.filter(function(T){return T.name===i.name&&T!==i&&!T._state.vcFired}).map(function(T){return T.on("versionchange").fire(m)})},this.use(hc),this.use(mc),this.use(fc),this.use(lc),this.use(uc);var E=new Proxy(this,{get:function(m,T,v){if(T==="_vip")return!0;if(T==="table")return function(S){return Cr(i.table(S),E)};var b=Reflect.get(m,T,v);return b instanceof Ms?Cr(b,E):T==="tables"?b.map(function(S){return Cr(S,E)}):T==="_createTransaction"?function(){return Cr(b.apply(this,arguments),E)}:b}});this.vip=E,a.forEach(function(m){return m(i)})}var Dr,ie=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",gc=(Li.prototype.subscribe=function(e,r,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:r,complete:i})},Li.prototype[ie]=function(){return this},Li);function Li(e){this._subscribe=e}try{Dr={indexedDB:f.indexedDB||f.mozIndexedDB||f.webkitIndexedDB||f.msIndexedDB,IDBKeyRange:f.IDBKeyRange||f.webkitIDBKeyRange}}catch{Dr={indexedDB:null,IDBKeyRange:null}}function no(e){var r,i=!1,a=new gc(function(l){var u=gt(e),h,p=!1,y={},g={},E={get closed(){return p},unsubscribe:function(){p||(p=!0,h&&h.abort(),m&&Me.storagemutated.unsubscribe(v))}};l.start&&l.start(E);var m=!1,T=function(){return ci(b)},v=function(S){Sr(y,S),Ai(g,y)&&T()},b=function(){var S,_,A;!p&&Dr.indexedDB&&(y={},S={},h&&h.abort(),h=new AbortController,A=function(O){var C=un();try{u&&fn();var $=ke(e,O);return $=u?$.finally(Le):$}finally{C&&hn()}}(_={subscr:S,signal:h.signal,requery:T,querier:e,trans:null}),Promise.resolve(A).then(function(O){i=!0,r=O,p||_.signal.aborted||(y={},function(C){for(var $ in C)if(L(C,$))return;return 1}(g=S)||m||(Me(Hn,v),m=!0),ci(function(){return!p&&l.next&&l.next(O)}))},function(O){i=!1,["DatabaseClosedError","AbortError"].includes(O==null?void 0:O.name)||p||ci(function(){p||l.error&&l.error(O)})}))};return setTimeout(T,0),E});return a.hasValue=function(){return i},a.getValue=function(){return r},a}var Qe=we;function Pi(e){var r=Re;try{Re=!0,Me.storagemutated.fire(e),Di(e,!0)}finally{Re=r}}X(Qe,s(s({},jt),{delete:function(e){return new Qe(e,{addons:[]}).delete()},exists:function(e){return new Qe(e,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=Qe.dependencies,i=r.indexedDB,r=r.IDBKeyRange,(Ei(i)?Promise.resolve(i.databases()).then(function(a){return a.map(function(l){return l.name}).filter(function(l){return l!==fr})}):wi(i,r).toCollection().primaryKeys()).then(e)}catch{return kt(new U.MissingAPI)}var r,i},defineClass:function(){return function(e){D(this,e)}},ignoreTransaction:function(e){return z.trans?Ue(z.transless,e):e()},vip:Ti,async:function(e){return function(){try{var r=$i(e.apply(this,arguments));return r&&typeof r.then=="function"?r:F.resolve(r)}catch(i){return kt(i)}}},spawn:function(e,r,i){try{var a=$i(e.apply(i,r||[]));return a&&typeof a.then=="function"?a:F.resolve(a)}catch(l){return kt(l)}},currentTransaction:{get:function(){return z.trans||null}},waitFor:function(e,r){return r=F.resolve(typeof e=="function"?Qe.ignoreTransaction(e):e).timeout(r||6e4),z.trans?z.trans.waitFor(r):r},Promise:F,debug:{get:function(){return qt},set:function(e){Pn(e)}},derive:et,extend:D,props:X,override:Tt,Events:Mn,on:Me,liveQuery:no,extendObservabilitySet:Sr,getByKeyPath:rt,setByKeyPath:lt,delByKeyPath:function(e,r){typeof r=="string"?lt(e,r,void 0):"length"in r&&[].map.call(r,function(i){lt(e,i,void 0)})},shallowClone:$t,deepClone:St,getObjectDiff:xi,cmp:vt,asap:dt,minKey:-1/0,addons:[],connections:dn,errnames:Kt,dependencies:Dr,cache:Ge,semVer:"4.0.8",version:"4.0.8".split(".").map(function(e){return parseInt(e)}).reduce(function(e,r,i){return e+r/Math.pow(10,2*i)})})),Qe.maxKey=Bn(Qe.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Me(Hn,function(e){Re||(e=new CustomEvent(pi,{detail:e}),Re=!0,dispatchEvent(e),Re=!1)}),addEventListener(pi,function(e){e=e.detail,Re||Pi(e)}));var gn,Re=!1,ro=function(){};return typeof BroadcastChannel<"u"&&((ro=function(){(gn=new BroadcastChannel(pi)).onmessage=function(e){return e.data&&Pi(e.data)}})(),typeof gn.unref=="function"&&gn.unref(),Me(Hn,function(e){Re||gn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!we.disableBfCache&&e.persisted){qt&&console.debug("Dexie: handling persisted pagehide"),gn!=null&&gn.close();for(var r=0,i=dn;r<i.length;r++)i[r].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!we.disableBfCache&&e.persisted&&(qt&&console.debug("Dexie: handling persisted pageshow"),ro(),Pi({all:new Ft(-1/0,[[]])}))})),F.rejectionMapper=function(e,r){return!e||e instanceof _t||e instanceof TypeError||e instanceof SyntaxError||!e.name||!It[e.name]?e:(r=new It[e.name](r||e.message,e),"stack"in e&&ot(r,"stack",{get:function(){return this.inner.stack}}),r)},Pn(qt),s(we,Object.freeze({__proto__:null,Dexie:we,liveQuery:no,Entity:Ls,cmp:vt,PropModSymbol:be,PropModification:jn,replacePrefix:function(e,r){return new jn({replacePrefix:[e,r]})},add:function(e){return new jn({add:e})},remove:function(e){return new jn({remove:e})},default:we,RangeSet:Ft,mergeRanges:Fn,rangesOverlap:Ys}),{default:we}),we})})(Wa);var Ld=Wa.exports;const os=cs(Ld),Bo=Symbol.for("Dexie"),as=globalThis[Bo]||(globalThis[Bo]=os);if(os.semVer!==as.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${os.semVer} and ${as.semVer}`);const Pd="yuimarldb1";class Qi extends as{constructor(){super(Pd);j(this,"projects");j(this,"trees");this.version(1).stores({projects:"id",trees:"id"}),this.projects=this.table("projects"),this.trees=this.table("trees")}}class Id{constructor(t,n){j(this,"id");j(this,"showDone");this.id=t,this.showDone=n}}class Md{constructor(t,n,s){j(this,"id");j(this,"open");j(this,"color");this.id=t,this.open=n,this.color=s}}class Rd{constructor(){j(this,"id","ganttframe");j(this,"width",0);j(this,"height",0);j(this,"columnHeader",new wc(this));j(this,"columnBody",new Ec(this));j(this,"columnScroll",new Tc(this));j(this,"calendarHeader",new Ac(this));j(this,"calendarBody",new Oc(this));j(this,"calendarScroll",new Cc(this));j(this,"ticketModal",new Nd);j(this,"ganttRow",new kd);j(this,"sch",new Dc(this));j(this,"scv",new $c(this));j(this,"colW",0);j(this,"calendarLeft",0);j(this,"calendarStart",Gt());j(this,"calendarEnd",Gt());j(this,"calendarTotalWidth",0);j(this,"ticketsTotalHeight",0);j(this,"ticketsFrameHeight",0);j(this,"schThreshold",0);j(this,"posX",0);j(this,"cols",[]);j(this,"holidays",[]);j(this,"tickets",[]);j(this,"treeList",[]);j(this,"projectId",null);j(this,"showDone",!1);j(this,"_idb");this._idb=new Qi;const t=document.querySelector("#projectId"),n=document.querySelector("#startdate"),s=document.querySelector("#enddate");this.projectId=(t==null?void 0:t.value)??null,this.calendarStart=Gt(`${(n==null?void 0:n.value)??""}`),this.calendarEnd=Gt(`${(s==null?void 0:s.value)??""}`);const c=document.querySelector("#holidays");c!=null&&c.value&&(this.holidays=c.value.split(",").map(d=>Gt(d)).filter(d=>d.isValid()));const f=document.querySelector("#tickets");f!=null&&f.value&&(this.tickets=JSON.parse(f.value)),this.cols=[{name:"ID",width:54},{name:"チケット名",width:320},{name:"開始日",width:67},{name:"終了日",width:67},{name:"進捗",width:36}],this.build(),this.handler()}async readProject(){try{if(!this.projectId)return;this._idb||(this._idb=new Qi);let t=await this._idb.projects.get(this.projectId);if(t){this.showDone=t.showDone;const n=document.querySelector("#showdone");n&&(n.checked=this.showDone)}}catch(t){throw Error(`${t}`)}}async readTreeList(){try{this.treeList=[],this._idb||(this._idb=new Qi),await this._idb.trees.each(t=>{this.setTreeOpen(t.id,t.open,this.tickets),this.treeList.push(t)})}catch(t){throw Error(`${t}`)}}setTreeOpen(t,n,s){for(const c of s){if(c.id===t)return c.open=n,!0;if(this.setTreeOpen(t,n,c.children))return!0}return!1}build(){const t=document.querySelector(`#${this.id}`);if(!t){console.error("Failed to get #ganttframe!");return}this.width=t.offsetWidth,this.height=t.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+Jt;const n=document.createDocumentFragment();this.columnBody.build(n),this.columnHeader.build(n),this.columnScroll.build(n),this.calendarBody.build(n),this.calendarHeader.build(n),this.calendarScroll.build(n);const s=this.calendarEnd.diff(this.calendarStart,"day");this.calendarTotalWidth=(s+1)*Xt,t.append(n)}handler(){this.columnBody.handler(),this.calendarScroll.handler(),this.sch.handler(),this.scv.handler(),this.ticketModal.handler()}resize(){const t=document.querySelector("#flexbox");if(!t){console.error("Failed to get #flexbox!");return}const n=document.querySelector("#ganttbase");if(!n){console.error("Failed to get #ganttbase!");return}n.style.width=`${t.offsetWidth-W}px`;const s=document.querySelector(`#${this.id}`);if(!s){console.error("Failed to get #ganttframe!");return}this.width=s.offsetWidth,this.height=s.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+Jt,this.sch.pos=0,this.calendarScroll.pos=0,this.calendarBody.resize(),this.calendarHeader.resize(),this.calendarScroll.resize(),this.scrollH(0)}draw(){this.columnBody.draw(),this.calendarHeader.draw(),this.calendarBody.draw(),this.calendarScroll.draw(),this.sch.draw(),this.scv.draw()}scrollH(t){this.posX=t*this.schThreshold/(this.width-W-W),this.columnBody.scrollH(this.posX),this.columnHeader.scrollH(this.posX),this.columnScroll.scrollH(this.posX),this.calendarHeader.scrollH(this.posX),this.calendarBody.scrollH(this.posX),this.calendarScroll.scrollH(this.posX)}scrollV(t){this.columnBody.scrollV(t),this.calendarBody.scrollV(t)}columnWidth(){let t=2;for(let n of this.cols)t+=n.width;return t}mouseDownCalScroll(t){this.calendarScroll.mouseDownCalScroll(t)}mouseMoveCalScroll(t){this.calendarScroll.mouseMoveCalScroll(t)}mouseUpCalScroll(){this.calendarScroll.mouseUpCalScroll()}mouseDownScrollH(t){this.sch.mouseDownScrollH(t)}mouseMoveScrollH(t){this.sch.mouseMoveScrollH(t)}mouseUpScrollH(){this.sch.mouseUpScrollH()}mouseDownScrollV(t){this.scv.mouseDownScrollV(t)}mouseMoveScrollV(t){this.scv.mouseMoveScrollV(t)}mouseUpScrollV(){this.scv.mouseUpScrollV()}async nodeOpenClose(t,n){var s;try{let c=new Md(t,n,"");await((s=this._idb)==null?void 0:s.trees.put(c)),await this.readTreeList()}catch(c){throw Error(`${c}`)}}async setShowDone(t){var n;this.showDone=t;try{if(!this.projectId)return;let s=new Id(this.projectId,t);await((n=this._idb)==null?void 0:n.projects.put(s)),this.draw()}catch(s){throw Error(`${s}`)}}}const Tn=new Rd,jd=async()=>{await Tn.readProject(),await Tn.readTreeList(),Tn.draw()};jd().catch(o=>{console.error(o),window.alert(`エラーが発生しました。: ${o}`)});window.addEventListener("resize",function(){Tn.resize(),Tn.draw()});const Ji=document.querySelector("#showdone");Ji&&Ji.addEventListener("change",function(){Tn.setShowDone(Ji.checked)});
