var D=Object.defineProperty;var T=(n,t,e)=>t in n?D(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var l=(n,t,e)=>T(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const o=16,H=42,d=21,p=63,g=22,f=22,c=f*10,m=1e3*60*60*24;class Y{constructor(t){l(this,"id","colhead");l(this,"pos",0);this.frame=t}build(t){const e=document.createElement("div");e.id=this.id,e.className="header",e.style.top="0px",e.style.left=`${this.pos}px`,e.style.width=`${this.frame.calendarLeft}px`,e.style.height=`${p}px`,t.append(e);let i=document.createElement("div");i.className="line",i.style.top=`${p}px`,i.style.left="0px",i.style.width=`${this.frame.calendarLeft}px`,i.style.height="1px",t.append(i);let s=0;for(let r of this.frame.cols){let h=document.createElement("div");h.className="label",h.style.top=`${H}px`,h.style.left=`${s}px`,h.style.width=`${r.width}px`,h.textContent=r.name,e.append(h),s+=r.width,i=document.createElement("div"),i.className="line",i.style.top="0px",i.style.left=`${s}px`,i.style.width="1px",i.style.height=`${p}px`,e.append(i)}s+=2,i=document.createElement("div"),i.className="line",i.style.top="0px",i.style.left=`${s}px`,i.style.width="1px",i.style.height=`${p}px`,e.append(i)}scrollH(t){this.pos=-t;const e=document.querySelector(`#${this.id}`);e&&(e.style.left=`${this.pos}px`)}}class ${constructor(t){l(this,"id","colbody");l(this,"width",0);l(this,"height",0);l(this,"posX",0);l(this,"posY",0);this.frame=t}build(t){const e=document.createElement("canvas");this.height=this.frame.height-p-o,this.frame.ticketsFrameHeight=this.height,e.id=this.id,this.width=this.frame.calendarLeft,e.className="gantt-body",e.style.top=`${p}px`,e.style.left=`${this.posX}px`,e.style.width=`${this.width}px`,e.style.height=`${this.height}px`,t.append(e)}handler(){const t=document.querySelector("#ganttframe"),e=document.querySelector(`#${this.id}`),i=this.frame;t&&e&&(e.addEventListener("mousedown",function(s){s.preventDefault(),i.columnBody.mouseDown(s.layerX,s.layerY)}),e.addEventListener("touchstart",function(s){s.preventDefault(),i.columnBody.mouseDown(s.touches[0].pageX-t.offsetLeft-e.offsetLeft,s.touches[0].pageY-t.offsetTop-e.offsetTop)}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){const e=t.offsetWidth,i=t.offsetHeight;t.width=e,t.height=i;const s=t.getContext("2d");if(s){s.save(),this.frame.ticketsTotalHeight=this.drawTickets(s,this.frame.tickets,0,0),s.fillStyle="#82a4c1";let r=0;for(let h of this.frame.cols)r+=h.width,s.fillRect(r,0,1,i),s.fill();r+=2,s.fillRect(r,0,1,i),s.fill(),s.restore()}}}drawTickets(t,e,i,s){let r=s;for(let h of e)this.drawTicket(t,h,i,r),r+=g,h.open&&h.children.length>0&&(r=this.drawTickets(t,h.children,i+1,r));return r}getFrameHeight(t,e){let i=e;for(let s of t)i+=g,s.open&&s.children.length>0&&(i=this.getFrameHeight(s.children,i));return i}drawTicket(t,e,i,s){t.font="9.5pt sans-serif",t.textBaseline="bottom";const r=s+18;t.fillStyle="#00f",t.fillText(e.idDisp,3,r+this.posY),t.fillStyle="#808080";let h=this.frame.cols[0].width+i*12+6;t.fillRect(h,s+7+this.posY,1,8),t.fill(),t.fillRect(h,s+7+this.posY,8,1),t.fill(),t.fillRect(h,s+15+this.posY,8,1),t.fill(),t.fillRect(h+8,s+7+this.posY,1,9),t.fill(),t.fillStyle="#000",e.children.length>0&&(t.fillRect(h+2,s+11+this.posY,5,1),t.fill(),e.open||(t.fillRect(h+4,s+9+this.posY,1,5),t.fill()));let a=this.frame.cols[0].width+this.frame.cols[1].width-(h+14);if(t.measureText(e.name).width<=a)t.fillText(e.name,h+14,r+this.posY);else{let u=e.name;for(;t.measureText(`${u}…`).width>a;)u=u.slice(0,-1);t.fillText(`${u}…`,h+14,r+this.posY)}h=this.frame.cols[0].width+this.frame.cols[1].width+3,e.start&&t.fillText(this.dtDisp(e.start),h,r+this.posY),h+=this.frame.cols[2].width,e.end&&t.fillText(this.dtDisp(e.end),h,r+this.posY),h+=this.frame.cols[3].width+this.frame.cols[4].width-6;const w=`${e.progress}`,y=t.measureText(w).width;t.fillText(w,h-y,r+this.posY),t.fillStyle="#e5ebf2",t.fillRect(0,s+g+this.posY,this.width,1),t.fill()}dtDisp(t){const e=`${t.getFullYear()}`.slice(-2),i=`0${t.getMonth()+1}`.slice(-2),s=`0${t.getDate()}`.slice(-2);return`${e}/${i}/${s}`}scrollH(t){this.posX=-t;const e=document.querySelector(`#${this.id}`);e&&(e.style.left=`${this.posX}px`)}scrollV(t){this.posY=-t,this.draw()}mouseDown(t,e){this.clickTickets(this.frame.tickets,t,e,0,0)}clickTickets(t,e,i,s,r){let h=r;for(let a of t){if(this.clickTicket(a,e,i,s,h))break;h+=g,a.open&&a.children.length>0&&(h=this.clickTickets(a.children,e,i,s+1,h))}return h}clickTicket(t,e,i,s,r){if(i<r+this.posY||i>r+g+this.posY)return!1;if(e>this.frame.cols[0].width&&e<this.frame.cols[0].width+this.frame.cols[1].width){let h=this.frame.cols[0].width+s*12;if(e>h&&e<h+13)return t.open=!t.open,this.frame.draw(),this.frame.ticketsTotalHeight<this.frame.ticketsFrameHeight&&this.posY!=0&&(this.posY=0,this.frame.calendarBody.posY=0,this.frame.scv.pos=0,this.frame.draw()),!0}return!1}}class L{constructor(t){l(this,"id","colscr");l(this,"pos",0);this.frame=t}build(t){const e=document.createElement("div");e.id=this.id,e.className="scroll-corner",e.style.top=`${this.frame.height-o}px`,e.style.left=`${this.pos}px`,e.style.width=`${this.frame.calendarLeft}px`,e.style.height=`${o}px`,t.append(e)}scrollH(t){this.pos=-t;const e=document.querySelector(`#${this.id}`);e&&(e.style.left=`${this.pos}px`)}}class E{constructor(t){l(this,"id","calhead");l(this,"width",0);l(this,"pos",0);l(this,"dtpos",0);l(this,"dtStart",0);l(this,"dtEnd",0);this.frame=t}build(t){const e=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<c&&(this.width=c),e.id=this.id,e.className="header",e.style.top="0px",e.style.left=`${this.pos+this.frame.calendarLeft}px`,e.style.width=`${this.width}px`,e.style.height=`${p+1}px`,t.append(e),this.dtStart=this.frame.calendarStart.getTime(),this.dtEnd=this.frame.calendarEnd.getTime()}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<c&&(this.width=c);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const e=t.offsetHeight;t.width=this.width,t.height=e;const i=d+d,s=t.getContext("2d"),r="9.5pt sans-serif";if(s){s.save(),s.fillStyle="#82a4c1",s.fillRect(0,d,this.width,1),s.fill(),s.fillRect(0,d+d,this.width,1),s.fill(),s.fillRect(0,p,this.width,1),s.fill();let h=new Date(this.dtStart),a=0,S=!0;s.font=r,s.textBaseline="bottom",s.textAlign="left";let w=1,y=-1;for(;h.getTime()<=this.dtEnd;){if(y++,y>13&&(y=0,w++),a<this.dtpos-f){a+=f,h.setTime(h.getTime()+m),S=!1;continue}if(a>this.width+this.dtpos)break;const u=h.getDate();if(y===0&&(s.fillStyle="#000",s.fillText(`${w}`,a+3-this.dtpos,d-3),S||(s.fillStyle="#bdcede",s.fillRect(a-this.dtpos,0,1,d),s.fill())),S?(S=!1,(u==1||u<25)&&(s.fillStyle="#000",s.fillText(`${h.getFullYear()}/${h.getMonth()+1}`,a+3-this.dtpos,d+d-3))):u===1&&(s.fillStyle="#000",s.fillText(`${h.getFullYear()}/${h.getMonth()+1}`,a+3-this.dtpos,d+d-3),s.fillStyle="#bdcede",s.fillRect(a-this.dtpos,d,1,d),s.fill()),this.frame.holidays.filter(b=>b.getTime()===h.getTime()).length>0)s.fillStyle="#f00";else switch(h.getDay()){case 0:s.fillStyle="#f00";break;case 6:s.fillStyle="#00f";break;default:s.fillStyle="#000";break}s.fillText(`${u}`,a+3-this.dtpos,p-3),a+=f,h.setTime(h.getTime()+m),s.fillStyle="#bdcede",s.fillRect(a-this.dtpos,i,1,d),s.fill()}s.restore()}}}scrollH(t){this.pos=-t;const e=document.querySelector(`#${this.id}`);e&&(e.style.left=`${this.pos+this.frame.calendarLeft}px`)}scroll(t){this.dtpos=t*this.frame.calendarTotalWidth/(this.width-o-o),this.draw(),this.frame.calendarBody.dtpos=this.dtpos,this.frame.calendarBody.draw()}}class U{constructor(t){l(this,"id","calbody");l(this,"width",0);l(this,"posX",0);l(this,"posY",0);l(this,"dtpos",0);l(this,"dtStart",0);l(this,"dtEnd",0);this.frame=t}build(t){const e=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<c&&(this.width=c);const i=this.frame.height-p-o;e.id=this.id,e.className="gantt-body",e.style.top=`${p}px`,e.style.left=`${this.posX+this.frame.calendarLeft}px`,e.style.width=`${this.width}px`,e.style.height=`${i}px`,t.append(e),this.dtStart=this.frame.calendarStart.getTime(),this.dtEnd=this.frame.calendarEnd.getTime()}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<c&&(this.width=c);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const e=t.offsetWidth,i=t.offsetHeight;t.width=e,t.height=i;const s=t.getContext("2d");if(s){s.save();let r=new Date(this.dtStart),h=0;for(;r.getTime()<=this.dtEnd;){if(h<this.dtpos-f){h+=f,r.setTime(r.getTime()+m);continue}if(h>this.width+this.dtpos)break;let a=!1;if(this.frame.holidays.filter(w=>w.getTime()===r.getTime()).length>0)a=!0;else switch(r.getDay()){case 0:case 6:a=!0;break}if(a&&(s.fillStyle="#f2fef2",s.fillRect(h+1-this.dtpos,0,f-1,i),s.fill()),r.setTime(r.getTime()+m),h+=f,h>e+this.dtpos)break;s.fillStyle="#bdcede",s.fillRect(h-this.dtpos,0,1,i),s.fill()}this.drawTickets(s,this.frame.tickets,0),h=(new Date().getTime()-this.dtStart)/m*f,s.fillStyle="#0a0";for(let a=0;a<i;a+=7)s.fillRect(h-this.dtpos,a,1,4),s.fill();s.restore()}}}drawTickets(t,e,i){let s=i;for(let r of e)this.drawTicket(t,r,s),s+=g,r.open&&r.children.length>0&&(s=this.drawTickets(t,r.children,s));return s}drawTicket(t,e,i){if(e.start)if(e.end){let s=(e.start.getTime()-this.dtStart)/m;s=s*f-this.dtpos;let r=(e.end.getTime()-this.dtStart)/m;if(r=(r+1)*f-this.dtpos,e.progress===0)t.fillStyle="#9bf",t.fillRect(s,i+8+this.posY,r-s,6),t.fill();else if(e.progress===100)t.fillStyle="#57f",t.fillRect(s,i+8+this.posY,r-s,6),t.fill();else{t.fillStyle="#9bf",t.fillRect(s,i+8+this.posY,r-s,6),t.fill();const h=(r-s)*e.progress/100;t.fillStyle="#57f",t.fillRect(s,i+8+this.posY,h,6),t.fill()}}else{t.fillStyle="#57f";let s=(e.start.getTime()-this.dtStart)/m;s=s*f-this.dtpos,t.fillRect(s,i+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",s+=12,t.fillRect(s,i+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",s+=7,t.fillRect(s,i+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",s+=6,t.fillRect(s,i+8+this.posY,5,6),t.fill()}else if(e.end){t.fillStyle="#57f";let s=(e.end.getTime()-this.dtStart)/m;s=(s+1)*f-this.dtpos,s-=12,t.fillRect(s,i+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",s-=7,t.fillRect(s,i+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",s-=6,t.fillRect(s,i+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",s-=5,t.fillRect(s,i+8+this.posY,5,6),t.fill()}t.fillStyle="#e5ebf2",t.fillRect(0,i+g+this.posY,this.width,1),t.fill()}scrollH(t){this.posX=-t;const e=document.querySelector(`#${this.id}`);e&&(e.style.left=`${this.posX+this.frame.calendarLeft}px`)}scrollV(t){this.posY=-t,this.draw()}}class W{constructor(t){l(this,"id","calscroll");l(this,"width",0);l(this,"pos",0);l(this,"barWidth",0);l(this,"height",o);l(this,"moving",!1);l(this,"startX",0);l(this,"barpos",0);l(this,"startPos",0);this.frame=t}build(t){this.width=this.frame.width-this.frame.calendarLeft,this.width<c&&(this.width=c);const e=document.createElement("canvas");e.id=this.id,e.className="scroll-bar",e.style.top=`${this.frame.height-o}px`,e.style.left=`${this.pos+this.frame.calendarLeft}px`,e.style.width=`${this.width}px`,e.style.height=`${this.height}px`,t.append(e)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<c&&(this.width=c);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.scrollH(0),this.barpos=0}handler(){const t=document.querySelector("#ganttframe"),e=document.querySelector(`#${this.id}`),i=this.frame;t&&e&&(e.addEventListener("mousedown",function(s){s.preventDefault(),i.mouseDownCalScroll(s.layerX)}),e.addEventListener("touchstart",function(s){s.preventDefault(),i.mouseDownCalScroll(s.touches[0].pageX-t.offsetLeft-e.offsetLeft)}),e.addEventListener("mousemove",function(s){s.preventDefault(),i.mouseMoveCalScroll(s.layerX)}),e.addEventListener("touchmove",function(s){s.preventDefault(),i.mouseMoveCalScroll(s.touches[0].pageX-t.offsetLeft-e.offsetLeft)}),e.addEventListener("mouseup",function(s){s.preventDefault(),i.mouseUpCalScroll()}),e.addEventListener("mouseleave",function(s){s.preventDefault(),i.mouseUpCalScroll()}),e.addEventListener("touchend",function(s){s.preventDefault(),i.mouseUpCalScroll()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){t.width=this.width,t.height=this.height;const e=t.getContext("2d");e&&(e.save(),e.lineJoin="miter",e.fillStyle="#505050",e.beginPath(),e.moveTo(5,8),e.lineTo(9,12),e.lineTo(9,4),e.closePath(),e.fill(),e.beginPath(),e.moveTo(this.width-10,4),e.lineTo(this.width-10,12),e.lineTo(this.width-6,8),e.closePath(),e.fill(),e.fillStyle="#c1c1c1",this.barWidth=(this.width-o-o)*this.width/this.frame.calendarTotalWidth,e.fillRect(o+this.barpos,2,this.barWidth<4?4:this.barWidth,13),e.restore())}}scrollH(t){this.pos=-t;const e=document.querySelector(`#${this.id}`);e&&(e.style.left=`${this.pos+this.frame.calendarLeft}px`)}mouseDownCalScroll(t){if(o+this.barpos<t&&t<o+this.barpos+this.barWidth){this.moving=!0,this.startX=t-o,this.startPos=this.barpos;return}t<o?this.barpos-=o:t<o+this.barpos?this.barpos-=this.barWidth:this.width-o<t?this.barpos+=o:this.barpos+=this.barWidth,this.barpos<0&&(this.barpos=0),this.width-o-o-this.barWidth<this.barpos&&(this.barpos=this.width-o-o-this.barWidth),this.frame.calendarHeader.scroll(this.barpos),this.draw(),this.moving=!1}mouseMoveCalScroll(t){if(!this.moving)return;this.barpos=t-o-this.startX+this.startPos,this.barpos<0&&(this.barpos=0);const e=this.width-this.barWidth-o-o;this.barpos>e&&(this.barpos=e),this.frame.calendarHeader.scroll(this.barpos),this.draw()}mouseUpCalScroll(){this.moving=!1}}class R{constructor(t){l(this,"id","scrollh");l(this,"width",0);l(this,"barWidth",0);l(this,"height",o);l(this,"moving",!1);l(this,"startX",0);l(this,"pos",0);l(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),e=this.frame;t&&(t.addEventListener("mousedown",function(i){i.preventDefault(),e.mouseDownScrollH(i.pageX-t.offsetLeft)}),t.addEventListener("touchstart",function(i){i.preventDefault(),e.mouseDownScrollH(i.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mousemove",function(i){i.preventDefault(),e.mouseMoveScrollH(i.pageX-t.offsetLeft)}),t.addEventListener("touchmove",function(i){i.preventDefault(),e.mouseMoveScrollH(i.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mouseup",function(i){i.preventDefault(),e.mouseUpScrollH()}),t.addEventListener("mouseleave",function(i){i.preventDefault(),e.mouseUpScrollH()}),t.addEventListener("touchend",function(i){i.preventDefault(),e.mouseUpScrollH()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){if(this.width=t.offsetWidth,t.width=this.width,t.height=this.height,this.width>this.frame.schThreshold)return;const e=t.getContext("2d");e&&(e.save(),e.lineJoin="miter",e.fillStyle="#505050",e.beginPath(),e.moveTo(5,8),e.lineTo(9,12),e.lineTo(9,4),e.closePath(),e.fill(),e.beginPath(),e.moveTo(this.width-10,4),e.lineTo(this.width-10,12),e.lineTo(this.width-6,8),e.closePath(),e.fill(),e.fillStyle="#c1c1c1",this.barWidth=(this.width-o-o)*this.width/this.frame.schThreshold,e.fillRect(o+this.pos,2,this.barWidth<4?4:this.barWidth,13),e.restore())}}mouseDownScrollH(t){if(o+this.pos<t&&t<o+this.pos+this.barWidth){this.moving=!0,this.startX=t-o,this.startPos=this.pos;return}t<o?this.pos-=o:t<o+this.pos?this.pos-=this.barWidth:this.width-o<t?this.pos+=o:this.pos+=this.barWidth,this.pos<0&&(this.pos=0),this.width-o-o-this.barWidth<this.pos&&(this.pos=this.width-o-o-this.barWidth),this.frame.scrollH(this.pos),this.draw(),this.moving=!1}mouseMoveScrollH(t){if(!this.moving)return;this.pos=t-o-this.startX+this.startPos,this.pos<0&&(this.pos=0);const e=this.width-this.barWidth-o-o;this.pos>e&&(this.pos=e),this.frame.scrollH(this.pos),this.draw()}mouseUpScrollH(){this.moving=!1}}class C{constructor(t){l(this,"id","scrollv");l(this,"width",o);l(this,"height",0);l(this,"barHeight",0);l(this,"moving",!1);l(this,"visible",!1);l(this,"startY",0);l(this,"pos",0);l(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),e=this.frame;t&&(t.addEventListener("mousedown",function(i){i.preventDefault(),e.mouseDownScrollV(i.pageY-t.offsetTop)}),t.addEventListener("touchstart",function(i){i.preventDefault(),e.mouseDownScrollV(i.touches[0].pageY-t.offsetTop)}),t.addEventListener("mousemove",function(i){i.preventDefault(),e.mouseMoveScrollV(i.pageY-t.offsetTop)}),t.addEventListener("touchmove",function(i){i.preventDefault(),e.mouseMoveScrollV(i.touches[0].pageY-t.offsetTop)}),t.addEventListener("mouseup",function(i){i.preventDefault(),e.mouseUpScrollV()}),t.addEventListener("mouseleave",function(i){i.preventDefault(),e.mouseUpScrollV()}),t.addEventListener("touchend",function(i){i.preventDefault(),e.mouseUpScrollV()}))}draw(){this.visible=!1;const t=document.querySelector(`#${this.id}`);if(t){this.height=t.offsetHeight,t.width=this.width,t.height=this.height;const e=t.getContext("2d");e&&this.frame.ticketsFrameHeight<this.frame.ticketsTotalHeight&&(this.visible=!0,e.save(),e.lineJoin="miter",e.fillStyle="#505050",e.beginPath(),e.moveTo(8,5),e.lineTo(4,9),e.lineTo(12,9),e.closePath(),e.fill(),e.beginPath(),e.moveTo(4,this.height-10),e.lineTo(8,this.height-6),e.lineTo(12,this.height-10),e.closePath(),e.fill(),e.fillStyle="#c1c1c1",this.barHeight=(this.height-o-o)*this.frame.ticketsFrameHeight/this.frame.ticketsTotalHeight,e.fillRect(2,o+this.pos,13,this.barHeight<4?4:this.barHeight),e.restore())}}mouseDownScrollV(t){if(!this.visible)return;if(o+this.pos<t&&t<o+this.pos+this.barHeight){this.moving=!0,this.startY=t-o,this.startPos=this.pos;return}t<o?this.pos-=o:t<o+this.pos?this.pos-=this.barHeight:this.height-o<t?this.pos+=o:this.pos+=this.barHeight,this.pos<0&&(this.pos=0);let e=this.pos/(this.height-o-o-this.barHeight);e>1&&(e=1,this.pos=this.height-o-o-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*e),this.draw(),this.moving=!1}mouseMoveScrollV(t){if(!this.visible||!this.moving)return;this.pos=t-o-this.startY+this.startPos,this.pos<0&&(this.pos=0);let e=this.pos/(this.height-o-o-this.barHeight);e>1&&(e=1,this.pos=this.height-o-o-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*e),this.draw()}mouseUpScrollV(){this.moving=!1}}class X{constructor(){l(this,"id","ganttframe");l(this,"width",0);l(this,"height",0);l(this,"columnHeader",new Y(this));l(this,"columnBody",new $(this));l(this,"columnScroll",new L(this));l(this,"calendarHeader",new E(this));l(this,"calendarBody",new U(this));l(this,"calendarScroll",new W(this));l(this,"sch",new R(this));l(this,"scv",new C(this));l(this,"colW",0);l(this,"calendarLeft",0);l(this,"calendarStart",new Date(2024,3,8));l(this,"calendarEnd",new Date(2024,7,31));l(this,"calendarTotalWidth",0);l(this,"ticketsTotalHeight",0);l(this,"ticketsFrameHeight",0);l(this,"schThreshold",0);l(this,"posX",0);l(this,"cols",[]);l(this,"holidays",[]);l(this,"tickets",[]);this.holidays=[new Date(2024,6,15),new Date(2024,7,12)],this.cols=[{name:"ID",width:54},{name:"チケット名",width:320},{name:"開始日",width:67},{name:"終了日",width:67},{name:"進捗",width:36}],this.tickets=[{id:"YU1",idDisp:"YU1",name:"Yuimarl開発",start:new Date(2024,3,8),end:null,progress:0,open:!0,children:[{id:"YU2",idDisp:"YU2",name:"技術調査",start:new Date(2024,3,8),end:new Date(2024,3,17),progress:100,open:!1,children:[{id:"YU3",idDisp:"YU3",name:"Firestore",start:new Date(2024,3,8),end:new Date(2024,5,13),progress:100,open:!0,children:[]}]},{id:"YU8",idDisp:"YU8",name:"version 1.0.0",start:new Date(2024,3,18),end:new Date(2024,5,13),progress:100,open:!1,children:[{id:"YU8",idDisp:"YU8",name:"version 1.0.0",start:new Date(2024,3,18),end:new Date(2024,5,13),progress:100,open:!0,children:[]}]},{id:"YU62",idDisp:"YU62",name:"version 1.0.12",start:new Date(2024,5,21),end:new Date(2024,5,23),progress:100,open:!1,children:[{id:"YU8",idDisp:"YU8",name:"version 1.0.0",start:new Date(2024,3,18),end:new Date(2024,5,13),progress:100,open:!0,children:[]}]},{id:"YU71",idDisp:"YU71",name:"version 1.0.13",start:new Date(2024,5,24),end:new Date(2024,6,30),progress:10,open:!0,children:[{id:"YU60",idDisp:"YU60",name:"ガントチャート",start:new Date(2024,5,24),end:new Date(2024,6,30),progress:10,open:!0,children:[{id:"YU72",idDisp:"YU72",name:"画面プロトタイプ作成",start:new Date(2024,5,24),end:new Date(2024,6,12),progress:80,open:!0,children:[]},{id:"YU73",idDisp:"YU73",name:"実装・テスト",start:new Date(2024,6,16),end:new Date(2024,6,26),progress:0,open:!0,children:[]},{id:"YU74",idDisp:"YU74",name:"ユーザーガイド更新",start:new Date(2024,6,29),end:new Date(2024,6,30),progress:0,open:!0,children:[]}]}]},{id:"YU4",idDisp:"YU4",name:"バックログ",start:null,end:null,progress:0,open:!0,children:[{id:"YU46",idDisp:"YU46",name:"ページング改善",start:null,end:null,progress:0,open:!0,children:[]},{id:"YU45",idDisp:"YU45",name:"オーナー変更",start:null,end:null,progress:0,open:!0,children:[]}]}]}],this.build(),this.handler()}build(){const t=document.querySelector(`#${this.id}`);if(!t){console.error("Failed to get #ganttframe!");return}this.width=t.offsetWidth,this.height=t.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+c;const e=document.createDocumentFragment();this.columnBody.build(e),this.columnHeader.build(e),this.columnScroll.build(e),this.calendarBody.build(e),this.calendarHeader.build(e),this.calendarScroll.build(e);const i=(this.calendarEnd.getTime()-this.calendarStart.getTime())/m;this.calendarTotalWidth=(i+1)*f,t.append(e)}handler(){this.columnBody.handler(),this.calendarScroll.handler(),this.sch.handler(),this.scv.handler()}resize(){const t=document.querySelector("#flexbox");if(!t){console.error("Failed to get #flexbox!");return}const e=document.querySelector("#ganttbase");if(!e){console.error("Failed to get #ganttbase!");return}e.style.width=`${t.offsetWidth-o}px`;const i=document.querySelector(`#${this.id}`);if(!i){console.error("Failed to get #ganttframe!");return}this.width=i.offsetWidth,this.height=i.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+c,this.sch.pos=0,this.calendarScroll.pos=0,this.calendarBody.resize(),this.calendarHeader.resize(),this.calendarScroll.resize(),this.scrollH(0)}draw(){this.columnBody.draw(),this.calendarHeader.draw(),this.calendarBody.draw(),this.calendarScroll.draw(),this.sch.draw(),this.scv.draw()}scrollH(t){this.posX=t*this.schThreshold/(this.width-o-o),this.columnBody.scrollH(this.posX),this.columnHeader.scrollH(this.posX),this.columnScroll.scrollH(this.posX),this.calendarHeader.scrollH(this.posX),this.calendarBody.scrollH(this.posX),this.calendarScroll.scrollH(this.posX)}scrollV(t){this.columnBody.scrollV(t),this.calendarBody.scrollV(t)}columnWidth(){let t=2;for(let e of this.cols)t+=e.width;return t}mouseDownCalScroll(t){this.calendarScroll.mouseDownCalScroll(t)}mouseMoveCalScroll(t){this.calendarScroll.mouseMoveCalScroll(t)}mouseUpCalScroll(){this.calendarScroll.mouseUpCalScroll()}mouseDownScrollH(t){this.sch.mouseDownScrollH(t)}mouseMoveScrollH(t){this.sch.mouseMoveScrollH(t)}mouseUpScrollH(){this.sch.mouseUpScrollH()}mouseDownScrollV(t){this.scv.mouseDownScrollV(t)}mouseMoveScrollV(t){this.scv.mouseMoveScrollV(t)}mouseUpScrollV(){this.scv.mouseUpScrollV()}}const v=new X;v.draw();window.addEventListener("resize",function(){v.resize(),v.draw()});
