var vc=Object.defineProperty;var gc=(o,t,n)=>t in o?vc(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var j=(o,t,n)=>gc(o,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=n(l);fetch(l.href,h)}})();var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function os(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Bo={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Hr,function(){var n=1e3,s=6e4,l=36e5,h="millisecond",d="second",E="minute",D="hour",M="day",x="week",L="month",X="quarter",G="year",ot="date",et="Invalid Date",pt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,bt=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,wt={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Z){var q=["th","st","nd","rd"],R=Z%100;return"["+Z+(q[(R-20)%10]||q[R]||q[0])+"]"}},Tt=function(Z,q,R){var Y=String(Z);return!Y||Y.length>=q?Z:""+Array(q+1-Y.length).join(R)+Z},it={s:Tt,z:function(Z){var q=-Z.utcOffset(),R=Math.abs(q),Y=Math.floor(R/60),H=R%60;return(q<=0?"+":"-")+Tt(Y,2,"0")+":"+Tt(H,2,"0")},m:function Z(q,R){if(q.date()<R.date())return-Z(R,q);var Y=12*(R.year()-q.year())+(R.month()-q.month()),H=q.clone().add(Y,L),Q=R-H<0,J=q.clone().add(Y+(Q?-1:1),L);return+(-(Y+(R-H)/(Q?H-J:J-H))||0)},a:function(Z){return Z<0?Math.ceil(Z)||0:Math.floor(Z)},p:function(Z){return{M:L,y:G,w:x,d:M,D:ot,h:D,m:E,s:d,ms:h,Q:X}[Z]||String(Z||"").toLowerCase().replace(/s$/,"")},u:function(Z){return Z===void 0}},dt="en",rt={};rt[dt]=wt;var lt="$isDayjsObject",$t=function(Z){return Z instanceof Nt||!(!Z||!Z[lt])},Ct=function Z(q,R,Y){var H;if(!q)return dt;if(typeof q=="string"){var Q=q.toLowerCase();rt[Q]&&(H=Q),R&&(rt[Q]=R,H=Q);var J=q.split("-");if(!H&&J.length>1)return Z(J[0])}else{var vt=q.name;rt[vt]=q,H=vt}return!Y&&H&&(dt=H),H||!Y&&dt},ct=function(Z,q){if($t(Z))return Z.clone();var R=typeof q=="object"?q:{};return R.date=Z,R.args=arguments,new Nt(R)},nt=it;nt.l=Ct,nt.i=$t,nt.w=function(Z,q){return ct(Z,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var Nt=function(){function Z(R){this.$L=Ct(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[lt]=!0}var q=Z.prototype;return q.parse=function(R){this.$d=function(Y){var H=Y.date,Q=Y.utc;if(H===null)return new Date(NaN);if(nt.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var J=H.match(pt);if(J){var vt=J[2]-1||0,Et=(J[7]||"0").substring(0,3);return Q?new Date(Date.UTC(J[1],vt,J[3]||1,J[4]||0,J[5]||0,J[6]||0,Et)):new Date(J[1],vt,J[3]||1,J[4]||0,J[5]||0,J[6]||0,Et)}}return new Date(H)}(R),this.init()},q.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},q.$utils=function(){return nt},q.isValid=function(){return this.$d.toString()!==et},q.isSame=function(R,Y){var H=ct(R);return this.startOf(Y)<=H&&H<=this.endOf(Y)},q.isAfter=function(R,Y){return ct(R)<this.startOf(Y)},q.isBefore=function(R,Y){return this.endOf(Y)<ct(R)},q.$g=function(R,Y,H){return nt.u(R)?this[Y]:this.set(H,R)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(R,Y){var H=this,Q=!!nt.u(Y)||Y,J=nt.p(R),vt=function(U,It){var Kt=nt.w(H.$u?Date.UTC(H.$y,It,U):new Date(H.$y,It,U),H);return Q?Kt:Kt.endOf(M)},Et=function(U,It){return nt.w(H.toDate()[U].apply(H.toDate("s"),(Q?[0,0,0,0]:[23,59,59,999]).slice(It)),H)},_t=this.$W,St=this.$M,Ot=this.$D,Pt="set"+(this.$u?"UTC":"");switch(J){case G:return Q?vt(1,0):vt(31,11);case L:return Q?vt(1,St):vt(0,St+1);case x:var Ht=this.$locale().weekStart||0,Vt=(_t<Ht?_t+7:_t)-Ht;return vt(Q?Ot-Vt:Ot+(6-Vt),St);case M:case ot:return Et(Pt+"Hours",0);case D:return Et(Pt+"Minutes",1);case E:return Et(Pt+"Seconds",2);case d:return Et(Pt+"Milliseconds",3);default:return this.clone()}},q.endOf=function(R){return this.startOf(R,!1)},q.$set=function(R,Y){var H,Q=nt.p(R),J="set"+(this.$u?"UTC":""),vt=(H={},H[M]=J+"Date",H[ot]=J+"Date",H[L]=J+"Month",H[G]=J+"FullYear",H[D]=J+"Hours",H[E]=J+"Minutes",H[d]=J+"Seconds",H[h]=J+"Milliseconds",H)[Q],Et=Q===M?this.$D+(Y-this.$W):Y;if(Q===L||Q===G){var _t=this.clone().set(ot,1);_t.$d[vt](Et),_t.init(),this.$d=_t.set(ot,Math.min(this.$D,_t.daysInMonth())).$d}else vt&&this.$d[vt](Et);return this.init(),this},q.set=function(R,Y){return this.clone().$set(R,Y)},q.get=function(R){return this[nt.p(R)]()},q.add=function(R,Y){var H,Q=this;R=Number(R);var J=nt.p(Y),vt=function(St){var Ot=ct(Q);return nt.w(Ot.date(Ot.date()+Math.round(St*R)),Q)};if(J===L)return this.set(L,this.$M+R);if(J===G)return this.set(G,this.$y+R);if(J===M)return vt(1);if(J===x)return vt(7);var Et=(H={},H[E]=s,H[D]=l,H[d]=n,H)[J]||1,_t=this.$d.getTime()+R*Et;return nt.w(_t,this)},q.subtract=function(R,Y){return this.add(-1*R,Y)},q.format=function(R){var Y=this,H=this.$locale();if(!this.isValid())return H.invalidDate||et;var Q=R||"YYYY-MM-DDTHH:mm:ssZ",J=nt.z(this),vt=this.$H,Et=this.$m,_t=this.$M,St=H.weekdays,Ot=H.months,Pt=H.meridiem,Ht=function(It,Kt,mt,Zt){return It&&(It[Kt]||It(Y,Q))||mt[Kt].slice(0,Zt)},Vt=function(It){return nt.s(vt%12||12,It,"0")},U=Pt||function(It,Kt,mt){var Zt=It<12?"AM":"PM";return mt?Zt.toLowerCase():Zt};return Q.replace(bt,function(It,Kt){return Kt||function(mt){switch(mt){case"YY":return String(Y.$y).slice(-2);case"YYYY":return nt.s(Y.$y,4,"0");case"M":return _t+1;case"MM":return nt.s(_t+1,2,"0");case"MMM":return Ht(H.monthsShort,_t,Ot,3);case"MMMM":return Ht(Ot,_t);case"D":return Y.$D;case"DD":return nt.s(Y.$D,2,"0");case"d":return String(Y.$W);case"dd":return Ht(H.weekdaysMin,Y.$W,St,2);case"ddd":return Ht(H.weekdaysShort,Y.$W,St,3);case"dddd":return St[Y.$W];case"H":return String(vt);case"HH":return nt.s(vt,2,"0");case"h":return Vt(1);case"hh":return Vt(2);case"a":return U(vt,Et,!0);case"A":return U(vt,Et,!1);case"m":return String(Et);case"mm":return nt.s(Et,2,"0");case"s":return String(Y.$s);case"ss":return nt.s(Y.$s,2,"0");case"SSS":return nt.s(Y.$ms,3,"0");case"Z":return J}return null}(It)||J.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(R,Y,H){var Q,J=this,vt=nt.p(Y),Et=ct(R),_t=(Et.utcOffset()-this.utcOffset())*s,St=this-Et,Ot=function(){return nt.m(J,Et)};switch(vt){case G:Q=Ot()/12;break;case L:Q=Ot();break;case X:Q=Ot()/3;break;case x:Q=(St-_t)/6048e5;break;case M:Q=(St-_t)/864e5;break;case D:Q=St/l;break;case E:Q=St/s;break;case d:Q=St/n;break;default:Q=St}return H?Q:nt.a(Q)},q.daysInMonth=function(){return this.endOf(L).$D},q.$locale=function(){return rt[this.$L]},q.locale=function(R,Y){if(!R)return this.$L;var H=this.clone(),Q=Ct(R,Y,!0);return Q&&(H.$L=Q),H},q.clone=function(){return nt.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},Z}(),At=Nt.prototype;return ct.prototype=At,[["$ms",h],["$s",d],["$m",E],["$H",D],["$W",M],["$M",L],["$y",G],["$D",ot]].forEach(function(Z){At[Z[1]]=function(q){return this.$g(q,Z[0],Z[1])}}),ct.extend=function(Z,q){return Z.$i||(Z(q,Nt,ct),Z.$i=!0),ct},ct.locale=Ct,ct.isDayjs=$t,ct.unix=function(Z){return ct(1e3*Z)},ct.en=rt[dt],ct.Ls=rt,ct.p={},ct})})(Bo);var yc=Bo.exports;const Gt=os(yc),W=16,_c=42,zt=21,fe=63,Je=22,Xt=22,Jt=Xt*10,Fn=1e3*60*60*24;class bc{constructor(t){j(this,"id","colhead");j(this,"pos",0);this.frame=t}build(t){const n=document.createElement("div");n.id=this.id,n.className="header",n.style.top="0px",n.style.left=`${this.pos}px`,n.style.width=`${this.frame.calendarLeft}px`,n.style.height=`${fe}px`,t.append(n);let s=document.createElement("div");s.className="line",s.style.top=`${fe}px`,s.style.left="0px",s.style.width=`${this.frame.calendarLeft}px`,s.style.height="1px",t.append(s);let l=0;for(let h of this.frame.cols){let d=document.createElement("div");d.className="label",d.style.top=`${_c}px`,d.style.left=`${l}px`,d.style.width=`${h.width}px`,d.textContent=h.name,n.append(d),l+=h.width,s=document.createElement("div"),s.className="line",s.style.top="0px",s.style.left=`${l}px`,s.style.width="1px",s.style.height=`${fe}px`,n.append(s)}l+=2,s=document.createElement("div"),s.className="line",s.style.top="0px",s.style.left=`${l}px`,s.style.width="1px",s.style.height=`${fe}px`,n.append(s)}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos}px`)}}class Ec{constructor(t){j(this,"id","colbody");j(this,"width",0);j(this,"height",0);j(this,"posX",0);j(this,"posY",0);j(this,"clicked","");this.frame=t}build(t){const n=document.createElement("canvas");this.height=this.frame.height-fe-W,this.frame.ticketsFrameHeight=this.height,n.id=this.id,this.width=this.frame.calendarLeft,n.className="gantt-body",n.style.top=`${fe}px`,n.style.left=`${this.posX}px`,n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,t.append(n)}handler(){const t=document.querySelector("#ganttframe"),n=document.querySelector(`#${this.id}`),s=this.frame;t&&n&&(n.addEventListener("mousedown",function(l){l.preventDefault(),s.columnBody.mouseDown(l.layerX,l.layerY)}),n.addEventListener("touchstart",function(l){l.preventDefault(),s.columnBody.mouseDown(l.touches[0].pageX-t.offsetLeft-n.offsetLeft,l.touches[0].pageY-t.offsetTop-n.offsetTop)}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetWidth,s=t.offsetHeight;t.width=n,t.height=s;const l=t.getContext("2d");if(l){l.save(),this.frame.ticketsTotalHeight=this.drawTickets(l,this.frame.tickets,0,0),l.fillStyle="#82a4c1";let h=0;for(let d of this.frame.cols)h+=d.width,l.fillRect(h,0,1,s),l.fill();h+=2,l.fillRect(h,0,1,s),l.fill(),l.restore()}}}drawTickets(t,n,s,l){let h=l;for(let d of n)this.drawTicket(t,d,s,h),h+=Je,d.open&&d.children.length>0&&(h=this.drawTickets(t,d.children,s+1,h));return h}getFrameHeight(t,n){let s=n;for(let l of t)s+=Je,l.open&&l.children.length>0&&(s=this.getFrameHeight(l.children,s));return s}drawTicket(t,n,s,l){t.font="9.5pt sans-serif",t.textBaseline="bottom";const h=l+18;t.fillStyle="#00f",t.fillText(n.id_disp,3,h+this.posY),t.fillStyle="#808080";let d=this.frame.cols[0].width+s*12+6;t.fillRect(d,l+7+this.posY,1,8),t.fill(),t.fillRect(d,l+7+this.posY,8,1),t.fill(),t.fillRect(d,l+15+this.posY,8,1),t.fill(),t.fillRect(d+8,l+7+this.posY,1,9),t.fill(),t.fillStyle="#000",n.children.length>0&&(t.fillRect(d+2,l+11+this.posY,5,1),t.fill(),n.open||(t.fillRect(d+4,l+9+this.posY,1,5),t.fill()));let E=this.frame.cols[0].width+this.frame.cols[1].width-(d+14);if(t.measureText(n.name).width<=E)t.fillText(n.name,d+14,h+this.posY);else{let L=n.name;for(;t.measureText(`${L}…`).width>E;)L=L.slice(0,-1);t.fillText(`${L}…`,d+14,h+this.posY)}d=this.frame.cols[0].width+this.frame.cols[1].width+3,n.start_date&&t.fillText(Gt(n.start_date).format("YY/MM/DD"),d,h+this.posY),d+=this.frame.cols[2].width,n.end_date&&t.fillText(Gt(n.end_date).format("YY/MM/DD"),d,h+this.posY),d+=this.frame.cols[3].width+this.frame.cols[4].width-6;const M=`${n.progress}`,x=t.measureText(M).width;t.fillText(M,d-x,h+this.posY),t.fillStyle="#e5ebf2",t.fillRect(0,l+Je+this.posY,this.width,1),t.fill()}scrollH(t){this.posX=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.posX}px`)}scrollV(t){this.posY=-t,this.draw()}mouseDown(t,n){this.clicked="",this.clickTickets(this.frame.tickets,t,n,0,0),this.clicked&&fetch(`/api/ticket/${this.clicked}`,{method:"GET"}).then(s=>s.json()).then(s=>{s.result?this.frame.ticketModal.show(s):window.alert(`エラーが発生しました。 ${s.message}`)}).catch(s=>window.alert(`エラーが発生しました。 ${s.message}`))}clickTickets(t,n,s,l,h){let d=h;for(let E of t){if(this.clickTicket(E,n,s,l,d))return d;if(d+=Je,E.open&&E.children.length>0){let D=this.clickTickets(E.children,n,s,l+1,d);if(this.clicked)return D;d=D}}return d}clickTicket(t,n,s,l,h){if(s<h+this.posY||s>h+Je+this.posY)return!1;if(n<this.frame.cols[0].width)return this.clicked=t.id,!0;if(n<this.frame.cols[0].width+this.frame.cols[1].width){const d=this.frame.cols[0].width+l*12+2;if(n>d&&n<d+16)return t.open=!t.open,this.frame.nodeOpenClose(t.id,t.open),this.frame.draw(),this.frame.ticketsTotalHeight<this.frame.ticketsFrameHeight&&this.posY!=0&&(this.posY=0,this.frame.calendarBody.posY=0,this.frame.scv.pos=0,this.frame.draw()),!0}return!1}}class wc{constructor(t){j(this,"id","colscr");j(this,"pos",0);this.frame=t}build(t){const n=document.createElement("div");n.id=this.id,n.className="scroll-corner",n.style.top=`${this.frame.height-W}px`,n.style.left=`${this.pos}px`,n.style.width=`${this.frame.calendarLeft}px`,n.style.height=`${W}px`,t.append(n)}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos}px`)}}var Vo={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Hr,function(){return function(n,s){s.prototype.isSameOrAfter=function(l,h){return this.isSame(l,h)||this.isAfter(l,h)}}})})(Vo);var Tc=Vo.exports;const qo=os(Tc);Gt.extend(qo);class Ac{constructor(t){j(this,"id","calhead");j(this,"width",0);j(this,"pos",0);j(this,"dtpos",0);this.frame=t}build(t){const n=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt),n.id=this.id,n.className="header",n.style.top="0px",n.style.left=`${this.pos+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${fe+1}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetHeight;t.width=this.width,t.height=n;const s=zt+zt,l=t.getContext("2d"),h="9.5pt sans-serif";if(l){l.save(),l.fillStyle="#82a4c1",l.fillRect(0,zt,this.width,1),l.fill(),l.fillRect(0,zt+zt,this.width,1),l.fill(),l.fillRect(0,fe,this.width,1),l.fill();let d=this.frame.calendarStart.clone(),E=0,D=!0;l.font=h,l.textBaseline="bottom",l.textAlign="left";let M=1,x=-1;for(;this.frame.calendarEnd.isSameOrAfter(d);){if(x++,x>13&&(x=0,M++),E<this.dtpos-Xt){E+=Xt,d=d.add(1,"day"),D=!1;continue}if(E>this.width+this.dtpos)break;if(x===0&&(l.fillStyle="#000",l.fillText(`${M}`,E+3-this.dtpos,zt-3),D||(l.fillStyle="#bdcede",l.fillRect(E-this.dtpos,0,1,zt),l.fill())),D?(D=!1,(d.date()==1||d.date()<25)&&(l.fillStyle="#000",l.fillText(`${d.format("YYYY/M")}`,E+3-this.dtpos,zt+zt-3))):d.date()===1&&(l.fillStyle="#000",l.fillText(`${d.format("YYYY/M")}`,E+3-this.dtpos,zt+zt-3),l.fillStyle="#bdcede",l.fillRect(E-this.dtpos,zt,1,zt),l.fill()),this.frame.holidays.filter(X=>X.isSame(d)).length>0)l.fillStyle="#f00";else switch(d.day()){case 0:l.fillStyle="#f00";break;case 6:l.fillStyle="#00f";break;default:l.fillStyle="#000";break}l.fillText(`${d.date()}`,E+3-this.dtpos,fe-3),E+=Xt,d=d.add(1,"day"),l.fillStyle="#bdcede",l.fillRect(E-this.dtpos,s,1,zt),l.fill()}l.restore()}}}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos+this.frame.calendarLeft}px`)}scroll(t){this.dtpos=t*this.frame.calendarTotalWidth/(this.width-W-W),this.draw(),this.frame.calendarBody.dtpos=this.dtpos,this.frame.calendarBody.draw()}}Gt.extend(qo);class Sc{constructor(t){j(this,"id","calbody");j(this,"width",0);j(this,"posX",0);j(this,"posY",0);j(this,"dtpos",0);this.frame=t}build(t){const n=document.createElement("canvas");this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const s=this.frame.height-fe-W;n.id=this.id,n.className="gantt-body",n.style.top=`${fe}px`,n.style.left=`${this.posX+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${s}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.dtpos=0}draw(){const t=document.querySelector(`#${this.id}`);if(t){const n=t.offsetWidth,s=t.offsetHeight;t.width=n,t.height=s;const l=t.getContext("2d");if(l){l.save();let h=this.frame.calendarStart.clone(),d=0;for(;this.frame.calendarEnd.isSameOrAfter(h);){if(d<this.dtpos-Xt){d+=Xt,h=h.add(1,"day");continue}if(d>this.width+this.dtpos)break;let E=!1;if(this.frame.holidays.filter(M=>M.isSame(h)).length>0)E=!0;else switch(h.day()){case 0:case 6:E=!0;break}if(E&&(l.fillStyle="#f2fef2",l.fillRect(d+1-this.dtpos,0,Xt-1,s),l.fill()),h=h.add(1,"day"),d+=Xt,d>n+this.dtpos)break;l.fillStyle="#bdcede",l.fillRect(d-this.dtpos,0,1,s),l.fill()}this.drawTickets(l,this.frame.tickets,0),d=Gt().diff(this.frame.calendarStart)/Fn*Xt,l.fillStyle="#0a0";for(let E=0;E<s;E+=7)l.fillRect(d-this.dtpos,E,1,4),l.fill();l.restore()}}}drawTickets(t,n,s){let l=s;for(let h of n)this.drawTicket(t,h,l),l+=Je,h.open&&h.children.length>0&&(l=this.drawTickets(t,h.children,l));return l}drawTicket(t,n,s){if(n.start_date)if(n.end_date){let l=Gt(n.start_date).diff(this.frame.calendarStart)/Fn;l=l*Xt-this.dtpos;let h=Gt(n.end_date).diff(this.frame.calendarStart)/Fn;if(h=(h+1)*Xt-this.dtpos,n.progress===0)t.fillStyle="#9bf",t.fillRect(l,s+8+this.posY,h-l,6),t.fill();else if(n.progress===100)t.fillStyle="#57f",t.fillRect(l,s+8+this.posY,h-l,6),t.fill();else{t.fillStyle="#9bf",t.fillRect(l,s+8+this.posY,h-l,6),t.fill();const d=(h-l)*n.progress/100;t.fillStyle="#57f",t.fillRect(l,s+8+this.posY,d,6),t.fill()}}else{t.fillStyle="#57f";let l=Gt(n.start_date).diff(this.frame.calendarStart)/Fn;l=l*Xt-this.dtpos,t.fillRect(l,s+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",l+=12,t.fillRect(l,s+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",l+=7,t.fillRect(l,s+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",l+=6,t.fillRect(l,s+8+this.posY,5,6),t.fill()}else if(n.end_date){t.fillStyle="#57f";let l=Gt(n.end_date).diff(this.frame.calendarStart)/Fn;l=(l+1)*Xt-this.dtpos,l-=12,t.fillRect(l,s+8+this.posY,12,6),t.fill(),t.fillStyle="#68f",l-=7,t.fillRect(l,s+8+this.posY,7,6),t.fill(),t.fillStyle="#8af",l-=6,t.fillRect(l,s+8+this.posY,6,6),t.fill(),t.fillStyle="#bdf",l-=5,t.fillRect(l,s+8+this.posY,5,6),t.fill()}t.fillStyle="#e5ebf2",t.fillRect(0,s+Je+this.posY,this.width,1),t.fill()}scrollH(t){this.posX=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.posX+this.frame.calendarLeft}px`)}scrollV(t){this.posY=-t,this.draw()}}class Oc{constructor(t){j(this,"id","calscroll");j(this,"width",0);j(this,"pos",0);j(this,"barWidth",0);j(this,"height",W);j(this,"moving",!1);j(this,"startX",0);j(this,"barpos",0);j(this,"startPos",0);this.frame=t}build(t){this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const n=document.createElement("canvas");n.id=this.id,n.className="scroll-bar",n.style.top=`${this.frame.height-W}px`,n.style.left=`${this.pos+this.frame.calendarLeft}px`,n.style.width=`${this.width}px`,n.style.height=`${this.height}px`,t.append(n)}resize(){this.width=this.frame.width-this.frame.calendarLeft,this.width<Jt&&(this.width=Jt);const t=document.querySelector(`#${this.id}`);t&&(t.style.width=`${this.width}px`),this.scrollH(0),this.barpos=0}handler(){const t=document.querySelector("#ganttframe"),n=document.querySelector(`#${this.id}`),s=this.frame;t&&n&&(n.addEventListener("mousedown",function(l){l.preventDefault(),s.mouseDownCalScroll(l.layerX)}),n.addEventListener("touchstart",function(l){l.preventDefault(),s.mouseDownCalScroll(l.touches[0].pageX-t.offsetLeft-n.offsetLeft)}),n.addEventListener("mousemove",function(l){l.preventDefault(),s.mouseMoveCalScroll(l.layerX)}),n.addEventListener("touchmove",function(l){l.preventDefault(),s.mouseMoveCalScroll(l.touches[0].pageX-t.offsetLeft-n.offsetLeft)}),n.addEventListener("mouseup",function(l){l.preventDefault(),s.mouseUpCalScroll()}),n.addEventListener("mouseleave",function(l){l.preventDefault(),s.mouseUpCalScroll()}),n.addEventListener("touchend",function(l){l.preventDefault(),s.mouseUpCalScroll()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){t.width=this.width,t.height=this.height;const n=t.getContext("2d");n&&(n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(5,8),n.lineTo(9,12),n.lineTo(9,4),n.closePath(),n.fill(),n.beginPath(),n.moveTo(this.width-10,4),n.lineTo(this.width-10,12),n.lineTo(this.width-6,8),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barWidth=(this.width-W-W)*this.width/this.frame.calendarTotalWidth,n.fillRect(W+this.barpos,2,this.barWidth<4?4:this.barWidth,13),n.restore())}}scrollH(t){this.pos=-t;const n=document.querySelector(`#${this.id}`);n&&(n.style.left=`${this.pos+this.frame.calendarLeft}px`)}mouseDownCalScroll(t){if(W+this.barpos<t&&t<W+this.barpos+this.barWidth){this.moving=!0,this.startX=t-W,this.startPos=this.barpos;return}t<W?this.barpos-=W:t<W+this.barpos?this.barpos-=this.barWidth:this.width-W<t?this.barpos+=W:this.barpos+=this.barWidth,this.barpos<0&&(this.barpos=0),this.width-W-W-this.barWidth<this.barpos&&(this.barpos=this.width-W-W-this.barWidth),this.frame.calendarHeader.scroll(this.barpos),this.draw(),this.moving=!1}mouseMoveCalScroll(t){if(!this.moving)return;this.barpos=t-W-this.startX+this.startPos,this.barpos<0&&(this.barpos=0);const n=this.width-this.barWidth-W-W;this.barpos>n&&(this.barpos=n),this.frame.calendarHeader.scroll(this.barpos),this.draw()}mouseUpCalScroll(){this.moving=!1}}class Cc{constructor(t){j(this,"id","scrollh");j(this,"width",0);j(this,"barWidth",0);j(this,"height",W);j(this,"moving",!1);j(this,"startX",0);j(this,"pos",0);j(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),n=this.frame;t&&(t.addEventListener("mousedown",function(s){s.preventDefault(),n.mouseDownScrollH(s.pageX-t.offsetLeft)}),t.addEventListener("touchstart",function(s){s.preventDefault(),n.mouseDownScrollH(s.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mousemove",function(s){s.preventDefault(),n.mouseMoveScrollH(s.pageX-t.offsetLeft)}),t.addEventListener("touchmove",function(s){s.preventDefault(),n.mouseMoveScrollH(s.touches[0].pageX-t.offsetLeft)}),t.addEventListener("mouseup",function(s){s.preventDefault(),n.mouseUpScrollH()}),t.addEventListener("mouseleave",function(s){s.preventDefault(),n.mouseUpScrollH()}),t.addEventListener("touchend",function(s){s.preventDefault(),n.mouseUpScrollH()}))}draw(){const t=document.querySelector(`#${this.id}`);if(t){if(this.width=t.offsetWidth,t.width=this.width,t.height=this.height,this.width>this.frame.schThreshold)return;const n=t.getContext("2d");n&&(n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(5,8),n.lineTo(9,12),n.lineTo(9,4),n.closePath(),n.fill(),n.beginPath(),n.moveTo(this.width-10,4),n.lineTo(this.width-10,12),n.lineTo(this.width-6,8),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barWidth=(this.width-W-W)*this.width/this.frame.schThreshold,n.fillRect(W+this.pos,2,this.barWidth<4?4:this.barWidth,13),n.restore())}}mouseDownScrollH(t){if(W+this.pos<t&&t<W+this.pos+this.barWidth){this.moving=!0,this.startX=t-W,this.startPos=this.pos;return}t<W?this.pos-=W:t<W+this.pos?this.pos-=this.barWidth:this.width-W<t?this.pos+=W:this.pos+=this.barWidth,this.pos<0&&(this.pos=0),this.width-W-W-this.barWidth<this.pos&&(this.pos=this.width-W-W-this.barWidth),this.frame.scrollH(this.pos),this.draw(),this.moving=!1}mouseMoveScrollH(t){if(!this.moving)return;this.pos=t-W-this.startX+this.startPos,this.pos<0&&(this.pos=0);const n=this.width-this.barWidth-W-W;this.pos>n&&(this.pos=n),this.frame.scrollH(this.pos),this.draw()}mouseUpScrollH(){this.moving=!1}}class Dc{constructor(t){j(this,"id","scrollv");j(this,"width",W);j(this,"height",0);j(this,"barHeight",0);j(this,"moving",!1);j(this,"visible",!1);j(this,"startY",0);j(this,"pos",0);j(this,"startPos",0);this.frame=t}handler(){const t=document.querySelector(`#${this.id}`),n=this.frame;t&&(t.addEventListener("mousedown",function(s){s.preventDefault(),n.mouseDownScrollV(s.pageY-t.offsetTop)}),t.addEventListener("touchstart",function(s){s.preventDefault(),n.mouseDownScrollV(s.touches[0].pageY-t.offsetTop)}),t.addEventListener("mousemove",function(s){s.preventDefault(),n.mouseMoveScrollV(s.pageY-t.offsetTop)}),t.addEventListener("touchmove",function(s){s.preventDefault(),n.mouseMoveScrollV(s.touches[0].pageY-t.offsetTop)}),t.addEventListener("mouseup",function(s){s.preventDefault(),n.mouseUpScrollV()}),t.addEventListener("mouseleave",function(s){s.preventDefault(),n.mouseUpScrollV()}),t.addEventListener("touchend",function(s){s.preventDefault(),n.mouseUpScrollV()}))}draw(){this.visible=!1;const t=document.querySelector(`#${this.id}`);if(t){this.height=t.offsetHeight,t.width=this.width,t.height=this.height;const n=t.getContext("2d");n&&this.frame.ticketsFrameHeight<this.frame.ticketsTotalHeight&&(this.visible=!0,n.save(),n.lineJoin="miter",n.fillStyle="#505050",n.beginPath(),n.moveTo(8,5),n.lineTo(4,9),n.lineTo(12,9),n.closePath(),n.fill(),n.beginPath(),n.moveTo(4,this.height-10),n.lineTo(8,this.height-6),n.lineTo(12,this.height-10),n.closePath(),n.fill(),n.fillStyle="#c1c1c1",this.barHeight=(this.height-W-W)*this.frame.ticketsFrameHeight/this.frame.ticketsTotalHeight,n.fillRect(2,W+this.pos,13,this.barHeight<4?4:this.barHeight),n.restore())}}mouseDownScrollV(t){if(!this.visible)return;if(W+this.pos<t&&t<W+this.pos+this.barHeight){this.moving=!0,this.startY=t-W,this.startPos=this.pos;return}t<W?this.pos-=W:t<W+this.pos?this.pos-=this.barHeight:this.height-W<t?this.pos+=W:this.pos+=this.barHeight,this.pos<0&&(this.pos=0);let n=this.pos/(this.height-W-W-this.barHeight);n>1&&(n=1,this.pos=this.height-W-W-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*n),this.draw(),this.moving=!1}mouseMoveScrollV(t){if(!this.visible||!this.moving)return;this.pos=t-W-this.startY+this.startPos,this.pos<0&&(this.pos=0);let n=this.pos/(this.height-W-W-this.barHeight);n>1&&(n=1,this.pos=this.height-W-W-this.barHeight),this.frame.scrollV((this.frame.ticketsTotalHeight-this.frame.ticketsFrameHeight)*n),this.draw()}mouseUpScrollV(){this.moving=!1}}var Yt="top",ee="bottom",ne="right",Ut="left",Wr="auto",$n=[Yt,ee,ne,Ut],nn="start",Tn="end",Fo="clippingParents",as="viewport",_n="popper",Wo="reference",Qi=$n.reduce(function(o,t){return o.concat([t+"-"+nn,t+"-"+Tn])},[]),cs=[].concat($n,[Wr]).reduce(function(o,t){return o.concat([t,t+"-"+nn,t+"-"+Tn])},[]),Yo="beforeRead",Uo="read",zo="afterRead",Xo="beforeMain",Go="main",Qo="afterMain",Jo="beforeWrite",Zo="write",ta="afterWrite",ea=[Yo,Uo,zo,Xo,Go,Qo,Jo,Zo,ta];function ge(o){return o?(o.nodeName||"").toLowerCase():null}function re(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var t=o.ownerDocument;return t&&t.defaultView||window}return o}function rn(o){var t=re(o).Element;return o instanceof t||o instanceof Element}function se(o){var t=re(o).HTMLElement;return o instanceof t||o instanceof HTMLElement}function ls(o){if(typeof ShadowRoot>"u")return!1;var t=re(o).ShadowRoot;return o instanceof t||o instanceof ShadowRoot}function $c(o){var t=o.state;Object.keys(t.elements).forEach(function(n){var s=t.styles[n]||{},l=t.attributes[n]||{},h=t.elements[n];!se(h)||!ge(h)||(Object.assign(h.style,s),Object.keys(l).forEach(function(d){var E=l[d];E===!1?h.removeAttribute(d):h.setAttribute(d,E===!0?"":E)}))})}function xc(o){var t=o.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(s){var l=t.elements[s],h=t.attributes[s]||{},d=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:n[s]),E=d.reduce(function(D,M){return D[M]="",D},{});!se(l)||!ge(l)||(Object.assign(l.style,E),Object.keys(h).forEach(function(D){l.removeAttribute(D)}))})}}const us={name:"applyStyles",enabled:!0,phase:"write",fn:$c,effect:xc,requires:["computeStyles"]};function me(o){return o.split("-")[0]}var en=Math.max,jr=Math.min,An=Math.round;function Ji(){var o=navigator.userAgentData;return o!=null&&o.brands&&Array.isArray(o.brands)?o.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function na(){return!/^((?!chrome|android).)*safari/i.test(Ji())}function Sn(o,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var s=o.getBoundingClientRect(),l=1,h=1;t&&se(o)&&(l=o.offsetWidth>0&&An(s.width)/o.offsetWidth||1,h=o.offsetHeight>0&&An(s.height)/o.offsetHeight||1);var d=rn(o)?re(o):window,E=d.visualViewport,D=!na()&&n,M=(s.left+(D&&E?E.offsetLeft:0))/l,x=(s.top+(D&&E?E.offsetTop:0))/h,L=s.width/l,X=s.height/h;return{width:L,height:X,top:x,right:M+L,bottom:x+X,left:M,x:M,y:x}}function fs(o){var t=Sn(o),n=o.offsetWidth,s=o.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:o.offsetLeft,y:o.offsetTop,width:n,height:s}}function ra(o,t){var n=t.getRootNode&&t.getRootNode();if(o.contains(t))return!0;if(n&&ls(n)){var s=t;do{if(s&&o.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ae(o){return re(o).getComputedStyle(o)}function Nc(o){return["table","td","th"].indexOf(ge(o))>=0}function Be(o){return((rn(o)?o.ownerDocument:o.document)||window.document).documentElement}function Yr(o){return ge(o)==="html"?o:o.assignedSlot||o.parentNode||(ls(o)?o.host:null)||Be(o)}function no(o){return!se(o)||Ae(o).position==="fixed"?null:o.offsetParent}function kc(o){var t=/firefox/i.test(Ji()),n=/Trident/i.test(Ji());if(n&&se(o)){var s=Ae(o);if(s.position==="fixed")return null}var l=Yr(o);for(ls(l)&&(l=l.host);se(l)&&["html","body"].indexOf(ge(l))<0;){var h=Ae(l);if(h.transform!=="none"||h.perspective!=="none"||h.contain==="paint"||["transform","perspective"].indexOf(h.willChange)!==-1||t&&h.willChange==="filter"||t&&h.filter&&h.filter!=="none")return l;l=l.parentNode}return null}function Gn(o){for(var t=re(o),n=no(o);n&&Nc(n)&&Ae(n).position==="static";)n=no(n);return n&&(ge(n)==="html"||ge(n)==="body"&&Ae(n).position==="static")?t:n||kc(o)||t}function hs(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function Un(o,t,n){return en(o,jr(t,n))}function Lc(o,t,n){var s=Un(o,t,n);return s>n?n:s}function ia(){return{top:0,right:0,bottom:0,left:0}}function sa(o){return Object.assign({},ia(),o)}function oa(o,t){return t.reduce(function(n,s){return n[s]=o,n},{})}var Pc=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,sa(typeof t!="number"?t:oa(t,$n))};function Ic(o){var t,n=o.state,s=o.name,l=o.options,h=n.elements.arrow,d=n.modifiersData.popperOffsets,E=me(n.placement),D=hs(E),M=[Ut,ne].indexOf(E)>=0,x=M?"height":"width";if(!(!h||!d)){var L=Pc(l.padding,n),X=fs(h),G=D==="y"?Yt:Ut,ot=D==="y"?ee:ne,et=n.rects.reference[x]+n.rects.reference[D]-d[D]-n.rects.popper[x],pt=d[D]-n.rects.reference[D],bt=Gn(h),wt=bt?D==="y"?bt.clientHeight||0:bt.clientWidth||0:0,Tt=et/2-pt/2,it=L[G],dt=wt-X[x]-L[ot],rt=wt/2-X[x]/2+Tt,lt=Un(it,rt,dt),$t=D;n.modifiersData[s]=(t={},t[$t]=lt,t.centerOffset=lt-rt,t)}}function Mc(o){var t=o.state,n=o.options,s=n.element,l=s===void 0?"[data-popper-arrow]":s;l!=null&&(typeof l=="string"&&(l=t.elements.popper.querySelector(l),!l)||ra(t.elements.popper,l)&&(t.elements.arrow=l))}const aa={name:"arrow",enabled:!0,phase:"main",fn:Ic,effect:Mc,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function On(o){return o.split("-")[1]}var Rc={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kc(o,t){var n=o.x,s=o.y,l=t.devicePixelRatio||1;return{x:An(n*l)/l||0,y:An(s*l)/l||0}}function ro(o){var t,n=o.popper,s=o.popperRect,l=o.placement,h=o.variation,d=o.offsets,E=o.position,D=o.gpuAcceleration,M=o.adaptive,x=o.roundOffsets,L=o.isFixed,X=d.x,G=X===void 0?0:X,ot=d.y,et=ot===void 0?0:ot,pt=typeof x=="function"?x({x:G,y:et}):{x:G,y:et};G=pt.x,et=pt.y;var bt=d.hasOwnProperty("x"),wt=d.hasOwnProperty("y"),Tt=Ut,it=Yt,dt=window;if(M){var rt=Gn(n),lt="clientHeight",$t="clientWidth";if(rt===re(n)&&(rt=Be(n),Ae(rt).position!=="static"&&E==="absolute"&&(lt="scrollHeight",$t="scrollWidth")),rt=rt,l===Yt||(l===Ut||l===ne)&&h===Tn){it=ee;var Ct=L&&rt===dt&&dt.visualViewport?dt.visualViewport.height:rt[lt];et-=Ct-s.height,et*=D?1:-1}if(l===Ut||(l===Yt||l===ee)&&h===Tn){Tt=ne;var ct=L&&rt===dt&&dt.visualViewport?dt.visualViewport.width:rt[$t];G-=ct-s.width,G*=D?1:-1}}var nt=Object.assign({position:E},M&&Rc),Nt=x===!0?Kc({x:G,y:et},re(n)):{x:G,y:et};if(G=Nt.x,et=Nt.y,D){var At;return Object.assign({},nt,(At={},At[it]=wt?"0":"",At[Tt]=bt?"0":"",At.transform=(dt.devicePixelRatio||1)<=1?"translate("+G+"px, "+et+"px)":"translate3d("+G+"px, "+et+"px, 0)",At))}return Object.assign({},nt,(t={},t[it]=wt?et+"px":"",t[Tt]=bt?G+"px":"",t.transform="",t))}function Hc(o){var t=o.state,n=o.options,s=n.gpuAcceleration,l=s===void 0?!0:s,h=n.adaptive,d=h===void 0?!0:h,E=n.roundOffsets,D=E===void 0?!0:E,M={placement:me(t.placement),variation:On(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:l,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ro(Object.assign({},M,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:d,roundOffsets:D})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ro(Object.assign({},M,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:D})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const ds={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Hc,data:{}};var $r={passive:!0};function jc(o){var t=o.state,n=o.instance,s=o.options,l=s.scroll,h=l===void 0?!0:l,d=s.resize,E=d===void 0?!0:d,D=re(t.elements.popper),M=[].concat(t.scrollParents.reference,t.scrollParents.popper);return h&&M.forEach(function(x){x.addEventListener("scroll",n.update,$r)}),E&&D.addEventListener("resize",n.update,$r),function(){h&&M.forEach(function(x){x.removeEventListener("scroll",n.update,$r)}),E&&D.removeEventListener("resize",n.update,$r)}}const ps={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jc,data:{}};var Bc={left:"right",right:"left",bottom:"top",top:"bottom"};function Mr(o){return o.replace(/left|right|bottom|top/g,function(t){return Bc[t]})}var Vc={start:"end",end:"start"};function io(o){return o.replace(/start|end/g,function(t){return Vc[t]})}function ms(o){var t=re(o),n=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:n,scrollTop:s}}function vs(o){return Sn(Be(o)).left+ms(o).scrollLeft}function qc(o,t){var n=re(o),s=Be(o),l=n.visualViewport,h=s.clientWidth,d=s.clientHeight,E=0,D=0;if(l){h=l.width,d=l.height;var M=na();(M||!M&&t==="fixed")&&(E=l.offsetLeft,D=l.offsetTop)}return{width:h,height:d,x:E+vs(o),y:D}}function Fc(o){var t,n=Be(o),s=ms(o),l=(t=o.ownerDocument)==null?void 0:t.body,h=en(n.scrollWidth,n.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),d=en(n.scrollHeight,n.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),E=-s.scrollLeft+vs(o),D=-s.scrollTop;return Ae(l||n).direction==="rtl"&&(E+=en(n.clientWidth,l?l.clientWidth:0)-h),{width:h,height:d,x:E,y:D}}function gs(o){var t=Ae(o),n=t.overflow,s=t.overflowX,l=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+l+s)}function ca(o){return["html","body","#document"].indexOf(ge(o))>=0?o.ownerDocument.body:se(o)&&gs(o)?o:ca(Yr(o))}function zn(o,t){var n;t===void 0&&(t=[]);var s=ca(o),l=s===((n=o.ownerDocument)==null?void 0:n.body),h=re(s),d=l?[h].concat(h.visualViewport||[],gs(s)?s:[]):s,E=t.concat(d);return l?E:E.concat(zn(Yr(d)))}function Zi(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function Wc(o,t){var n=Sn(o,!1,t==="fixed");return n.top=n.top+o.clientTop,n.left=n.left+o.clientLeft,n.bottom=n.top+o.clientHeight,n.right=n.left+o.clientWidth,n.width=o.clientWidth,n.height=o.clientHeight,n.x=n.left,n.y=n.top,n}function so(o,t,n){return t===as?Zi(qc(o,n)):rn(t)?Wc(t,n):Zi(Fc(Be(o)))}function Yc(o){var t=zn(Yr(o)),n=["absolute","fixed"].indexOf(Ae(o).position)>=0,s=n&&se(o)?Gn(o):o;return rn(s)?t.filter(function(l){return rn(l)&&ra(l,s)&&ge(l)!=="body"}):[]}function Uc(o,t,n,s){var l=t==="clippingParents"?Yc(o):[].concat(t),h=[].concat(l,[n]),d=h[0],E=h.reduce(function(D,M){var x=so(o,M,s);return D.top=en(x.top,D.top),D.right=jr(x.right,D.right),D.bottom=jr(x.bottom,D.bottom),D.left=en(x.left,D.left),D},so(o,d,s));return E.width=E.right-E.left,E.height=E.bottom-E.top,E.x=E.left,E.y=E.top,E}function la(o){var t=o.reference,n=o.element,s=o.placement,l=s?me(s):null,h=s?On(s):null,d=t.x+t.width/2-n.width/2,E=t.y+t.height/2-n.height/2,D;switch(l){case Yt:D={x:d,y:t.y-n.height};break;case ee:D={x:d,y:t.y+t.height};break;case ne:D={x:t.x+t.width,y:E};break;case Ut:D={x:t.x-n.width,y:E};break;default:D={x:t.x,y:t.y}}var M=l?hs(l):null;if(M!=null){var x=M==="y"?"height":"width";switch(h){case nn:D[M]=D[M]-(t[x]/2-n[x]/2);break;case Tn:D[M]=D[M]+(t[x]/2-n[x]/2);break}}return D}function Cn(o,t){t===void 0&&(t={});var n=t,s=n.placement,l=s===void 0?o.placement:s,h=n.strategy,d=h===void 0?o.strategy:h,E=n.boundary,D=E===void 0?Fo:E,M=n.rootBoundary,x=M===void 0?as:M,L=n.elementContext,X=L===void 0?_n:L,G=n.altBoundary,ot=G===void 0?!1:G,et=n.padding,pt=et===void 0?0:et,bt=sa(typeof pt!="number"?pt:oa(pt,$n)),wt=X===_n?Wo:_n,Tt=o.rects.popper,it=o.elements[ot?wt:X],dt=Uc(rn(it)?it:it.contextElement||Be(o.elements.popper),D,x,d),rt=Sn(o.elements.reference),lt=la({reference:rt,element:Tt,strategy:"absolute",placement:l}),$t=Zi(Object.assign({},Tt,lt)),Ct=X===_n?$t:rt,ct={top:dt.top-Ct.top+bt.top,bottom:Ct.bottom-dt.bottom+bt.bottom,left:dt.left-Ct.left+bt.left,right:Ct.right-dt.right+bt.right},nt=o.modifiersData.offset;if(X===_n&&nt){var Nt=nt[l];Object.keys(ct).forEach(function(At){var Z=[ne,ee].indexOf(At)>=0?1:-1,q=[Yt,ee].indexOf(At)>=0?"y":"x";ct[At]+=Nt[q]*Z})}return ct}function zc(o,t){t===void 0&&(t={});var n=t,s=n.placement,l=n.boundary,h=n.rootBoundary,d=n.padding,E=n.flipVariations,D=n.allowedAutoPlacements,M=D===void 0?cs:D,x=On(s),L=x?E?Qi:Qi.filter(function(ot){return On(ot)===x}):$n,X=L.filter(function(ot){return M.indexOf(ot)>=0});X.length===0&&(X=L);var G=X.reduce(function(ot,et){return ot[et]=Cn(o,{placement:et,boundary:l,rootBoundary:h,padding:d})[me(et)],ot},{});return Object.keys(G).sort(function(ot,et){return G[ot]-G[et]})}function Xc(o){if(me(o)===Wr)return[];var t=Mr(o);return[io(o),t,io(t)]}function Gc(o){var t=o.state,n=o.options,s=o.name;if(!t.modifiersData[s]._skip){for(var l=n.mainAxis,h=l===void 0?!0:l,d=n.altAxis,E=d===void 0?!0:d,D=n.fallbackPlacements,M=n.padding,x=n.boundary,L=n.rootBoundary,X=n.altBoundary,G=n.flipVariations,ot=G===void 0?!0:G,et=n.allowedAutoPlacements,pt=t.options.placement,bt=me(pt),wt=bt===pt,Tt=D||(wt||!ot?[Mr(pt)]:Xc(pt)),it=[pt].concat(Tt).reduce(function(St,Ot){return St.concat(me(Ot)===Wr?zc(t,{placement:Ot,boundary:x,rootBoundary:L,padding:M,flipVariations:ot,allowedAutoPlacements:et}):Ot)},[]),dt=t.rects.reference,rt=t.rects.popper,lt=new Map,$t=!0,Ct=it[0],ct=0;ct<it.length;ct++){var nt=it[ct],Nt=me(nt),At=On(nt)===nn,Z=[Yt,ee].indexOf(Nt)>=0,q=Z?"width":"height",R=Cn(t,{placement:nt,boundary:x,rootBoundary:L,altBoundary:X,padding:M}),Y=Z?At?ne:Ut:At?ee:Yt;dt[q]>rt[q]&&(Y=Mr(Y));var H=Mr(Y),Q=[];if(h&&Q.push(R[Nt]<=0),E&&Q.push(R[Y]<=0,R[H]<=0),Q.every(function(St){return St})){Ct=nt,$t=!1;break}lt.set(nt,Q)}if($t)for(var J=ot?3:1,vt=function(Ot){var Pt=it.find(function(Ht){var Vt=lt.get(Ht);if(Vt)return Vt.slice(0,Ot).every(function(U){return U})});if(Pt)return Ct=Pt,"break"},Et=J;Et>0;Et--){var _t=vt(Et);if(_t==="break")break}t.placement!==Ct&&(t.modifiersData[s]._skip=!0,t.placement=Ct,t.reset=!0)}}const ua={name:"flip",enabled:!0,phase:"main",fn:Gc,requiresIfExists:["offset"],data:{_skip:!1}};function oo(o,t,n){return n===void 0&&(n={x:0,y:0}),{top:o.top-t.height-n.y,right:o.right-t.width+n.x,bottom:o.bottom-t.height+n.y,left:o.left-t.width-n.x}}function ao(o){return[Yt,ne,ee,Ut].some(function(t){return o[t]>=0})}function Qc(o){var t=o.state,n=o.name,s=t.rects.reference,l=t.rects.popper,h=t.modifiersData.preventOverflow,d=Cn(t,{elementContext:"reference"}),E=Cn(t,{altBoundary:!0}),D=oo(d,s),M=oo(E,l,h),x=ao(D),L=ao(M);t.modifiersData[n]={referenceClippingOffsets:D,popperEscapeOffsets:M,isReferenceHidden:x,hasPopperEscaped:L},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":x,"data-popper-escaped":L})}const fa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Qc};function Jc(o,t,n){var s=me(o),l=[Ut,Yt].indexOf(s)>=0?-1:1,h=typeof n=="function"?n(Object.assign({},t,{placement:o})):n,d=h[0],E=h[1];return d=d||0,E=(E||0)*l,[Ut,ne].indexOf(s)>=0?{x:E,y:d}:{x:d,y:E}}function Zc(o){var t=o.state,n=o.options,s=o.name,l=n.offset,h=l===void 0?[0,0]:l,d=cs.reduce(function(x,L){return x[L]=Jc(L,t.rects,h),x},{}),E=d[t.placement],D=E.x,M=E.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=D,t.modifiersData.popperOffsets.y+=M),t.modifiersData[s]=d}const ha={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Zc};function tl(o){var t=o.state,n=o.name;t.modifiersData[n]=la({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const ys={name:"popperOffsets",enabled:!0,phase:"read",fn:tl,data:{}};function el(o){return o==="x"?"y":"x"}function nl(o){var t=o.state,n=o.options,s=o.name,l=n.mainAxis,h=l===void 0?!0:l,d=n.altAxis,E=d===void 0?!1:d,D=n.boundary,M=n.rootBoundary,x=n.altBoundary,L=n.padding,X=n.tether,G=X===void 0?!0:X,ot=n.tetherOffset,et=ot===void 0?0:ot,pt=Cn(t,{boundary:D,rootBoundary:M,padding:L,altBoundary:x}),bt=me(t.placement),wt=On(t.placement),Tt=!wt,it=hs(bt),dt=el(it),rt=t.modifiersData.popperOffsets,lt=t.rects.reference,$t=t.rects.popper,Ct=typeof et=="function"?et(Object.assign({},t.rects,{placement:t.placement})):et,ct=typeof Ct=="number"?{mainAxis:Ct,altAxis:Ct}:Object.assign({mainAxis:0,altAxis:0},Ct),nt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Nt={x:0,y:0};if(rt){if(h){var At,Z=it==="y"?Yt:Ut,q=it==="y"?ee:ne,R=it==="y"?"height":"width",Y=rt[it],H=Y+pt[Z],Q=Y-pt[q],J=G?-$t[R]/2:0,vt=wt===nn?lt[R]:$t[R],Et=wt===nn?-$t[R]:-lt[R],_t=t.elements.arrow,St=G&&_t?fs(_t):{width:0,height:0},Ot=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:ia(),Pt=Ot[Z],Ht=Ot[q],Vt=Un(0,lt[R],St[R]),U=Tt?lt[R]/2-J-Vt-Pt-ct.mainAxis:vt-Vt-Pt-ct.mainAxis,It=Tt?-lt[R]/2+J+Vt+Ht+ct.mainAxis:Et+Vt+Ht+ct.mainAxis,Kt=t.elements.arrow&&Gn(t.elements.arrow),mt=Kt?it==="y"?Kt.clientTop||0:Kt.clientLeft||0:0,Zt=(At=nt==null?void 0:nt[it])!=null?At:0,Zr=Y+U-Zt-mt,ye=Y+It-Zt,er=Un(G?jr(H,Zr):H,Y,G?en(Q,ye):Q);rt[it]=er,Nt[it]=er-Y}if(E){var nr,ti=it==="x"?Yt:Ut,ei=it==="x"?ee:ne,le=rt[dt],qt=dt==="y"?"height":"width",Ln=le+pt[ti],Oe=le-pt[ei],cn=[Yt,Ut].indexOf(bt)!==-1,Ce=(nr=nt==null?void 0:nt[dt])!=null?nr:0,De=cn?Ln:le-lt[qt]-$t[qt]-Ce+ct.altAxis,ln=cn?le+lt[qt]+$t[qt]-Ce-ct.altAxis:Oe,$e=G&&cn?Lc(De,le,ln):Un(G?De:Ln,le,G?ln:Oe);rt[dt]=$e,Nt[dt]=$e-le}t.modifiersData[s]=Nt}}const da={name:"preventOverflow",enabled:!0,phase:"main",fn:nl,requiresIfExists:["offset"]};function rl(o){return{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}}function il(o){return o===re(o)||!se(o)?ms(o):rl(o)}function sl(o){var t=o.getBoundingClientRect(),n=An(t.width)/o.offsetWidth||1,s=An(t.height)/o.offsetHeight||1;return n!==1||s!==1}function ol(o,t,n){n===void 0&&(n=!1);var s=se(t),l=se(t)&&sl(t),h=Be(t),d=Sn(o,l,n),E={scrollLeft:0,scrollTop:0},D={x:0,y:0};return(s||!s&&!n)&&((ge(t)!=="body"||gs(h))&&(E=il(t)),se(t)?(D=Sn(t,!0),D.x+=t.clientLeft,D.y+=t.clientTop):h&&(D.x=vs(h))),{x:d.left+E.scrollLeft-D.x,y:d.top+E.scrollTop-D.y,width:d.width,height:d.height}}function al(o){var t=new Map,n=new Set,s=[];o.forEach(function(h){t.set(h.name,h)});function l(h){n.add(h.name);var d=[].concat(h.requires||[],h.requiresIfExists||[]);d.forEach(function(E){if(!n.has(E)){var D=t.get(E);D&&l(D)}}),s.push(h)}return o.forEach(function(h){n.has(h.name)||l(h)}),s}function cl(o){var t=al(o);return ea.reduce(function(n,s){return n.concat(t.filter(function(l){return l.phase===s}))},[])}function ll(o){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(o())})})),t}}function ul(o){var t=o.reduce(function(n,s){var l=n[s.name];return n[s.name]=l?Object.assign({},l,s,{options:Object.assign({},l.options,s.options),data:Object.assign({},l.data,s.data)}):s,n},{});return Object.keys(t).map(function(n){return t[n]})}var co={placement:"bottom",modifiers:[],strategy:"absolute"};function lo(){for(var o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Ur(o){o===void 0&&(o={});var t=o,n=t.defaultModifiers,s=n===void 0?[]:n,l=t.defaultOptions,h=l===void 0?co:l;return function(E,D,M){M===void 0&&(M=h);var x={placement:"bottom",orderedModifiers:[],options:Object.assign({},co,h),modifiersData:{},elements:{reference:E,popper:D},attributes:{},styles:{}},L=[],X=!1,G={state:x,setOptions:function(bt){var wt=typeof bt=="function"?bt(x.options):bt;et(),x.options=Object.assign({},h,x.options,wt),x.scrollParents={reference:rn(E)?zn(E):E.contextElement?zn(E.contextElement):[],popper:zn(D)};var Tt=cl(ul([].concat(s,x.options.modifiers)));return x.orderedModifiers=Tt.filter(function(it){return it.enabled}),ot(),G.update()},forceUpdate:function(){if(!X){var bt=x.elements,wt=bt.reference,Tt=bt.popper;if(lo(wt,Tt)){x.rects={reference:ol(wt,Gn(Tt),x.options.strategy==="fixed"),popper:fs(Tt)},x.reset=!1,x.placement=x.options.placement,x.orderedModifiers.forEach(function(ct){return x.modifiersData[ct.name]=Object.assign({},ct.data)});for(var it=0;it<x.orderedModifiers.length;it++){if(x.reset===!0){x.reset=!1,it=-1;continue}var dt=x.orderedModifiers[it],rt=dt.fn,lt=dt.options,$t=lt===void 0?{}:lt,Ct=dt.name;typeof rt=="function"&&(x=rt({state:x,options:$t,name:Ct,instance:G})||x)}}}},update:ll(function(){return new Promise(function(pt){G.forceUpdate(),pt(x)})}),destroy:function(){et(),X=!0}};if(!lo(E,D))return G;G.setOptions(M).then(function(pt){!X&&M.onFirstUpdate&&M.onFirstUpdate(pt)});function ot(){x.orderedModifiers.forEach(function(pt){var bt=pt.name,wt=pt.options,Tt=wt===void 0?{}:wt,it=pt.effect;if(typeof it=="function"){var dt=it({state:x,name:bt,instance:G,options:Tt}),rt=function(){};L.push(dt||rt)}})}function et(){L.forEach(function(pt){return pt()}),L=[]}return G}}var fl=Ur(),hl=[ps,ys,ds,us],dl=Ur({defaultModifiers:hl}),pl=[ps,ys,ds,us,ha,ua,da,aa,fa],_s=Ur({defaultModifiers:pl});const pa=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Qo,afterRead:zo,afterWrite:ta,applyStyles:us,arrow:aa,auto:Wr,basePlacements:$n,beforeMain:Xo,beforeRead:Yo,beforeWrite:Jo,bottom:ee,clippingParents:Fo,computeStyles:ds,createPopper:_s,createPopperBase:fl,createPopperLite:dl,detectOverflow:Cn,end:Tn,eventListeners:ps,flip:ua,hide:fa,left:Ut,main:Go,modifierPhases:ea,offset:ha,placements:cs,popper:_n,popperGenerator:Ur,popperOffsets:ys,preventOverflow:da,read:Uo,reference:Wo,right:ne,start:nn,top:Yt,variationPlacements:Qi,viewport:as,write:Zo},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Re=new Map,Mi={set(o,t,n){Re.has(o)||Re.set(o,new Map);const s=Re.get(o);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,n)},get(o,t){return Re.has(o)&&Re.get(o).get(t)||null},remove(o,t){if(!Re.has(o))return;const n=Re.get(o);n.delete(t),n.size===0&&Re.delete(o)}},ml=1e6,vl=1e3,ts="transitionend",ma=o=>(o&&window.CSS&&window.CSS.escape&&(o=o.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`)),o),gl=o=>o==null?`${o}`:Object.prototype.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase(),yl=o=>{do o+=Math.floor(Math.random()*ml);while(document.getElementById(o));return o},_l=o=>{if(!o)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(o);const s=Number.parseFloat(t),l=Number.parseFloat(n);return!s&&!l?0:(t=t.split(",")[0],n=n.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(n))*vl)},va=o=>{o.dispatchEvent(new Event(ts))},we=o=>!o||typeof o!="object"?!1:(typeof o.jquery<"u"&&(o=o[0]),typeof o.nodeType<"u"),Ke=o=>we(o)?o.jquery?o[0]:o:typeof o=="string"&&o.length>0?document.querySelector(ma(o)):null,xn=o=>{if(!we(o)||o.getClientRects().length===0)return!1;const t=getComputedStyle(o).getPropertyValue("visibility")==="visible",n=o.closest("details:not([open])");if(!n)return t;if(n!==o){const s=o.closest("summary");if(s&&s.parentNode!==n||s===null)return!1}return t},He=o=>!o||o.nodeType!==Node.ELEMENT_NODE||o.classList.contains("disabled")?!0:typeof o.disabled<"u"?o.disabled:o.hasAttribute("disabled")&&o.getAttribute("disabled")!=="false",ga=o=>{if(!document.documentElement.attachShadow)return null;if(typeof o.getRootNode=="function"){const t=o.getRootNode();return t instanceof ShadowRoot?t:null}return o instanceof ShadowRoot?o:o.parentNode?ga(o.parentNode):null},Br=()=>{},Qn=o=>{o.offsetHeight},ya=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ri=[],bl=o=>{document.readyState==="loading"?(Ri.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Ri)t()}),Ri.push(o)):o()},oe=()=>document.documentElement.dir==="rtl",ce=o=>{bl(()=>{const t=ya();if(t){const n=o.NAME,s=t.fn[n];t.fn[n]=o.jQueryInterface,t.fn[n].Constructor=o,t.fn[n].noConflict=()=>(t.fn[n]=s,o.jQueryInterface)}})},Qt=(o,t=[],n=o)=>typeof o=="function"?o(...t):n,_a=(o,t,n=!0)=>{if(!n){Qt(o);return}const l=_l(t)+5;let h=!1;const d=({target:E})=>{E===t&&(h=!0,t.removeEventListener(ts,d),Qt(o))};t.addEventListener(ts,d),setTimeout(()=>{h||va(t)},l)},bs=(o,t,n,s)=>{const l=o.length;let h=o.indexOf(t);return h===-1?!n&&s?o[l-1]:o[0]:(h+=n?1:-1,s&&(h=(h+l)%l),o[Math.max(0,Math.min(h,l-1))])},El=/[^.]*(?=\..*)\.|.*/,wl=/\..*/,Tl=/::\d+$/,Ki={};let uo=1;const ba={mouseenter:"mouseover",mouseleave:"mouseout"},Al=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ea(o,t){return t&&`${t}::${uo++}`||o.uidEvent||uo++}function wa(o){const t=Ea(o);return o.uidEvent=t,Ki[t]=Ki[t]||{},Ki[t]}function Sl(o,t){return function n(s){return Es(s,{delegateTarget:o}),n.oneOff&&N.off(o,s.type,t),t.apply(o,[s])}}function Ol(o,t,n){return function s(l){const h=o.querySelectorAll(t);for(let{target:d}=l;d&&d!==this;d=d.parentNode)for(const E of h)if(E===d)return Es(l,{delegateTarget:d}),s.oneOff&&N.off(o,l.type,t,n),n.apply(d,[l])}}function Ta(o,t,n=null){return Object.values(o).find(s=>s.callable===t&&s.delegationSelector===n)}function Aa(o,t,n){const s=typeof t=="string",l=s?n:t||n;let h=Sa(o);return Al.has(h)||(h=o),[s,l,h]}function fo(o,t,n,s,l){if(typeof t!="string"||!o)return;let[h,d,E]=Aa(t,n,s);t in ba&&(d=(ot=>function(et){if(!et.relatedTarget||et.relatedTarget!==et.delegateTarget&&!et.delegateTarget.contains(et.relatedTarget))return ot.call(this,et)})(d));const D=wa(o),M=D[E]||(D[E]={}),x=Ta(M,d,h?n:null);if(x){x.oneOff=x.oneOff&&l;return}const L=Ea(d,t.replace(El,"")),X=h?Ol(o,n,d):Sl(o,d);X.delegationSelector=h?n:null,X.callable=d,X.oneOff=l,X.uidEvent=L,M[L]=X,o.addEventListener(E,X,h)}function es(o,t,n,s,l){const h=Ta(t[n],s,l);h&&(o.removeEventListener(n,h,!!l),delete t[n][h.uidEvent])}function Cl(o,t,n,s){const l=t[n]||{};for(const[h,d]of Object.entries(l))h.includes(s)&&es(o,t,n,d.callable,d.delegationSelector)}function Sa(o){return o=o.replace(wl,""),ba[o]||o}const N={on(o,t,n,s){fo(o,t,n,s,!1)},one(o,t,n,s){fo(o,t,n,s,!0)},off(o,t,n,s){if(typeof t!="string"||!o)return;const[l,h,d]=Aa(t,n,s),E=d!==t,D=wa(o),M=D[d]||{},x=t.startsWith(".");if(typeof h<"u"){if(!Object.keys(M).length)return;es(o,D,d,h,l?n:null);return}if(x)for(const L of Object.keys(D))Cl(o,D,L,t.slice(1));for(const[L,X]of Object.entries(M)){const G=L.replace(Tl,"");(!E||t.includes(G))&&es(o,D,d,X.callable,X.delegationSelector)}},trigger(o,t,n){if(typeof t!="string"||!o)return null;const s=ya(),l=Sa(t),h=t!==l;let d=null,E=!0,D=!0,M=!1;h&&s&&(d=s.Event(t,n),s(o).trigger(d),E=!d.isPropagationStopped(),D=!d.isImmediatePropagationStopped(),M=d.isDefaultPrevented());const x=Es(new Event(t,{bubbles:E,cancelable:!0}),n);return M&&x.preventDefault(),D&&o.dispatchEvent(x),x.defaultPrevented&&d&&d.preventDefault(),x}};function Es(o,t={}){for(const[n,s]of Object.entries(t))try{o[n]=s}catch{Object.defineProperty(o,n,{configurable:!0,get(){return s}})}return o}function ho(o){if(o==="true")return!0;if(o==="false")return!1;if(o===Number(o).toString())return Number(o);if(o===""||o==="null")return null;if(typeof o!="string")return o;try{return JSON.parse(decodeURIComponent(o))}catch{return o}}function Hi(o){return o.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const Te={setDataAttribute(o,t,n){o.setAttribute(`data-bs-${Hi(t)}`,n)},removeDataAttribute(o,t){o.removeAttribute(`data-bs-${Hi(t)}`)},getDataAttributes(o){if(!o)return{};const t={},n=Object.keys(o.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of n){let l=s.replace(/^bs/,"");l=l.charAt(0).toLowerCase()+l.slice(1,l.length),t[l]=ho(o.dataset[s])}return t},getDataAttribute(o,t){return ho(o.getAttribute(`data-bs-${Hi(t)}`))}};class Jn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,n){const s=we(n)?Te.getDataAttribute(n,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...we(n)?Te.getDataAttributes(n):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,n=this.constructor.DefaultType){for(const[s,l]of Object.entries(n)){const h=t[s],d=we(h)?"element":gl(h);if(!new RegExp(l).test(d))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${d}" but expected type "${l}".`)}}}const Dl="5.3.3";class he extends Jn{constructor(t,n){super(),t=Ke(t),t&&(this._element=t,this._config=this._getConfig(n),Mi.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Mi.remove(this._element,this.constructor.DATA_KEY),N.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,n,s=!0){_a(t,n,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Mi.get(Ke(t),this.DATA_KEY)}static getOrCreateInstance(t,n={}){return this.getInstance(t)||new this(t,typeof n=="object"?n:null)}static get VERSION(){return Dl}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const ji=o=>{let t=o.getAttribute("data-bs-target");if(!t||t==="#"){let n=o.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&n!=="#"?n.trim():null}return t?t.split(",").map(n=>ma(n)).join(","):null},tt={find(o,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,o))},findOne(o,t=document.documentElement){return Element.prototype.querySelector.call(t,o)},children(o,t){return[].concat(...o.children).filter(n=>n.matches(t))},parents(o,t){const n=[];let s=o.parentNode.closest(t);for(;s;)n.push(s),s=s.parentNode.closest(t);return n},prev(o,t){let n=o.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(o,t){let n=o.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(o){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(n=>`${n}:not([tabindex^="-"])`).join(",");return this.find(t,o).filter(n=>!He(n)&&xn(n))},getSelectorFromElement(o){const t=ji(o);return t&&tt.findOne(t)?t:null},getElementFromSelector(o){const t=ji(o);return t?tt.findOne(t):null},getMultipleElementsFromSelector(o){const t=ji(o);return t?tt.find(t):[]}},zr=(o,t="hide")=>{const n=`click.dismiss${o.EVENT_KEY}`,s=o.NAME;N.on(document,n,`[data-bs-dismiss="${s}"]`,function(l){if(["A","AREA"].includes(this.tagName)&&l.preventDefault(),He(this))return;const h=tt.getElementFromSelector(this)||this.closest(`.${s}`);o.getOrCreateInstance(h)[t]()})},$l="alert",xl="bs.alert",Oa=`.${xl}`,Nl=`close${Oa}`,kl=`closed${Oa}`,Ll="fade",Pl="show";class Xr extends he{static get NAME(){return $l}close(){if(N.trigger(this._element,Nl).defaultPrevented)return;this._element.classList.remove(Pl);const n=this._element.classList.contains(Ll);this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),N.trigger(this._element,kl),this.dispose()}static jQueryInterface(t){return this.each(function(){const n=Xr.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}zr(Xr,"close");ce(Xr);const Il="button",Ml="bs.button",Rl=`.${Ml}`,Kl=".data-api",Hl="active",po='[data-bs-toggle="button"]',jl=`click${Rl}${Kl}`;class Gr extends he{static get NAME(){return Il}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(Hl))}static jQueryInterface(t){return this.each(function(){const n=Gr.getOrCreateInstance(this);t==="toggle"&&n[t]()})}}N.on(document,jl,po,o=>{o.preventDefault();const t=o.target.closest(po);Gr.getOrCreateInstance(t).toggle()});ce(Gr);const Bl="swipe",Nn=".bs.swipe",Vl=`touchstart${Nn}`,ql=`touchmove${Nn}`,Fl=`touchend${Nn}`,Wl=`pointerdown${Nn}`,Yl=`pointerup${Nn}`,Ul="touch",zl="pen",Xl="pointer-event",Gl=40,Ql={endCallback:null,leftCallback:null,rightCallback:null},Jl={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Vr extends Jn{constructor(t,n){super(),this._element=t,!(!t||!Vr.isSupported())&&(this._config=this._getConfig(n),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Ql}static get DefaultType(){return Jl}static get NAME(){return Bl}dispose(){N.off(this._element,Nn)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Qt(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Gl)return;const n=t/this._deltaX;this._deltaX=0,n&&Qt(n>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(N.on(this._element,Wl,t=>this._start(t)),N.on(this._element,Yl,t=>this._end(t)),this._element.classList.add(Xl)):(N.on(this._element,Vl,t=>this._start(t)),N.on(this._element,ql,t=>this._move(t)),N.on(this._element,Fl,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===zl||t.pointerType===Ul)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Zl="carousel",tu="bs.carousel",Ve=`.${tu}`,Ca=".data-api",eu="ArrowLeft",nu="ArrowRight",ru=500,Wn="next",gn="prev",bn="left",Rr="right",iu=`slide${Ve}`,Bi=`slid${Ve}`,su=`keydown${Ve}`,ou=`mouseenter${Ve}`,au=`mouseleave${Ve}`,cu=`dragstart${Ve}`,lu=`load${Ve}${Ca}`,uu=`click${Ve}${Ca}`,Da="carousel",xr="active",fu="slide",hu="carousel-item-end",du="carousel-item-start",pu="carousel-item-next",mu="carousel-item-prev",$a=".active",xa=".carousel-item",vu=$a+xa,gu=".carousel-item img",yu=".carousel-indicators",_u="[data-bs-slide], [data-bs-slide-to]",bu='[data-bs-ride="carousel"]',Eu={[eu]:Rr,[nu]:bn},wu={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Tu={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Zn extends he{constructor(t,n){super(t,n),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=tt.findOne(yu,this._element),this._addEventListeners(),this._config.ride===Da&&this.cycle()}static get Default(){return wu}static get DefaultType(){return Tu}static get NAME(){return Zl}next(){this._slide(Wn)}nextWhenVisible(){!document.hidden&&xn(this._element)&&this.next()}prev(){this._slide(gn)}pause(){this._isSliding&&va(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){N.one(this._element,Bi,()=>this.cycle());return}this.cycle()}}to(t){const n=this._getItems();if(t>n.length-1||t<0)return;if(this._isSliding){N.one(this._element,Bi,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const l=t>s?Wn:gn;this._slide(l,n[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&N.on(this._element,su,t=>this._keydown(t)),this._config.pause==="hover"&&(N.on(this._element,ou,()=>this.pause()),N.on(this._element,au,()=>this._maybeEnableCycle())),this._config.touch&&Vr.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of tt.find(gu,this._element))N.on(s,cu,l=>l.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(bn)),rightCallback:()=>this._slide(this._directionToOrder(Rr)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),ru+this._config.interval))}};this._swipeHelper=new Vr(this._element,n)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const n=Eu[t.key];n&&(t.preventDefault(),this._slide(this._directionToOrder(n)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const n=tt.findOne($a,this._indicatorsElement);n.classList.remove(xr),n.removeAttribute("aria-current");const s=tt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(xr),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const n=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=n||this._config.defaultInterval}_slide(t,n=null){if(this._isSliding)return;const s=this._getActive(),l=t===Wn,h=n||bs(this._getItems(),s,l,this._config.wrap);if(h===s)return;const d=this._getItemIndex(h),E=G=>N.trigger(this._element,G,{relatedTarget:h,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:d});if(E(iu).defaultPrevented||!s||!h)return;const M=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(d),this._activeElement=h;const x=l?du:hu,L=l?pu:mu;h.classList.add(L),Qn(h),s.classList.add(x),h.classList.add(x);const X=()=>{h.classList.remove(x,L),h.classList.add(xr),s.classList.remove(xr,L,x),this._isSliding=!1,E(Bi)};this._queueCallback(X,s,this._isAnimated()),M&&this.cycle()}_isAnimated(){return this._element.classList.contains(fu)}_getActive(){return tt.findOne(vu,this._element)}_getItems(){return tt.find(xa,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return oe()?t===bn?gn:Wn:t===bn?Wn:gn}_orderToDirection(t){return oe()?t===gn?bn:Rr:t===gn?Rr:bn}static jQueryInterface(t){return this.each(function(){const n=Zn.getOrCreateInstance(this,t);if(typeof t=="number"){n.to(t);return}if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}N.on(document,uu,_u,function(o){const t=tt.getElementFromSelector(this);if(!t||!t.classList.contains(Da))return;o.preventDefault();const n=Zn.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){n.to(s),n._maybeEnableCycle();return}if(Te.getDataAttribute(this,"slide")==="next"){n.next(),n._maybeEnableCycle();return}n.prev(),n._maybeEnableCycle()});N.on(window,lu,()=>{const o=tt.find(bu);for(const t of o)Zn.getOrCreateInstance(t)});ce(Zn);const Au="collapse",Su="bs.collapse",tr=`.${Su}`,Ou=".data-api",Cu=`show${tr}`,Du=`shown${tr}`,$u=`hide${tr}`,xu=`hidden${tr}`,Nu=`click${tr}${Ou}`,Vi="show",wn="collapse",Nr="collapsing",ku="collapsed",Lu=`:scope .${wn} .${wn}`,Pu="collapse-horizontal",Iu="width",Mu="height",Ru=".collapse.show, .collapse.collapsing",ns='[data-bs-toggle="collapse"]',Ku={parent:null,toggle:!0},Hu={parent:"(null|element)",toggle:"boolean"};class Xn extends he{constructor(t,n){super(t,n),this._isTransitioning=!1,this._triggerArray=[];const s=tt.find(ns);for(const l of s){const h=tt.getSelectorFromElement(l),d=tt.find(h).filter(E=>E===this._element);h!==null&&d.length&&this._triggerArray.push(l)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ku}static get DefaultType(){return Hu}static get NAME(){return Au}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Ru).filter(E=>E!==this._element).map(E=>Xn.getOrCreateInstance(E,{toggle:!1}))),t.length&&t[0]._isTransitioning||N.trigger(this._element,Cu).defaultPrevented)return;for(const E of t)E.hide();const s=this._getDimension();this._element.classList.remove(wn),this._element.classList.add(Nr),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const l=()=>{this._isTransitioning=!1,this._element.classList.remove(Nr),this._element.classList.add(wn,Vi),this._element.style[s]="",N.trigger(this._element,Du)},d=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(l,this._element,!0),this._element.style[s]=`${this._element[d]}px`}hide(){if(this._isTransitioning||!this._isShown()||N.trigger(this._element,$u).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,Qn(this._element),this._element.classList.add(Nr),this._element.classList.remove(wn,Vi);for(const l of this._triggerArray){const h=tt.getElementFromSelector(l);h&&!this._isShown(h)&&this._addAriaAndCollapsedClass([l],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(Nr),this._element.classList.add(wn),N.trigger(this._element,xu)};this._element.style[n]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Vi)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Ke(t.parent),t}_getDimension(){return this._element.classList.contains(Pu)?Iu:Mu}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(ns);for(const n of t){const s=tt.getElementFromSelector(n);s&&this._addAriaAndCollapsedClass([n],this._isShown(s))}}_getFirstLevelChildren(t){const n=tt.find(Lu,this._config.parent);return tt.find(t,this._config.parent).filter(s=>!n.includes(s))}_addAriaAndCollapsedClass(t,n){if(t.length)for(const s of t)s.classList.toggle(ku,!n),s.setAttribute("aria-expanded",n)}static jQueryInterface(t){const n={};return typeof t=="string"&&/show|hide/.test(t)&&(n.toggle=!1),this.each(function(){const s=Xn.getOrCreateInstance(this,n);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}N.on(document,Nu,ns,function(o){(o.target.tagName==="A"||o.delegateTarget&&o.delegateTarget.tagName==="A")&&o.preventDefault();for(const t of tt.getMultipleElementsFromSelector(this))Xn.getOrCreateInstance(t,{toggle:!1}).toggle()});ce(Xn);const mo="dropdown",ju="bs.dropdown",on=`.${ju}`,ws=".data-api",Bu="Escape",vo="Tab",Vu="ArrowUp",go="ArrowDown",qu=2,Fu=`hide${on}`,Wu=`hidden${on}`,Yu=`show${on}`,Uu=`shown${on}`,Na=`click${on}${ws}`,ka=`keydown${on}${ws}`,zu=`keyup${on}${ws}`,En="show",Xu="dropup",Gu="dropend",Qu="dropstart",Ju="dropup-center",Zu="dropdown-center",Ze='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',tf=`${Ze}.${En}`,Kr=".dropdown-menu",ef=".navbar",nf=".navbar-nav",rf=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",sf=oe()?"top-end":"top-start",of=oe()?"top-start":"top-end",af=oe()?"bottom-end":"bottom-start",cf=oe()?"bottom-start":"bottom-end",lf=oe()?"left-start":"right-start",uf=oe()?"right-start":"left-start",ff="top",hf="bottom",df={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},pf={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ve extends he{constructor(t,n){super(t,n),this._popper=null,this._parent=this._element.parentNode,this._menu=tt.next(this._element,Kr)[0]||tt.prev(this._element,Kr)[0]||tt.findOne(Kr,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return df}static get DefaultType(){return pf}static get NAME(){return mo}toggle(){return this._isShown()?this.hide():this.show()}show(){if(He(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!N.trigger(this._element,Yu,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(nf))for(const s of[].concat(...document.body.children))N.on(s,"mouseover",Br);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(En),this._element.classList.add(En),N.trigger(this._element,Uu,t)}}hide(){if(He(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!N.trigger(this._element,Fu,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))N.off(s,"mouseover",Br);this._popper&&this._popper.destroy(),this._menu.classList.remove(En),this._element.classList.remove(En),this._element.setAttribute("aria-expanded","false"),Te.removeDataAttribute(this._menu,"popper"),N.trigger(this._element,Wu,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!we(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${mo.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof pa>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:we(this._config.reference)?t=Ke(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const n=this._getPopperConfig();this._popper=_s(t,this._menu,n)}_isShown(){return this._menu.classList.contains(En)}_getPlacement(){const t=this._parent;if(t.classList.contains(Gu))return lf;if(t.classList.contains(Qu))return uf;if(t.classList.contains(Ju))return ff;if(t.classList.contains(Zu))return hf;const n=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(Xu)?n?of:sf:n?cf:af}_detectNavbar(){return this._element.closest(ef)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Te.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Qt(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:n}){const s=tt.find(rf,this._menu).filter(l=>xn(l));s.length&&bs(s,n,t===go,!s.includes(n)).focus()}static jQueryInterface(t){return this.each(function(){const n=ve.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}static clearMenus(t){if(t.button===qu||t.type==="keyup"&&t.key!==vo)return;const n=tt.find(tf);for(const s of n){const l=ve.getInstance(s);if(!l||l._config.autoClose===!1)continue;const h=t.composedPath(),d=h.includes(l._menu);if(h.includes(l._element)||l._config.autoClose==="inside"&&!d||l._config.autoClose==="outside"&&d||l._menu.contains(t.target)&&(t.type==="keyup"&&t.key===vo||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const E={relatedTarget:l._element};t.type==="click"&&(E.clickEvent=t),l._completeHide(E)}}static dataApiKeydownHandler(t){const n=/input|textarea/i.test(t.target.tagName),s=t.key===Bu,l=[Vu,go].includes(t.key);if(!l&&!s||n&&!s)return;t.preventDefault();const h=this.matches(Ze)?this:tt.prev(this,Ze)[0]||tt.next(this,Ze)[0]||tt.findOne(Ze,t.delegateTarget.parentNode),d=ve.getOrCreateInstance(h);if(l){t.stopPropagation(),d.show(),d._selectMenuItem(t);return}d._isShown()&&(t.stopPropagation(),d.hide(),h.focus())}}N.on(document,ka,Ze,ve.dataApiKeydownHandler);N.on(document,ka,Kr,ve.dataApiKeydownHandler);N.on(document,Na,ve.clearMenus);N.on(document,zu,ve.clearMenus);N.on(document,Na,Ze,function(o){o.preventDefault(),ve.getOrCreateInstance(this).toggle()});ce(ve);const La="backdrop",mf="fade",yo="show",_o=`mousedown.bs.${La}`,vf={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},gf={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Pa extends Jn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return vf}static get DefaultType(){return gf}static get NAME(){return La}show(t){if(!this._config.isVisible){Qt(t);return}this._append();const n=this._getElement();this._config.isAnimated&&Qn(n),n.classList.add(yo),this._emulateAnimation(()=>{Qt(t)})}hide(t){if(!this._config.isVisible){Qt(t);return}this._getElement().classList.remove(yo),this._emulateAnimation(()=>{this.dispose(),Qt(t)})}dispose(){this._isAppended&&(N.off(this._element,_o),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(mf),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Ke(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),N.on(t,_o,()=>{Qt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){_a(t,this._getElement(),this._config.isAnimated)}}const yf="focustrap",_f="bs.focustrap",qr=`.${_f}`,bf=`focusin${qr}`,Ef=`keydown.tab${qr}`,wf="Tab",Tf="forward",bo="backward",Af={autofocus:!0,trapElement:null},Sf={autofocus:"boolean",trapElement:"element"};class Ia extends Jn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Af}static get DefaultType(){return Sf}static get NAME(){return yf}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),N.off(document,qr),N.on(document,bf,t=>this._handleFocusin(t)),N.on(document,Ef,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,N.off(document,qr))}_handleFocusin(t){const{trapElement:n}=this._config;if(t.target===document||t.target===n||n.contains(t.target))return;const s=tt.focusableChildren(n);s.length===0?n.focus():this._lastTabNavDirection===bo?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===wf&&(this._lastTabNavDirection=t.shiftKey?bo:Tf)}}const Eo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",wo=".sticky-top",kr="padding-right",To="margin-right";class rs{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,kr,n=>n+t),this._setElementAttributes(Eo,kr,n=>n+t),this._setElementAttributes(wo,To,n=>n-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,kr),this._resetElementAttributes(Eo,kr),this._resetElementAttributes(wo,To)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,n,s){const l=this.getWidth(),h=d=>{if(d!==this._element&&window.innerWidth>d.clientWidth+l)return;this._saveInitialAttribute(d,n);const E=window.getComputedStyle(d).getPropertyValue(n);d.style.setProperty(n,`${s(Number.parseFloat(E))}px`)};this._applyManipulationCallback(t,h)}_saveInitialAttribute(t,n){const s=t.style.getPropertyValue(n);s&&Te.setDataAttribute(t,n,s)}_resetElementAttributes(t,n){const s=l=>{const h=Te.getDataAttribute(l,n);if(h===null){l.style.removeProperty(n);return}Te.removeDataAttribute(l,n),l.style.setProperty(n,h)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,n){if(we(t)){n(t);return}for(const s of tt.find(t,this._element))n(s)}}const Of="modal",Cf="bs.modal",ae=`.${Cf}`,Df=".data-api",$f="Escape",xf=`hide${ae}`,Nf=`hidePrevented${ae}`,Ma=`hidden${ae}`,Ra=`show${ae}`,kf=`shown${ae}`,Lf=`resize${ae}`,Pf=`click.dismiss${ae}`,If=`mousedown.dismiss${ae}`,Mf=`keydown.dismiss${ae}`,Rf=`click${ae}${Df}`,Ao="modal-open",Kf="fade",So="show",qi="modal-static",Hf=".modal.show",jf=".modal-dialog",Bf=".modal-body",Vf='[data-bs-toggle="modal"]',qf={backdrop:!0,focus:!0,keyboard:!0},Ff={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class sn extends he{constructor(t,n){super(t,n),this._dialog=tt.findOne(jf,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new rs,this._addEventListeners()}static get Default(){return qf}static get DefaultType(){return Ff}static get NAME(){return Of}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||N.trigger(this._element,Ra,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ao),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||N.trigger(this._element,xf).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(So),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){N.off(window,ae),N.off(this._dialog,ae),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Pa({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ia({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const n=tt.findOne(Bf,this._dialog);n&&(n.scrollTop=0),Qn(this._element),this._element.classList.add(So);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,N.trigger(this._element,kf,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){N.on(this._element,Mf,t=>{if(t.key===$f){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),N.on(window,Lf,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),N.on(this._element,If,t=>{N.one(this._element,Pf,n=>{if(!(this._element!==t.target||this._element!==n.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ao),this._resetAdjustments(),this._scrollBar.reset(),N.trigger(this._element,Ma)})}_isAnimated(){return this._element.classList.contains(Kf)}_triggerBackdropTransition(){if(N.trigger(this._element,Nf).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(qi)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(qi),this._queueCallback(()=>{this._element.classList.remove(qi),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,n=this._scrollBar.getWidth(),s=n>0;if(s&&!t){const l=oe()?"paddingLeft":"paddingRight";this._element.style[l]=`${n}px`}if(!s&&t){const l=oe()?"paddingRight":"paddingLeft";this._element.style[l]=`${n}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,n){return this.each(function(){const s=sn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](n)}})}}N.on(document,Rf,Vf,function(o){const t=tt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&o.preventDefault(),N.one(t,Ra,l=>{l.defaultPrevented||N.one(t,Ma,()=>{xn(this)&&this.focus()})});const n=tt.findOne(Hf);n&&sn.getInstance(n).hide(),sn.getOrCreateInstance(t).toggle(this)});zr(sn);ce(sn);const Wf="offcanvas",Yf="bs.offcanvas",Se=`.${Yf}`,Ka=".data-api",Uf=`load${Se}${Ka}`,zf="Escape",Oo="show",Co="showing",Do="hiding",Xf="offcanvas-backdrop",Ha=".offcanvas.show",Gf=`show${Se}`,Qf=`shown${Se}`,Jf=`hide${Se}`,$o=`hidePrevented${Se}`,ja=`hidden${Se}`,Zf=`resize${Se}`,th=`click${Se}${Ka}`,eh=`keydown.dismiss${Se}`,nh='[data-bs-toggle="offcanvas"]',rh={backdrop:!0,keyboard:!0,scroll:!1},ih={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class je extends he{constructor(t,n){super(t,n),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return rh}static get DefaultType(){return ih}static get NAME(){return Wf}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||N.trigger(this._element,Gf,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new rs().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Co);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Oo),this._element.classList.remove(Co),N.trigger(this._element,Qf,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||N.trigger(this._element,Jf).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Do),this._backdrop.hide();const n=()=>{this._element.classList.remove(Oo,Do),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new rs().reset(),N.trigger(this._element,ja)};this._queueCallback(n,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){N.trigger(this._element,$o);return}this.hide()},n=!!this._config.backdrop;return new Pa({className:Xf,isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?t:null})}_initializeFocusTrap(){return new Ia({trapElement:this._element})}_addEventListeners(){N.on(this._element,eh,t=>{if(t.key===zf){if(this._config.keyboard){this.hide();return}N.trigger(this._element,$o)}})}static jQueryInterface(t){return this.each(function(){const n=je.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}N.on(document,th,nh,function(o){const t=tt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&o.preventDefault(),He(this))return;N.one(t,ja,()=>{xn(this)&&this.focus()});const n=tt.findOne(Ha);n&&n!==t&&je.getInstance(n).hide(),je.getOrCreateInstance(t).toggle(this)});N.on(window,Uf,()=>{for(const o of tt.find(Ha))je.getOrCreateInstance(o).show()});N.on(window,Zf,()=>{for(const o of tt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(o).position!=="fixed"&&je.getOrCreateInstance(o).hide()});zr(je);ce(je);const sh=/^aria-[\w-]*$/i,Ba={"*":["class","dir","id","lang","role",sh],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},oh=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ah=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,ch=(o,t)=>{const n=o.nodeName.toLowerCase();return t.includes(n)?oh.has(n)?!!ah.test(o.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(n))};function lh(o,t,n){if(!o.length)return o;if(n&&typeof n=="function")return n(o);const l=new window.DOMParser().parseFromString(o,"text/html"),h=[].concat(...l.body.querySelectorAll("*"));for(const d of h){const E=d.nodeName.toLowerCase();if(!Object.keys(t).includes(E)){d.remove();continue}const D=[].concat(...d.attributes),M=[].concat(t["*"]||[],t[E]||[]);for(const x of D)ch(x,M)||d.removeAttribute(x.nodeName)}return l.body.innerHTML}const uh="TemplateFactory",fh={allowList:Ba,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},hh={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},dh={entry:"(string|element|function|null)",selector:"(string|element)"};class ph extends Jn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return fh}static get DefaultType(){return hh}static get NAME(){return uh}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[l,h]of Object.entries(this._config.content))this._setContent(t,h,l);const n=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&n.classList.add(...s.split(" ")),n}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[n,s]of Object.entries(t))super._typeCheckConfig({selector:n,entry:s},dh)}_setContent(t,n,s){const l=tt.findOne(s,t);if(l){if(n=this._resolvePossibleFunction(n),!n){l.remove();return}if(we(n)){this._putElementInTemplate(Ke(n),l);return}if(this._config.html){l.innerHTML=this._maybeSanitize(n);return}l.textContent=n}}_maybeSanitize(t){return this._config.sanitize?lh(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Qt(t,[this])}_putElementInTemplate(t,n){if(this._config.html){n.innerHTML="",n.append(t);return}n.textContent=t.textContent}}const mh="tooltip",vh=new Set(["sanitize","allowList","sanitizeFn"]),Fi="fade",gh="modal",Lr="show",yh=".tooltip-inner",xo=`.${gh}`,No="hide.bs.modal",Yn="hover",Wi="focus",_h="click",bh="manual",Eh="hide",wh="hidden",Th="show",Ah="shown",Sh="inserted",Oh="click",Ch="focusin",Dh="focusout",$h="mouseenter",xh="mouseleave",Nh={AUTO:"auto",TOP:"top",RIGHT:oe()?"left":"right",BOTTOM:"bottom",LEFT:oe()?"right":"left"},kh={allowList:Ba,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Lh={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class kn extends he{constructor(t,n){if(typeof pa>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,n),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return kh}static get DefaultType(){return Lh}static get NAME(){return mh}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),N.off(this._element.closest(xo),No,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=N.trigger(this._element,this.constructor.eventName(Th)),s=(ga(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const l=this._getTipElement();this._element.setAttribute("aria-describedby",l.getAttribute("id"));const{container:h}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(h.append(l),N.trigger(this._element,this.constructor.eventName(Sh))),this._popper=this._createPopper(l),l.classList.add(Lr),"ontouchstart"in document.documentElement)for(const E of[].concat(...document.body.children))N.on(E,"mouseover",Br);const d=()=>{N.trigger(this._element,this.constructor.eventName(Ah)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(d,this.tip,this._isAnimated())}hide(){if(!this._isShown()||N.trigger(this._element,this.constructor.eventName(Eh)).defaultPrevented)return;if(this._getTipElement().classList.remove(Lr),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))N.off(l,"mouseover",Br);this._activeTrigger[_h]=!1,this._activeTrigger[Wi]=!1,this._activeTrigger[Yn]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),N.trigger(this._element,this.constructor.eventName(wh)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const n=this._getTemplateFactory(t).toHtml();if(!n)return null;n.classList.remove(Fi,Lr),n.classList.add(`bs-${this.constructor.NAME}-auto`);const s=yl(this.constructor.NAME).toString();return n.setAttribute("id",s),this._isAnimated()&&n.classList.add(Fi),n}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new ph({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[yh]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Fi)}_isShown(){return this.tip&&this.tip.classList.contains(Lr)}_createPopper(t){const n=Qt(this._config.placement,[this,t,this._element]),s=Nh[n.toUpperCase()];return _s(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(n=>Number.parseInt(n,10)):typeof t=="function"?n=>t(n,this._element):t}_resolvePossibleFunction(t){return Qt(t,[this._element])}_getPopperConfig(t){const n={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...n,...Qt(this._config.popperConfig,[n])}}_setListeners(){const t=this._config.trigger.split(" ");for(const n of t)if(n==="click")N.on(this._element,this.constructor.eventName(Oh),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(n!==bh){const s=n===Yn?this.constructor.eventName($h):this.constructor.eventName(Ch),l=n===Yn?this.constructor.eventName(xh):this.constructor.eventName(Dh);N.on(this._element,s,this._config.selector,h=>{const d=this._initializeOnDelegatedTarget(h);d._activeTrigger[h.type==="focusin"?Wi:Yn]=!0,d._enter()}),N.on(this._element,l,this._config.selector,h=>{const d=this._initializeOnDelegatedTarget(h);d._activeTrigger[h.type==="focusout"?Wi:Yn]=d._element.contains(h.relatedTarget),d._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},N.on(this._element.closest(xo),No,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,n){clearTimeout(this._timeout),this._timeout=setTimeout(t,n)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const n=Te.getDataAttributes(this._element);for(const s of Object.keys(n))vh.has(s)&&delete n[s];return t={...n,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Ke(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[n,s]of Object.entries(this._config))this.constructor.Default[n]!==s&&(t[n]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const n=kn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ce(kn);const Ph="popover",Ih=".popover-header",Mh=".popover-body",Rh={...kn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Kh={...kn.DefaultType,content:"(null|string|element|function)"};class Ts extends kn{static get Default(){return Rh}static get DefaultType(){return Kh}static get NAME(){return Ph}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ih]:this._getTitle(),[Mh]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const n=Ts.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t]()}})}}ce(Ts);const Hh="scrollspy",jh="bs.scrollspy",As=`.${jh}`,Bh=".data-api",Vh=`activate${As}`,ko=`click${As}`,qh=`load${As}${Bh}`,Fh="dropdown-item",yn="active",Wh='[data-bs-spy="scroll"]',Yi="[href]",Yh=".nav, .list-group",Lo=".nav-link",Uh=".nav-item",zh=".list-group-item",Xh=`${Lo}, ${Uh} > ${Lo}, ${zh}`,Gh=".dropdown",Qh=".dropdown-toggle",Jh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Zh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Qr extends he{constructor(t,n){super(t,n),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Jh}static get DefaultType(){return Zh}static get NAME(){return Hh}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Ke(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(n=>Number.parseFloat(n))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(N.off(this._config.target,ko),N.on(this._config.target,ko,Yi,t=>{const n=this._observableSections.get(t.target.hash);if(n){t.preventDefault();const s=this._rootElement||window,l=n.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:l,behavior:"smooth"});return}s.scrollTop=l}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(n=>this._observerCallback(n),t)}_observerCallback(t){const n=d=>this._targetLinks.get(`#${d.target.id}`),s=d=>{this._previousScrollData.visibleEntryTop=d.target.offsetTop,this._process(n(d))},l=(this._rootElement||document.documentElement).scrollTop,h=l>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=l;for(const d of t){if(!d.isIntersecting){this._activeTarget=null,this._clearActiveClass(n(d));continue}const E=d.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(h&&E){if(s(d),!l)return;continue}!h&&!E&&s(d)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=tt.find(Yi,this._config.target);for(const n of t){if(!n.hash||He(n))continue;const s=tt.findOne(decodeURI(n.hash),this._element);xn(s)&&(this._targetLinks.set(decodeURI(n.hash),n),this._observableSections.set(n.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(yn),this._activateParents(t),N.trigger(this._element,Vh,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Fh)){tt.findOne(Qh,t.closest(Gh)).classList.add(yn);return}for(const n of tt.parents(t,Yh))for(const s of tt.prev(n,Xh))s.classList.add(yn)}_clearActiveClass(t){t.classList.remove(yn);const n=tt.find(`${Yi}.${yn}`,t);for(const s of n)s.classList.remove(yn)}static jQueryInterface(t){return this.each(function(){const n=Qr.getOrCreateInstance(this,t);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}N.on(window,qh,()=>{for(const o of tt.find(Wh))Qr.getOrCreateInstance(o)});ce(Qr);const td="tab",ed="bs.tab",an=`.${ed}`,nd=`hide${an}`,rd=`hidden${an}`,id=`show${an}`,sd=`shown${an}`,od=`click${an}`,ad=`keydown${an}`,cd=`load${an}`,ld="ArrowLeft",Po="ArrowRight",ud="ArrowUp",Io="ArrowDown",Ui="Home",Mo="End",tn="active",Ro="fade",zi="show",fd="dropdown",Va=".dropdown-toggle",hd=".dropdown-menu",Xi=`:not(${Va})`,dd='.list-group, .nav, [role="tablist"]',pd=".nav-item, .list-group-item",md=`.nav-link${Xi}, .list-group-item${Xi}, [role="tab"]${Xi}`,qa='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Gi=`${md}, ${qa}`,vd=`.${tn}[data-bs-toggle="tab"], .${tn}[data-bs-toggle="pill"], .${tn}[data-bs-toggle="list"]`;class Dn extends he{constructor(t){super(t),this._parent=this._element.closest(dd),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),N.on(this._element,ad,n=>this._keydown(n)))}static get NAME(){return td}show(){const t=this._element;if(this._elemIsActive(t))return;const n=this._getActiveElem(),s=n?N.trigger(n,nd,{relatedTarget:t}):null;N.trigger(t,id,{relatedTarget:n}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(n,t),this._activate(t,n))}_activate(t,n){if(!t)return;t.classList.add(tn),this._activate(tt.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(zi);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),N.trigger(t,sd,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Ro))}_deactivate(t,n){if(!t)return;t.classList.remove(tn),t.blur(),this._deactivate(tt.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(zi);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),N.trigger(t,rd,{relatedTarget:n})};this._queueCallback(s,t,t.classList.contains(Ro))}_keydown(t){if(![ld,Po,ud,Io,Ui,Mo].includes(t.key))return;t.stopPropagation(),t.preventDefault();const n=this._getChildren().filter(l=>!He(l));let s;if([Ui,Mo].includes(t.key))s=n[t.key===Ui?0:n.length-1];else{const l=[Po,Io].includes(t.key);s=bs(n,t.target,l,!0)}s&&(s.focus({preventScroll:!0}),Dn.getOrCreateInstance(s).show())}_getChildren(){return tt.find(Gi,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,n){this._setAttributeIfNotExists(t,"role","tablist");for(const s of n)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const n=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",n),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),n||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const n=tt.getElementFromSelector(t);n&&(this._setAttributeIfNotExists(n,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(n,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,n){const s=this._getOuterElement(t);if(!s.classList.contains(fd))return;const l=(h,d)=>{const E=tt.findOne(h,s);E&&E.classList.toggle(d,n)};l(Va,tn),l(hd,zi),s.setAttribute("aria-expanded",n)}_setAttributeIfNotExists(t,n,s){t.hasAttribute(n)||t.setAttribute(n,s)}_elemIsActive(t){return t.classList.contains(tn)}_getInnerElement(t){return t.matches(Gi)?t:tt.findOne(Gi,t)}_getOuterElement(t){return t.closest(pd)||t}static jQueryInterface(t){return this.each(function(){const n=Dn.getOrCreateInstance(this);if(typeof t=="string"){if(n[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);n[t]()}})}}N.on(document,od,qa,function(o){["A","AREA"].includes(this.tagName)&&o.preventDefault(),!He(this)&&Dn.getOrCreateInstance(this).show()});N.on(window,cd,()=>{for(const o of tt.find(vd))Dn.getOrCreateInstance(o)});ce(Dn);const gd="toast",yd="bs.toast",qe=`.${yd}`,_d=`mouseover${qe}`,bd=`mouseout${qe}`,Ed=`focusin${qe}`,wd=`focusout${qe}`,Td=`hide${qe}`,Ad=`hidden${qe}`,Sd=`show${qe}`,Od=`shown${qe}`,Cd="fade",Ko="hide",Pr="show",Ir="showing",Dd={animation:"boolean",autohide:"boolean",delay:"number"},$d={animation:!0,autohide:!0,delay:5e3};class Jr extends he{constructor(t,n){super(t,n),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return $d}static get DefaultType(){return Dd}static get NAME(){return gd}show(){if(N.trigger(this._element,Sd).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Cd);const n=()=>{this._element.classList.remove(Ir),N.trigger(this._element,Od),this._maybeScheduleHide()};this._element.classList.remove(Ko),Qn(this._element),this._element.classList.add(Pr,Ir),this._queueCallback(n,this._element,this._config.animation)}hide(){if(!this.isShown()||N.trigger(this._element,Td).defaultPrevented)return;const n=()=>{this._element.classList.add(Ko),this._element.classList.remove(Ir,Pr),N.trigger(this._element,Ad)};this._element.classList.add(Ir),this._queueCallback(n,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Pr),super.dispose()}isShown(){return this._element.classList.contains(Pr)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,n){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=n;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=n;break}}if(n){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){N.on(this._element,_d,t=>this._onInteraction(t,!0)),N.on(this._element,bd,t=>this._onInteraction(t,!1)),N.on(this._element,Ed,t=>this._onInteraction(t,!0)),N.on(this._element,wd,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const n=Jr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof n[t]>"u")throw new TypeError(`No method named "${t}"`);n[t](this)}})}}zr(Jr);ce(Jr);class xd{constructor(){j(this,"id","ticketModal");j(this,"modal",null);j(this,"ticketId",null);const t=document.querySelector(`#${this.id}`);t&&(this.modal=new sn(t))}handler(){const t=document.querySelector("#btnRedirectTicket");t&&t.addEventListener("click",()=>{this.modal&&(this.modal.hide(),console.log(`redirect to ticket ${this.ticketId}`),window.location.href=`/ticket?id=${this.ticketId}`)})}show(t){if(this.modal&&t.ticket){this.ticketId=t.ticket.id;const n=document.querySelector("#modal_ticket_id");n&&(n.textContent=t.ticket.id_disp??"");const s=document.querySelector("#ticket_name");s&&(s.value=t.ticket.name??"");const l=document.querySelector("#description");if(l&&(l.innerHTML=t.ticket.description??""),t.members&&t.members.length>0){const x=document.querySelector("#members");if(x){let L='<table class="table table-hover">';L+="<thead>",L+="<tr>",L+='<th scope="col">メールアドレス</th>',L+='<th scope="col">名前</th>',L+="</tr>",L+="</thead>",L+="<tbody>";for(const X of t.members)L+="<tr>",L+=`<td>${X.email}</td>`,L+=`<td>${X.name}</td>`,L+="</tr>";L+="</tbody>",L+="</table>",x.innerHTML=L}}const h=document.querySelector("#start_date");if(h){let x='<label class="form-label" for="startdate">開始日</label>';x+=`<input class="form-control" id="startdate" type="date" value="${t.ticket.start_date??""}">`,h.innerHTML=x}const d=document.querySelector("#end_date");if(d){let x='<label class="form-label" for="enddate">終了日</label>';x+=`<input class="form-control" id="enddate" type="date" value="${t.ticket.end_date??""}">`,d.innerHTML=x}const E=document.querySelector("#progress");E&&(E.value=`${t.ticket.progress}`);const D=document.querySelector("#finished");D&&(D.checked=t.ticket.progress===100);const M=document.querySelector(`#priority${t.ticket.priority}`);if(M&&(M.checked=!0),t.parent){const x=document.querySelector("#parent");x&&(x.innerHTML=`${t.parent.id_disp}&nbsp;&nbsp;${t.parent.name}`)}if(t.children){const x=document.querySelector("#children");if(x){let L="";for(const X of t.children)L+=`<p class="mb-0">${X.id_disp}&nbsp;&nbsp;${X.name}</p>`;x.innerHTML=L}}this.modal.show()}}hide(){this.modal&&this.modal.hide()}}var Fa={exports:{}};(function(o,t){(function(n,s){o.exports=s()})(Hr,function(){var n=function(e,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])})(e,r)},s=function(){return(s=Object.assign||function(e){for(var r,i=1,a=arguments.length;i<a;i++)for(var c in r=arguments[i])Object.prototype.hasOwnProperty.call(r,c)&&(e[c]=r[c]);return e}).apply(this,arguments)};function l(e,r,i){for(var a,c=0,u=r.length;c<u;c++)!a&&c in r||((a=a||Array.prototype.slice.call(r,0,c))[c]=r[c]);return e.concat(a||Array.prototype.slice.call(r))}var h=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Hr,d=Object.keys,E=Array.isArray;function D(e,r){return typeof r!="object"||d(r).forEach(function(i){e[i]=r[i]}),e}typeof Promise>"u"||h.Promise||(h.Promise=Promise);var M=Object.getPrototypeOf,x={}.hasOwnProperty;function L(e,r){return x.call(e,r)}function X(e,r){typeof r=="function"&&(r=r(M(e))),(typeof Reflect>"u"?d:Reflect.ownKeys)(r).forEach(function(i){ot(e,i,r[i])})}var G=Object.defineProperty;function ot(e,r,i,a){G(e,r,D(i&&L(i,"get")&&typeof i.get=="function"?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},a))}function et(e){return{from:function(r){return e.prototype=Object.create(r.prototype),ot(e.prototype,"constructor",e),{extend:X.bind(null,e.prototype)}}}}var pt=Object.getOwnPropertyDescriptor,bt=[].slice;function wt(e,r,i){return bt.call(e,r,i)}function Tt(e,r){return r(e)}function it(e){if(!e)throw new Error("Assertion Failed")}function dt(e){h.setImmediate?setImmediate(e):setTimeout(e,0)}function rt(e,r){if(typeof r=="string"&&L(e,r))return e[r];if(!r)return e;if(typeof r!="string"){for(var i=[],a=0,c=r.length;a<c;++a){var u=rt(e,r[a]);i.push(u)}return i}var f=r.indexOf(".");if(f!==-1){var p=e[r.substr(0,f)];return p==null?void 0:rt(p,r.substr(f+1))}}function lt(e,r,i){if(e&&r!==void 0&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof r!="string"&&"length"in r){it(typeof i!="string"&&"length"in i);for(var a=0,c=r.length;a<c;++a)lt(e,r[a],i[a])}else{var u,f,p=r.indexOf(".");p!==-1?(u=r.substr(0,p),(f=r.substr(p+1))===""?i===void 0?E(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=i:lt(p=!(p=e[u])||!L(e,u)?e[u]={}:p,f,i)):i===void 0?E(e)&&!isNaN(parseInt(r))?e.splice(r,1):delete e[r]:e[r]=i}}function $t(e){var r,i={};for(r in e)L(e,r)&&(i[r]=e[r]);return i}var Ct=[].concat;function ct(e){return Ct.apply([],e)}var be="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ct([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(r){return r+e+"Array"})}))).filter(function(e){return h[e]}),nt=new Set(be.map(function(e){return h[e]})),Nt=null;function At(e){return Nt=new WeakMap,e=function r(i){if(!i||typeof i!="object")return i;var a=Nt.get(i);if(a)return a;if(E(i)){a=[],Nt.set(i,a);for(var c=0,u=i.length;c<u;++c)a.push(r(i[c]))}else if(nt.has(i.constructor))a=i;else{var f,p=M(i);for(f in a=p===Object.prototype?{}:Object.create(p),Nt.set(i,a),i)L(i,f)&&(a[f]=r(i[f]))}return a}(e),Nt=null,e}var Z={}.toString;function q(e){return Z.call(e).slice(8,-1)}var R=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Y=typeof R=="symbol"?function(e){var r;return e!=null&&(r=e[R])&&r.apply(e)}:function(){return null};function H(e,r){return r=e.indexOf(r),0<=r&&e.splice(r,1),0<=r}var Q={};function J(e){var r,i,a,c;if(arguments.length===1){if(E(e))return e.slice();if(this===Q&&typeof e=="string")return[e];if(c=Y(e)){for(i=[];!(a=c.next()).done;)i.push(a.value);return i}if(e==null)return[e];if(typeof(r=e.length)!="number")return[e];for(i=new Array(r);r--;)i[r]=e[r];return i}for(r=arguments.length,i=new Array(r);r--;)i[r]=arguments[r];return i}var vt=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ce=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ie=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ce),Et={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _t(e,r){this.name=e,this.message=r}function St(e,r){return e+". Errors: "+Object.keys(r).map(function(i){return r[i].toString()}).filter(function(i,a,c){return c.indexOf(i)===a}).join(`
`)}function Ot(e,r,i,a){this.failures=r,this.failedKeys=a,this.successCount=i,this.message=St(e,r)}function Pt(e,r){this.name="BulkError",this.failures=Object.keys(r).map(function(i){return r[i]}),this.failuresByPos=r,this.message=St(e,this.failures)}et(_t).from(Error).extend({toString:function(){return this.name+": "+this.message}}),et(Ot).from(_t),et(Pt).from(_t);var Ht=ie.reduce(function(e,r){return e[r]=r+"Error",e},{}),Vt=_t,U=ie.reduce(function(e,r){var i=r+"Error";function a(c,u){this.name=i,c?typeof c=="string"?(this.message="".concat(c).concat(u?`
 `+u:""),this.inner=u||null):typeof c=="object"&&(this.message="".concat(c.name," ").concat(c.message),this.inner=c):(this.message=Et[r]||i,this.inner=null)}return et(a).from(Vt),e[r]=a,e},{});U.Syntax=SyntaxError,U.Type=TypeError,U.Range=RangeError;var It=Ce.reduce(function(e,r){return e[r+"Error"]=U[r],e},{}),Kt=ie.reduce(function(e,r){return["Syntax","Type","Range"].indexOf(r)===-1&&(e[r+"Error"]=U[r]),e},{});function mt(){}function Zt(e){return e}function Zr(e,r){return e==null||e===Zt?r:function(i){return r(e(i))}}function ye(e,r){return function(){e.apply(this,arguments),r.apply(this,arguments)}}function er(e,r){return e===mt?r:function(){var i=e.apply(this,arguments);i!==void 0&&(arguments[0]=i);var a=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var u=r.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?ye(a,this.onsuccess):a),c&&(this.onerror=this.onerror?ye(c,this.onerror):c),u!==void 0?u:i}}function nr(e,r){return e===mt?r:function(){e.apply(this,arguments);var i=this.onsuccess,a=this.onerror;this.onsuccess=this.onerror=null,r.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?ye(i,this.onsuccess):i),a&&(this.onerror=this.onerror?ye(a,this.onerror):a)}}function ti(e,r){return e===mt?r:function(i){var a=e.apply(this,arguments);D(i,a);var c=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,i=r.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?ye(c,this.onsuccess):c),u&&(this.onerror=this.onerror?ye(u,this.onerror):u),a===void 0?i===void 0?void 0:i:D(a,i)}}function ei(e,r){return e===mt?r:function(){return r.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function le(e,r){return e===mt?r:function(){var i=e.apply(this,arguments);if(i&&typeof i.then=="function"){for(var a=this,c=arguments.length,u=new Array(c);c--;)u[c]=arguments[c];return i.then(function(){return r.apply(a,u)})}return r.apply(this,arguments)}}Kt.ModifyError=Ot,Kt.DexieError=_t,Kt.BulkError=Pt;var qt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ln(e){qt=e}var Oe={},cn=100,be=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,M(e),e];var r=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[r,M(r),e]}(),Ce=be[0],ie=be[1],be=be[2],ie=ie&&ie.then,De=Ce&&Ce.constructor,ln=!!be,$e=function(e,r){Pn.push([e,r]),rr&&(queueMicrotask(Ya),rr=!1)},ni=!0,rr=!0,Fe=[],ir=[],ri=Zt,xe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mt,pgp:!1,env:{},finalize:mt},z=xe,Pn=[],We=0,sr=[];function F(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var r=this._PSD=z;if(typeof e!="function"){if(e!==Oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&si(this,this._value))}this._state=null,this._value=null,++r.ref,function i(a,c){try{c(function(u){if(a._state===null){if(u===a)throw new TypeError("A promise cannot be resolved with itself.");var f=a._lib&&un();u&&typeof u.then=="function"?i(a,function(p,y){u instanceof F?u._then(p,y):u.then(p,y)}):(a._state=!0,a._value=u,Os(a)),f&&fn()}},si.bind(null,a))}catch(u){si(a,u)}}(this,e)}var ii={get:function(){var e=z,r=lr;function i(a,c){var u=this,f=!e.global&&(e!==z||r!==lr),p=f&&!ke(),y=new F(function(v,w){oi(u,new Ss(Ds(a,e,f,p),Ds(c,e,f,p),v,w,e))});return this._consoleTask&&(y._consoleTask=this._consoleTask),y}return i.prototype=Oe,i},set:function(e){ot(this,"then",e&&e.prototype===Oe?ii:{get:function(){return e},set:ii.set})}};function Ss(e,r,i,a,c){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof r=="function"?r:null,this.resolve=i,this.reject=a,this.psd=c}function si(e,r){var i,a;ir.push(r),e._state===null&&(i=e._lib&&un(),r=ri(r),e._state=!1,e._value=r,a=e,Fe.some(function(c){return c._value===a._value})||Fe.push(a),Os(e),i&&fn())}function Os(e){var r=e._listeners;e._listeners=[];for(var i=0,a=r.length;i<a;++i)oi(e,r[i]);var c=e._PSD;--c.ref||c.finalize(),We===0&&(++We,$e(function(){--We==0&&ai()},[]))}function oi(e,r){if(e._state!==null){var i=e._state?r.onFulfilled:r.onRejected;if(i===null)return(e._state?r.resolve:r.reject)(e._value);++r.psd.ref,++We,$e(Wa,[i,e,r])}else e._listeners.push(r)}function Wa(e,r,i){try{var a,c=r._value;!r._state&&ir.length&&(ir=[]),a=qt&&r._consoleTask?r._consoleTask.run(function(){return e(c)}):e(c),r._state||ir.indexOf(c)!==-1||function(u){for(var f=Fe.length;f;)if(Fe[--f]._value===u._value)return Fe.splice(f,1)}(r),i.resolve(a)}catch(u){i.reject(u)}finally{--We==0&&ai(),--i.psd.ref||i.psd.finalize()}}function Ya(){Ye(xe,function(){un()&&fn()})}function un(){var e=ni;return rr=ni=!1,e}function fn(){var e,r,i;do for(;0<Pn.length;)for(e=Pn,Pn=[],i=e.length,r=0;r<i;++r){var a=e[r];a[0].apply(null,a[1])}while(0<Pn.length);rr=ni=!0}function ai(){var e=Fe;Fe=[],e.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});for(var r=sr.slice(0),i=r.length;i;)r[--i]()}function or(e){return new F(Oe,!1,e)}function xt(e,r){var i=z;return function(){var a=un(),c=z;try{return Le(i,!0),e.apply(this,arguments)}catch(u){r&&r(u)}finally{Le(c,!1),a&&fn()}}}X(F.prototype,{then:ii,_then:function(e,r){oi(this,new Ss(null,null,e,r,z))},catch:function(e){if(arguments.length===1)return this.then(null,e);var r=e,i=arguments[1];return typeof r=="function"?this.then(null,function(a){return(a instanceof r?i:or)(a)}):this.then(null,function(a){return(a&&a.name===r?i:or)(a)})},finally:function(e){return this.then(function(r){return F.resolve(e()).then(function(){return r})},function(r){return F.resolve(e()).then(function(){return or(r)})})},timeout:function(e,r){var i=this;return e<1/0?new F(function(a,c){var u=setTimeout(function(){return c(new U.Timeout(r))},e);i.then(a,c).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&ot(F.prototype,Symbol.toStringTag,"Dexie.Promise"),xe.env=Cs(),X(F,{all:function(){var e=J.apply(null,arguments).map(ur);return new F(function(r,i){e.length===0&&r([]);var a=e.length;e.forEach(function(c,u){return F.resolve(c).then(function(f){e[u]=f,--a||r(e)},i)})})},resolve:function(e){return e instanceof F?e:e&&typeof e.then=="function"?new F(function(r,i){e.then(r,i)}):new F(Oe,!0,e)},reject:or,race:function(){var e=J.apply(null,arguments).map(ur);return new F(function(r,i){e.map(function(a){return F.resolve(a).then(r,i)})})},PSD:{get:function(){return z},set:function(e){return z=e}},totalEchoes:{get:function(){return lr}},newPSD:Ne,usePSD:Ye,scheduler:{get:function(){return $e},set:function(e){$e=e}},rejectionMapper:{get:function(){return ri},set:function(e){ri=e}},follow:function(e,r){return new F(function(i,a){return Ne(function(c,u){var f=z;f.unhandleds=[],f.onunhandled=u,f.finalize=ye(function(){var p,y=this;p=function(){y.unhandleds.length===0?c():u(y.unhandleds[0])},sr.push(function v(){p(),sr.splice(sr.indexOf(v),1)}),++We,$e(function(){--We==0&&ai()},[])},f.finalize),e()},r,i,a)})}}),De&&(De.allSettled&&ot(F,"allSettled",function(){var e=J.apply(null,arguments).map(ur);return new F(function(r){e.length===0&&r([]);var i=e.length,a=new Array(i);e.forEach(function(c,u){return F.resolve(c).then(function(f){return a[u]={status:"fulfilled",value:f}},function(f){return a[u]={status:"rejected",reason:f}}).then(function(){return--i||r(a)})})})}),De.any&&typeof AggregateError<"u"&&ot(F,"any",function(){var e=J.apply(null,arguments).map(ur);return new F(function(r,i){e.length===0&&i(new AggregateError([]));var a=e.length,c=new Array(a);e.forEach(function(u,f){return F.resolve(u).then(function(p){return r(p)},function(p){c[f]=p,--a||i(new AggregateError(c))})})})}));var Mt={awaits:0,echoes:0,id:0},Ua=0,ar=[],cr=0,lr=0,za=0;function Ne(e,r,i,a){var c=z,u=Object.create(c);return u.parent=c,u.ref=0,u.global=!1,u.id=++za,xe.env,u.env=ln?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject}:{},r&&D(u,r),++c.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},a=Ye(u,e,i,a),u.ref===0&&u.finalize(),a}function hn(){return Mt.id||(Mt.id=++Ua),++Mt.awaits,Mt.echoes+=cn,Mt.id}function ke(){return!!Mt.awaits&&(--Mt.awaits==0&&(Mt.id=0),Mt.echoes=Mt.awaits*cn,!0)}function ur(e){return Mt.echoes&&e&&e.constructor===De?(hn(),e.then(function(r){return ke(),r},function(r){return ke(),kt(r)})):e}function Xa(){var e=ar[ar.length-1];ar.pop(),Le(e,!1)}function Le(e,r){var i,a=z;(r?!Mt.echoes||cr++&&e===z:!cr||--cr&&e===z)||queueMicrotask(r?(function(c){++lr,Mt.echoes&&--Mt.echoes!=0||(Mt.echoes=Mt.awaits=Mt.id=0),ar.push(z),Le(c,!0)}).bind(null,e):Xa),e!==z&&(z=e,a===xe&&(xe.env=Cs()),ln&&(i=xe.env.Promise,r=e.env,(a.global||e.global)&&(Object.defineProperty(h,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))))}function Cs(){var e=h.Promise;return ln?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(h,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ye(e,r,i,a,c){var u=z;try{return Le(e,!0),r(i,a,c)}finally{Le(u,!1)}}function Ds(e,r,i,a){return typeof e!="function"?e:function(){var c=z;i&&hn(),Le(r,!0);try{return e.apply(this,arguments)}finally{Le(c,!1),a&&queueMicrotask(ke)}}}function ci(e){Promise===De&&Mt.echoes===0?cr===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}(""+ie).indexOf("[native code]")===-1&&(hn=ke=mt);var kt=F.reject,Ue="￿",_e="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$s="String expected.",dn=[],fr="__dbnames",li="readonly",ui="readwrite";function ze(e,r){return e?r?function(){return e.apply(this,arguments)&&r.apply(this,arguments)}:e:r}var xs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function hr(e){return typeof e!="string"||/\./.test(e)?function(r){return r}:function(r){return r[e]===void 0&&e in r&&delete(r=At(r))[e],r}}function Ns(){throw U.Type()}function gt(e,r){try{var i=ks(e),a=ks(r);if(i!==a)return i==="Array"?1:a==="Array"?-1:i==="binary"?1:a==="binary"?-1:i==="string"?1:a==="string"?-1:i==="Date"?1:a!=="Date"?NaN:-1;switch(i){case"number":case"Date":case"string":return r<e?1:e<r?-1:0;case"binary":return function(c,u){for(var f=c.length,p=u.length,y=f<p?f:p,v=0;v<y;++v)if(c[v]!==u[v])return c[v]<u[v]?-1:1;return f===p?0:f<p?-1:1}(Ls(e),Ls(r));case"Array":return function(c,u){for(var f=c.length,p=u.length,y=f<p?f:p,v=0;v<y;++v){var w=gt(c[v],u[v]);if(w!==0)return w}return f===p?0:f<p?-1:1}(e,r)}}catch{}return NaN}function ks(e){var r=typeof e;return r!="object"?r:ArrayBuffer.isView(e)?"binary":(e=q(e),e==="ArrayBuffer"?"binary":e)}function Ls(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ps=(Dt.prototype._trans=function(e,r,i){var a=this._tx||z.trans,c=this.name,u=qt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function f(v,w,m){if(!m.schema[c])throw new U.NotFound("Table "+c+" not part of transaction");return r(m.idbtrans,m)}var p=un();try{var y=a&&a.db._novip===this.db._novip?a===z.trans?a._promise(e,f,i):Ne(function(){return a._promise(e,f,i)},{trans:a,transless:z.transless||z}):function v(w,m,T,g){if(w.idbdb&&(w._state.openComplete||z.letThrough||w._vip)){var b=w._createTransaction(m,T,w._dbSchema);try{b.create(),w._state.PR1398_maxLoop=3}catch(A){return A.name===Ht.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return v(w,m,T,g)})):kt(A)}return b._promise(m,function(A,_){return Ne(function(){return z.trans=b,g(A,_,b)})}).then(function(A){if(m==="readwrite")try{b.idbtrans.commit()}catch{}return m==="readonly"?A:b._completion.then(function(){return A})})}if(w._state.openComplete)return kt(new U.DatabaseClosed(w._state.dbOpenError));if(!w._state.isBeingOpened){if(!w._state.autoOpen)return kt(new U.DatabaseClosed);w.open().catch(mt)}return w._state.dbReadyPromise.then(function(){return v(w,m,T,g)})}(this.db,e,[this.name],f);return u&&(y._consoleTask=u,y=y.catch(function(v){return console.trace(v),kt(v)})),y}finally{p&&fn()}},Dt.prototype.get=function(e,r){var i=this;return e&&e.constructor===Object?this.where(e).first(r):e==null?kt(new U.Type("Invalid argument to Table.get()")):this._trans("readonly",function(a){return i.core.get({trans:a,key:e}).then(function(c){return i.hook.reading.fire(c)})}).then(r)},Dt.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(E(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var r=d(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter(function(y){if(y.compound&&r.every(function(w){return 0<=y.keyPath.indexOf(w)})){for(var v=0;v<r.length;++v)if(r.indexOf(y.keyPath[v])===-1)return!1;return!0}return!1}).sort(function(y,v){return y.keyPath.length-v.keyPath.length})[0];if(i&&this.db._maxKey!==Ue){var f=i.keyPath.slice(0,r.length);return this.where(f).equals(f.map(function(v){return e[v]}))}!i&&qt&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(r.join("+"),"]"));var a=this.schema.idxByName,c=this.db._deps.indexedDB;function u(y,v){return c.cmp(y,v)===0}var p=r.reduce(function(T,v){var w=T[0],m=T[1],T=a[v],g=e[v];return[w||T,w||!T?ze(m,T&&T.multi?function(b){return b=rt(b,v),E(b)&&b.some(function(A){return u(g,A)})}:function(b){return u(g,rt(b,v))}):m]},[null,null]),f=p[0],p=p[1];return f?this.where(f.name).equals(e[f.keyPath]).filter(p):i?this.filter(p):this.where(r).equals("")},Dt.prototype.filter=function(e){return this.toCollection().and(e)},Dt.prototype.count=function(e){return this.toCollection().count(e)},Dt.prototype.offset=function(e){return this.toCollection().offset(e)},Dt.prototype.limit=function(e){return this.toCollection().limit(e)},Dt.prototype.each=function(e){return this.toCollection().each(e)},Dt.prototype.toArray=function(e){return this.toCollection().toArray(e)},Dt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Dt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,E(e)?"[".concat(e.join("+"),"]"):e))},Dt.prototype.reverse=function(){return this.toCollection().reverse()},Dt.prototype.mapToClass=function(e){var r,i=this.db,a=this.name;function c(){return r!==null&&r.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof Ns&&(function(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function w(){this.constructor=y}n(y,v),y.prototype=v===null?Object.create(v):(w.prototype=v.prototype,new w)}(c,r=e),Object.defineProperty(c.prototype,"db",{get:function(){return i},enumerable:!1,configurable:!0}),c.prototype.table=function(){return a},e=c);for(var u=new Set,f=e.prototype;f;f=M(f))Object.getOwnPropertyNames(f).forEach(function(y){return u.add(y)});function p(y){if(!y)return y;var v,w=Object.create(e.prototype);for(v in y)if(!u.has(v))try{w[v]=y[v]}catch{}return w}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},Dt.prototype.defineClass=function(){return this.mapToClass(function(e){D(this,e)})},Dt.prototype.add=function(e,r){var i=this,a=this.schema.primKey,c=a.auto,u=a.keyPath,f=e;return u&&c&&(f=hr(u)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"add",keys:r!=null?[r]:null,values:[f]})}).then(function(p){return p.numFailures?F.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{lt(e,u,p)}catch{}return p})},Dt.prototype.update=function(e,r){return typeof e!="object"||E(e)?this.where(":id").equals(e).modify(r):(e=rt(e,this.schema.primKey.keyPath),e===void 0?kt(new U.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(r))},Dt.prototype.put=function(e,r){var i=this,a=this.schema.primKey,c=a.auto,u=a.keyPath,f=e;return u&&c&&(f=hr(u)(e)),this._trans("readwrite",function(p){return i.core.mutate({trans:p,type:"put",values:[f],keys:r!=null?[r]:null})}).then(function(p){return p.numFailures?F.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{lt(e,u,p)}catch{}return p})},Dt.prototype.delete=function(e){var r=this;return this._trans("readwrite",function(i){return r.core.mutate({trans:i,type:"delete",keys:[e]})}).then(function(i){return i.numFailures?F.reject(i.failures[0]):void 0})},Dt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"deleteRange",range:xs})}).then(function(r){return r.numFailures?F.reject(r.failures[0]):void 0})},Dt.prototype.bulkGet=function(e){var r=this;return this._trans("readonly",function(i){return r.core.getMany({keys:e,trans:i}).then(function(a){return a.map(function(c){return r.hook.reading.fire(c)})})})},Dt.prototype.bulkAdd=function(e,r,i){var a=this,c=Array.isArray(r)?r:void 0,u=(i=i||(c?void 0:r))?i.allKeys:void 0;return this._trans("readwrite",function(f){var v=a.schema.primKey,p=v.auto,v=v.keyPath;if(v&&c)throw new U.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,v=v&&p?e.map(hr(v)):e;return a.core.mutate({trans:f,type:"add",keys:c,values:v,wantResults:u}).then(function(b){var m=b.numFailures,T=b.results,g=b.lastResult,b=b.failures;if(m===0)return u?T:g;throw new Pt("".concat(a.name,".bulkAdd(): ").concat(m," of ").concat(y," operations failed"),b)})})},Dt.prototype.bulkPut=function(e,r,i){var a=this,c=Array.isArray(r)?r:void 0,u=(i=i||(c?void 0:r))?i.allKeys:void 0;return this._trans("readwrite",function(f){var v=a.schema.primKey,p=v.auto,v=v.keyPath;if(v&&c)throw new U.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");var y=e.length,v=v&&p?e.map(hr(v)):e;return a.core.mutate({trans:f,type:"put",keys:c,values:v,wantResults:u}).then(function(b){var m=b.numFailures,T=b.results,g=b.lastResult,b=b.failures;if(m===0)return u?T:g;throw new Pt("".concat(a.name,".bulkPut(): ").concat(m," of ").concat(y," operations failed"),b)})})},Dt.prototype.bulkUpdate=function(e){var r=this,i=this.core,a=e.map(function(f){return f.key}),c=e.map(function(f){return f.changes}),u=[];return this._trans("readwrite",function(f){return i.getMany({trans:f,keys:a,cache:"clone"}).then(function(p){var y=[],v=[];e.forEach(function(m,T){var g=m.key,b=m.changes,A=p[T];if(A){for(var _=0,S=Object.keys(b);_<S.length;_++){var O=S[_],C=b[O];if(O===r.schema.primKey.keyPath){if(gt(C,g)!==0)throw new U.Constraint("Cannot update primary key in bulkUpdate()")}else lt(A,O,C)}u.push(T),y.push(g),v.push(A)}});var w=y.length;return i.mutate({trans:f,type:"put",keys:y,values:v,updates:{keys:a,changeSpecs:c}}).then(function(m){var T=m.numFailures,g=m.failures;if(T===0)return w;for(var b=0,A=Object.keys(g);b<A.length;b++){var _,S=A[b],O=u[Number(S)];O!=null&&(_=g[S],delete g[S],g[O]=_)}throw new Pt("".concat(r.name,".bulkUpdate(): ").concat(T," of ").concat(w," operations failed"),g)})})})},Dt.prototype.bulkDelete=function(e){var r=this,i=e.length;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"delete",keys:e})}).then(function(f){var c=f.numFailures,u=f.lastResult,f=f.failures;if(c===0)return u;throw new Pt("".concat(r.name,".bulkDelete(): ").concat(c," of ").concat(i," operations failed"),f)})},Dt);function Dt(){}function In(e){function r(f,p){if(p){for(var y=arguments.length,v=new Array(y-1);--y;)v[y-1]=arguments[y];return i[f].subscribe.apply(null,v),e}if(typeof f=="string")return i[f]}var i={};r.addEventType=u;for(var a=1,c=arguments.length;a<c;++a)u(arguments[a]);return r;function u(f,p,y){if(typeof f!="object"){var v;p=p||ei;var w={subscribers:[],fire:y=y||mt,subscribe:function(m){w.subscribers.indexOf(m)===-1&&(w.subscribers.push(m),w.fire=p(w.fire,m))},unsubscribe:function(m){w.subscribers=w.subscribers.filter(function(T){return T!==m}),w.fire=w.subscribers.reduce(p,y)}};return i[f]=r[f]=w}d(v=f).forEach(function(m){var T=v[m];if(E(T))u(m,v[m][0],v[m][1]);else{if(T!=="asap")throw new U.InvalidArgument("Invalid event config");var g=u(m,Zt,function(){for(var b=arguments.length,A=new Array(b);b--;)A[b]=arguments[b];g.subscribers.forEach(function(_){dt(function(){_.apply(null,A)})})})}})}}function Mn(e,r){return et(r).from({prototype:e}),r}function pn(e,r){return!(e.filter||e.algorithm||e.or)&&(r?e.justLimit:!e.replayFilter)}function fi(e,r){e.filter=ze(e.filter,r)}function hi(e,r,i){var a=e.replayFilter;e.replayFilter=a?function(){return ze(a(),r())}:r,e.justLimit=i&&!a}function dr(e,r){if(e.isPrimKey)return r.primaryKey;var i=r.getIndexByKeyPath(e.index);if(!i)throw new U.Schema("KeyPath "+e.index+" on object store "+r.name+" is not indexed");return i}function Is(e,r,i){var a=dr(e,r.schema);return r.openCursor({trans:i,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:a,range:e.range}})}function pr(e,r,i,a){var c=e.replayFilter?ze(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},f=function(p,y,v){var w,m;c&&!c(y,v,function(T){return y.stop(T)},function(T){return y.fail(T)})||((m=""+(w=y.primaryKey))=="[object ArrayBuffer]"&&(m=""+new Uint8Array(w)),L(u,m)||(u[m]=!0,r(p,y,v)))};return Promise.all([e.or._iterate(f,i),Ms(Is(e,a,i),e.algorithm,f,!e.keysOnly&&e.valueMapper)])}return Ms(Is(e,a,i),ze(e.algorithm,c),r,!e.keysOnly&&e.valueMapper)}function Ms(e,r,i,a){var c=xt(a?function(u,f,p){return i(a(u),f,p)}:i);return e.then(function(u){if(u)return u.start(function(){var f=function(){return u.continue()};r&&!r(u,function(p){return f=p},function(p){u.stop(p),f=mt},function(p){u.fail(p),f=mt})||c(u.value,u,function(p){return f=p}),f()})})}var be=Symbol(),Rn=(Rs.prototype.execute=function(e){if(this.add!==void 0){var r=this.add;if(E(r))return l(l([],E(e)?e:[],!0),r).sort();if(typeof r=="number")return(Number(e)||0)+r;if(typeof r=="bigint")try{return BigInt(e)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(this.remove!==void 0){var i=this.remove;if(E(i))return E(e)?e.filter(function(a){return!i.includes(a)}).sort():[];if(typeof i=="number")return Number(e)-i;if(typeof i=="bigint")try{return BigInt(e)-i}catch{return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}return r=(r=this.replacePrefix)===null||r===void 0?void 0:r[0],r&&typeof e=="string"&&e.startsWith(r)?this.replacePrefix[1]+e.substring(r.length):e},Rs);function Rs(e){Object.assign(this,e)}var Ga=(yt.prototype._read=function(e,r){var i=this._ctx;return i.error?i.table._trans(null,kt.bind(null,i.error)):i.table._trans("readonly",e).then(r)},yt.prototype._write=function(e){var r=this._ctx;return r.error?r.table._trans(null,kt.bind(null,r.error)):r.table._trans("readwrite",e,"locked")},yt.prototype._addAlgorithm=function(e){var r=this._ctx;r.algorithm=ze(r.algorithm,e)},yt.prototype._iterate=function(e,r){return pr(this._ctx,e,r,this._ctx.table.core)},yt.prototype.clone=function(e){var r=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&D(i,e),r._ctx=i,r},yt.prototype.raw=function(){return this._ctx.valueMapper=null,this},yt.prototype.each=function(e){var r=this._ctx;return this._read(function(i){return pr(r,e,i,r.table.core)})},yt.prototype.count=function(e){var r=this;return this._read(function(i){var a=r._ctx,c=a.table.core;if(pn(a,!0))return c.count({trans:i,query:{index:dr(a,c.schema),range:a.range}}).then(function(f){return Math.min(f,a.limit)});var u=0;return pr(a,function(){return++u,!1},i,c).then(function(){return u})}).then(e)},yt.prototype.sortBy=function(e,r){var i=e.split(".").reverse(),a=i[0],c=i.length-1;function u(y,v){return v?u(y[i[v]],v-1):y[a]}var f=this._ctx.dir==="next"?1:-1;function p(y,v){return y=u(y,c),v=u(v,c),y<v?-f:v<y?f:0}return this.toArray(function(y){return y.sort(p)}).then(r)},yt.prototype.toArray=function(e){var r=this;return this._read(function(i){var a=r._ctx;if(a.dir==="next"&&pn(a,!0)&&0<a.limit){var c=a.valueMapper,u=dr(a,a.table.core.schema);return a.table.core.query({trans:i,limit:a.limit,values:!0,query:{index:u,range:a.range}}).then(function(p){return p=p.result,c?p.map(c):p})}var f=[];return pr(a,function(p){return f.push(p)},i,a.table.core).then(function(){return f})},e)},yt.prototype.offset=function(e){var r=this._ctx;return e<=0||(r.offset+=e,pn(r)?hi(r,function(){var i=e;return function(a,c){return i===0||(i===1?--i:c(function(){a.advance(i),i=0}),!1)}}):hi(r,function(){var i=e;return function(){return--i<0}})),this},yt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),hi(this._ctx,function(){var r=e;return function(i,a,c){return--r<=0&&a(c),0<=r}},!0),this},yt.prototype.until=function(e,r){return fi(this._ctx,function(i,a,c){return!e(i.value)||(a(c),r)}),this},yt.prototype.first=function(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)},yt.prototype.last=function(e){return this.reverse().first(e)},yt.prototype.filter=function(e){var r;return fi(this._ctx,function(i){return e(i.value)}),(r=this._ctx).isMatch=ze(r.isMatch,e),this},yt.prototype.and=function(e){return this.filter(e)},yt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},yt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},yt.prototype.desc=function(){return this.reverse()},yt.prototype.eachKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(i,a){e(a.key,a)})},yt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},yt.prototype.eachPrimaryKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(i,a){e(a.primaryKey,a)})},yt.prototype.keys=function(e){var r=this._ctx;r.keysOnly=!r.isMatch;var i=[];return this.each(function(a,c){i.push(c.key)}).then(function(){return i}).then(e)},yt.prototype.primaryKeys=function(e){var r=this._ctx;if(r.dir==="next"&&pn(r,!0)&&0<r.limit)return this._read(function(a){var c=dr(r,r.table.core.schema);return r.table.core.query({trans:a,values:!1,limit:r.limit,query:{index:c,range:r.range}})}).then(function(a){return a.result}).then(e);r.keysOnly=!r.isMatch;var i=[];return this.each(function(a,c){i.push(c.primaryKey)}).then(function(){return i}).then(e)},yt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},yt.prototype.firstKey=function(e){return this.limit(1).keys(function(r){return r[0]}).then(e)},yt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},yt.prototype.distinct=function(){var e=this._ctx,e=e.index&&e.table.schema.idxByName[e.index];if(!e||!e.multi)return this;var r={};return fi(this._ctx,function(c){var a=c.primaryKey.toString(),c=L(r,a);return r[a]=!0,!c}),this},yt.prototype.modify=function(e){var r=this,i=this._ctx;return this._write(function(a){var c,u,f;f=typeof e=="function"?e:(c=d(e),u=c.length,function(_){for(var S=!1,O=0;O<u;++O){var C=c[O],$=e[C],P=rt(_,C);$ instanceof Rn?(lt(_,C,$.execute(P)),S=!0):P!==$&&(lt(_,C,$),S=!0)}return S});function p(_,C){var O=C.failures,C=C.numFailures;b+=_-C;for(var $=0,P=d(O);$<P.length;$++){var B=P[$];g.push(O[B])}}var y=i.table.core,v=y.schema.primaryKey,w=v.outbound,m=v.extractKey,T=r.db._options.modifyChunkSize||200,g=[],b=0,A=[];return r.clone().primaryKeys().then(function(_){function S(C){var $=Math.min(T,_.length-C);return y.getMany({trans:a,keys:_.slice(C,C+$),cache:"immutable"}).then(function(P){for(var B=[],I=[],K=w?[]:null,V=[],k=0;k<$;++k){var st=P[k],at={value:At(st),primKey:_[C+k]};f.call(at,at.value,at)!==!1&&(at.value==null?V.push(_[C+k]):w||gt(m(st),m(at.value))===0?(I.push(at.value),w&&K.push(_[C+k])):(V.push(_[C+k]),B.push(at.value)))}return Promise.resolve(0<B.length&&y.mutate({trans:a,type:"add",values:B}).then(function(ht){for(var ut in ht.failures)V.splice(parseInt(ut),1);p(B.length,ht)})).then(function(){return(0<I.length||O&&typeof e=="object")&&y.mutate({trans:a,type:"put",keys:K,values:I,criteria:O,changeSpec:typeof e!="function"&&e,isAdditionalChunk:0<C}).then(function(ht){return p(I.length,ht)})}).then(function(){return(0<V.length||O&&e===di)&&y.mutate({trans:a,type:"delete",keys:V,criteria:O,isAdditionalChunk:0<C}).then(function(ht){return p(V.length,ht)})}).then(function(){return _.length>C+$&&S(C+T)})})}var O=pn(i)&&i.limit===1/0&&(typeof e!="function"||e===di)&&{index:i.index,range:i.range};return S(0).then(function(){if(0<g.length)throw new Ot("Error modifying one or more objects",g,b,A);return _.length})})})},yt.prototype.delete=function(){var e=this._ctx,r=e.range;return pn(e)&&(e.isPrimKey||r.type===3)?this._write(function(i){var a=e.table.core.schema.primaryKey,c=r;return e.table.core.count({trans:i,query:{index:a,range:c}}).then(function(u){return e.table.core.mutate({trans:i,type:"deleteRange",range:c}).then(function(f){var p=f.failures;if(f.lastResult,f.results,f=f.numFailures,f)throw new Ot("Could not delete some values",Object.keys(p).map(function(y){return p[y]}),u-f);return u-f})})}):this.modify(di)},yt);function yt(){}var di=function(e,r){return r.value=null};function Qa(e,r){return e<r?-1:e===r?0:1}function Ja(e,r){return r<e?-1:e===r?0:1}function te(e,r,i){return e=e instanceof Hs?new e.Collection(e):e,e._ctx.error=new(i||TypeError)(r),e}function mn(e){return new e.Collection(e,function(){return Ks("")}).limit(0)}function mr(e,r,i,a){var c,u,f,p,y,v,w,m=i.length;if(!i.every(function(b){return typeof b=="string"}))return te(e,$s);function T(b){c=b==="next"?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},u=b==="next"?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},f=b==="next"?Qa:Ja;var A=i.map(function(_){return{lower:u(_),upper:c(_)}}).sort(function(_,S){return f(_.lower,S.lower)});p=A.map(function(_){return _.upper}),y=A.map(function(_){return _.lower}),w=(v=b)==="next"?"":a}T("next"),e=new e.Collection(e,function(){return Pe(p[0],y[m-1]+a)}),e._ondirectionchange=function(b){T(b)};var g=0;return e._addAlgorithm(function(b,A,_){var S=b.key;if(typeof S!="string")return!1;var O=u(S);if(r(O,y,g))return!0;for(var C=null,$=g;$<m;++$){var P=function(B,I,K,V,k,st){for(var at=Math.min(B.length,V.length),ht=-1,ut=0;ut<at;++ut){var ue=I[ut];if(ue!==V[ut])return k(B[ut],K[ut])<0?B.substr(0,ut)+K[ut]+K.substr(ut+1):k(B[ut],V[ut])<0?B.substr(0,ut)+V[ut]+K.substr(ut+1):0<=ht?B.substr(0,ht)+I[ht]+K.substr(ht+1):null;k(B[ut],ue)<0&&(ht=ut)}return at<V.length&&st==="next"?B+K.substr(B.length):at<B.length&&st==="prev"?B.substr(0,K.length):ht<0?null:B.substr(0,ht)+V[ht]+K.substr(ht+1)}(S,O,p[$],y[$],f,v);P===null&&C===null?g=$+1:(C===null||0<f(C,P))&&(C=P)}return A(C!==null?function(){b.continue(C+w)}:_),!1}),e}function Pe(e,r,i,a){return{type:2,lower:e,upper:r,lowerOpen:i,upperOpen:a}}function Ks(e){return{type:1,lower:e,upper:e}}var Hs=(Object.defineProperty(Rt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Rt.prototype.between=function(e,r,i,a){i=i!==!1,a=a===!0;try{return 0<this._cmp(e,r)||this._cmp(e,r)===0&&(i||a)&&(!i||!a)?mn(this):new this.Collection(this,function(){return Pe(e,r,!i,!a)})}catch{return te(this,_e)}},Rt.prototype.equals=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Ks(e)})},Rt.prototype.above=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Pe(e,void 0,!0)})},Rt.prototype.aboveOrEqual=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Pe(e,void 0,!1)})},Rt.prototype.below=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Pe(void 0,e,!1,!0)})},Rt.prototype.belowOrEqual=function(e){return e==null?te(this,_e):new this.Collection(this,function(){return Pe(void 0,e)})},Rt.prototype.startsWith=function(e){return typeof e!="string"?te(this,$s):this.between(e,e+Ue,!0,!0)},Rt.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):mr(this,function(r,i){return r.indexOf(i[0])===0},[e],Ue)},Rt.prototype.equalsIgnoreCase=function(e){return mr(this,function(r,i){return r===i[0]},[e],"")},Rt.prototype.anyOfIgnoreCase=function(){var e=J.apply(Q,arguments);return e.length===0?mn(this):mr(this,function(r,i){return i.indexOf(r)!==-1},e,"")},Rt.prototype.startsWithAnyOfIgnoreCase=function(){var e=J.apply(Q,arguments);return e.length===0?mn(this):mr(this,function(r,i){return i.some(function(a){return r.indexOf(a)===0})},e,Ue)},Rt.prototype.anyOf=function(){var e=this,r=J.apply(Q,arguments),i=this._cmp;try{r.sort(i)}catch{return te(this,_e)}if(r.length===0)return mn(this);var a=new this.Collection(this,function(){return Pe(r[0],r[r.length-1])});a._ondirectionchange=function(u){i=u==="next"?e._ascending:e._descending,r.sort(i)};var c=0;return a._addAlgorithm(function(u,f,p){for(var y=u.key;0<i(y,r[c]);)if(++c===r.length)return f(p),!1;return i(y,r[c])===0||(f(function(){u.continue(r[c])}),!1)}),a},Rt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Rt.prototype.noneOf=function(){var e=J.apply(Q,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return te(this,_e)}var r=e.reduce(function(i,a){return i?i.concat([[i[i.length-1][1],a]]):[[-1/0,a]]},null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},Rt.prototype.inAnyRange=function(S,r){var i=this,a=this._cmp,c=this._ascending,u=this._descending,f=this._min,p=this._max;if(S.length===0)return mn(this);if(!S.every(function(O){return O[0]!==void 0&&O[1]!==void 0&&c(O[0],O[1])<=0}))return te(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",U.InvalidArgument);var y=!r||r.includeLowers!==!1,v=r&&r.includeUppers===!0,w,m=c;function T(O,C){return m(O[0],C[0])}try{(w=S.reduce(function(O,C){for(var $=0,P=O.length;$<P;++$){var B=O[$];if(a(C[0],B[1])<0&&0<a(C[1],B[0])){B[0]=f(B[0],C[0]),B[1]=p(B[1],C[1]);break}}return $===P&&O.push(C),O},[])).sort(T)}catch{return te(this,_e)}var g=0,b=v?function(O){return 0<c(O,w[g][1])}:function(O){return 0<=c(O,w[g][1])},A=y?function(O){return 0<u(O,w[g][0])}:function(O){return 0<=u(O,w[g][0])},_=b,S=new this.Collection(this,function(){return Pe(w[0][0],w[w.length-1][1],!y,!v)});return S._ondirectionchange=function(O){m=O==="next"?(_=b,c):(_=A,u),w.sort(T)},S._addAlgorithm(function(O,C,$){for(var P,B=O.key;_(B);)if(++g===w.length)return C($),!1;return!b(P=B)&&!A(P)||(i._cmp(B,w[g][1])===0||i._cmp(B,w[g][0])===0||C(function(){m===c?O.continue(w[g][0]):O.continue(w[g][1])}),!1)}),S},Rt.prototype.startsWithAnyOf=function(){var e=J.apply(Q,arguments);return e.every(function(r){return typeof r=="string"})?e.length===0?mn(this):this.inAnyRange(e.map(function(r){return[r,r+Ue]})):te(this,"startsWithAnyOf() only works with strings")},Rt);function Rt(){}function de(e){return xt(function(r){return Kn(r),e(r.target.error),!1})}function Kn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Hn="storagemutated",pi="x-storagemutated-1",Ie=In(null,Hn),Za=(pe.prototype._lock=function(){return it(!z.global),++this._reculock,this._reculock!==1||z.global||(z.lockOwnerFor=this),this},pe.prototype._unlock=function(){if(it(!z.global),--this._reculock==0)for(z.global||(z.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ye(e[1],e[0])}catch{}}return this},pe.prototype._locked=function(){return this._reculock&&z.lockOwnerFor!==this},pe.prototype.create=function(e){var r=this;if(!this.mode)return this;var i=this.db.idbdb,a=this.db._state.dbOpenError;if(it(!this.idbtrans),!e&&!i)switch(a&&a.name){case"DatabaseClosedError":throw new U.DatabaseClosed(a);case"MissingAPIError":throw new U.MissingAPI(a.message,a);default:throw new U.OpenFailed(a)}if(!this.active)throw new U.TransactionInactive;return it(this._completion._state===null),(e=this.idbtrans=e||(this.db.core||i).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=xt(function(c){Kn(c),r._reject(e.error)}),e.onabort=xt(function(c){Kn(c),r.active&&r._reject(new U.Abort(e.error)),r.active=!1,r.on("abort").fire(c)}),e.oncomplete=xt(function(){r.active=!1,r._resolve(),"mutatedParts"in e&&Ie.storagemutated.fire(e.mutatedParts)}),this},pe.prototype._promise=function(e,r,i){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return kt(new U.ReadOnly("Transaction is readonly"));if(!this.active)return kt(new U.TransactionInactive);if(this._locked())return new F(function(u,f){a._blockedFuncs.push([function(){a._promise(e,r,i).then(u,f)},z])});if(i)return Ne(function(){var u=new F(function(f,p){a._lock();var y=r(f,p,a);y&&y.then&&y.then(f,p)});return u.finally(function(){return a._unlock()}),u._lib=!0,u});var c=new F(function(u,f){var p=r(u,f,a);p&&p.then&&p.then(u,f)});return c._lib=!0,c},pe.prototype._root=function(){return this.parent?this.parent._root():this},pe.prototype.waitFor=function(e){var r,i=this._root(),a=F.resolve(e);i._waitingFor?i._waitingFor=i._waitingFor.then(function(){return a}):(i._waitingFor=a,i._waitingQueue=[],r=i.idbtrans.objectStore(i.storeNames[0]),function u(){for(++i._spinCount;i._waitingQueue.length;)i._waitingQueue.shift()();i._waitingFor&&(r.get(-1/0).onsuccess=u)}());var c=i._waitingFor;return new F(function(u,f){a.then(function(p){return i._waitingQueue.push(xt(u.bind(null,p)))},function(p){return i._waitingQueue.push(xt(f.bind(null,p)))}).finally(function(){i._waitingFor===c&&(i._waitingFor=null)})})},pe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new U.Abort))},pe.prototype.table=function(e){var r=this._memoizedTables||(this._memoizedTables={});if(L(r,e))return r[e];var i=this.schema[e];if(!i)throw new U.NotFound("Table "+e+" not part of transaction");return i=new this.db.Table(e,i,this),i.core=this.db.core.table(e),r[e]=i},pe);function pe(){}function mi(e,r,i,a,c,u,f){return{name:e,keyPath:r,unique:i,multi:a,auto:c,compound:u,src:(i&&!f?"&":"")+(a?"*":"")+(c?"++":"")+js(r)}}function js(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function vi(e,r,i){return{name:e,primKey:r,indexes:i,mappedClass:null,idxByName:(a=function(c){return[c.name,c]},i.reduce(function(c,u,f){return f=a(u,f),f&&(c[f[0]]=f[1]),c},{}))};var a}var jn=function(e){try{return e.only([[]]),jn=function(){return[[]]},[[]]}catch{return jn=function(){return Ue},Ue}};function gi(e){return e==null?function(){}:typeof e=="string"?(r=e).split(".").length===1?function(i){return i[r]}:function(i){return rt(i,r)}:function(i){return rt(i,e)};var r}function Bs(e){return[].slice.call(e)}var tc=0;function Bn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function ec(e,r,y){function a(_){if(_.type===3)return null;if(_.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var g=_.lower,b=_.upper,A=_.lowerOpen,_=_.upperOpen;return g===void 0?b===void 0?null:r.upperBound(b,!!_):b===void 0?r.lowerBound(g,!!A):r.bound(g,b,!!A,!!_)}function c(T){var g,b=T.name;return{name:b,schema:T,mutate:function(A){var _=A.trans,S=A.type,O=A.keys,C=A.values,$=A.range;return new Promise(function(P,B){P=xt(P);var I=_.objectStore(b),K=I.keyPath==null,V=S==="put"||S==="add";if(!V&&S!=="delete"&&S!=="deleteRange")throw new Error("Invalid operation type: "+S);var k,st=(O||C||{length:1}).length;if(O&&C&&O.length!==C.length)throw new Error("Given keys array must have same length as given values array.");if(st===0)return P({numFailures:0,failures:{},results:[],lastResult:void 0});function at(Wt){++ue,Kn(Wt)}var ht=[],ut=[],ue=0;if(S==="deleteRange"){if($.type===4)return P({numFailures:ue,failures:ut,results:[],lastResult:void 0});$.type===3?ht.push(k=I.clear()):ht.push(k=I.delete(a($)))}else{var K=V?K?[C,O]:[C,null]:[O,null],ft=K[0],jt=K[1];if(V)for(var Bt=0;Bt<st;++Bt)ht.push(k=jt&&jt[Bt]!==void 0?I[S](ft[Bt],jt[Bt]):I[S](ft[Bt])),k.onerror=at;else for(Bt=0;Bt<st;++Bt)ht.push(k=I[S](ft[Bt])),k.onerror=at}function Dr(Wt){Wt=Wt.target.result,ht.forEach(function(Qe,Ii){return Qe.error!=null&&(ut[Ii]=Qe.error)}),P({numFailures:ue,failures:ut,results:S==="delete"?O:ht.map(function(Qe){return Qe.result}),lastResult:Wt})}k.onerror=function(Wt){at(Wt),Dr(Wt)},k.onsuccess=Dr})},getMany:function(A){var _=A.trans,S=A.keys;return new Promise(function(O,C){O=xt(O);for(var $,P=_.objectStore(b),B=S.length,I=new Array(B),K=0,V=0,k=function(ht){ht=ht.target,I[ht._pos]=ht.result,++V===K&&O(I)},st=de(C),at=0;at<B;++at)S[at]!=null&&(($=P.get(S[at]))._pos=at,$.onsuccess=k,$.onerror=st,++K);K===0&&O(I)})},get:function(A){var _=A.trans,S=A.key;return new Promise(function(O,C){O=xt(O);var $=_.objectStore(b).get(S);$.onsuccess=function(P){return O(P.target.result)},$.onerror=de(C)})},query:(g=v,function(A){return new Promise(function(_,S){_=xt(_);var O,C,$,K=A.trans,P=A.values,B=A.limit,k=A.query,I=B===1/0?void 0:B,V=k.index,k=k.range,K=K.objectStore(b),V=V.isPrimaryKey?K:K.index(V.name),k=a(k);if(B===0)return _({result:[]});g?((I=P?V.getAll(k,I):V.getAllKeys(k,I)).onsuccess=function(st){return _({result:st.target.result})},I.onerror=de(S)):(O=0,C=!P&&"openKeyCursor"in V?V.openKeyCursor(k):V.openCursor(k),$=[],C.onsuccess=function(st){var at=C.result;return at?($.push(P?at.value:at.primaryKey),++O===B?_({result:$}):void at.continue()):_({result:$})},C.onerror=de(S))})}),openCursor:function(A){var _=A.trans,S=A.values,O=A.query,C=A.reverse,$=A.unique;return new Promise(function(P,B){P=xt(P);var V=O.index,I=O.range,K=_.objectStore(b),K=V.isPrimaryKey?K:K.index(V.name),V=C?$?"prevunique":"prev":$?"nextunique":"next",k=!S&&"openKeyCursor"in K?K.openKeyCursor(a(I),V):K.openCursor(a(I),V);k.onerror=de(B),k.onsuccess=xt(function(st){var at,ht,ut,ue,ft=k.result;ft?(ft.___id=++tc,ft.done=!1,at=ft.continue.bind(ft),ht=(ht=ft.continuePrimaryKey)&&ht.bind(ft),ut=ft.advance.bind(ft),ue=function(){throw new Error("Cursor not stopped")},ft.trans=_,ft.stop=ft.continue=ft.continuePrimaryKey=ft.advance=function(){throw new Error("Cursor not started")},ft.fail=xt(B),ft.next=function(){var jt=this,Bt=1;return this.start(function(){return Bt--?jt.continue():jt.stop()}).then(function(){return jt})},ft.start=function(jt){function Bt(){if(k.result)try{jt()}catch(Wt){ft.fail(Wt)}else ft.done=!0,ft.start=function(){throw new Error("Cursor behind last entry")},ft.stop()}var Dr=new Promise(function(Wt,Qe){Wt=xt(Wt),k.onerror=de(Qe),ft.fail=Qe,ft.stop=function(Ii){ft.stop=ft.continue=ft.continuePrimaryKey=ft.advance=ue,Wt(Ii)}});return k.onsuccess=xt(function(Wt){k.onsuccess=Bt,Bt()}),ft.continue=at,ft.continuePrimaryKey=ht,ft.advance=ut,Bt(),Dr},P(ft)):P(null)},B)})},count:function(A){var _=A.query,S=A.trans,O=_.index,C=_.range;return new Promise(function($,P){var B=S.objectStore(b),I=O.isPrimaryKey?B:B.index(O.name),B=a(C),I=B?I.count(B):I.count();I.onsuccess=xt(function(K){return $(K.target.result)}),I.onerror=de(P)})}}}var u,f,p,w=(f=y,p=Bs((u=e).objectStoreNames),{schema:{name:u.name,tables:p.map(function(T){return f.objectStore(T)}).map(function(T){var g=T.keyPath,_=T.autoIncrement,b=E(g),A={},_={name:T.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g==null,compound:b,keyPath:g,autoIncrement:_,unique:!0,extractKey:gi(g)},indexes:Bs(T.indexNames).map(function(S){return T.index(S)}).map(function($){var O=$.name,C=$.unique,P=$.multiEntry,$=$.keyPath,P={name:O,compound:E($),keyPath:$,unique:C,multiEntry:P,extractKey:gi($)};return A[Bn($)]=P}),getIndexByKeyPath:function(S){return A[Bn(S)]}};return A[":id"]=_.primaryKey,g!=null&&(A[Bn(g)]=_.primaryKey),_})},hasGetAll:0<p.length&&"getAll"in f.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),y=w.schema,v=w.hasGetAll,w=y.tables.map(c),m={};return w.forEach(function(T){return m[T.name]=T}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(T){if(!m[T])throw new Error("Table '".concat(T,"' not found"));return m[T]},MIN_KEY:-1/0,MAX_KEY:jn(r),schema:y}}function nc(e,r,i,a){var c=i.IDBKeyRange;return i.indexedDB,{dbcore:(a=ec(r,c,a),e.dbcore.reduce(function(u,f){return f=f.create,s(s({},u),f(u))},a))}}function vr(e,a){var i=a.db,a=nc(e._middlewares,i,e._deps,a);e.core=a.dbcore,e.tables.forEach(function(c){var u=c.name;e.core.schema.tables.some(function(f){return f.name===u})&&(c.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=c.core))})}function gr(e,r,i,a){i.forEach(function(c){var u=a[c];r.forEach(function(f){var p=function y(v,w){return pt(v,w)||(v=M(v))&&y(v,w)}(f,c);(!p||"value"in p&&p.value===void 0)&&(f===e.Transaction.prototype||f instanceof e.Transaction?ot(f,c,{get:function(){return this.table(c)},set:function(y){G(this,c,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):f[c]=new e.Table(c,u))})})}function yi(e,r){r.forEach(function(i){for(var a in i)i[a]instanceof e.Table&&delete i[a]})}function rc(e,r){return e._cfg.version-r._cfg.version}function ic(e,r,i,a){var c=e._dbSchema;i.objectStoreNames.contains("$meta")&&!c.$meta&&(c.$meta=vi("$meta",qs("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,c);u.create(i),u._completion.catch(a);var f=u._reject.bind(u),p=z.transless||z;Ne(function(){return z.trans=u,z.transless=p,r!==0?(vr(e,i),v=r,((y=u).storeNames.includes("$meta")?y.table("$meta").get("version").then(function(w){return w??v}):F.resolve(v)).then(function(w){return T=w,g=u,b=i,A=[],w=(m=e)._versions,_=m._dbSchema=_r(0,m.idbdb,b),(w=w.filter(function(S){return S._cfg.version>=T})).length!==0?(w.forEach(function(S){A.push(function(){var O=_,C=S._cfg.dbschema;br(m,O,b),br(m,C,b),_=m._dbSchema=C;var $=_i(O,C);$.add.forEach(function(V){bi(b,V[0],V[1].primKey,V[1].indexes)}),$.change.forEach(function(V){if(V.recreate)throw new U.Upgrade("Not yet support for changing primary key");var k=b.objectStore(V.name);V.add.forEach(function(st){return yr(k,st)}),V.change.forEach(function(st){k.deleteIndex(st.name),yr(k,st)}),V.del.forEach(function(st){return k.deleteIndex(st)})});var P=S._cfg.contentUpgrade;if(P&&S._cfg.version>T){vr(m,b),g._memoizedTables={};var B=$t(C);$.del.forEach(function(V){B[V]=O[V]}),yi(m,[m.Transaction.prototype]),gr(m,[m.Transaction.prototype],d(B),B),g.schema=B;var I,K=vt(P);return K&&hn(),$=F.follow(function(){var V;(I=P(g))&&K&&(V=ke.bind(null,null),I.then(V,V))}),I&&typeof I.then=="function"?F.resolve(I):$.then(function(){return I})}}),A.push(function(O){var C,$,P=S._cfg.dbschema;C=P,$=O,[].slice.call($.db.objectStoreNames).forEach(function(B){return C[B]==null&&$.db.deleteObjectStore(B)}),yi(m,[m.Transaction.prototype]),gr(m,[m.Transaction.prototype],m._storeNames,m._dbSchema),g.schema=m._dbSchema}),A.push(function(O){m.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(m.idbdb.version/10)===S._cfg.version?(m.idbdb.deleteObjectStore("$meta"),delete m._dbSchema.$meta,m._storeNames=m._storeNames.filter(function(C){return C!=="$meta"})):O.objectStore("$meta").put(S._cfg.version,"version"))})}),function S(){return A.length?F.resolve(A.shift()(g.idbtrans)).then(S):F.resolve()}().then(function(){Vs(_,b)})):F.resolve();var m,T,g,b,A,_}).catch(f)):(d(c).forEach(function(w){bi(i,w,c[w].primKey,c[w].indexes)}),vr(e,i),void F.follow(function(){return e.on.populate.fire(u)}).catch(f));var y,v})}function sc(e,r){Vs(e._dbSchema,r),r.db.version%10!=0||r.objectStoreNames.contains("$meta")||r.db.createObjectStore("$meta").add(Math.ceil(r.db.version/10-1),"version");var i=_r(0,e.idbdb,r);br(e,e._dbSchema,r);for(var a=0,c=_i(i,e._dbSchema).change;a<c.length;a++){var u=function(f){if(f.change.length||f.recreate)return console.warn("Unable to patch indexes of table ".concat(f.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=r.objectStore(f.name);f.add.forEach(function(y){qt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(f.name,".").concat(y.src)),yr(p,y)})}(c[a]);if(typeof u=="object")return u.value}}function _i(e,r){var i,a={del:[],add:[],change:[]};for(i in e)r[i]||a.del.push(i);for(i in r){var c=e[i],u=r[i];if(c){var f={name:i,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(c.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||c.primKey.auto!==u.primKey.auto)f.recreate=!0,a.change.push(f);else{var p=c.idxByName,y=u.idxByName,v=void 0;for(v in p)y[v]||f.del.push(v);for(v in y){var w=p[v],m=y[v];w?w.src!==m.src&&f.change.push(m):f.add.push(m)}(0<f.del.length||0<f.add.length||0<f.change.length)&&a.change.push(f)}}else a.add.push([i,u])}return a}function bi(e,r,i,a){var c=e.db.createObjectStore(r,i.keyPath?{keyPath:i.keyPath,autoIncrement:i.auto}:{autoIncrement:i.auto});return a.forEach(function(u){return yr(c,u)}),c}function Vs(e,r){d(e).forEach(function(i){r.db.objectStoreNames.contains(i)||(qt&&console.debug("Dexie: Creating missing table",i),bi(r,i,e[i].primKey,e[i].indexes))})}function yr(e,r){e.createIndex(r.name,r.keyPath,{unique:r.unique,multiEntry:r.multi})}function _r(e,r,i){var a={};return wt(r.objectStoreNames,0).forEach(function(c){for(var u=i.objectStore(c),f=mi(js(v=u.keyPath),v||"",!0,!1,!!u.autoIncrement,v&&typeof v!="string",!0),p=[],y=0;y<u.indexNames.length;++y){var w=u.index(u.indexNames[y]),v=w.keyPath,w=mi(w.name,v,!!w.unique,!!w.multiEntry,!1,v&&typeof v!="string",!1);p.push(w)}a[c]=vi(c,f,p)}),a}function br(e,r,i){for(var a=i.db.objectStoreNames,c=0;c<a.length;++c){var u=a[c],f=i.objectStore(u);e._hasGetAll="getAll"in f;for(var p=0;p<f.indexNames.length;++p){var y=f.indexNames[p],v=f.index(y).keyPath,w=typeof v=="string"?v:"["+wt(v).join("+")+"]";!r[u]||(v=r[u].idxByName[w])&&(v.name=y,delete r[u].idxByName[w],r[u].idxByName[y]=v)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&h.WorkerGlobalScope&&h instanceof h.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function qs(e){return e.split(",").map(function(r,i){var a=(r=r.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(a)?a.match(/^\[(.*)\]$/)[1].split("+"):a;return mi(a,c||null,/\&/.test(r),/\*/.test(r),/\+\+/.test(r),E(c),i===0)})}var oc=(Er.prototype._parseStoresSpec=function(e,r){d(e).forEach(function(i){if(e[i]!==null){var a=qs(e[i]),c=a.shift();if(c.unique=!0,c.multi)throw new U.Schema("Primary key cannot be multi-valued");a.forEach(function(u){if(u.auto)throw new U.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new U.Schema("Index must have a name and cannot be an empty string")}),r[i]=vi(i,c,a)}})},Er.prototype.stores=function(i){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?D(this._cfg.storesSource,i):i;var i=r._versions,a={},c={};return i.forEach(function(u){D(a,u._cfg.storesSource),c=u._cfg.dbschema={},u._parseStoresSpec(a,c)}),r._dbSchema=c,yi(r,[r._allTables,r,r.Transaction.prototype]),gr(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],d(c),c),r._storeNames=d(c),this},Er.prototype.upgrade=function(e){return this._cfg.contentUpgrade=le(this._cfg.contentUpgrade||mt,e),this},Er);function Er(){}function Ei(e,r){var i=e._dbNamesDB;return i||(i=e._dbNamesDB=new Ee(fr,{addons:[],indexedDB:e,IDBKeyRange:r})).version(1).stores({dbnames:"name"}),i.table("dbnames")}function wi(e){return e&&typeof e.databases=="function"}function Ti(e){return Ne(function(){return z.letThrough=!0,e()})}function Ai(e){return!("from"in e)}var Ft=function(e,r){if(!this){var i=new Ft;return e&&"d"in e&&D(i,e),i}D(this,arguments.length?{d:1,from:e,to:1<arguments.length?r:e}:{d:0})};function Vn(e,r,i){var a=gt(r,i);if(!isNaN(a)){if(0<a)throw RangeError();if(Ai(e))return D(e,{from:r,to:i,d:1});var c=e.l,a=e.r;if(gt(i,e.from)<0)return c?Vn(c,r,i):e.l={from:r,to:i,d:1,l:null,r:null},Ws(e);if(0<gt(r,e.to))return a?Vn(a,r,i):e.r={from:r,to:i,d:1,l:null,r:null},Ws(e);gt(r,e.from)<0&&(e.from=r,e.l=null,e.d=a?a.d+1:1),0<gt(i,e.to)&&(e.to=i,e.r=null,e.d=e.l?e.l.d+1:1),i=!e.r,c&&!e.l&&qn(e,c),a&&i&&qn(e,a)}}function qn(e,r){Ai(r)||function i(a,y){var u=y.from,f=y.to,p=y.l,y=y.r;Vn(a,u,f),p&&i(a,p),y&&i(a,y)}(e,r)}function Fs(e,r){var i=wr(r),a=i.next();if(a.done)return!1;for(var c=a.value,u=wr(e),f=u.next(c.from),p=f.value;!a.done&&!f.done;){if(gt(p.from,c.to)<=0&&0<=gt(p.to,c.from))return!0;gt(c.from,p.from)<0?c=(a=i.next(p.from)).value:p=(f=u.next(c.from)).value}return!1}function wr(e){var r=Ai(e)?null:{s:0,n:e};return{next:function(i){for(var a=0<arguments.length;r;)switch(r.s){case 0:if(r.s=1,a)for(;r.n.l&&gt(i,r.n.from)<0;)r={up:r,n:r.n.l,s:1};else for(;r.n.l;)r={up:r,n:r.n.l,s:1};case 1:if(r.s=2,!a||gt(i,r.n.to)<=0)return{value:r.n,done:!1};case 2:if(r.n.r){r.s=3,r={up:r,n:r.n.r,s:0};continue}case 3:r=r.up}return{done:!0}}}}function Ws(e){var r,i,a=(((r=e.r)===null||r===void 0?void 0:r.d)||0)-(((i=e.l)===null||i===void 0?void 0:i.d)||0),c=1<a?"r":a<-1?"l":"";c&&(r=c=="r"?"l":"r",i=s({},e),a=e[c],e.from=a.from,e.to=a.to,e[c]=a[c],i[c]=a[r],(e[r]=i).d=Ys(i)),e.d=Ys(e)}function Ys(i){var r=i.r,i=i.l;return(r?i?Math.max(r.d,i.d):r.d:i?i.d:0)+1}function Tr(e,r){return d(r).forEach(function(i){e[i]?qn(e[i],r[i]):e[i]=function a(c){var u,f,p={};for(u in c)L(c,u)&&(f=c[u],p[u]=!f||typeof f!="object"||nt.has(f.constructor)?f:a(f));return p}(r[i])}),e}function Si(e,r){return e.all||r.all||Object.keys(e).some(function(i){return r[i]&&Fs(r[i],e[i])})}X(Ft.prototype,((ie={add:function(e){return qn(this,e),this},addKey:function(e){return Vn(this,e,e),this},addKeys:function(e){var r=this;return e.forEach(function(i){return Vn(r,i,i)}),this},hasKey:function(e){var r=wr(this).next(e).value;return r&&gt(r.from,e)<=0&&0<=gt(r.to,e)}})[R]=function(){return wr(this)},ie));var Xe={},Oi={},Ci=!1;function Ar(e){Tr(Oi,e),Ci||(Ci=!0,setTimeout(function(){Ci=!1,Di(Oi,!(Oi={}))},0))}function Di(e,r){r===void 0&&(r=!1);var i=new Set;if(e.all)for(var a=0,c=Object.values(Xe);a<c.length;a++)Us(f=c[a],e,i,r);else for(var u in e){var f,p=/^idb\:\/\/(.*)\/(.*)\//.exec(u);p&&(u=p[1],p=p[2],(f=Xe["idb://".concat(u,"/").concat(p)])&&Us(f,e,i,r))}i.forEach(function(y){return y()})}function Us(e,r,i,a){for(var c=[],u=0,f=Object.entries(e.queries.query);u<f.length;u++){for(var p=f[u],y=p[0],v=[],w=0,m=p[1];w<m.length;w++){var T=m[w];Si(r,T.obsSet)?T.subscribers.forEach(function(_){return i.add(_)}):a&&v.push(T)}a&&c.push([y,v])}if(a)for(var g=0,b=c;g<b.length;g++){var A=b[g],y=A[0],v=A[1];e.queries.query[y]=v}}function ac(e){var r=e._state,i=e._deps.indexedDB;if(r.isBeingOpened||e.idbdb)return r.dbReadyPromise.then(function(){return r.dbOpenError?kt(r.dbOpenError):e});r.isBeingOpened=!0,r.dbOpenError=null,r.openComplete=!1;var a=r.openCanceller,c=Math.round(10*e.verno),u=!1;function f(){if(r.openCanceller!==a)throw new U.DatabaseClosed("db.open() was cancelled")}function p(){return new F(function(T,g){if(f(),!i)throw new U.MissingAPI;var b=e.name,A=r.autoSchema||!c?i.open(b):i.open(b,c);if(!A)throw new U.MissingAPI;A.onerror=de(g),A.onblocked=xt(e._fireOnBlocked),A.onupgradeneeded=xt(function(_){var S;w=A.transaction,r.autoSchema&&!e._options.allowEmptyDB?(A.onerror=Kn,w.abort(),A.result.close(),(S=i.deleteDatabase(b)).onsuccess=S.onerror=xt(function(){g(new U.NoSuchDatabase("Database ".concat(b," doesnt exist")))})):(w.onerror=de(g),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,m=_<1,e.idbdb=A.result,u&&sc(e,w),ic(e,_/10,w,g))},g),A.onsuccess=xt(function(){w=null;var _,S,O,C,$,P=e.idbdb=A.result,B=wt(P.objectStoreNames);if(0<B.length)try{var I=P.transaction((C=B).length===1?C[0]:C,"readonly");if(r.autoSchema)S=P,O=I,(_=e).verno=S.version/10,O=_._dbSchema=_r(0,S,O),_._storeNames=wt(S.objectStoreNames,0),gr(_,[_._allTables],d(O),O);else if(br(e,e._dbSchema,I),(($=_i(_r(0,($=e).idbdb,I),$._dbSchema)).add.length||$.change.some(function(K){return K.add.length||K.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),P.close(),c=P.version+1,u=!0,T(p());vr(e,I)}catch{}dn.push(e),P.onversionchange=xt(function(K){r.vcFired=!0,e.on("versionchange").fire(K)}),P.onclose=xt(function(K){e.on("close").fire(K)}),m&&($=e._deps,I=b,P=$.indexedDB,$=$.IDBKeyRange,wi(P)||I===fr||Ei(P,$).put({name:I}).catch(mt)),T()},g)}).catch(function(T){switch(T==null?void 0:T.name){case"UnknownError":if(0<r.PR1398_maxLoop)return r.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<c)return c=0,p()}return F.reject(T)})}var y,v=r.dbReadyResolve,w=null,m=!1;return F.race([a,(typeof navigator>"u"?F.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(T){function g(){return indexedDB.databases().finally(T)}y=setInterval(g,100),g()}).finally(function(){return clearInterval(y)}):Promise.resolve()).then(p)]).then(function(){return f(),r.onReadyBeingFired=[],F.resolve(Ti(function(){return e.on.ready.fire(e.vip)})).then(function T(){if(0<r.onReadyBeingFired.length){var g=r.onReadyBeingFired.reduce(le,mt);return r.onReadyBeingFired=[],F.resolve(Ti(function(){return g(e.vip)})).then(T)}})}).finally(function(){r.openCanceller===a&&(r.onReadyBeingFired=null,r.isBeingOpened=!1)}).catch(function(T){r.dbOpenError=T;try{w&&w.abort()}catch{}return a===r.openCanceller&&e._close(),kt(T)}).finally(function(){r.openComplete=!0,v()}).then(function(){var T;return m&&(T={},e.tables.forEach(function(g){g.schema.indexes.forEach(function(b){b.name&&(T["idb://".concat(e.name,"/").concat(g.name,"/").concat(b.name)]=new Ft(-1/0,[[[]]]))}),T["idb://".concat(e.name,"/").concat(g.name,"/")]=T["idb://".concat(e.name,"/").concat(g.name,"/:dels")]=new Ft(-1/0,[[[]]])}),Ie(Hn).fire(T),Di(T,!0)),e})}function $i(e){function r(u){return e.next(u)}var i=c(r),a=c(function(u){return e.throw(u)});function c(u){return function(y){var p=u(y),y=p.value;return p.done?y:y&&typeof y.then=="function"?y.then(i,a):E(y)?Promise.all(y).then(i,a):i(y)}}return c(r)()}function Sr(e,r,i){for(var a=E(e)?e.slice():[e],c=0;c<i;++c)a.push(r);return a}var cc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return s(s({},e),{table:function(r){var i=e.table(r),a=i.schema,c={},u=[];function f(m,T,g){var b=Bn(m),A=c[b]=c[b]||[],_=m==null?0:typeof m=="string"?1:m.length,S=0<T,S=s(s({},g),{name:S?"".concat(b,"(virtual-from:").concat(g.name,")"):g.name,lowLevelIndex:g,isVirtual:S,keyTail:T,keyLength:_,extractKey:gi(m),unique:!S&&g.unique});return A.push(S),S.isPrimaryKey||u.push(S),1<_&&f(_===2?m[0]:m.slice(0,_-1),T+1,g),A.sort(function(O,C){return O.keyTail-C.keyTail}),S}r=f(a.primaryKey.keyPath,0,a.primaryKey),c[":id"]=[r];for(var p=0,y=a.indexes;p<y.length;p++){var v=y[p];f(v.keyPath,0,v)}function w(m){var T,g=m.query.index;return g.isVirtual?s(s({},m),{query:{index:g.lowLevelIndex,range:(T=m.query.range,g=g.keyTail,{type:T.type===1?2:T.type,lower:Sr(T.lower,T.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:Sr(T.upper,T.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}):m}return s(s({},i),{schema:s(s({},a),{primaryKey:r,indexes:u,getIndexByKeyPath:function(m){return(m=c[Bn(m)])&&m[0]}}),count:function(m){return i.count(w(m))},query:function(m){return i.query(w(m))},openCursor:function(m){var T=m.query.index,g=T.keyTail,b=T.isVirtual,A=T.keyLength;return b?i.openCursor(w(m)).then(function(S){return S&&_(S)}):i.openCursor(m);function _(S){return Object.create(S,{continue:{value:function(O){O!=null?S.continue(Sr(O,m.reverse?e.MAX_KEY:e.MIN_KEY,g)):m.unique?S.continue(S.key.slice(0,A).concat(m.reverse?e.MIN_KEY:e.MAX_KEY,g)):S.continue()}},continuePrimaryKey:{value:function(O,C){S.continuePrimaryKey(Sr(O,e.MAX_KEY,g),C)}},primaryKey:{get:function(){return S.primaryKey}},key:{get:function(){var O=S.key;return A===1?O[0]:O.slice(0,A)}},value:{get:function(){return S.value}}})}}})}})}};function xi(e,r,i,a){return i=i||{},a=a||"",d(e).forEach(function(c){var u,f,p;L(r,c)?(u=e[c],f=r[c],typeof u=="object"&&typeof f=="object"&&u&&f?(p=q(u))!==q(f)?i[a+c]=r[c]:p==="Object"?xi(u,f,i,a+c+"."):u!==f&&(i[a+c]=r[c]):u!==f&&(i[a+c]=r[c])):i[a+c]=void 0}),d(r).forEach(function(c){L(e,c)||(i[a+c]=r[c])}),i}function Ni(e,r){return r.type==="delete"?r.keys:r.keys||r.values.map(e.extractKey)}var lc={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return s(s({},e),{table:function(r){var i=e.table(r),a=i.schema.primaryKey;return s(s({},i),{mutate:function(c){var u=z.trans,f=u.table(r).hook,p=f.deleting,y=f.creating,v=f.updating;switch(c.type){case"add":if(y.fire===mt)break;return u._promise("readwrite",function(){return w(c)},!0);case"put":if(y.fire===mt&&v.fire===mt)break;return u._promise("readwrite",function(){return w(c)},!0);case"delete":if(p.fire===mt)break;return u._promise("readwrite",function(){return w(c)},!0);case"deleteRange":if(p.fire===mt)break;return u._promise("readwrite",function(){return function m(T,g,b){return i.query({trans:T,values:!1,query:{index:a,range:g},limit:b}).then(function(A){var _=A.result;return w({type:"delete",keys:_,trans:T}).then(function(S){return 0<S.numFailures?Promise.reject(S.failures[0]):_.length<b?{failures:[],numFailures:0,lastResult:void 0}:m(T,s(s({},g),{lower:_[_.length-1],lowerOpen:!0}),b)})})}(c.trans,c.range,1e4)},!0)}return i.mutate(c);function w(m){var T,g,b,A=z.trans,_=m.keys||Ni(a,m);if(!_)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?s(s({},m),{keys:_}):s({},m)).type!=="delete"&&(m.values=l([],m.values)),m.keys&&(m.keys=l([],m.keys)),T=i,b=_,((g=m).type==="add"?Promise.resolve([]):T.getMany({trans:g.trans,keys:b,cache:"immutable"})).then(function(S){var O=_.map(function(C,$){var P,B,I,K=S[$],V={onerror:null,onsuccess:null};return m.type==="delete"?p.fire.call(V,C,K,A):m.type==="add"||K===void 0?(P=y.fire.call(V,C,m.values[$],A),C==null&&P!=null&&(m.keys[$]=C=P,a.outbound||lt(m.values[$],a.keyPath,C))):(P=xi(K,m.values[$]),(B=v.fire.call(V,P,C,K,A))&&(I=m.values[$],Object.keys(B).forEach(function(k){L(I,k)?I[k]=B[k]:lt(I,k,B[k])}))),V});return i.mutate(m).then(function(C){for(var $=C.failures,P=C.results,B=C.numFailures,C=C.lastResult,I=0;I<_.length;++I){var K=(P||_)[I],V=O[I];K==null?V.onerror&&V.onerror($[I]):V.onsuccess&&V.onsuccess(m.type==="put"&&S[I]?m.values[I]:K)}return{failures:$,results:P,numFailures:B,lastResult:C}}).catch(function(C){return O.forEach(function($){return $.onerror&&$.onerror(C)}),Promise.reject(C)})})}}})}})}};function zs(e,r,i){try{if(!r||r.keys.length<e.length)return null;for(var a=[],c=0,u=0;c<r.keys.length&&u<e.length;++c)gt(r.keys[c],e[u])===0&&(a.push(i?At(r.values[c]):r.values[c]),++u);return a.length===e.length?a:null}catch{return null}}var uc={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var i=e.table(r);return s(s({},i),{getMany:function(a){if(!a.cache)return i.getMany(a);var c=zs(a.keys,a.trans._cache,a.cache==="clone");return c?F.resolve(c):i.getMany(a).then(function(u){return a.trans._cache={keys:a.keys,values:a.cache==="clone"?At(u):u},u})},mutate:function(a){return a.type!=="add"&&(a.trans._cache=null),i.mutate(a)}})}}}};function Xs(e,r){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!r.schema.primaryKey.outbound}function Gs(e,r){switch(e){case"query":return r.values&&!r.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var fc={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,i=new Ft(e.MIN_KEY,e.MAX_KEY);return s(s({},e),{transaction:function(a,c,u){if(z.subscr&&c!=="readonly")throw new U.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(z.querier));return e.transaction(a,c,u)},table:function(a){var c=e.table(a),u=c.schema,f=u.primaryKey,m=u.indexes,p=f.extractKey,y=f.outbound,v=f.autoIncrement&&m.filter(function(g){return g.compound&&g.keyPath.includes(f.keyPath)}),w=s(s({},c),{mutate:function(g){function b(k){return k="idb://".concat(r,"/").concat(a,"/").concat(k),C[k]||(C[k]=new Ft)}var A,_,S,O=g.trans,C=g.mutatedParts||(g.mutatedParts={}),$=b(""),P=b(":dels"),B=g.type,V=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[Ni(f,g).filter(function(k){return k}),g.values]:[],I=V[0],K=V[1],V=g.trans._cache;return E(I)?($.addKeys(I),(V=B==="delete"||I.length===K.length?zs(I,V):null)||P.addKeys(I),(V||K)&&(A=b,_=V,S=K,u.indexes.forEach(function(k){var st=A(k.name||"");function at(ut){return ut!=null?k.extractKey(ut):null}function ht(ut){return k.multiEntry&&E(ut)?ut.forEach(function(ue){return st.addKey(ue)}):st.addKey(ut)}(_||S).forEach(function(ut,jt){var ft=_&&at(_[jt]),jt=S&&at(S[jt]);gt(ft,jt)!==0&&(ft!=null&&ht(ft),jt!=null&&ht(jt))})}))):I?(K={from:I.lower,to:I.upper},P.add(K),$.add(K)):($.add(i),P.add(i),u.indexes.forEach(function(k){return b(k.name).add(i)})),c.mutate(g).then(function(k){return!I||g.type!=="add"&&g.type!=="put"||($.addKeys(k.results),v&&v.forEach(function(st){var at=g.values.map(function(ut){return st.extractKey(ut)}),ht=st.keyPath.findIndex(function(ut){return ut===f.keyPath});k.results.forEach(function(ut){return at[ht]=ut}),b(st.name).addKeys(at)})),O.mutatedParts=Tr(O.mutatedParts||{},C),k})}}),m=function(b){var A=b.query,b=A.index,A=A.range;return[b,new Ft((b=A.lower)!==null&&b!==void 0?b:e.MIN_KEY,(A=A.upper)!==null&&A!==void 0?A:e.MAX_KEY)]},T={get:function(g){return[f,new Ft(g.key)]},getMany:function(g){return[f,new Ft().addKeys(g.keys)]},count:m,query:m,openCursor:m};return d(T).forEach(function(g){w[g]=function(b){var A=z.subscr,_=!!A,S=Xs(z,c)&&Gs(g,b)?b.obsSet={}:A;if(_){var O=function(K){return K="idb://".concat(r,"/").concat(a,"/").concat(K),S[K]||(S[K]=new Ft)},C=O(""),$=O(":dels"),A=T[g](b),_=A[0],A=A[1];if((g==="query"&&_.isPrimaryKey&&!b.values?$:O(_.name||"")).add(A),!_.isPrimaryKey){if(g!=="count"){var P=g==="query"&&y&&b.values&&c.query(s(s({},b),{values:!1}));return c[g].apply(this,arguments).then(function(K){if(g==="query"){if(y&&b.values)return P.then(function(at){return at=at.result,C.addKeys(at),K});var V=b.values?K.result.map(p):K.result;(b.values?C:$).addKeys(V)}else if(g==="openCursor"){var k=K,st=b.values;return k&&Object.create(k,{key:{get:function(){return $.addKey(k.primaryKey),k.key}},primaryKey:{get:function(){var at=k.primaryKey;return $.addKey(at),at}},value:{get:function(){return st&&C.addKey(k.primaryKey),k.value}}})}return K})}$.add(i)}}return c[g].apply(this,arguments)}}),w}})}};function Qs(e,r,i){if(i.numFailures===0)return r;if(r.type==="deleteRange")return null;var a=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return i.numFailures===a?null:(r=s({},r),E(r.keys)&&(r.keys=r.keys.filter(function(c,u){return!(u in i.failures)})),"values"in r&&E(r.values)&&(r.values=r.values.filter(function(c,u){return!(u in i.failures)})),r)}function ki(e,r){return i=e,((a=r).lower===void 0||(a.lowerOpen?0<gt(i,a.lower):0<=gt(i,a.lower)))&&(e=e,(r=r).upper===void 0||(r.upperOpen?gt(e,r.upper)<0:gt(e,r.upper)<=0));var i,a}function Js(e,r,T,a,c,u){if(!T||T.length===0)return e;var f=r.query.index,p=f.multiEntry,y=r.query.range,v=a.schema.primaryKey.extractKey,w=f.extractKey,m=(f.lowLevelIndex||f).extractKey,T=T.reduce(function(g,b){var A=g,_=[];if(b.type==="add"||b.type==="put")for(var S=new Ft,O=b.values.length-1;0<=O;--O){var C,$=b.values[O],P=v($);S.hasKey(P)||(C=w($),(p&&E(C)?C.some(function(V){return ki(V,y)}):ki(C,y))&&(S.addKey(P),_.push($)))}switch(b.type){case"add":A=g.concat(r.values?_:_.map(function(k){return v(k)}));break;case"put":var B=new Ft().addKeys(b.values.map(function(k){return v(k)})),A=g.filter(function(k){return!B.hasKey(r.values?v(k):k)}).concat(r.values?_:_.map(function(k){return v(k)}));break;case"delete":var I=new Ft().addKeys(b.keys);A=g.filter(function(k){return!I.hasKey(r.values?v(k):k)});break;case"deleteRange":var K=b.range;A=g.filter(function(k){return!ki(v(k),K)})}return A},e);return T===e?e:(T.sort(function(g,b){return gt(m(g),m(b))||gt(v(g),v(b))}),r.limit&&r.limit<1/0&&(T.length>r.limit?T.length=r.limit:e.length===r.limit&&T.length<r.limit&&(c.dirty=!0)),u?Object.freeze(T):T)}function Zs(e,r){return gt(e.lower,r.lower)===0&&gt(e.upper,r.upper)===0&&!!e.lowerOpen==!!r.lowerOpen&&!!e.upperOpen==!!r.upperOpen}function hc(e,r){return function(i,a,c,u){if(i===void 0)return a!==void 0?-1:0;if(a===void 0)return 1;if((a=gt(i,a))===0){if(c&&u)return 0;if(c)return 1;if(u)return-1}return a}(e.lower,r.lower,e.lowerOpen,r.lowerOpen)<=0&&0<=function(i,a,c,u){if(i===void 0)return a!==void 0?1:0;if(a===void 0)return-1;if((a=gt(i,a))===0){if(c&&u)return 0;if(c)return-1;if(u)return 1}return a}(e.upper,r.upper,e.upperOpen,r.upperOpen)}function dc(e,r,i,a){e.subscribers.add(i),a.addEventListener("abort",function(){var c,u;e.subscribers.delete(i),e.subscribers.size===0&&(c=e,u=r,setTimeout(function(){c.subscribers.size===0&&H(u,c)},3e3))})}var pc={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return s(s({},e),{transaction:function(i,a,c){var u,f,p=e.transaction(i,a,c);return a==="readwrite"&&(f=(u=new AbortController).signal,c=function(y){return function(){if(u.abort(),a==="readwrite"){for(var v=new Set,w=0,m=i;w<m.length;w++){var T=m[w],g=Xe["idb://".concat(r,"/").concat(T)];if(g){var b=e.table(T),A=g.optimisticOps.filter(function(st){return st.trans===p});if(p._explicit&&y&&p.mutatedParts)for(var _=0,S=Object.values(g.queries.query);_<S.length;_++)for(var O=0,C=(B=S[_]).slice();O<C.length;O++)Si((I=C[O]).obsSet,p.mutatedParts)&&(H(B,I),I.subscribers.forEach(function(st){return v.add(st)}));else if(0<A.length){g.optimisticOps=g.optimisticOps.filter(function(st){return st.trans!==p});for(var $=0,P=Object.values(g.queries.query);$<P.length;$++)for(var B,I,K,V=0,k=(B=P[$]).slice();V<k.length;V++)(I=k[V]).res!=null&&p.mutatedParts&&(y&&!I.dirty?(K=Object.isFrozen(I.res),K=Js(I.res,I.req,A,b,I,K),I.dirty?(H(B,I),I.subscribers.forEach(function(st){return v.add(st)})):K!==I.res&&(I.res=K,I.promise=F.resolve({result:K}))):(I.dirty&&H(B,I),I.subscribers.forEach(function(st){return v.add(st)})))}}}v.forEach(function(st){return st()})}}},p.addEventListener("abort",c(!1),{signal:f}),p.addEventListener("error",c(!1),{signal:f}),p.addEventListener("complete",c(!0),{signal:f})),p},table:function(i){var a=e.table(i),c=a.schema.primaryKey;return s(s({},a),{mutate:function(u){var f=z.trans;if(c.outbound||f.db._options.cache==="disabled"||f.explicit)return a.mutate(u);var p=Xe["idb://".concat(r,"/").concat(i)];return p?(f=a.mutate(u),u.type!=="add"&&u.type!=="put"||!(50<=u.values.length||Ni(c,u).some(function(y){return y==null}))?(p.optimisticOps.push(u),u.mutatedParts&&Ar(u.mutatedParts),f.then(function(y){0<y.numFailures&&(H(p.optimisticOps,u),(y=Qs(0,u,y))&&p.optimisticOps.push(y),u.mutatedParts&&Ar(u.mutatedParts))}),f.catch(function(){H(p.optimisticOps,u),u.mutatedParts&&Ar(u.mutatedParts)})):f.then(function(y){var v=Qs(0,s(s({},u),{values:u.values.map(function(g,m){var T,g=(T=c.keyPath)!==null&&T!==void 0&&T.includes(".")?At(g):s({},g);return lt(g,c.keyPath,y.results[m]),g})}),y);p.optimisticOps.push(v),queueMicrotask(function(){return u.mutatedParts&&Ar(u.mutatedParts)})}),f):a.mutate(u)},query:function(u){if(!Xs(z,a)||!Gs("query",u))return a.query(u);var f=((v=z.trans)===null||v===void 0?void 0:v.db._options.cache)==="immutable",m=z,p=m.requery,y=m.signal,v=function(b,A,_,S){var O=Xe["idb://".concat(b,"/").concat(A)];if(!O)return[];if(!(A=O.queries[_]))return[null,!1,O,null];var C=A[(S.query?S.query.index.name:null)||""];if(!C)return[null,!1,O,null];switch(_){case"query":var $=C.find(function(P){return P.req.limit===S.limit&&P.req.values===S.values&&Zs(P.req.query.range,S.query.range)});return $?[$,!0,O,C]:[C.find(function(P){return("limit"in P.req?P.req.limit:1/0)>=S.limit&&(!S.values||P.req.values)&&hc(P.req.query.range,S.query.range)}),!1,O,C];case"count":return $=C.find(function(P){return Zs(P.req.query.range,S.query.range)}),[$,!!$,O,C]}}(r,i,"query",u),w=v[0],m=v[1],T=v[2],g=v[3];return w&&m?w.obsSet=u.obsSet:(m=a.query(u).then(function(b){var A=b.result;if(w&&(w.res=A),f){for(var _=0,S=A.length;_<S;++_)Object.freeze(A[_]);Object.freeze(A)}else b.result=At(A);return b}).catch(function(b){return g&&w&&H(g,w),Promise.reject(b)}),w={obsSet:u.obsSet,promise:m,subscribers:new Set,type:"query",req:u,dirty:!1},g?g.push(w):(g=[w],(T=T||(Xe["idb://".concat(r,"/").concat(i)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=g)),dc(w,g,p,y),w.promise.then(function(b){return{result:Js(b.result,u,T==null?void 0:T.optimisticOps,a,w,f)}})}})}})}};function Or(e,r){return new Proxy(e,{get:function(i,a,c){return a==="db"?r:Reflect.get(i,a,c)}})}var Ee=(Lt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new U.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new U.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var r=this._versions,i=r.filter(function(a){return a._cfg.version===e})[0];return i||(i=new this.Version(e),r.push(i),r.sort(rc),i.stores({}),this._state.autoSchema=!1,i)},Lt.prototype._whenReady=function(e){var r=this;return this.idbdb&&(this._state.openComplete||z.letThrough||this._vip)?e():new F(function(i,a){if(r._state.openComplete)return a(new U.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._state.autoOpen)return void a(new U.DatabaseClosed);r.open().catch(mt)}r._state.dbReadyPromise.then(i,a)}).then(e)},Lt.prototype.use=function(e){var r=e.stack,i=e.create,a=e.level,c=e.name;return c&&this.unuse({stack:r,name:c}),e=this._middlewares[r]||(this._middlewares[r]=[]),e.push({stack:r,create:i,level:a??10,name:c}),e.sort(function(u,f){return u.level-f.level}),this},Lt.prototype.unuse=function(e){var r=e.stack,i=e.name,a=e.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(c){return a?c.create!==a:!!i&&c.name!==i})),this},Lt.prototype.open=function(){var e=this;return Ye(xe,function(){return ac(e)})},Lt.prototype._close=function(){var e=this._state,r=dn.indexOf(this);if(0<=r&&dn.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new F(function(i){e.dbReadyResolve=i}),e.openCanceller=new F(function(i,a){e.cancelOpen=a}))},Lt.prototype.close=function(i){var r=(i===void 0?{disableAutoOpen:!0}:i).disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new U.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new U.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},Lt.prototype.delete=function(e){var r=this;e===void 0&&(e={disableAutoOpen:!0});var i=0<arguments.length&&typeof arguments[0]!="object",a=this._state;return new F(function(c,u){function f(){r.close(e);var p=r._deps.indexedDB.deleteDatabase(r.name);p.onsuccess=xt(function(){var y,v,w;y=r._deps,v=r.name,w=y.indexedDB,y=y.IDBKeyRange,wi(w)||v===fr||Ei(w,y).delete(v).catch(mt),c()}),p.onerror=de(u),p.onblocked=r._fireOnBlocked}if(i)throw new U.InvalidArgument("Invalid closeOptions argument to db.delete()");a.isBeingOpened?a.dbReadyPromise.then(f):f()})},Lt.prototype.backendDB=function(){return this.idbdb},Lt.prototype.isOpen=function(){return this.idbdb!==null},Lt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},Lt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Lt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Lt.prototype,"tables",{get:function(){var e=this;return d(this._allTables).map(function(r){return e._allTables[r]})},enumerable:!1,configurable:!0}),Lt.prototype.transaction=function(){var e=(function(r,i,a){var c=arguments.length;if(c<2)throw new U.InvalidArgument("Too few arguments");for(var u=new Array(c-1);--c;)u[c-1]=arguments[c];return a=u.pop(),[r,ct(u),a]}).apply(this,arguments);return this._transaction.apply(this,e)},Lt.prototype._transaction=function(e,r,i){var a=this,c=z.trans;c&&c.db===this&&e.indexOf("!")===-1||(c=null);var u,f,p=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");try{if(f=r.map(function(v){if(v=v instanceof a.Table?v.name:v,typeof v!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return v}),e=="r"||e===li)u=li;else{if(e!="rw"&&e!=ui)throw new U.InvalidArgument("Invalid transaction mode: "+e);u=ui}if(c){if(c.mode===li&&u===ui){if(!p)throw new U.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&f.forEach(function(v){if(c&&c.storeNames.indexOf(v)===-1){if(!p)throw new U.SubTransaction("Table "+v+" not included in parent transaction.");c=null}}),p&&c&&!c.active&&(c=null)}}catch(v){return c?c._promise(null,function(w,m){m(v)}):kt(v)}var y=(function v(w,m,T,g,b){return F.resolve().then(function(){var A=z.transless||z,_=w._createTransaction(m,T,w._dbSchema,g);if(_.explicit=!0,A={trans:_,transless:A},g)_.idbtrans=g.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,w._state.PR1398_maxLoop=3}catch(C){return C.name===Ht.InvalidState&&w.isOpen()&&0<--w._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),w.close({disableAutoOpen:!1}),w.open().then(function(){return v(w,m,T,null,b)})):kt(C)}var S,O=vt(b);return O&&hn(),A=F.follow(function(){var C;(S=b.call(_,_))&&(O?(C=ke.bind(null,null),S.then(C,C)):typeof S.next=="function"&&typeof S.throw=="function"&&(S=$i(S)))},A),(S&&typeof S.then=="function"?F.resolve(S).then(function(C){return _.active?C:kt(new U.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):A.then(function(){return S})).then(function(C){return g&&_._resolve(),_._completion.then(function(){return C})}).catch(function(C){return _._reject(C),kt(C)})})}).bind(null,this,u,f,c,i);return c?c._promise(u,y,"lock"):z.trans?Ye(z.transless,function(){return a._whenReady(y)}):this._whenReady(y)},Lt.prototype.table=function(e){if(!L(this._allTables,e))throw new U.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Lt);function Lt(e,r){var i=this;this._middlewares={},this.verno=0;var a=Lt.dependencies;this._options=r=s({addons:Lt.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},a=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var c,u,f,p,y,v={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:mt,dbReadyPromise:null,cancelOpen:mt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};v.dbReadyPromise=new F(function(m){v.dbReadyResolve=m}),v.openCanceller=new F(function(m,T){v.cancelOpen=T}),this._state=v,this.name=e,this.on=In(this,"populate","blocked","versionchange","close",{ready:[le,mt]}),this.on.ready.subscribe=Tt(this.on.ready.subscribe,function(m){return function(T,g){Lt.vip(function(){var b,A=i._state;A.openComplete?(A.dbOpenError||F.resolve().then(T),g&&m(T)):A.onReadyBeingFired?(A.onReadyBeingFired.push(T),g&&m(T)):(m(T),b=i,g||m(function _(){b.on.ready.unsubscribe(T),b.on.ready.unsubscribe(_)}))})}}),this.Collection=(c=this,Mn(Ga.prototype,function(S,_){this.db=c;var g=xs,b=null;if(_)try{g=_()}catch(O){b=O}var A=S._ctx,_=A.table,S=_.hook.reading.fire;this._ctx={table:_,index:A.index,isPrimKey:!A.index||_.schema.primKey.keyPath&&A.index===_.schema.primKey.name,range:g,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:b,or:A.or,valueMapper:S!==Zt?S:null}})),this.Table=(u=this,Mn(Ps.prototype,function(m,T,g){this.db=u,this._tx=g,this.name=m,this.schema=T,this.hook=u._allTables[m]?u._allTables[m].hook:In(null,{creating:[er,mt],reading:[Zr,Zt],updating:[ti,mt],deleting:[nr,mt]})})),this.Transaction=(f=this,Mn(Za.prototype,function(m,T,g,b,A){var _=this;this.db=f,this.mode=m,this.storeNames=T,this.schema=g,this.chromeTransactionDurability=b,this.idbtrans=null,this.on=In(this,"complete","error","abort"),this.parent=A||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F(function(S,O){_._resolve=S,_._reject=O}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(S){var O=_.active;return _.active=!1,_.on.error.fire(S),_.parent?_.parent._reject(S):O&&_.idbtrans&&_.idbtrans.abort(),kt(S)})})),this.Version=(p=this,Mn(oc.prototype,function(m){this.db=p,this._cfg={version:m,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(y=this,Mn(Hs.prototype,function(m,T,g){if(this.db=y,this._ctx={table:m,index:T===":id"?null:T,or:g},this._cmp=this._ascending=gt,this._descending=function(b,A){return gt(A,b)},this._max=function(b,A){return 0<gt(b,A)?b:A},this._min=function(b,A){return gt(b,A)<0?b:A},this._IDBKeyRange=y._deps.IDBKeyRange,!this._IDBKeyRange)throw new U.MissingAPI})),this.on("versionchange",function(m){0<m.newVersion?console.warn("Another connection wants to upgrade database '".concat(i.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(i.name,"'. Closing db now to resume the delete request.")),i.close({disableAutoOpen:!1})}),this.on("blocked",function(m){!m.newVersion||m.newVersion<m.oldVersion?console.warn("Dexie.delete('".concat(i.name,"') was blocked")):console.warn("Upgrade '".concat(i.name,"' blocked by other connection holding version ").concat(m.oldVersion/10))}),this._maxKey=jn(r.IDBKeyRange),this._createTransaction=function(m,T,g,b){return new i.Transaction(m,T,g,i._options.chromeTransactionDurability,b)},this._fireOnBlocked=function(m){i.on("blocked").fire(m),dn.filter(function(T){return T.name===i.name&&T!==i&&!T._state.vcFired}).map(function(T){return T.on("versionchange").fire(m)})},this.use(uc),this.use(pc),this.use(fc),this.use(cc),this.use(lc);var w=new Proxy(this,{get:function(m,T,g){if(T==="_vip")return!0;if(T==="table")return function(A){return Or(i.table(A),w)};var b=Reflect.get(m,T,g);return b instanceof Ps?Or(b,w):T==="tables"?b.map(function(A){return Or(A,w)}):T==="_createTransaction"?function(){return Or(b.apply(this,arguments),w)}:b}});this.vip=w,a.forEach(function(m){return m(i)})}var Cr,ie=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",mc=(Li.prototype.subscribe=function(e,r,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:r,complete:i})},Li.prototype[ie]=function(){return this},Li);function Li(e){this._subscribe=e}try{Cr={indexedDB:h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,IDBKeyRange:h.IDBKeyRange||h.webkitIDBKeyRange}}catch{Cr={indexedDB:null,IDBKeyRange:null}}function to(e){var r,i=!1,a=new mc(function(c){var u=vt(e),f,p=!1,y={},v={},w={get closed(){return p},unsubscribe:function(){p||(p=!0,f&&f.abort(),m&&Ie.storagemutated.unsubscribe(g))}};c.start&&c.start(w);var m=!1,T=function(){return ci(b)},g=function(A){Tr(y,A),Si(v,y)&&T()},b=function(){var A,_,S;!p&&Cr.indexedDB&&(y={},A={},f&&f.abort(),f=new AbortController,S=function(O){var C=un();try{u&&hn();var $=Ne(e,O);return $=u?$.finally(ke):$}finally{C&&fn()}}(_={subscr:A,signal:f.signal,requery:T,querier:e,trans:null}),Promise.resolve(S).then(function(O){i=!0,r=O,p||_.signal.aborted||(y={},function(C){for(var $ in C)if(L(C,$))return;return 1}(v=A)||m||(Ie(Hn,g),m=!0),ci(function(){return!p&&c.next&&c.next(O)}))},function(O){i=!1,["DatabaseClosedError","AbortError"].includes(O==null?void 0:O.name)||p||ci(function(){p||c.error&&c.error(O)})}))};return setTimeout(T,0),w});return a.hasValue=function(){return i},a.getValue=function(){return r},a}var Ge=Ee;function Pi(e){var r=Me;try{Me=!0,Ie.storagemutated.fire(e),Di(e,!0)}finally{Me=r}}X(Ge,s(s({},Kt),{delete:function(e){return new Ge(e,{addons:[]}).delete()},exists:function(e){return new Ge(e,{addons:[]}).open().then(function(r){return r.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=Ge.dependencies,i=r.indexedDB,r=r.IDBKeyRange,(wi(i)?Promise.resolve(i.databases()).then(function(a){return a.map(function(c){return c.name}).filter(function(c){return c!==fr})}):Ei(i,r).toCollection().primaryKeys()).then(e)}catch{return kt(new U.MissingAPI)}var r,i},defineClass:function(){return function(e){D(this,e)}},ignoreTransaction:function(e){return z.trans?Ye(z.transless,e):e()},vip:Ti,async:function(e){return function(){try{var r=$i(e.apply(this,arguments));return r&&typeof r.then=="function"?r:F.resolve(r)}catch(i){return kt(i)}}},spawn:function(e,r,i){try{var a=$i(e.apply(i,r||[]));return a&&typeof a.then=="function"?a:F.resolve(a)}catch(c){return kt(c)}},currentTransaction:{get:function(){return z.trans||null}},waitFor:function(e,r){return r=F.resolve(typeof e=="function"?Ge.ignoreTransaction(e):e).timeout(r||6e4),z.trans?z.trans.waitFor(r):r},Promise:F,debug:{get:function(){return qt},set:function(e){Ln(e)}},derive:et,extend:D,props:X,override:Tt,Events:In,on:Ie,liveQuery:to,extendObservabilitySet:Tr,getByKeyPath:rt,setByKeyPath:lt,delByKeyPath:function(e,r){typeof r=="string"?lt(e,r,void 0):"length"in r&&[].map.call(r,function(i){lt(e,i,void 0)})},shallowClone:$t,deepClone:At,getObjectDiff:xi,cmp:gt,asap:dt,minKey:-1/0,addons:[],connections:dn,errnames:Ht,dependencies:Cr,cache:Xe,semVer:"4.0.8",version:"4.0.8".split(".").map(function(e){return parseInt(e)}).reduce(function(e,r,i){return e+r/Math.pow(10,2*i)})})),Ge.maxKey=jn(Ge.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ie(Hn,function(e){Me||(e=new CustomEvent(pi,{detail:e}),Me=!0,dispatchEvent(e),Me=!1)}),addEventListener(pi,function(e){e=e.detail,Me||Pi(e)}));var vn,Me=!1,eo=function(){};return typeof BroadcastChannel<"u"&&((eo=function(){(vn=new BroadcastChannel(pi)).onmessage=function(e){return e.data&&Pi(e.data)}})(),typeof vn.unref=="function"&&vn.unref(),Ie(Hn,function(e){Me||vn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ee.disableBfCache&&e.persisted){qt&&console.debug("Dexie: handling persisted pagehide"),vn!=null&&vn.close();for(var r=0,i=dn;r<i.length;r++)i[r].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Ee.disableBfCache&&e.persisted&&(qt&&console.debug("Dexie: handling persisted pageshow"),eo(),Pi({all:new Ft(-1/0,[[]])}))})),F.rejectionMapper=function(e,r){return!e||e instanceof _t||e instanceof TypeError||e instanceof SyntaxError||!e.name||!It[e.name]?e:(r=new It[e.name](r||e.message,e),"stack"in e&&ot(r,"stack",{get:function(){return this.inner.stack}}),r)},Ln(qt),s(Ee,Object.freeze({__proto__:null,Dexie:Ee,liveQuery:to,Entity:Ns,cmp:gt,PropModSymbol:be,PropModification:Rn,replacePrefix:function(e,r){return new Rn({replacePrefix:[e,r]})},add:function(e){return new Rn({add:e})},remove:function(e){return new Rn({remove:e})},default:Ee,RangeSet:Ft,mergeRanges:qn,rangesOverlap:Fs}),{default:Ee}),Ee})})(Fa);var Nd=Fa.exports;const is=os(Nd),Ho=Symbol.for("Dexie"),ss=globalThis[Ho]||(globalThis[Ho]=is);if(is.semVer!==ss.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${is.semVer} and ${ss.semVer}`);const kd="yuimarldb1";class jo extends ss{constructor(){super(kd);j(this,"trees");this.version(1).stores({trees:"id"}),this.trees=this.table("trees")}}class Ld{constructor(t,n,s){j(this,"id");j(this,"open");j(this,"color");this.id=t,this.open=n,this.color=s}}class Pd{constructor(){j(this,"id","ganttframe");j(this,"width",0);j(this,"height",0);j(this,"columnHeader",new bc(this));j(this,"columnBody",new Ec(this));j(this,"columnScroll",new wc(this));j(this,"calendarHeader",new Ac(this));j(this,"calendarBody",new Sc(this));j(this,"calendarScroll",new Oc(this));j(this,"ticketModal",new xd);j(this,"sch",new Cc(this));j(this,"scv",new Dc(this));j(this,"colW",0);j(this,"calendarLeft",0);j(this,"calendarStart",Gt());j(this,"calendarEnd",Gt());j(this,"calendarTotalWidth",0);j(this,"ticketsTotalHeight",0);j(this,"ticketsFrameHeight",0);j(this,"schThreshold",0);j(this,"posX",0);j(this,"cols",[]);j(this,"holidays",[]);j(this,"tickets",[]);j(this,"treeList",[]);j(this,"_idb");this._idb=new jo;const t=document.querySelector("#startdate"),n=document.querySelector("#enddate");this.calendarStart=Gt(`${(t==null?void 0:t.value)??""}`),this.calendarEnd=Gt(`${(n==null?void 0:n.value)??""}`);const s=document.querySelector("#holidays");s!=null&&s.value&&(this.holidays=s.value.split(",").map(h=>Gt(h)).filter(h=>h.isValid()));const l=document.querySelector("#tickets");l!=null&&l.value&&(this.tickets=JSON.parse(l.value)),this.cols=[{name:"ID",width:54},{name:"チケット名",width:320},{name:"開始日",width:67},{name:"終了日",width:67},{name:"進捗",width:36}],this.build(),this.handler()}async readTreeList(){try{this.treeList=[],this._idb||(this._idb=new jo),await this._idb.trees.each(t=>{this.setTreeOpen(t.id,t.open,this.tickets),this.treeList.push(t)})}catch(t){throw Error(`${t}`)}}setTreeOpen(t,n,s){for(const l of s){if(l.id===t)return l.open=n,!0;if(this.setTreeOpen(t,n,l.children))return!0}return!1}build(){const t=document.querySelector(`#${this.id}`);if(!t){console.error("Failed to get #ganttframe!");return}this.width=t.offsetWidth,this.height=t.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+Jt;const n=document.createDocumentFragment();this.columnBody.build(n),this.columnHeader.build(n),this.columnScroll.build(n),this.calendarBody.build(n),this.calendarHeader.build(n),this.calendarScroll.build(n);const s=this.calendarEnd.diff(this.calendarStart,"day");this.calendarTotalWidth=(s+1)*Xt,t.append(n)}handler(){this.columnBody.handler(),this.calendarScroll.handler(),this.sch.handler(),this.scv.handler(),this.ticketModal.handler()}resize(){const t=document.querySelector("#flexbox");if(!t){console.error("Failed to get #flexbox!");return}const n=document.querySelector("#ganttbase");if(!n){console.error("Failed to get #ganttbase!");return}n.style.width=`${t.offsetWidth-W}px`;const s=document.querySelector(`#${this.id}`);if(!s){console.error("Failed to get #ganttframe!");return}this.width=s.offsetWidth,this.height=s.offsetHeight,this.colW=this.columnWidth(),this.calendarLeft=this.colW+1,this.schThreshold=this.calendarLeft+Jt,this.sch.pos=0,this.calendarScroll.pos=0,this.calendarBody.resize(),this.calendarHeader.resize(),this.calendarScroll.resize(),this.scrollH(0)}draw(){this.columnBody.draw(),this.calendarHeader.draw(),this.calendarBody.draw(),this.calendarScroll.draw(),this.sch.draw(),this.scv.draw()}scrollH(t){this.posX=t*this.schThreshold/(this.width-W-W),this.columnBody.scrollH(this.posX),this.columnHeader.scrollH(this.posX),this.columnScroll.scrollH(this.posX),this.calendarHeader.scrollH(this.posX),this.calendarBody.scrollH(this.posX),this.calendarScroll.scrollH(this.posX)}scrollV(t){this.columnBody.scrollV(t),this.calendarBody.scrollV(t)}columnWidth(){let t=2;for(let n of this.cols)t+=n.width;return t}mouseDownCalScroll(t){this.calendarScroll.mouseDownCalScroll(t)}mouseMoveCalScroll(t){this.calendarScroll.mouseMoveCalScroll(t)}mouseUpCalScroll(){this.calendarScroll.mouseUpCalScroll()}mouseDownScrollH(t){this.sch.mouseDownScrollH(t)}mouseMoveScrollH(t){this.sch.mouseMoveScrollH(t)}mouseUpScrollH(){this.sch.mouseUpScrollH()}mouseDownScrollV(t){this.scv.mouseDownScrollV(t)}mouseMoveScrollV(t){this.scv.mouseMoveScrollV(t)}mouseUpScrollV(){this.scv.mouseUpScrollV()}async nodeOpenClose(t,n){var s;try{let l=new Ld(t,n,"");await((s=this._idb)==null?void 0:s.trees.put(l)),await this.readTreeList()}catch(l){throw Error(`${l}`)}}}const Fr=new Pd,Id=async()=>{await Fr.readTreeList(),Fr.draw()};Id().catch(o=>{console.error(o)});window.addEventListener("resize",function(){Fr.resize(),Fr.draw()});
